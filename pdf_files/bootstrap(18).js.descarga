/*! For license information please see bootstrap.js.LICENSE.txt */
(()=>{var e,t,o,r,n={"+v41":(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("klh1"));t.default=class CacheManager{constructor(e){this.dataType=e,this.map={}}createInstance(e){if("REVIEW"===this.dataType){if(this.isInstancePresent(e))return this.getInstance(e);{let t=new r.default(e);return this.addInstance(e,t),t}}}addInstance(e,t){this.map[e]=t}getInstance(e){if(this.isInstancePresent(e))return this.map[e]}removeInstance(e){delete this.map[e]}isInstancePresent(e){return void 0!==this.map[e]}isValidInstance(e){}};e.exports=t.default},"+vQz":(e,t,o)=>{"use strict";o.d(t,{RB:()=>hasReplyListChanged,YC:()=>hasEtagChanged,sy:()=>getCommentsDiff});const createCommentMap=e=>{const t={};if(void 0===e)return t;for(let o=0;o<e.length;o++)t[e[o].id]=e[o];return t},hasEtagChanged=(e,t)=>e.etag!==t.etag,hasReplyListChanged=(e,t)=>{if(void 0===e&&void 0===t)return!1;if(void 0===e||void 0===t)return!0;if(e.length!==t.length)return!0;for(let o=0;o<e.length;o++)if(e[o].etag!==t[o].etag)return!0;return!1},getCommentsDiff=(e,t)=>{const o=createCommentMap(e),r=createCommentMap(t),n={};return n.add=((e,t)=>{const o=[];return Object.keys(t).forEach(r=>{void 0===e[r]&&o.push({oldComment:void 0,newComment:t[r]})}),o})(r,o),n.edit=((e,t)=>{const o=[];return Object.keys(t).forEach(r=>{void 0!==e[r]&&void 0===e[r].replies&&(e[r].replies=[]),void 0!==t[r]&&void 0===t[r].replies&&(t[r].replies=[]),void 0!==e[r]&&(hasEtagChanged(e[r],t[r])||hasReplyListChanged(e[r].replies,t[r].replies))&&o.push({oldComment:e[r],newComment:t[r]})}),o})(r,o),n.delete=((e,t)=>{const o=[];return Object.keys(e).forEach(r=>{void 0===t[r]&&o.push({oldComment:e[r],newComment:t[r]})}),o})(r,o),n.unchanged=((e,t)=>{const o=[];return Object.keys(e).forEach(r=>{e[r].replies=e[r].replies||[],void 0!==t[r]&&(t[r].replies=t[r].replies||[]),void 0===t[r]||hasEtagChanged(e[r],t[r])||hasReplyListChanged(e[r].replies,t[r].replies)||o.push(e[r])}),o})(r,o),n}},"+x8F":(e,t,o)=>{var r=o("EI1Z"),n=Object.prototype.hasOwnProperty;e.exports=function equalObjects(e,t,o,s,a,l){var c=1&o,p=r(e),d=p.length;if(d!=r(t).length&&!c)return!1;for(var m=d;m--;){var u=p[m];if(!(c?u in t:n.call(t,u)))return!1}var h=l.get(e),g=l.get(t);if(h&&g)return h==t&&g==e;var y=!0;l.set(e,t),l.set(t,e);for(var C=c;++m<d;){var _=e[u=p[m]],b=t[u];if(s)var E=c?s(b,_,u,t,e,l):s(_,b,u,e,t,l);if(!(void 0===E?_===b||a(_,b,o,s,l):E)){y=!1;break}C||(C="constructor"==u)}if(y&&!C){var v=e.constructor,T=t.constructor;v==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof T&&T instanceof T||(y=!1)}return l.delete(e),l.delete(t),y}},"/Hez":(e,t,o)=>{"use strict";o.d(t,{A:()=>BboxUtil});class BboxUtil{static translateBbox(e){return{left:e[0],bottom:e[1],right:e[2],top:e[3]}}}},"/Oxh":(e,t,o)=>{"use strict";o.d(t,{Np:()=>getAnnotationProvider,eM:()=>getAssetProvider,SD:()=>getReviewProvider});var r=o("ljF6"),n=o("Hlvc"),s=o("G5bJ"),a=o("WJZ5"),l=o("qgO1"),c=o("QNhk");class PCAnnotation extends n.A{static updateCommentInUIAfterResponse(e){if(e&&"shape"===e.target.selector.subtype){const{inkList:t,boundingBox:o}=e.target.selector;return{inkList:t,boundingBox:o}}if("freetext"===e.target.selector.subtype){const{boundingBox:t}=e.target.selector;return{boundingBox:t}}return{}}updateCommentInServer(e){return c.A.getIntegrationProvider().then(async t=>{if(t&&!t.apis.comments.includePDFAnnotations()){if(a.A.isFreeText(e)){const t=await l.A.normalizeFreeTextAnnotation(e);e.target.selector.style=t.target.selector.style}return new Promise(t=>{const o=e;o.modified=Date(),o.response=PCAnnotation.updateCommentInUIAfterResponse(o),t(o)})}return super.updateCommentInServer(e)})}replyNote(e,t,o){return c.A.getIntegrationProvider().then(r=>{if(r&&!r.apis.comments.includePDFAnnotations()){const r=this.makeAnnotSchema(e,t,o);return r.id=o.id||s.A.getInstance().getGuid(),Promise.resolve(r)}return super.replyNote(e,t,o)})}delete(){return c.A.getIntegrationProvider().then(e=>e&&!e.apis.comments.includePDFAnnotations()?Promise.resolve({}):super.delete())}getCommentAppearance(){return c.A.getIntegrationProvider().then(async e=>{if(e&&!e.apis.comments.includePDFAnnotations()){if(a.A.isFreeText(this.annotationObject)){const e=await l.A.normalizeFreeTextAnnotation(this.annotationObject,!0);return Promise.resolve(e.target.selector.appearanceData)}return Promise.resolve({})}return super.getCommentAppearance()})}}const p=PCAnnotation;var d=o("62xF"),m=o("D/Yr"),u=o("hGRN"),h=o("kiUt");class RHAnnotation extends r.Annotation{updateCommentInServer(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(0,u.g_)()?s.A.getSharedAssetVersion().then(t=>{if(t)if(h.A.isEmojiReactionsEnabled()){const o={op:m.Ay.COMMENT_OP_REPLACE,path:m.Ay.COMMENT_PATH_ASSET_VERSION,value:t};e.push(o)}else e={...e,assetVersion:t};return super.updateCommentInServer(e)}):super.updateCommentInServer(e)}replyNote(e,t,o){return(0,u.g_)()?s.A.getSharedAssetVersion().then(o=>o?super.replyNote(e,t,o):super.replyNote(e,t)):super.replyNote(e,t)}}const g=RHAnnotation;var y=o("fdrD"),C=o("9YzA");let _={};_=o("plsW").providers;const getAnnotationProvider=(e,t,o)=>(0,u.eF)()?new p(e,t,o):new g(e,t,o),getAssetProvider=(e,t,o)=>(0,u.eF)()?new d.A(e,t,o):(0,u.g_)()?new y.A(e,o):new r.Asset(e,o),getReviewProvider=()=>!(0,u.eF)()&&_["review-handler"]?_["review-handler"]:C.e},"/y6s":(e,t,o)=>{"use strict";o.d(t,{KY:()=>n,Z9:()=>r,vM:()=>s});Object.freeze({CALENDAR:"calendar",RIGHT_CLICK:"rightClick",TEXT_SELECTION:"textSelection",COMMENT_SELECTED:"commentSelected",COLOR_PICKER:"colorPicker",SCALE_ANNOT:"scaleAnnot",HUD_OVERFLOW_BUTTON_CLICK:"hudOverflowButtonClick",EDIT_TEXT:"editTextClick",EDIT_IMAGE:"editImageClick",EDIT_EMPTY_SPACE:"editEmptySpaceClick",HYPERLINK_CLICK:"hyperlinkClick",IMAGE_CLICK:"imageClick",IMAGE_SELECTION:"imageSelection"}),Object.freeze({CANVAS_OP_NONE:0,CANVAS_OP_SELECTION:1,CANVAS_OP_FIND:2}),Object.freeze({WIDTH:32,HEIGHT:32,POSITION:100}),Object.freeze({NO_CLICK:0,SINGLE_CLICK:1,DOUBLE_CLICK:2,TRIPLE_CLICK:3});const r=Object.freeze({DEF_SEARCH_RESULT:0,CURR_SEARCH_RESULT:1,CARET_QUAD:2}),n=(Object.freeze({NONE:"none",PASSWORD_PROTECTED:"passwordProtected",READ_ONLY_DOCUMENT:"readOnlyDocument",PORT_FOLIO_FILE:"portFolioFile",ENCRYPTED_DOCUMENT:"encryptedDocument",DIGITALLY_SIGNED_DOCUMENT:"digitallySignedDocument",POLICY_PROTECTED_DOCUMENT:"policyProtectedDocument",SUPPRESSED_PASSWORD_DIALOG:"suppressedPasswordDialog",SCANNED_DOCUMENT:"scannedDocument",NO_PASSWORD_PROVIDED:"noPasswordProvided",GENERIC_ERROR:"genericError",PRINT_FAILED_FOR_PASSWORD_PROTECTED_DOCUMENT:"PrintFailedForPasswordProtectedDocument"}),Object.freeze({COMMENT_CREATED:"commentCreated",COMMENT_DELETED:"commentDeleted",COMMENT_EDITED:"commentEdited",ACROFORM_FIELD_EDITED:"acroFormFieldEdited",ACROFORM_FIELD_CREATED:"acroFormFieldCreated",ACROFORM_FIELD_DELETED:"acroFormFieldDeleted",ACROFORM_FIELDS_LOCKED:"acroFormFieldsLocked",SIGN_METADATA_EDITED:"signMetadataEdited",FAS_FIELD_CREATED:"fasFieldCreated",FAS_FIELD_DELETED:"fasFieldDeleted",FAS_FIELD_EDITED:"fasFieldEdited",FAS_FIELDS_FLATTENED:"fasFieldsFlattened",ORGANIZE_PAGE_ROTATED:"organizePageRotated",ORGANIZE_PAGE_DELETED:"organizePageDeleted",ORGANIZE_PAGE_INSERTED:"organizePageInserted",ORGANIZE_PAGE_REORDERED:"organizePageReordered",TEXT_EDITED:"textEdited",IMAGE_EDITED:"imageEdited",PDF_CLEANED:"pdfCleaned",DO_NOT_SAVE:"doNotSave",CROP_PAGES:"cropPages",NUMBER_PAGES:"numberPagesAdded",HYPERLINK_DELETED:"hyperlinkDeleted",HYPERLINK_CREATED:"hyperlinkCreated",HYPERLINK_EDITED:"hyperlinkEdited",PDF_MODIFIED:"pdfModified",NUMBER_PAGES_REMOVED:"numberPagesRemoved",PAGE_OCRED:"pageOCRed"}),Object.freeze({DEVICE_WIDTH:"DEVICE_WIDTH",FORCED_COLORS:"FORCED_COLORS"})),s=(Object.freeze({SELECTION:"selection",CARET:"caret"}),Object.freeze({RSPV2:"rsp-v2",RSPV3:"rsp-v3"}))},"0/0f":(e,t,o)=>{"use strict";o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__,P:()=>LogAPIPerformance});const r=o("plsW").logging;class LogAPIPerformance{constructor(){let{name:e="",context:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name=e,this.context=t}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();this.logStarted||(this.t0=e,this.logStarted=!0)}end(){this.logEnded||(this.t1=performance.now(),this.logEnded=!0)}log(){let{type:e="info",options:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("error"===e){if(this.end(),!this.logStarted||!this.logEnded)return;const n="comments",s=this.t1-this.t0,a={dropinId:n,requestName:this.name,context:this.context,responseTimeMS:s,"adb.event.context.AcrobatJS.apiPerformanceLog":!0,...t},l=r.getLogger(a);try{var o;null===(o=l[e])||void 0===o||o.call(l,this.name)}catch(e){l.error(this.name,JSON.stringify(e,Object.getOwnPropertyNames(e)))}}}error(e){this.log({type:"error",options:{error:JSON.stringify(e,Object.getOwnPropertyNames(e))}})}}const __WEBPACK_DEFAULT_EXPORT__=e=>{let{context:t="",dropinId:o="comments"}=e;const n={context:t,dropinId:o,"adb.event.context.AcrobatJS.isModernViewer":!0};return r.getLogger(n)}},"0Lu8":(e,t,o)=>{var r=o("1XbB")(Object,"create");e.exports=r},"0d5H":(e,t,o)=>{"use strict";o.d(t,{p:()=>getTotalPageCount});const getTotalPageCount=e=>e.AssetStore.totalPageCount},"0m+a":(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(o("Uhg2")),n=o("XF5l"),s=_interopRequireDefault(o("Fyfs")),a=function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var o=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?r:o){if(n.has(e))return n.get(e);n.set(e,a)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(a,t,s):a[t]=e[t]);return a}(e,t)}(o("4cbv"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}class Asset extends n.EventEmitter2{constructor(e,t){void 0===t&&(t=!1),super(),this.id=e,this.etag=null,this.updateTimeout=null,this.retryAfter=3e3,this.stopUpdates=!1,this.isNewAPI=t,this.onWindowFocus=this.onWindowFocus.bind(this),this.onWindowBlur=this.onWindowBlur.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),window.addEventListener("focus",this.onWindowFocus),window.addEventListener("blur",this.onWindowBlur),document.addEventListener("visibilitychange",this.onVisibilityChange)}get(e){return new Promise((t,o)=>{var findAndFlattenReplies=(e,t)=>{var o=[];e=e.sort(function(e,t){return Date.parse(e.created)-Date.parse(t.created)});for(var r=0;r<e.length;r++){var n=e[r],s=t.filter(function(e){return e.target.source===n.id});o.push(n),s.length&&(o=o.concat(findAndFlattenReplies(s,t)))}return o};(()=>{let n=r.default.instance.commentType,s={};e&&(s["If-None-Match"]=this.etag),this.isNewAPI&&(s.directive="commenting-2024"),r.default.instance.request(e?"asset.refresh":"asset.get","assets/"+this.id+"/annots/"+(n?"?status="+n:""),"GET",null,s).then(e=>{if(e){this.etag=e.etag?e.etag:null,this.retryAfter=1e3*e.retryAfter;let o=e.annotations.filter(e=>"replying"===e.motivation),r=e.annotations.filter(e=>"replying"!==e.motivation).map(e=>{let t=o.filter(t=>t.target.source===e.id);return t&&(t=findAndFlattenReplies(t,o),e.replies=t),e}),n=Object.assign({},e);n.annotations=r,this.etag&&this.setPollingTimeout(),this.etag||console.warn("No etag has been returned by the API. Update notifications have been disabled."),t(n)}else this.etag&&this.setPollingTimeout()}).catch(e=>{console.warn("Error occured while fetching annotations"),o(e),this.setPollingTimeout(!0)})})()})}getResolved(){return r.default.instance.request("asset.getResolved","assets/"+this.id+"/annots/?status=resolved","GET",null,this.isNewAPI?{directive:"commenting-2024"}:null)}getPermissions(){return r.default.instance.request("asset.getPermissions","assets/"+this.id+"/annots/acl","GET",null,this.isNewAPI?{directive:"commenting-2024"}:null)}getPageSize(){return r.default.instance.request("asset.getPageSize","assets/"+this.id+"/page_size","GET",null,this.isNewAPI?{directive:"commenting-2024"}:null)}comment(e,t,o,n,s,a,l){let c={"@context":["https://www.w3.org/ns/anno.jsonld","https://comments.acrobat.com/ns/anno.jsonld"],type:"Annotation",bodyValue:e,mentions:t,motivation:"commenting",target:{}};return l&&(c.assetVersion=l),o?c.target={selector:{type:"AdobeAnnoSelector",subtype:"node",node:{id:o}}}:s&&(c.target={selector:a}),n&&(c.target.selector.subtype="note",c.target.selector.noteX=n.noteX,c.target.selector.noteY=n.noteY),r.default.instance.request("asset.comment","assets/"+this.id+"/annots/","POST",c,this.isNewAPI?{directive:"commenting-2024"}:null)}checkForUpdates(){this.stopUpdates||this.get(!0).then(e=>{e&&this.emit("update",e)})}onWindowFocus(){this.etag&&!this.updateTimeout&&this.checkForUpdates()}onWindowBlur(){this.clearPollingTimeout()}onVisibilityChange(){"visible"===document.visibilityState?this.etag&&!this.updateTimeout&&this.checkForUpdates():this.clearPollingTimeout()}getMergeStatus(e,t,o){this.environment=o;new a.default.Confclass(this.environment);let r=a.default.Confclass.getURL()+"assets/"+t+"?operation=mergeannots",n=a.config.api.fetchMergeStatus.headers;return n.Authorization=e,n["x-api-key"]=a.default.Confclass.getRedhawkApiKey(),s.default.fetch(r,a.config.api.fetchMergeStatus.method,undefined,n)}fetchAPIBody(e){return{dc_commenting:{type:e}}}setUserEmailPrefs(e,t){let o=this.fetchAPIBody(t),r=a.default.Confclass.getCourierApiURL()+"prefs/email",n=a.config.api.setEmailPrefs.headers;return n.Authorization="Bearer "+e,s.default.fetch(r,a.config.api.setEmailPrefs.method,o,n)}getUserEmailPrefs(e){let t=a.default.Confclass.getCourierApiURL()+"prefs/email",o=a.config.api.getEmailPrefs.headers;return o.Authorization="Bearer "+e,s.default.fetch(t,a.config.api.getEmailPrefs.method,undefined,o)}stopCheckingForUpdates(){this.cleanup()}getCommentMetadata(){return new Promise((e,t)=>{r.default.instance.request("asset.getCommentMetadata","assets/"+this.id+"?operation=fetch_user_comment_metadata","GET",null,{Accept:a.config.api.getCommentMetadata.headers.Accept}).then(t=>{e(t)}).catch(t)})}setPollingTimeout(e){this.updateTimeout||this.stopUpdates||(this.updateTimeout=setTimeout(()=>{this.clearPollingTimeout(),this.checkForUpdates()},this.retryAfter),e&&(this.retryAfter=2*this.retryAfter))}clearPollingTimeout(){this.updateTimeout&&(clearTimeout(this.updateTimeout),this.updateTimeout=null)}cleanup(){window.removeEventListener("focus",this.onWindowFocus),window.removeEventListener("blur",this.onWindowBlur),document.removeEventListener("visibilitychange",this.onVisibilityChange),this.clearPollingTimeout(),this.stopUpdates=!0}}t.default=Asset;e.exports=t.default},"1XbB":(e,t,o)=>{var r=o("7bm6"),n=o("49QJ");e.exports=function getNative(e,t){var o=n(e,t);return r(o)?o:void 0}},"1u9O":(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("3DC5"));var n=function parse(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const o=new Uint8Array(16);return o[0]=(t=parseInt(e.slice(0,8),16))>>>24,o[1]=t>>>16&255,o[2]=t>>>8&255,o[3]=255&t,o[4]=(t=parseInt(e.slice(9,13),16))>>>8,o[5]=255&t,o[6]=(t=parseInt(e.slice(14,18),16))>>>8,o[7]=255&t,o[8]=(t=parseInt(e.slice(19,23),16))>>>8,o[9]=255&t,o[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,o[11]=t/4294967296&255,o[12]=t>>>24&255,o[13]=t>>>16&255,o[14]=t>>>8&255,o[15]=255&t,o};t.default=n},"1zOy":(e,t,o)=>{var r=o("2MKe")(Object.getPrototypeOf,Object);e.exports=r},"23pY":e=>{e.exports=function setCacheHas(e){return this.__data__.has(e)}},"2K/T":e=>{e.exports=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},"2KPK":(e,t,o)=>{"use strict";var r=function isOldIE(){var e;return function memorize(){return void 0===e&&(e=Boolean(window&&document&&document.all&&!window.atob)),e}}(),n=function getTarget(){var e={};return function memorize(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),s=[];function getIndexByIdentifier(e){for(var t=-1,o=0;o<s.length;o++)if(s[o].identifier===e){t=o;break}return t}function modulesToDom(e,t){for(var o={},r=[],n=0;n<e.length;n++){var a=e[n],l=t.base?a[0]+t.base:a[0],c=o[l]||0,p="".concat(l," ").concat(c);o[l]=c+1;var d=getIndexByIdentifier(p),m={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(s[d].references++,s[d].updater(m)):s.push({identifier:p,updater:addStyle(m,t),references:1}),r.push(p)}return r}function insertStyleElement(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var s=o.nc;s&&(r.nonce=s)}if(Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])}),"function"==typeof e.insert)e.insert(t);else{var a=n(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var a=function replaceText(){var e=[];return function replace(t,o){return e[t]=o,e.filter(Boolean).join("\n")}}();function applyToSingletonTag(e,t,o,r){var n=o?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=a(t,n);else{var s=document.createTextNode(n),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(s,l[t]):e.appendChild(s)}}function applyToTag(e,t,o){var r=o.css,n=o.media,s=o.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var l=null,c=0;function addStyle(e,t){var o,r,n;if(t.singleton){var s=c++;o=l||(l=insertStyleElement(t)),r=applyToSingletonTag.bind(null,o,s,!1),n=applyToSingletonTag.bind(null,o,s,!0)}else o=insertStyleElement(t),r=applyToTag.bind(null,o,t),n=function remove(){!function removeStyleElement(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return r(e),function updateStyle(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var o=modulesToDom(e=e||[],t);return function update(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<o.length;r++){var n=getIndexByIdentifier(o[r]);s[n].references--}for(var a=modulesToDom(e,t),l=0;l<o.length;l++){var c=getIndexByIdentifier(o[l]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}o=a}}}},"2MKe":e=>{e.exports=function overArg(e,t){return function(o){return e(t(o))}}},"2VCT":(e,t,o)=>{var r=o("8f/F"),n=o("nKU3"),s=o("LHoH"),a=r?r.toStringTag:void 0;e.exports=function baseGetTag(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?n(e):s(e)}},"2d48":(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var r=o("6AL6"),n=o("hGRN"),s=o("CoNQ"),a=o("D/Yr"),l=o("G5bJ");const c=class DeleteCommentCommand{constructor(e,t,o,r,n){this.comment=e,this.data=t,this.pageIndex=r,this.isComment=o,this.commentsStore=n}executeOnUiForReply(){this.comment.deleteReply(this.data)}executeOnServerForReply(){s.A.queueOperation(s.A.deleteReply(this.comment,this.data))}execute(){(0,n.eF)()&&(0,r.BI)("Commenting","CommentDeletion","CommentDeleted",{"adb.event.context.dc.parentAnnot":this.comment.target.selector.subtype,"adb.event.context.dc.pageNum":this.pageIndex}),this.isComment?(this.commentsStore.deleteCommentFromPageUIModel(this.comment.id,this.pageIndex),s.A.queueOperation(s.A.deleteComment(this.comment,this.pageIndex))):(this.executeOnUiForReply(),this.executeOnServerForReply())}undoOnUiForReply(){this.comment.resetUnsavedReplyBody(),this.comment.addReply(this.data)}undoOnServerForReply(){s.A.queueOperation(s.A.saveReply(this.comment,this.data)),this.data.resetSyncPending(),this.data.setSyncWithServer(!0)}undoOnUIForComment(){const e=this.commentsStore.addCommentToPageOnUndo(this.pageIndex,this.comment,{isUndo:!0});e.resetSyncPending(),e.setIsEditing(!1),e.setSyncWithServer(!0),this.comment=e}undoOnServerForComment(){s.A.queueOperation(s.A.saveComment(this.pageIndex,this.comment,!0),a.Ay.REDHAWK_UNDO),this.comment.replies.length>0&&this.comment.replies.forEach(e=>{s.A.queueOperation(s.A.saveReply(this.comment,e))})}undo(e){if(l.A.validateExistingDraftCommentReply())return;const t=this.commentsStore.getCommentByTid(this.comment.tid,this.pageIndex);t&&(this.comment=t);const{isRollback:o}=e||{};if(this.isComment)this.undoOnUIForComment(),o||this.undoOnServerForComment();else{const e=this.commentsStore.getCommentByTid(this.data.tid,this.pageIndex);e&&(this.data=e),this.undoOnUiForReply(),o||this.undoOnServerForReply()}}redoOnUiForReply(){this.comment.deleteReply(this.data)}redoOnServerForReply(){s.A.queueOperation(s.A.deleteReply(this.comment,this.data))}redo(e){if(l.A.validateExistingDraftCommentReply())return;const{isRollback:t}=e||{},o=this.commentsStore.getCommentByTid(this.comment.tid,this.pageIndex);if(o&&(this.comment=o),this.isComment)this.commentsStore.deleteCommentFromPageUIModel(this.comment.id,this.pageIndex),t||s.A.queueOperation(s.A.deleteComment(this.comment,this.pageIndex),a.Ay.REDHAWK_REDO);else{const e=this.commentsStore.getCommentByTid(this.data.tid,this.pageIndex);e&&(this.data=e),this.redoOnUiForReply(),t||this.redoOnServerForReply()}}}},"2fQ+":e=>{var t=Function.prototype.toString;e.exports=function toSource(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},"2m7z":e=>{e.exports=function baseTimes(e,t){for(var o=-1,r=Array(e);++o<e;)r[o]=t(o);return r}},"2pFd":e=>{"use strict";e.exports=window.adobe_dc_sdk["dc-core"]},"2q2Q":(e,t,o)=>{var r=o("nsdc").Uint8Array;e.exports=r},"3DC5":(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("3tkR"));var n=function validate(e){return"string"==typeof e&&r.default.test(e)};t.default=n},"3tkR":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},"3xqj":(e,t,o)=>{var r=o("YWiy");function SDCHighlight18N(e){return r.createElement("svg",e,r.createElement("g",null,[r.createElement("polygon",{points:"11 12.401 17.5 12.401 14 15.901 7.3 15.901 11 12.401",fill:"var(--iconFill, #464646)",opacity:"0.5",style:{isolation:"isolate"},key:0}),r.createElement("path",{d:"M2.3,12.20052l-1.5,2.3c-.5.7-.1,1.4.6,1.4H5.1a.87236.87236,0,0,0,.7-1.4l-2.2-2.3a.85266.85266,0,0,0-1.3,0Z",fill:"var(--iconFill, #464646)",key:1}),r.createElement("path",{d:"M7.36328,13.79016a1.28834,1.28834,0,0,1-.89453-.46L4.37012,11.23059a1.30271,1.30271,0,0,1-.42969-.90137A1.05553,1.05553,0,0,1,4.27051,9.57L13.46973.37024a1.23182,1.23182,0,0,1,1.74194-.0188l.0188.0188,2.09961,2.1001a1.231,1.231,0,0,1,.019,1.74072l-.02.02-9.1992,9.19971A1.08049,1.08049,0,0,1,7.36328,13.79016Zm-1.751-3.44189L7.34961,12.089l8.73926-8.73877L14.34961,1.611Z",fill:"var(--iconFill, #464646)",key:2})]))}SDCHighlight18N.defaultProps={width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=SDCHighlight18N,SDCHighlight18N.default=SDCHighlight18N},"49QJ":e=>{e.exports=function getValue(e,t){return null==e?void 0:e[t]}},"4cbv":(e,t,o)=>{"use strict";var r=o("XF5l");const n="https://ccx-courier-stage.adobe.io/",s="https://files.dev.dexilab.acrobat.com/",a="https://cc-api-behance-stage.adobe.io/",l="dc-stage-virgoweb",c="dc-stage-virgoweb";class Confclass extends r.EventEmitter2{constructor(e){super();let t=["dev","development","stage","prod","production","local","localdev"],o="";if(t.forEach((e,r)=>{let n=r+1===t.length?"":", ";o+=e+n}),-1===t.indexOf(e))throw new Error("Setting the environment to "+e+" is not accepted. Acceptable values are "+o);"stage"===e?(Confclass.courierApiUrl=n,Confclass.filesApiUrl="https://files.stage.acrobat.com/",Confclass.behanceApiUrl="https://cc-api-behance-stage.adobe.io/",Confclass.redhawkApiKey=l,Confclass.reviewApiKey=c):"prod"===e||"production"===e?(Confclass.courierApiUrl="https://ccx-courier.adobe.io/",Confclass.filesApiUrl="https://files.acrobat.com/",Confclass.behanceApiUrl="https://cc-api-behance.adobe.io/",Confclass.redhawkApiKey="dc-prod-virgoweb",Confclass.reviewApiKey="dc-prod-virgoweb"):(Confclass.courierApiUrl=n,Confclass.filesApiUrl=s,Confclass.behanceApiUrl=a,Confclass.redhawkApiKey=l,Confclass.reviewApiKey=c)}static getURL(){return Confclass.commentsApiUrl}static getCourierApiURL(){return Confclass.courierApiUrl}static getFilesApiURL(){return Confclass.filesApiUrl}static getBehanceApiURL(){return Confclass.behanceApiUrl}static getRedhawkApiKey(){return Confclass.redhawkApiKey}static getReviewApiKey(){return Confclass.reviewApiKey}static getSendAndTrackBaseURL(){return Confclass.sendAndTrackBaseURL}static setBaseURLs(e){Confclass.sendAndTrackBaseURL=e.sendApi,Confclass.commentsApiUrl=e.commentingUri}static setSendAndTrackBaseURL(e){Confclass.sendAndTrackBaseURL=e}static setCommentsApiUrl(e){Confclass.commentsApiUrl=e}}e.exports={config:{api:{createAnonymousSession:{headers:{Accept:'application/vnd.adobe.dc+json; profile="https://comments.acrobat.com/schemas/anon_session_res_v1.json"',"Content-Type":'application/vnd.adobe.dc+json; profile="https://comments.acrobat.com/schemas/anon_session_req_v1.json"',"x-api-app-info":"DC-WEB"},method:"POST"},fetchReviewData:{headers:{Accept:'application/json; profile="https://reviews.acrobat.com/ns/create_review_v1.json"'},method:"GET"},fetchMergeStatus:{headers:{Accept:"application/vnd.adobe.dc+json;version=1","Content-Type":"application/vnd.adobe.dc+json;version=1","x-api-client-id":"api_browser","x-api-app-info":"DC-WEB"},method:"POST"},setEmailPrefs:{headers:{"X-Api-Key":"redhawkadmin2","Content-Type":"application/json",Accept:"application/json"},method:"POST"},getEmailPrefs:{headers:{"X-Api-Key":"redhawkadmin2","Content-Type":"application/json",Accept:"application/json"},method:"GET"},fetchReviewResource:{headers:{},method:"GET"},fetchFileDownloadLink:{headers:{Accept:"application/vnd.adobe.skybox+json;version=1","x-api-client-id":"api_browser"},method:"GET"},finishAReview:{headers:{"Content-Type":"application/json;"},method:"PUT"},getDownloadTicket:{headers:{Accept:"application/vnd.adobe.skybox+json;version=1"},method:"GET"},getFileDownloadUrl:{headers:{Accept:"application/vnd.adobe.skybox+json;version=1","Content-Type":"application/x-www-form-urlencoded","x-api-client-id":"api_browser"},method:"POST"},unshareReview:{headers:{Accept:"text/plain","Content-Type":"application/json;","x-api-client-id":"api_browser"},method:"PUT"},deleteReview:{headers:{Accept:"application/vnd.adobe.skybox+json;version=1","Content-Type":"application/json;","x-api-client-id":"api_browser"},method:"DELETE"},addReviewer:{headers:{Accept:"text/plain","Content-Type":"application/json;","x-api-client-id":"api_browser"},method:"POST"},removeReviewer:{headers:{Accept:"text/plain","Content-Type":"application/json;","x-api-client-id":"api_browser"},method:"DELETE"},addReviewParticipant:{headers:{"Content-Type":"application/json;"},method:"POST"},updateReviewInfo:{headers:{"Content-Type":"application/json;"},method:"PUT"},fetchSendBootstrapData:{headers:{"x-api-client-id":"api_browser"},method:"GET"},reportAbuse:{headers:{Accept:"application/vnd.adobe.skybox+json;version=1;charset=utf-8"},method:"POST"},fetchRecipientsData:{headers:{"x-api-client-id":"api_browser"},method:"GET"},getCommentMetadata:{headers:{Accept:'application/vnd.adobe.dc+json; profile="https://comments.adobe.io/schemas/user_comment_metadata_result_v1.json"'},method:"GET"},fetchReviewConsent:{headers:{"x-api-client-id":"api_browser"},method:"GET"},postReviewConsent:{headers:{"x-api-client-id":"api_browser"},method:"POST"},deletReviewConsent:{headers:{"x-api-client-id":"api_browser"},method:"DELETE"},fetchCollaborators:{headers:{"x-api-client-id":"api_browser"},method:"GET"},setUserReviewStatus:{headers:{"x-api-client-id":"api_browser","Content-Type":"application/json;"},method:"PUT"},getUserReviewStatus:{headers:{"x-api-client-id":"api_browser","Content-Type":"application/json;"},method:"GET"},getPendingAccessRequests:{headers:{"Content-Type":"application/json"},method:"GET"},handleAccessRequest:{headers:{"Content-Type":"application/json"},method:"POST"}},featureFlipper:{isLocalStorageEnabled:!1,captchaSiteKey:"4d04d87e-06ec-4e3a-91c6-c5bbaae60851",imsClientId:"redhawkadmin2"}},Confclass}},"4eby":(e,t,o)=>{"use strict";o.d(t,{A:()=>l});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let n;const s=new Uint8Array(16);const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function unsafeStringify(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}const l=function v4(e,t,o){var a,l,c,p;if(r.randomUUID&&!t&&!e)return r.randomUUID();const d=null!==(a=null!==(l=(e=e||{}).random)&&void 0!==l?l:null===(c=(p=e).rng)||void 0===c?void 0:c.call(p))&&void 0!==a?a:function rng(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(s)}();if(d.length<16)throw new Error("Random bytes length must be >= 16");if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,t){if((o=o||0)<0||o+16>t.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[o+e]=d[e];return t}return unsafeStringify(d)}},"4h5g":(e,t,o)=>{"use strict";o.r(t),o.d(t,{FiltersStore:()=>O,default:()=>D,exportedForTesting:()=>P});var r,n,s,a,l,c,p,d,m,u,h,g,y=o("abd3"),C=o("iaHC"),_=o("G5bJ"),b=o("D/Yr"),E=o("mOsn"),v=o("nf4q"),T=o("kPFd"),A=o("0/0f");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}function updateTimeSeriesCount(e,t){const o=[...t],r=(new Date).setHours(0,0,0,0),n=864e5,s=r-n,a=r-1728e5,l=r-6048e5,c=new Date(e.modified).valueOf();if(c>=r?o[0].count+=1:c>=s?o[1].count+=1:c>=a&&(o[2].count+=1),c>=l&&(o[3].count+=1),c>Date.now()+72e5){(0,A.A)({context:"FilterStore.updateTimeSeriesCount"}).emit("FilterStore.updateTimeSeriesCount: comment.modified in future",{level:"warn",commentId:e.id,commentModified:c,daysInFuture:Math.round((c-Date.now())/n)})}return o}function updateCommentTypesCount(e,t){var o,r,n,s;let a=[...t],l=null===(o=e.target)||void 0===o||null===(r=o.selector)||void 0===r?void 0:r.subtype;const c=null===(n=e.target)||void 0===n||null===(s=n.selector)||void 0===s?void 0:s.intent;return _.A.isFreeHighlight(l,c)&&(l=b.Ay.REDHAWK_COMMENT_HIGHLIGHT),a=a.map(e=>(e.type===l&&(e.count=e.count+1),e)),a}function getCommentInTimePeriod(e,t){const o=[{count:0},{count:0},{count:0},{count:0}];return updateTimeSeriesCount(t,o),t.replies&&t.replies.forEach(e=>{updateTimeSeriesCount(e,o)}),Boolean(o[0].count&&e.includes("day")||o[1].count&&e.includes("yesterday")||o[2].count&&e.includes("day_before_yesterday")||o[3].count&&e.includes("lastweek"))}let O=(n=_applyDecoratedDescriptor((r=class FiltersStore{constructor(){this.lastFilterChangeTime=void 0,this.filteredComments=void 0,this.noOfFilteredComments=void 0,this.noOfFilteredCommentsMap=void 0,_initializerDefineProperty(this,"selectedMentionsList",n,this),_initializerDefineProperty(this,"selectedCommentByList",s,this),_initializerDefineProperty(this,"applyFilters",a,this),_initializerDefineProperty(this,"isResolveFilterSelected",l,this),_initializerDefineProperty(this,"showCommentsOnDocument",c,this),_initializerDefineProperty(this,"showCommentsByPage",p,this),_initializerDefineProperty(this,"commentStatusCheckboxGroup",d,this),_initializerDefineProperty(this,"commentTypesCheckboxGroup",m,this),_initializerDefineProperty(this,"mentionsCheckboxGroup",u,this),_initializerDefineProperty(this,"commentReviewersCheckboxGroup",h,this),_initializerDefineProperty(this,"timeSeriesCheckboxGroup",g,this),this.commentStatusCheckboxGroup=[],this.commentTypesCheckboxGroup=[],this.mentionsCheckboxGroup=[],this.commentReviewersCheckboxGroup=[],this.timeSeriesCheckboxGroup=[],this.filteredComments=[],this.lastFilterChangeTime="",this.applyFilters=0,this.noOfFilteredComments=0,this.noOfFilteredCommentsMap=new Map,this.isResolveFilterSelected=!1,this.showCommentsOnDocument=!0,this.showCommentsByPage=!1}get appliedFilterCount(){return(this.isResolveFilterSelected?1:0)+[...this.commentStatusCheckboxGroup,...this.commentTypesCheckboxGroup,...this.timeSeriesCheckboxGroup,...this.mentionsCheckboxGroup,...this.commentReviewersCheckboxGroup].length}showCommentsOnDocumentOff(){this.showCommentsOnDocument=!1}showCommentsOnDocumentOn(){this.showCommentsOnDocument=!0}showCommentsByPageOn(){this.showCommentsByPage=!0}showCommentsByPageOff(){this.showCommentsByPage=!1}setIsResolveFilterSelected(){this.isResolveFilterSelected=!0}resetIsResolveFilterSelected(){this.isResolveFilterSelected=!1}updateLastFilterChangeTime(e){this.lastFilterChangeTime=e}setCommentStatusCheckboxGroup(e){this.commentStatusCheckboxGroup=[...e]}setCommentTypesCheckboxGroup(e){this.commentTypesCheckboxGroup=[...e]}setMentionsCheckboxGroup(e){this.mentionsCheckboxGroup=[...e]}setCommentReviewersCheckboxGroup(e){this.commentReviewersCheckboxGroup=[...e]}setTimeSeriesCheckboxGroup(e){this.timeSeriesCheckboxGroup=[...e]}setApplyFilters(){this.noOfFilteredComments=0,this.recalculateAppliedFilterComments(),(0,T.sq)()&&(0,v.updateFilterState)()}recalculateAppliedFilterComments(){this.applyFilters+=1}isCommentUnresolved(e){return e.status===b.Ay.STATUS_OPEN}isReplyInFilter(e,t){let o=!1;return e.replies.forEach(e=>{t.findIndex(t=>{const o=JSON.parse(t);return o.id===e.creator.id&&o.name===e.creator.name})>-1&&(o=!0)}),o}filterCommentsByStatus(e,t){if(t.length>0){let o=[],r=[],n=[],s=[];t.includes("unread")&&(o=e.filter(e=>this.isCreatedAfterFilterIsApplied(e)||!E.A.isCommentThreadRead(e))),t.includes("read")&&(r=e.filter(e=>this.isCreatedAfterFilterIsApplied(e)||E.A.isCommentThreadRead(e))),(0,T.sq)()&&t.includes("resolved")&&(n=e.filter(e=>this.isCreatedAfterFilterIsApplied(e)||e.status===b.Ay.STATUS_RESOLVED)),(0,T.sq)()&&t.includes("unresolved")&&(s=e.filter(e=>this.isCreatedAfterFilterIsApplied(e)||this.isCommentUnresolved(e)));const a=[...o,...r,...n,...s];return(0,T.sq)()&&(t.includes("resolved")||t.includes("unresolved"))?[...new Set(a)]:a}return e}filterCommentsByType(e,t){return t.length>0&&(e=e.filter(e=>this.isCreatedAfterFilterIsApplied(e)||t.findIndex(t=>{var o,r,n,s;let a=null===(o=e.target)||void 0===o||null===(r=o.selector)||void 0===r?void 0:r.subtype;const l=null===(n=e.target)||void 0===n||null===(s=n.selector)||void 0===s?void 0:s.intent;return _.A.isFreeHighlight(a,l)&&(a=b.Ay.REDHAWK_COMMENT_HIGHLIGHT),t===a})>-1)),e}filterCommentsByTimeSeries(e,t){if(t.length>0){const o=[...t];e=e.filter(e=>this.isCreatedAfterFilterIsApplied(e)||getCommentInTimePeriod(o,e))}return e}filterCommentsByMentions(e,t){return t.length>0&&(e=e.filter(e=>this.isCreatedAfterFilterIsApplied(e)||this.getCommentWithFilteredMentions(e,t))),e}filterCommentsByReviewers(e,t){return t.length>0&&(e=e.filter(e=>this.isCreatedAfterFilterIsApplied(e)||this.isReplyInFilter(e,t)||t.findIndex(t=>{const o=JSON.parse(t);return o.id===e.creator.id&&o.name===e.creator.name})>-1)),e}filterCommentsByDraftCommentReply(e,t,o){var r;if("defaultTextBox"===(null===(r=C.A.draftCommentReplyTransientObject)||void 0===r?void 0:r.commentId))return e;if(_.A.hasDraftCommentReplyInStore()){const r=t.filter(e=>_.A.isCurrentTextBoxDraftCommentReply(e.sid));if((null==r?void 0:r.length)>0&&void 0===e.find(e=>_.A.hasDraftCommentReplyInStore()&&_.A.isCurrentTextBoxDraftCommentReply(e.sid)))e=[...r,...e];else{var n;const t=C.A.getUICommentFromId(null===(n=C.A.draftCommentReplyTransientObject)||void 0===n?void 0:n.commentId);if(!t)return e;const r=C.A.commentUIModels.get(t.target.selector.node.index);t&&o===t.target.selector.node.index&&(null==r?void 0:r.length)>0&&void 0===e.find(e=>e.cid===t.cid)&&(null==r?void 0:r.find(e=>e.cid===t.cid))&&(e=[t,...e])}}else{var s;if(!C.A.unsavedAnnotList||0===C.A.unsavedAnnotList.length)return e;const t=null===(s=C.A.unsavedAnnotList.get(0))||void 0===s?void 0:s.id;if(!t)return e;const r=this.filterMapOfArray(C.A.commentUIModels,t);if(!r)return e;t&&r&&o===r.target.selector.node.index&&(null==r?void 0:r.cid)===t&&void 0===e.find(e=>e.cid===(null==r?void 0:r.cid))&&(e=[r,...e])}return e}filterMapOfArray(e,t){let o=null;return e.forEach((e,r)=>{if(e.length>0){const r=e.find(e=>e.cid===t);if(r)return o=r,o}}),o}getUpdateFilteredComments(e,t){let o=e;return o=this.filterCommentsByStatus(o,this.commentStatusCheckboxGroup),o=this.filterCommentsByType(o,this.commentTypesCheckboxGroup),o=this.filterCommentsByTimeSeries(o,this.timeSeriesCheckboxGroup),o=this.filterCommentsByMentions(o,this.mentionsCheckboxGroup),o=this.filterCommentsByReviewers(o,this.commentReviewersCheckboxGroup),o=this.filterCommentsByDraftCommentReply(o,e,t),this.isResolveFilterSelected&&(o=o.filter(e=>this.isCommentUnresolved(e))),this.appliedFilterCount?this.noOfFilteredCommentsMap.set(t,o.length):this.noOfFilteredCommentsMap.set(t,0),o}get noOfFilteredCommentComputed(){this.noOfFilteredComments=0;for(const e of this.noOfFilteredCommentsMap.values())this.noOfFilteredComments+=e;return this.applyFilters?this.noOfFilteredComments:0}isCreatedAfterFilterIsApplied(e){return!!(this.lastFilterChangeTime&&new Date(e.created).getTime()>this.lastFilterChangeTime)}getCommentWithFilteredMentions(e,t){let o=!1,r=-1;return e.mentions&&e.mentions.forEach(e=>{r=t.findIndex(t=>{const o=JSON.parse(t);return o.email?o.email===e.email:o.name===e.name}),r>-1&&(o=!0)}),e.replies&&e.replies.forEach(e=>{e.mentions&&e.mentions.forEach(e=>{t.findIndex(t=>{const o=JSON.parse(t);return o.email?o.email===e.email:o.name===e.name})>-1&&(o=!0)})}),o}isUserMentionedAtLeastOnce(e){let t=null;return{filteredComments:C.A.comments.some(o=>{let r=!1;return o.mentions&&o.mentions.forEach(o=>{this.matchMentionedUserInComment(e,o)&&(r=!0,t=o)}),!r&&o.replies&&o.replies.forEach(o=>{o.mentions&&o.mentions.forEach(o=>{this.matchMentionedUserInComment(e,o)&&(r=!0,t=o)})}),r}),retMentionElement:t}}matchMentionedUserInComment(e,t){return e.email?e.email.toLowerCase()===t.email.toLowerCase():e.name.toLowerCase()===t.name.toLowerCase()}getCommentsToExtractButtons(){return[...C.A.getUnresolvedComments(),...C.A.getResolvedComments()]}get visibleCommentsByList(){let e=[];return this.getCommentsToExtractButtons().forEach(t=>{t.creator&&(e=_.A.getFiltersList(t,e)),t.replies&&t.replies.forEach(t=>{e=_.A.getFiltersList(t,e)})}),e.sort((e,t)=>t.count-e.count),e}getTotalCommentsCount(){return this.getUnresolvedCommentsCount()+this.getResolvedCommentsCount()}get commentStatusList(){return[{name:"filter.unread",type:b.Ay.STATUS_UNREAD}]}getUpdatedTimeSeriesCount(e,t){return updateTimeSeriesCount(e,t)}get commentTypesList(){let e=[{count:0,name:"filter.insert",type:b.Ay.REDHAWK_COMMENT_INSERT},{count:0,name:"filter.replace",type:b.Ay.REDHAWK_COMMENT_REPLACE},{count:0,name:"filter.highlight",type:b.Ay.REDHAWK_COMMENT_HIGHLIGHT},{count:0,name:"filter.strikeThrough",type:b.Ay.REDHAWK_COMMENT_STRIKEOUT},{count:0,name:"filter.underline",type:b.Ay.REDHAWK_COMMENT_UNDERLINE},{count:0,name:"filter.shapes",type:b.Ay.REDHAWK_COMMENT_SHAPE}];return this.getCommentsToExtractButtons().forEach(t=>e=updateCommentTypesCount(t,e)),e}getUpdatedCommentTypesCount(e,t){return updateCommentTypesCount(e,t)}get visibleMentionsList(){let e=[];return this.getCommentsToExtractButtons().forEach(t=>{t.mentions&&(e=_.A.getFiltersMentionsList(t,e)),t.replies&&t.replies.forEach(t=>{t.mentions&&(e=_.A.getFiltersMentionsList(t,e))})}),e}get visibleUnreadCommentsCount(){let e,t=0;for(const o of C.A.commentUIModels.keys())e=C.A.commentUIModels.get(o),e.forEach(e=>{e.isCommentThreadRead(e)||(t+=1)});return t}get mentionsList(){return C.A.mentionsList}get commentsByList(){return C.A.commentsByList}get readList(){return C.A.readCommentsList}getResolvedCommentsCount(){return C.A.resolvedCommentsCount}get getUnReadCommentsCount(){return C.A.modernUnreadCommentsCount}getUnresolvedCommentsCount(){return C.A.unresolvedComments.length}resetFilterCache(){this.resetFilteredComments(),this.resetLastFilterChangeTime(),this.resetIsResolveFilterSelected(),this.resetFilterButtons(),this.showCommentsOnDocumentOn(),this.showCommentsByPageOff()}resetFilteredComments(){this.filteredComments=[]}resetLastFilterChangeTime(){this.lastFilterChangeTime=""}resetFilterButtons(){this.commentStatusCheckboxGroup=[],this.mentionsCheckboxGroup=[],this.timeSeriesCheckboxGroup=[],this.commentTypesCheckboxGroup=[],this.commentReviewersCheckboxGroup=[],this.isResolveFilterSelected=!1,(0,T.sq)()&&(0,v.updateFilterState)()}}).prototype,"selectedMentionsList",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=_applyDecoratedDescriptor(r.prototype,"selectedCommentByList",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=_applyDecoratedDescriptor(r.prototype,"applyFilters",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=_applyDecoratedDescriptor(r.prototype,"isResolveFilterSelected",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=_applyDecoratedDescriptor(r.prototype,"showCommentsOnDocument",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=_applyDecoratedDescriptor(r.prototype,"showCommentsByPage",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=_applyDecoratedDescriptor(r.prototype,"commentStatusCheckboxGroup",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_applyDecoratedDescriptor(r.prototype,"commentTypesCheckboxGroup",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=_applyDecoratedDescriptor(r.prototype,"mentionsCheckboxGroup",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=_applyDecoratedDescriptor(r.prototype,"commentReviewersCheckboxGroup",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=_applyDecoratedDescriptor(r.prototype,"timeSeriesCheckboxGroup",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(r.prototype,"appliedFilterCount",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"appliedFilterCount"),r.prototype),_applyDecoratedDescriptor(r.prototype,"showCommentsOnDocumentOff",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"showCommentsOnDocumentOff"),r.prototype),_applyDecoratedDescriptor(r.prototype,"showCommentsOnDocumentOn",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"showCommentsOnDocumentOn"),r.prototype),_applyDecoratedDescriptor(r.prototype,"showCommentsByPageOn",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"showCommentsByPageOn"),r.prototype),_applyDecoratedDescriptor(r.prototype,"showCommentsByPageOff",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"showCommentsByPageOff"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setIsResolveFilterSelected",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsResolveFilterSelected"),r.prototype),_applyDecoratedDescriptor(r.prototype,"resetIsResolveFilterSelected",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"resetIsResolveFilterSelected"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateLastFilterChangeTime",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"updateLastFilterChangeTime"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCommentStatusCheckboxGroup",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"setCommentStatusCheckboxGroup"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCommentTypesCheckboxGroup",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"setCommentTypesCheckboxGroup"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setMentionsCheckboxGroup",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"setMentionsCheckboxGroup"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCommentReviewersCheckboxGroup",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"setCommentReviewersCheckboxGroup"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setTimeSeriesCheckboxGroup",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"setTimeSeriesCheckboxGroup"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setApplyFilters",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"setApplyFilters"),r.prototype),_applyDecoratedDescriptor(r.prototype,"recalculateAppliedFilterComments",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"recalculateAppliedFilterComments"),r.prototype),_applyDecoratedDescriptor(r.prototype,"noOfFilteredCommentComputed",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"noOfFilteredCommentComputed"),r.prototype),_applyDecoratedDescriptor(r.prototype,"visibleCommentsByList",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"visibleCommentsByList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"commentStatusList",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"commentStatusList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"getUpdatedTimeSeriesCount",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"getUpdatedTimeSeriesCount"),r.prototype),_applyDecoratedDescriptor(r.prototype,"commentTypesList",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"commentTypesList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"getUpdatedCommentTypesCount",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"getUpdatedCommentTypesCount"),r.prototype),_applyDecoratedDescriptor(r.prototype,"visibleMentionsList",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"visibleMentionsList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"visibleUnreadCommentsCount",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"visibleUnreadCommentsCount"),r.prototype),_applyDecoratedDescriptor(r.prototype,"mentionsList",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"mentionsList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"commentsByList",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"commentsByList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"readList",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"readList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"getUnReadCommentsCount",[y.computed],Object.getOwnPropertyDescriptor(r.prototype,"getUnReadCommentsCount"),r.prototype),_applyDecoratedDescriptor(r.prototype,"resetFilterButtons",[y.action],Object.getOwnPropertyDescriptor(r.prototype,"resetFilterButtons"),r.prototype),r);const D=new O,P={updateTimeSeriesCount,getCommentInTimePeriod}},"5/P2":(e,t,o)=>{var r=o("QZQi"),n=o("2K/T"),s=o("zV0m"),a=o("FWUW"),l=o("xEGs");function Hash(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}Hash.prototype.clear=r,Hash.prototype.delete=n,Hash.prototype.get=s,Hash.prototype.has=a,Hash.prototype.set=l,e.exports=Hash},"5tnP":(e,t,o)=>{"use strict";o.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__,C:()=>getFormattedMessage});var r=o("YWiy"),n=o("Zm2D");let s,a={},l={};a=o("plsW").locale2,l=o("plsW").discovery;const loadTranslations=e=>(o.p=l.dropins.comments.public_path,o("pHDy")(`./${e}.json`).then(e=>e.default).catch(()=>({}))),getFormattedMessage=e=>{if(!s)return e;const t=(0,n.createIntlCache)();return(0,n.createIntl)({locale:a.getLocale(),message:e},t).formatMessage(e)},wrapOriginalApp=e=>{const t=(0,n.injectIntl)(e);class Wrapped extends r.Component{constructor(){super(),this.setIntlProvider=this.setIntlProvider.bind(this)}setIntlProvider(e){e&&(s=e)}render(){const{locale:e,messages:o,...s}=this.props,a=(0,n.createIntlCache)(),l=(0,n.createIntl)({locale:e,messages:o},a);return r.createElement(n.RawIntlProvider,{value:l,ref:this.setIntlProvider},r.createElement(t,s))}}return Wrapped},__WEBPACK_DEFAULT_EXPORT__=e=>a.withTranslations(wrapOriginalApp(e),loadTranslations)},"62xF":(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var r=o("QNhk"),n=o("IBYW"),s=o("G5bJ"),a=o("WJZ5"),l=o("qgO1");class PCAsset extends n.A{get(){return r.A.getIntegrationProvider().then(e=>e&&!e.apis.comments.includePDFAnnotations()?Promise.resolve(this.makeCollectionSchema(0,[])):super.get().then(e=>{let t=e.annotations;return t=t.map(e=>{if("unsupported"!==e.target.selector.subtype)return e;const t=e.replies.map(e=>({...e,isReadOnly:!0}));return{...e,isReadOnly:!0,replies:t}}),{...e,annotations:t}}))}comment(e,t,o,n,c,p){return r.A.getIntegrationProvider().then(async r=>{if(r&&!r.apis.comments.includePDFAnnotations()){if(a.A.isFreeText(o)){const e=await l.A.normalizeFreeTextAnnotation(o);p.style=e.target.selector.style}const r=this.transformToAnnotSchema(e,t,o,n,c,p);return r.id=o.id||s.A.getInstance().getGuid(),Promise.resolve(r)}return super.comment(e,t,o,n,c,p)})}}const c=PCAsset},"6AL6":(e,t,o)=>{"use strict";o.d(t,{BI:()=>sendEvent,EB:()=>u,Hr:()=>sendEventForCommentingTool,Kr:()=>setWorkflowPrefix});var r=o("9+t3"),n=o("kiUt"),s=o("EazC"),a=o("Wvr3"),l=o("llUt"),c=o("D/Yr"),p=o("kPFd");let d={getEventSender:()=>()=>{}};const m=s.A.getInstance();d=o("plsW").analytics;const u={previewCommenting:"Eureka",projectPDFCommenting:"knowledgeworkspaceEureka:PDF",projectNoteCommenting:"knowledgeworkspaceEureka:Note"};let h=u.previewCommenting;function setWorkflowPrefix(e){h=e}const g=d.getEventsConfigPath("comments"),y=d.getEventSender("comments",g),sendEvent=function(e,t,o){var s;let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const d=`${h}:${e}`,u={...arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}},g={...arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}};u["adb.event.context.dc.ParcelID"]=n.A.parcelId,u["adb.event.context.dc.ReviewID"]=n.A.reviewId;const C={workflow:d,subcategory:t,type:o};c&&(C.value=c);let _="";const b=r.default.getInstance().previewApis,E=b&&b.documentState&&b.documentState.getDocumentId();u["adb.event.context.dcweb.clickcontext"]||(u["adb.event.context.dcweb.clickcontext"]="Viewer"),g.source=m.getFileType(),l.PreviewStore.instance.knowledgeWorkspaceType&&(g.type=l.PreviewStore.instance.knowledgeWorkspaceType),u["adb.event.context.dcweb.userStorage"]=m.getUserType(),u["adb.event.context.sharing.type"]=m.getShareType(),u["adb.event.context.dcweb.ownerType"]=m.getSharePrivileges(),a.A.activeTargetCohorts&&(u["adb.event.context.dc.commenting.view.type"]=a.A.activeTargetCohorts),u["adb.event.context.pdfviewer.browser"]=(0,p.X5)(),u["adb.event.context.pdfviewer.os"]=null===(s=(0,p.R0)())||void 0===s?void 0:s.name,u["adb.event.context.pdfviewer.device"]=(0,p.NW)(),l.PreviewStore.instance.knowledgeWorkspaceId&&(u["adb.event.context.containerId"]=l.PreviewStore.instance.knowledgeWorkspaceId),E&&E.then(e=>{_=e}).catch(()=>{_=""}).then(()=>{_&&(u["adb.event.context.pdfviewer.documentId"]=_),function(e,t){y({event:e,custom:t,content:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}},!1)}(C,u,g)})},sendEventForCommentingTool=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const{subcategory:r,clickContext:n}=(e=>{let t="",o="";switch(e){case c.Ay.MODERN_VIEWER_QUICKTOOLS:t="CommentToolBar",o="MV_QuickTools";break;case c.Ay.MODERN_VIEWER_CONTEXT_MENU:t="ContextualMenu",o="MV_ContextMenu";break;case c.Ay.COMMENTS_TOOLBAR:t="CommentToolBar",o="Preview";break;case c.Ay.CONTEXT_MENU:t="ContextualMenu",o="Preview"}return{subcategory:t,clickContext:o}})(t),s={...o};s["adb.event.context.dc.ButtonState"]="Enable",s["adb.event.context.dcweb.clickcontext"]=n,sendEvent("Commenting",r,e,s)}},"6SBV":e=>{var t,o,r=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{o="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){o=defaultClearTimeout}}();var n,s=[],a=!1,l=-1;function cleanUpNextTick(){a&&n&&(a=!1,n.length?s=n.concat(s):l=-1,s.length&&drainQueue())}function drainQueue(){if(!a){var e=runTimeout(cleanUpNextTick);a=!0;for(var t=s.length;t;){for(n=s,s=[];++l<t;)n&&n[l].run();l=-1,t=s.length}n=null,a=!1,function runClearTimeout(e){if(o===clearTimeout)return clearTimeout(e);if((o===defaultClearTimeout||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];s.push(new Item(e,t)),1!==s.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=noop,r.addListener=noop,r.once=noop,r.off=noop,r.removeListener=noop,r.removeAllListeners=noop,r.emit=noop,r.prependListener=noop,r.prependOnceListener=noop,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"6ZUU":(e,t,o)=>{var r,n=o("yC3i"),s=(r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function isMasked(e){return!!s&&s in e}},"6egC":(e,t,o)=>{"use strict";o.r(t),o.d(t,{addNextLineInDiv:()=>addNextLineInDiv,bringElementInMobileViewPort:()=>bringElementInMobileViewPort,bringElementInViewPort:()=>bringElementInViewPort,createScrollExtension:()=>createScrollExtension,getBoundingClientRectWithRespectToApplication:()=>getBoundingClientRectWithRespectToApplication,getSDKAwareWindowInnerHeight:()=>getSDKAwareWindowInnerHeight,getSDKAwareWindowInnerWidth:()=>getSDKAwareWindowInnerWidth,getSDKBundleDOM:()=>getSDKBundleDOM,isElementInMobileViewPort:()=>isElementInMobileViewPort,isElementInScrollableContainer:()=>isElementInScrollableContainer,isElementInViewPort:()=>isElementInViewPort,isInSDKBundle:()=>isInSDKBundle,placeCaretAtEnd:()=>placeCaretAtEnd,removePageContainerExtension:()=>removePageContainerExtension,scrollIntoViewIfNotVisible:()=>scrollIntoViewIfNotVisible});const isInSDKBundle=()=>{const e=window.adobe_dc_sdk;return e&&e.launchOptions&&"boolean"==typeof e.launchOptions.inSDKBundle&&e.launchOptions.inSDKBundle},r=915,n=.5,s=.2,a=10,l=.3,c=100,p=200,d=2,m=1,u=0,h="0px",g=10,y=3e4,getSDKBundleDOM=()=>document.getElementById("dc-view-sdk-bundle"),getSDKAwareWindowInnerWidth=e=>isInSDKBundle()?getSDKBundleDOM().clientWidth:e,getSDKAwareWindowInnerHeight=e=>isInSDKBundle()?getSDKBundleDOM().clientHeight:e,getBoundingClientRectWithRespectToApplication=e=>{let t=e.getBoundingClientRect();if(isInSDKBundle()){const e=getSDKBundleDOM().getBoundingClientRect();t={...t,top:t.top-e.top,right:t.right-e.left,bottom:t.bottom-e.top,left:t.left-e.left}}return t},isElementInViewPort=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=getBoundingClientRectWithRespectToApplication(e);return r.top>=t&&r.left>=0&&r.bottom<=getSDKAwareWindowInnerHeight(window.innerHeight||document.documentElement.clientHeight)-o&&r.right<=getSDKAwareWindowInnerWidth(window.innerWidth||document.documentElement.clientWidth)};let C=null;const isElementInMobileViewPort=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if("undefined"==typeof window||!e)return!1;const o=getSDKAwareWindowInnerHeight()||window.innerHeight||r;return isElementInViewPort(e,t,o*n)},createScrollExtension=(e,t,o)=>{const r=e.querySelector(".ReactVirtualized__Grid__innerScrollContainer");if(!r)return;if(C){if((parseInt(r.style.paddingBottom,g)||u)-(parseInt(C.originalPaddingBottom,g)||u)>=t)return C.forCommentId=o,void(C.createdAt=Date.now())}else C={element:r,isPaddingExtension:!0,originalPaddingBottom:r.style.paddingBottom||h,createdAt:Date.now(),forCommentId:o};const n=(parseInt(C.originalPaddingBottom,g)||u)+Math.ceil(t);r.style.paddingBottom=`${n}px`,C.cleanupTimer&&clearTimeout(C.cleanupTimer),C.cleanupTimer=setTimeout(()=>{C&&C.element===r&&(r.style.paddingBottom=C.originalPaddingBottom,C=null)},y)},removePageContainerExtension=()=>{if(C){try{C.isPaddingExtension&&(C.element.style.paddingBottom=C.originalPaddingBottom)}catch{}C=null}},bringElementInMobileViewPort=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof window&&e){if("number"==typeof r)try{const e=(await Promise.resolve().then(o.bind(o,"9+t3"))).default,t=await e.getInstance().previewApis.documentState.getCurrentPage();if(r!==t){if(Math.abs(r-t)>d){(await Promise.resolve().then(o.bind(o,"llUt"))).PreviewStore.instance.goToPage(r+m)}else await e.getInstance().previewApis.documentActions.goToLocation({pageIndex:r,left:u,top:u});await new Promise(e=>{setTimeout(()=>e(),p)})}}catch{}try{const t=getSDKAwareWindowInnerHeight()||window.innerHeight;e.scrollIntoView({behavior:"auto",block:"start"});const o=document.querySelector('[role="main"]');if(o){const r=getBoundingClientRectWithRespectToApplication(e),n=t*s,p=r.top-n;if(Math.abs(p)>a){const e=o.scrollTop+p,r=o.scrollHeight-o.clientHeight;if(e>r){const n=e-r,s=Math.min(n,t*l);createScrollExtension(o,s,"mobile-comment"),setTimeout(()=>{o.scrollTop=Math.max(u,e)},c)}else o.scrollTop=Math.max(u,e)}}}catch(t){e.scrollIntoView({behavior:"auto",block:"center"})}}},isElementInScrollableContainer=(e,t)=>{const{bottom:o,height:r,top:n}=e.getBoundingClientRect(),s=t.getBoundingClientRect();return n<=s.top?s.top-n<=r:o-s.bottom<=r},bringElementInViewPort=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{verticalAlign:o,behavior:r}=t;e.scrollIntoView({block:o||"start",behavior:r||"auto"})},placeCaretAtEnd=e=>{if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){const t=document.createRange();t.selectNodeContents(e),t.collapse(!1);const o=window.getSelection();o.removeAllRanges(),o.addRange(t)}else if(void 0!==document.body.createTextRange){const t=document.body.createTextRange();t.moveToElementText(e),t.collapse(!1),t.select()}},addNextLineInDiv=()=>{const e=window.getSelection(),t=e.getRangeAt(0),o=document.createElement("br");t.deleteContents(),t.insertNode(o),t.setStartAfter(o),t.setEndAfter(o),t.collapse(!1),e.removeAllRanges(),e.addRange(t)},scrollIntoViewIfNotVisible=e=>{e&&setTimeout(()=>{var t,o;(null===(t=getBoundingClientRectWithRespectToApplication(e))||void 0===t?void 0:t.bottom)>window.innerHeight&&e.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"}),(null===(o=getBoundingClientRectWithRespectToApplication(e))||void 0===o?void 0:o.top)<0&&e.scrollIntoView({behavior:"smooth"})})}},"6jw6":(e,t,o)=>{e.exports=o("x1c+")},"74RQ":(e,t,o)=>{var r=o("R4fn"),n=o("LQfy"),s=o("23pY");function SetCache(e){var t=-1,o=null==e?0:e.length;for(this.__data__=new r;++t<o;)this.add(e[t])}SetCache.prototype.add=SetCache.prototype.push=n,SetCache.prototype.has=s,e.exports=SetCache},"7bm6":(e,t,o)=>{var r=o("miHg"),n=o("6ZUU"),s=o("EbA6"),a=o("2fQ+"),l=/^\[object .+?Constructor\]$/,c=Function.prototype,p=Object.prototype,d=c.toString,m=p.hasOwnProperty,u=RegExp("^"+d.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function baseIsNative(e){return!(!s(e)||n(e))&&(r(e)?u:l).test(a(e))}},"7mdI":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},"7otS":(e,t,o)=>{"use strict";o.d(t,{A:()=>_});var r,n,s,a,l=o("abd3"),c=o("kiUt"),p=o("hGRN"),d=o("D/Yr"),m=o("0/0f"),u=o("CKE+"),h=o("Xm+I");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _classPrivateFieldLooseBase(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var g=0;function _classPrivateFieldLooseKey(e){return"__private_"+g+++"_"+e}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}let y={},C={};y=o("plsW").providers,C=o("plsW").auth2;const _=new(a=_classPrivateFieldLooseKey("isInitialized"),n=_applyDecoratedDescriptor((r=class ReviewParticipantsStore{constructor(){_initializerDefineProperty(this,"reviewParticipants",n,this),_initializerDefineProperty(this,"documentOwner",s,this),this.newSignedInUserAddedToCollaborators=void 0,Object.defineProperty(this,a,{writable:!0,value:!1}),this.onReviewerAddedFromShareSheet=()=>{this.fetchReviewParticipants()}}initialize(){const e=this.setupListeners();return _classPrivateFieldLooseBase(this,a)[a]=!0,e}setupListeners(){return y["review-handler"]().then(e=>{e.subscribe("shared:reviewerAdded",this.onReviewerAddedFromShareSheet)})}teardownListeners(){return _classPrivateFieldLooseBase(this,a)[a]?y["review-handler"]().then(e=>{e.unsubscribe("shared:reviewerAdded",this.onReviewerAddedFromShareSheet)}):Promise.resolve()}isSignedInUserNotCollaborator(){return C.isSignedIn&&C.hasAccessToken()&&!(0,p.eF)()&&!!u.A.userProfile&&!this.newSignedInUserAddedToCollaborators}addNewSignedInUserToCollaborators(){return new Promise((e,t)=>{this.isSignedInUserNotCollaborator()?c.A.apis.addReviewConsent().then(t=>{const o=new CustomEvent("adobe:comments:newReviewersAdded",{detail:{isSuccessful:!0,newConsent:!0},bubbles:!0});this.fetchReviewParticipants(),this.newSignedInUserAddedToCollaborators=!0,window.dispatchEvent(o),e()}).catch(e=>{(0,m.A)({context:"ReviewParticipantsStore"}).error("Error adding new signed in user as reviewer",JSON.stringify(e)),t(e)}):e()})}showPrivacyMessage(){return!this.newSignedInUserAddedToCollaborators&&this.isSignedInUserNotCollaborator()}fetchReviewParticipants(){return h.A.createFetchCollaboratorsOp().execute().catch(e=>{throw(0,m.A)({context:"ReviewParticipantsStore"}).error("Error fetching review participants",e),e})}setReviewParticipants(e){this.reviewParticipants=e}setNewSignedInUserAddedToCollaborators(e){this.newSignedInUserAddedToCollaborators=e}setDocumentOwner(e){Object.assign(this.documentOwner,e)}async getUserAvatar(e){if(!e)return new Promise(e=>{e()});try{const t=await y.user(),o=await t.getUserProfilePicture(e);if(o&&o[d.Ay.AVATAR_IMAGE_SIZE])return o[d.Ay.AVATAR_IMAGE_SIZE]}catch(e){(0,m.A)({context:"ReviewParticipantsStore"}).error("error in getting user profile picture",JSON.stringify(e))}}resetReviewParticipantsStore(){_classPrivateFieldLooseBase(this,a)[a]&&(_classPrivateFieldLooseBase(this,a)[a]=!1,this.setReviewParticipants([]),this.teardownListeners())}}).prototype,"reviewParticipants",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=_applyDecoratedDescriptor(r.prototype,"documentOwner",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_applyDecoratedDescriptor(r.prototype,"setReviewParticipants",[l.action],Object.getOwnPropertyDescriptor(r.prototype,"setReviewParticipants"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setDocumentOwner",[l.action],Object.getOwnPropertyDescriptor(r.prototype,"setDocumentOwner"),r.prototype),r)},"7qRf":(e,t,o)=>{var r=o("Biqk");e.exports=function cloneDeep(e){return r(e,5)}},"8KhM":(e,t,o)=>{var r=o("J4lf");e.exports=function mapCacheHas(e){return r(this,e).has(e)}},"8f/F":(e,t,o)=>{var r=o("nsdc").Symbol;e.exports=r},"9+t3":(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>CommentsController});class CommentsController{constructor(e){this.previewApis=e,this.comments=void 0}static getInstance(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return CommentsController._instance&&!t||(CommentsController._instance=new CommentsController(e)),CommentsController._instance}static addOverlay(e,t){CommentsController._overlayList||(CommentsController._overlayList=[]),CommentsController._overlayList[e]=t}static getOverlay(e){return CommentsController._overlayList[e]}}CommentsController._instance=void 0,CommentsController._overlayList=void 0},"9/bm":(e,t,o)=>{e.exports=o("SEmX")("Kfxn")},"907g":(e,t,o)=>{"use strict";o.d(t,{X:()=>withErrorBoundary});var r=o("YWiy"),n=o("D/Yr"),s=o("LwNf");let a;const l=n.Ay.DROPIN_ID;let c={getLogger:()=>{}};c=o("plsW").logging;class ErrorBoundary extends r.Component{constructor(e){super(e),this.state={hasError:!1};const t={context:"ErrorBoundary",dropinId:l,"adb.event.context.AcrobatJS.isModernViewer":!0};t.documentId=this.getDocumentId(),a=c.getLogger(t)}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){a.error(e.stack||e.message,t)}getDocumentId(){try{return(0,s.tM)("viewerDocumentId")}catch(e){return null}}render(){if(!this.state.hasError)return this.props.children}}const withErrorBoundary=e=>t=>r.createElement(ErrorBoundary,{onCancel:t.onClose,dropinId:l},r.createElement(e,t))},"9Mxr":(e,t,o)=>{var r=o("J4lf");e.exports=function mapCacheGet(e){return r(this,e).get(e)}},"9YzA":(e,t,o)=>{"use strict";o.d(t,{b:()=>n,e:()=>reviewProvider});const r=class PCUserAuthorizationModel{constructor(e){this.createUserId=e=>e.id||e.email||e.userName,this.getUserId=()=>this.userId,this.getUserName=()=>this.userName,this.getUserType=()=>this.userType,this.getEmail=()=>this.email,this.getTokenId=()=>this.tokenId,this.getPictureURL=()=>this.pictureURL,this.userId=this.createUserId(e),this.userName=e.userName,this.userType=e.userType,this.email=e.email,this.tokenId=e.tokenId,this.pictureURL=e.pictureURL}};const n=new class ReviewAPI{constructor(){this.authorizeUser=e=>(this.authorizedUserModel=new r(e),this.authorizedUserModel),this.getUserAuthorizationInfo=()=>this.authorizedUserModel,this.isUserAuthorized=()=>!!this.authorizedUserModel,this.ready=()=>Promise.resolve(this),this.exportedContent=()=>["authorizeUser","getUserAuthorizationInfo","isUserAuthorized"],this.authorizedUserModel=null}},reviewProvider=()=>Promise.resolve(n)},"9tLm":e=>{e.exports=function arraySome(e,t){for(var o=-1,r=null==e?0:e.length;++o<r;)if(t(e[o],o,e))return!0;return!1}},"A+JF":(e,t,o)=>{var r=o("1XbB")(o("nsdc"),"Set");e.exports=r},A2Of:e=>{var t=/\w*$/;e.exports=function cloneRegExp(e){var o=new e.constructor(e.source,t.exec(e));return o.lastIndex=e.lastIndex,o}},AFJb:(e,t,o)=>{var r=o("YWiy");function SDCAnnotationList18N(e){return r.createElement("svg",e,[r.createElement("path",{d:"m7.46729,16c-2.50684,0-5.0298-2.05371-5.39941-4.39453-.17139-1.08545-.01117-2.15527.43884-3.10132-.03485-1.03857.14398-2.05005.50305-2.99609-.17981.146-.35657.29736-.52344.46362C.93408,7.51953.2417,9.6582.58643,11.83984c.48438,3.06836,3.63525,5.66016,6.88086,5.66016h5.28271c.68945,0,1.25-.56055,1.25-1.25v-.25h-6.53271Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:0}),r.createElement("path",{d:"m15.75,15h-5.28271c-3.24609,0-6.39697-2.5918-6.88086-5.66016-.34473-2.18164.34766-4.32031,1.8999-5.86816,1.55225-1.54688,3.69531-2.23242,5.87549-1.88184,3.21436.51758,5.63818,3.46582,5.63818,6.85742v5.30273c0,.68945-.56055,1.25-1.25,1.25ZM10.24951,3c-1.38867,0-2.70459.53711-3.7041,1.53418-1.20801,1.2041-1.74609,2.87012-1.47754,4.57129.36914,2.34082,2.89258,4.39453,5.39941,4.39453h5.03271v-5.05273c0-2.66309-1.88135-4.97461-4.37646-5.37695-.29297-.04688-.58496-.07031-.87402-.07031Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:1}),r.createElement("rect",{x:"8",y:"6",width:"5",height:"1.5",rx:".5",ry:".5",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:2}),r.createElement("rect",{x:"8",y:"9",width:"4",height:"1.5",rx:".5",ry:".5",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:3})])}SDCAnnotationList18N.defaultProps={id:"a","data-name":"Icons",width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=SDCAnnotationList18N,SDCAnnotationList18N.default=SDCAnnotationList18N},AWKe:(e,t,o)=>{var r={"./cs-CZ.json":["08B1",4611],"./da-DK.json":["acN1",5488],"./de-DE.json":["EjZn",8062],"./en-GB.json":["pUtz",208],"./en-US.json":["t39f",3577],"./es-ES.json":["SPzx",6724],"./fi-FI.json":["hrqw",534],"./fr-FR.json":["1xIn",2764],"./it-IT.json":["XeRS",8278],"./ja-JP.json":["YtLb",2409],"./ko-KR.json":["8Y6V",7527],"./nb-NO.json":["G976",1579],"./nl-NL.json":["SqX1",4816],"./pl-PL.json":["u9al",7192],"./pt-BR.json":["GN92",2668],"./ru-RU.json":["v5cd",1206],"./sv-SE.json":["Te3y",1915],"./tr-TR.json":["gQP8",9340],"./zh-CN.json":["dI7b",2179],"./zh-TW.json":["Rm8P",9723],"./zz-ZY.json":["gwRR",9405],"./zz-ZZ.json":["9hE6",6300]};function webpackAsyncContext(e){if(!o.o(r,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],n=t[0];return o.e(t[1]).then(()=>o.t(n,19))}webpackAsyncContext.keys=()=>Object.keys(r),webpackAsyncContext.id="AWKe",e.exports=webpackAsyncContext},AXyZ:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function toString(){return this.map(function(t){var o="",r=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),r&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),r&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o}).join("")},t.i=function i(e,o,r,n,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(a[c]=!0)}for(var p=0;p<e.length;p++){var d=[].concat(e[p]);r&&a[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),o&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=o):d[2]=o),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),t.push(d))}},t}},AvEB:(e,t,o)=>{"use strict";o.d(t,{A:()=>RedhawkUtil});var r=o("ljF6"),n=o("plsW"),s=o("CKE+");class RedhawkUtil{static getClient(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t={token:n.auth2.isSignedIn?()=>n.auth2.getAccessTokenInfo().access_token:null===(e=s.A.getUserProfile())||void 0===e?void 0:e.getTokenId(),environment:n.envUtil.getHostEnv(),commentType:["open","resolved"],apiKey:RedhawkUtil.getRedhawkApiKey(),appName:RedhawkUtil.getRedhawkAppInfo(),...t},r.Client.instance.configure(t)}static getRedhawkApiKey(){const e=n.envUtil.getHostEnv();return new r.Appconf.Confclass(e),r.Appconf.Confclass.getRedhawkApiKey()}static getReviewApiKey(){const e=n.envUtil.getHostEnv();return new r.Appconf.Confclass(e),r.Appconf.Confclass.getReviewApiKey()}static getRedhawkAppInfo(){return"DC-WEB"}}},Biqk:(e,t,o)=>{var r=o("DZGl"),n=o("tnbx"),s=o("gHxW"),a=o("rqnL"),l=o("oIgG"),c=o("wUMU"),p=o("QcwK"),d=o("NBrC"),m=o("KEN/"),u=o("EI1Z"),h=o("x9U5"),g=o("OLgS"),y=o("Pn9q"),C=o("mC27"),_=o("Q8Bv"),b=o("Otif"),E=o("suZy"),v=o("kQqw"),T=o("EbA6"),A=o("Mv5R"),O=o("S1m8"),D=o("DrWp"),P="[object Arguments]",I="[object Function]",S="[object Object]",w={};w[P]=w["[object Array]"]=w["[object ArrayBuffer]"]=w["[object DataView]"]=w["[object Boolean]"]=w["[object Date]"]=w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Map]"]=w["[object Number]"]=w[S]=w["[object RegExp]"]=w["[object Set]"]=w["[object String]"]=w["[object Symbol]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w["[object Error]"]=w[I]=w["[object WeakMap]"]=!1,e.exports=function baseClone(e,t,o,R,M,N){var L,x=1&t,U=2&t,k=4&t;if(o&&(L=M?o(e,R,M,N):o(e)),void 0!==L)return L;if(!T(e))return e;var F=b(e);if(F){if(L=y(e),!x)return p(e,L)}else{var H=g(e),B=H==I||"[object GeneratorFunction]"==H;if(E(e))return c(e,x);if(H==S||H==P||B&&!M){if(L=U||B?{}:_(e),!x)return U?m(e,l(L,e)):d(e,a(L,e))}else{if(!w[H])return M?e:{};L=C(e,H,x)}}N||(N=new r);var j=N.get(e);if(j)return j;N.set(e,L),A(e)?e.forEach(function(r){L.add(baseClone(r,t,o,r,e,N))}):v(e)&&e.forEach(function(r,n){L.set(n,baseClone(r,t,o,n,e,N))});var z=F?void 0:(k?U?h:u:U?D:O)(e);return n(z||e,function(r,n){z&&(r=e[n=r]),s(L,n,baseClone(r,t,o,n,e,N))}),L}},BwN7:(e,t,o)=>{var r=o("ONWK"),n=o("Otif");e.exports=function baseGetAllKeys(e,t,o){var s=t(e);return n(e)?s:r(s,o(e))}},C16B:(e,t,o)=>{var r=o("1XbB")(o("nsdc"),"Promise");e.exports=r},"CKE+":(e,t,o)=>{"use strict";o.d(t,{A:()=>I});var r=o("ljF6"),n=o("abd3"),s=o("plsW"),a=o("0/0f"),l=o("9YzA"),c=o("D/Yr"),p=o("hGRN"),d=o("/Oxh"),m=o("kiUt"),u=o("QNhk"),h=o("YY8+"),g=o("iaHC"),y=o("G5bJ"),C=o("6AL6"),_=o("LwNf");var b,E,v,T,A,O=o("Wvr3");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}var D=0;function _classPrivateFieldLooseKey(e){return"__private_"+D+++"_"+e}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}let P={};function _isInsideReviewApp2(){let e=!1;if(e=window.location.href.indexOf("/link/review")>-1,!e){"/review"===new URLSearchParams(window.location.search).get("path")&&(e=!0)}return e}P=o("plsW").auth2;const I=new(A=_classPrivateFieldLooseKey("isInsideReviewApp"),E=_applyDecoratedDescriptor((b=class UserProfileStore{constructor(){var e=this;Object.defineProperty(this,A,{value:_isInsideReviewApp2}),_initializerDefineProperty(this,"userProfile",E,this),_initializerDefineProperty(this,"accessToken",v,this),_initializerDefineProperty(this,"hasAuth",T,this),this.integrationUserProfile=void 0,this.targetCohort=void 0,this.guestUsernameSource=void 0,this.getUserCommentColorMap=()=>{s.providers["dcweb-prefs"]().then(e=>{e.getPref("dcComments","anotationColorMap",JSON.stringify(c.Ay.DEFAULT_TOOLS_MAP)).then(e=>{h.A.setToolsColorMap(JSON.parse(e))}).catch(e=>{(0,a.A)({context:"UserProfileStore"}).error("Error in getting user color preferences",JSON.stringify(e))})})},this.setUserColorMap=e=>{(0,p.eF)()?u.A.setUserSetting("previewAnnotationColorMap",e):s.providers["dcweb-prefs"]().then(t=>{t.setPref("dcComments","anotationColorMap",JSON.stringify(e)).catch(e=>{(0,a.A)({context:"UserProfileStore"}).error("Error in setting user color preferences",JSON.stringify(e))})})},this.getPinToolPrefs=async()=>{const e=await async function getUserPrefs(e,t){let o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"comments";if(s.auth2.isSignedIn)try{o=(await s.providers["dcweb-prefs"]()).getPref(r,e,t)}catch(e){o=t}else o=(0,_.bV)(`${r}.${e}`),o=o?JSON.parse(o):t;return o}("pin_tool",null);return e},this.syncPinToolPrefs=async e=>{h.A.setPinToolPrefs(e),P.isSignedIn&&O.A.isValidIdentifier&&await async function setUserPrefs(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"comments";if(s.auth2.isSignedIn)try{(await s.providers["dcweb-prefs"]()).setPref(o,e,t)}catch(e){}else(0,_.y9)(`${o}.${e}`,JSON.stringify(t))}("pin_tool",e)},this.joinReview=async function(t){const o={userName:arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.userProfile.userName,captcharesponse:t,captchaSiteKey:y.A.getCaptchaSiteKey(),userType:"ANON"},r=e.authorizeUser(o,!1);r.on("TOKEN_ID_GENERATED",()=>{e.setUserProfile(r),e.setIsAnonUserAuthorized(!0),(0,C.BI)("Access","Use","Guest user logged in"),s.providers["review-handler"]().then(e=>{e.eventEmitter.emit("adobe:comments:guestUserLogIn",{isGuest:!0})})})},this.accessToken=void 0,this.userProfile=void 0,(0,n.reaction)(()=>this.hasAuth,()=>{this.hasAuth&&g.A.postPendingCommentIfAnyForAnonUser()})}initialize(){this.isUserAuthorized(),function _classPrivateFieldLooseBase(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}(this,A)[A]()||(0,p.eF)()||(P.isSignedIn&&P.hasAccessToken()?this.initializeIMSUser():(l.b.authorizeUser({userName:"Anonymous",userType:c.Ay.ANNONYMOUS_USER_TYPE}),this.setUserProfile(l.b.getUserAuthorizationInfo())))}initializeIntegrationUser(e){const t={userName:e.name,userType:c.Ay.INTEGRATION_USER_TYPE,email:e.email,id:e.id,pictureURL:e.pictureURL};l.b.authorizeUser(t);const o=l.b.getUserAuthorizationInfo();this.setUserProfile(o),this.integrationUserProfile=o}initializeIMSUser(){const e=new r.UserAuthorizationModel({imsAuthInfo:P},!1,s.envUtil.getHostEnv());this.setUserProfile(e)}initializeFrictionlessUser(){if(this.isFrictionlessUser())return;let e="";try{e=localStorage.getItem(c.Ay.GUEST_USERNAME_LS_KEY),this.guestUsernameSource="storage",e||(e=y.A.createGuestUsername(g.A.comments),this.guestUsernameSource="suggested")}catch(t){(0,a.A)({context:"FrictionlessCommenting"}).error(JSON.stringify(t)),e=y.A.createGuestUsername(g.A.comments)}const t=l.b.authorizeUser({userName:e,userType:c.Ay.FRICTIONLESS_USER_TYPE});return this.setUserProfile(t),t}getUserProfile(){return(0,p.eF)()?(this.integrationUserProfile||this.fetchIntegrationUserProfile(),this.integrationUserProfile):(this.hasAuth&&void 0!==this.userProfile||this.fetchUserProfile(),this.userProfile)}fetchIntegrationUserProfile(){u.A.getIntegrationProvider().then(e=>{e.getUserProfile().then(e=>{this.integrationUserProfile||this.initializeIntegrationUser(e)})})}fetchUserProfile(){if(P.isSignedIn&&P.hasAccessToken())this.initializeIMSUser(),this.getUserCommentColorMap();else{(0,d.SD)()().then(e=>{const t=e.getUserAuthorizationInfo()||l.b.getUserAuthorizationInfo();this.setUserProfile(t)})}}setUserProfile(e){this.userProfile=e}setTooltipShownToUser(e){u.A.setUserSetting("annotationTooltipShownMap",e)}isAnnonymous(){const e=this.getUserProfile();return!(e&&e.userType!==c.Ay.ANNONYMOUS_USER_TYPE&&!this.isFrictionlessUser())}setIsAnonUserAuthorized(e){this.hasAuth=e}authorizeUser(e,t){return m.A.apis.authorizeUser(e,t)}isUserAuthorized(){return(0,d.SD)()().then(e=>{this.setIsAnonUserAuthorized(e.isUserAuthorized())}),this.hasAuth}isUserAuthenticated(){return!this.isAnnonymous()&&this.hasAuth}isFrictionlessUser(){const e=this.getUserProfile();return e&&e.userType===c.Ay.FRICTIONLESS_USER_TYPE}setTargetCohort(e){this.targetCohort=e}}).prototype,"userProfile",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=_applyDecoratedDescriptor(b.prototype,"accessToken",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=_applyDecoratedDescriptor(b.prototype,"hasAuth",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(b.prototype,"initializeIntegrationUser",[n.action],Object.getOwnPropertyDescriptor(b.prototype,"initializeIntegrationUser"),b.prototype),_applyDecoratedDescriptor(b.prototype,"initializeIMSUser",[n.action],Object.getOwnPropertyDescriptor(b.prototype,"initializeIMSUser"),b.prototype),_applyDecoratedDescriptor(b.prototype,"initializeFrictionlessUser",[n.action],Object.getOwnPropertyDescriptor(b.prototype,"initializeFrictionlessUser"),b.prototype),_applyDecoratedDescriptor(b.prototype,"fetchIntegrationUserProfile",[n.action],Object.getOwnPropertyDescriptor(b.prototype,"fetchIntegrationUserProfile"),b.prototype),_applyDecoratedDescriptor(b.prototype,"fetchUserProfile",[n.action],Object.getOwnPropertyDescriptor(b.prototype,"fetchUserProfile"),b.prototype),_applyDecoratedDescriptor(b.prototype,"setUserProfile",[n.action],Object.getOwnPropertyDescriptor(b.prototype,"setUserProfile"),b.prototype),_applyDecoratedDescriptor(b.prototype,"setIsAnonUserAuthorized",[n.action],Object.getOwnPropertyDescriptor(b.prototype,"setIsAnonUserAuthorized"),b.prototype),b)},CTXV:(e,t,o)=>{"use strict";o.d(t,{Hh:()=>s,Ow:()=>r,T7:()=>l,UB:()=>d,ZH:()=>p,hG:()=>a,vs:()=>c,y2:()=>n});const r={red:20,green:115,blue:230,alpha:.2},n=3,s="rgb",a="ACTIVE",l={background:"Highlight",text:"HighlightText",borderColor:"Highlight"},c={background:"ButtonFace",text:"ButtonText"},p=(Object.freeze({LIGHT:"light",DARK:"dark"}),Object.freeze({DEFAULT_LIGHT:{color:"var(--spectrum-global-color-gray-800)",background:"transparent"},DEFAULT_DARK:{color:"var(--spectrum-global-color-gray-700)",background:"transparent"},HOVER:{color:"var(--spectrum-global-color-gray-900)",background:"transparent"},ACTIVE:{color:"var(--spectrum-global-color-gray-900)",background:"var(--spectrum-global-color-gray-300)"},SELECTED:{color:"var(--spectrum-global-color-gray-900)",background:"var(--spectrum-global-color-gray-300)"}}),'button:not([disabled]), input[type="text"]:not([disabled]), input[type="search"]:not([disabled]), [role="tab"], [role="switch"], [role="button"], [role="textbox"]'),d=Object.freeze({DELAY:"500",PLACEMENT:Object.freeze({TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"}),TRIGGER:Object.freeze({HOVER:"hover"})});Object.freeze({MIN:.1,MAX:1296,WIDTH:"80px",MENU_WIDTH:"87px"}),Object.freeze({ENTER:"Enter"}),Object.freeze({COLOR:"var(--spectrum-global-color-gray-600)",SIZE:"var(--spectrum-global-dimension-size-10)",STYLE:"solid"})},CXG2:e=>{e.exports=function isObjectLike(e){return null!=e&&"object"==typeof e}},CoNQ:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var r=o("XWif"),n=o("iaHC"),s=o("9+t3"),a=o("D/Yr"),l=o("6AL6");const c=new class ApiWrapper{constructor(){var e=this;this.removeRedundantEntryFromQueue=e=>{(null==e?void 0:e.sid)&&(this.opQueue=this.opQueue.filter(t=>{var o;return(null===(o=t.params)||void 0===o?void 0:o.sid)!==e.sid}))},this.initQueueEmptyPromise=()=>{this._queueEmptyPromise=new Promise(e=>{this._queueEmptyResolver=e})},this.queueOperation=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.removeRedundantEntryFromQueue(r),e.fetchFloodgateIfRequired(),new Promise((n,s)=>{0===e.opQueue.length&&e.initQueueEmptyPromise(),e.opQueue.push({opFn:t,opType:o,params:r,resolveRef:n,rejectRef:s}),e.isServerIdle&&e.checkQueue()})},this.fetchFloodgateIfRequired=()=>{null===this.undoRedoToastFloodgate&&s.default.getInstance().previewApis.previewPublicApis.app.getFeatureFlag("dc-web-share-undo-redo").then(e=>{this.undoRedoToastFloodgate=e}).catch(()=>{})},this.getCommandManager=()=>(this.commandManager||(this.commandManager=s.default.getInstance().previewApis.commandManager),this.commandManager),this.getMessages=async()=>{this.commentsSyncing=await(0,r.I)("redhawkCommentsSyncing"),this.commentsSynced=await(0,r.I)("redhawkCommentsSynced")},this.shouldShowToast=()=>{if(!this.undoRedoToastFloodgate)return!1;let e=!1;if(this.opQueue.length<2)return!1;var t;(this.opQueue.forEach(t=>{t.opType!==a.Ay.REDHAWK_UNDO&&t.opType!==a.Ay.REDHAWK_REDO||(e=!0)}),e)&&(0,l.BI)("Commenting","UndoRedo","ToastShown",{"adb.event.context.Comments.Count":null===(t=this.opQueue)||void 0===t?void 0:t.length});return!0},this.showCommentUnderProcessToast=()=>{s.default.getInstance().previewApis.previewPublicApis.document.showNotification(this.commentsSyncing,{shouldRemoveActiveToasts:!0})},this.removeAllNotifications=()=>{s.default.getInstance().previewApis.previewPublicApis.document.clearAllNotifications()},this.showCommentProcessedToast=()=>{s.default.getInstance().previewApis.previewPublicApis.document.showNotification(this.commentsSynced,{shouldRemoveActiveToasts:!0,variant:"success",timeout:2e3})},this.resolveQueueEmptyPromise=()=>{this._queueEmptyResolver&&(this._queueEmptyResolver("success"),this._queueEmptyPromise=null,this._queueEmptyResolver=null)},this.checkQueue=async()=>{let e,t=!1;for(this.shouldShowToast()&&(this.showCommentUnderProcessToast(),this.commentUnderProcess=!0);this.opQueue.length;){this.isServerIdle=!1,e=this.opQueue.shift();try{!this.commentUnderProcess&&this.shouldShowToast()&&(this.showCommentUnderProcessToast(),this.commentUnderProcess=!0);const t=await e.opFn(e.opType===a.Ay.REDHAWK_UNDO||e.opType===a.Ay.REDHAWK_REDO);e.resolveRef(t)}catch(o){t=!0,e.rejectRef(o);break}}this.isServerIdle=!0,0===this.opQueue.length&&this.resolveQueueEmptyPromise(),this.commentUnderProcess&&!t&&this.showCommentProcessedToast(),this.commentUnderProcess=!1,t&&(this.removeAllNotifications(),this.opQueue.unshift(e),this.rollbackQueue())},this.rollbackQueue=()=>{var e;for((0,l.BI)("Commenting","UndoRedo","Rollback",{"adb.event.context.Comments.Count":null===(e=this.opQueue)||void 0===e?void 0:e.length}),this.getCommandManager();this.opQueue.length;){const e=this.opQueue.shift();e.opType===a.Ay.REDHAWK_UNDO?this.commandManager.redo({isRollback:!0}):e.opType===a.Ay.REDHAWK_REDO&&this.commandManager.undo({isRollback:!0})}},this.deleteComment=(e,t)=>function(o){return n.A.deleteComment(e,t,o)},this.updateComment=(e,t)=>function(){return n.A.updateComment(e,t)},this.deleteReply=(e,t)=>function(){return e.deleteReplyFromserver(t)},this.saveComment=(e,t,o,r)=>function(){return n.A.saveCommentToServer(e,t,o,r)},this.saveReply=(e,t,o)=>function(){return e.saveReplyToServer(e,t,o)},this.resolveComment=(e,t)=>function(){return n.A.resolveComment(e,t)},this.unresolveComment=(e,t)=>function(){return n.A.unresolveComment(e,t)},this.waitForPendingCommentsToBeProcessed=()=>0===this.opQueue.length?Promise.resolve("success"):this._queueEmptyPromise?this._queueEmptyPromise instanceof Promise?this._queueEmptyPromise:Promise.reject(new Error("queueEmptyPromise is not a promise")):Promise.reject(new Error("queueEmptyPromise is not initialized")),this.opQueue=[],this.isServerIdle=!0,this.commentUnderProcess=!1,this.getMessages(),this.undoRedoToastFloodgate=null,this._queueEmptyPromise=null,this._queueEmptyResolver=null}}},"D/Yr":(e,t,o)=>{"use strict";var r;o.d(t,{Ay:()=>Constants,L2:()=>n,Rv:()=>s});class Constants{}r=Constants,Constants.NUMBER="number",Constants.ANNONYMOUS_USER_TYPE="ANON",Constants.INTEGRATION_USER_TYPE="SPOD",Constants.FRICTIONLESS_USER_TYPE="FRICTIONLESS_COMMENTING_USER",Constants.REDHAWK_COMMENT_MAX_CHAR_LENGTH=2500,Constants.REDHAWK_COMMENT_SHOW_WARNING_CHAR_LENGTH=2495,Constants.REDHAWK_COMMENT_MENTION_LIMIT=10,Constants.MOTIVATION_COMMENTING="commenting",Constants.REPLYING="replying",Constants.STATUS_NEW="new",Constants.STATUS_OPEN="open",Constants.STATUS_RESOLVED="resolved",Constants.MOBILE_FILTER_CONFIG_ID="mobile-comments-filter-config",Constants.MOBILE_COMMENTS_HALF_SHEET_CONFIG_ID="mobile-comments-half-sheet",Constants.FILTER_SNAP_POINTS=["90%"],Constants.STATUS_READ="read",Constants.STATUS_UNREAD="unread",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_QUICK_REPLY_THUMBSUP="User clicked thumbs up button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_QUICK_REPLY_APPLAUSE="User clicked applause button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_QUICK_REPLY_THINKING="User clicked thinking button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_QUICK_REPLY_CHECKMARK="User clicked checkmark button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_ENTERED="User cursor entered comment preview",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_READMORE="User clicked Read more button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_NREPLIES="User clicked n-replies button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_SHOWLESS="User clicked Show less button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_PREV_COMMENT="User clicked Prev comment button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_NEXT_COMMENT="User clicked Next comment button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_MOVE="User moved comment preview",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_RESIZE="User resized comment preview",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_OPENRHP="Open in comment panel option selected",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_RESOLVE="Resolve comment option selected",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_UNRESOLVE="Unresolve comment option selected",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_UNREAD="Mark as unread option selected",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_READ="Mark as read option selected",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_DELETE="Delete comment option selected",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_REPLY="User click add a reply button",Constants.CUSTOM_EVENT_COMMENT_COPY_TEXT="Copy text comment option selected",Constants.CUSTOM_EVENT_COMMENT_COPY_TEXT_TOAST_SHOWN="Comment copied toast shown",Constants.CUSTOM_EVENT_COMMENT_COPY_LINK_TO_COMMENT="Copy link to comment option selected",Constants.CUSTOM_EVENT_COMMENT_LINK_TO_COMMENT_COPIED_TOAST_SHOWN="Link to comment copied toast shown",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_EDIT="User click edit button",Constants.CUSTOM_EVENT_COMMENT_PREVIEW_OVERFLOW_MENU="User clicked overflow menu",Constants.TIME_POSTED_TODAY="day",Constants.TIME_POSTED_YESTERDAY="yesterday",Constants.TIME_POSTED_DAY_BEFORE_YESTERDAY="day_before_yesterday",Constants.TIME_POSTED_LAST_WEEK="lastweek",Constants.CUSTOM_EVENT_TEXTBOX_BLUR="textboxBlur",Constants.CUSTOM_EVENT_TEXTBOX_POST="post",Constants.CUSTOM_EVENT_TEXTBOX_CANCEL="textBoxCancelClick",Constants.CUSTOM_EVENT_EXITING_DRAFT_COMMENT_REPLY_ERROR="triggerExistingDraftCommentReplyError",Constants.CUSTOM_EVENT_TEXTBOX_BLUR_NCP="inlineCommentingBlur",Constants.CUSTOM_EVENT_TEXTBOX_NCP_TEXTBOX_EMPTY="ncptextboxEmpty",Constants.SUBTYPE_NOTE="note",Constants.PERSON="Person",Constants.FROM_CLIENT="fromClient",Constants.FROM_SERVER="fromServer",Constants.STICKY_SERVER_HEIGHT_WIDTH=17,Constants.VOICE_NOTE_HEIGHT_WIDDTH=24,Constants.UNSUPPORTED_ANNOT_MARGIN=28,Constants.FREEDRAW_CURSOR_HOTSPOT_X=2,Constants.FREEDRAW_CURSOR_HOTSPOT_Y=17,Constants.FREEDRAW_CURSOR_HOTSPOT_X_LOW_RES=5,Constants.FREEDRAW_CURSOR_HOTSPOT_Y_LOW_RES=22,Constants.HIGHLIGHT_DRAWING_HOTSPOT_X=2,Constants.HIGHLIGHT_DRAWING_HOTSPOT_Y=15,Constants.HIGHLIGHT_DRAWING_HOTSPOT_X_LOW_RES=5,Constants.HIGHLIGHT_DRAWING_HOTSPOT_Y_LOW_RES=20,Constants.HIGHLIGHT_CURSOR_HOTSPOT_X=9,Constants.HIGHLIGHT_CURSOR_HOTSPOT_Y=10,Constants.HIGHLIGHT_WITH_NOTE_CURSOR_HOTSPOT_X=20,Constants.HIGHLIGHT_WITH_NOTE_CURSOR_HOTSPOT_Y=15,Constants.STICKY_CURSOR_HOTSPOT_X=8,Constants.STICKY_CURSOR_HOTSPOT_Y=7,Constants.FREETEXT_DEFAULT_WIDTH=15,Constants.FREETEXT_MIN_FONT_SIZE=6,Constants.FREETEXT_DEFAULT_FONT_SIZE=12,Constants.FREETEXT_MAX_FONT_SIZE=24,Constants.FREETEXT_PADDING=7,Constants.ENABLE_FREE_TEXT_COMMENT="enable-free-text-comment",Constants.REDHAWK_TOOLTIP_TIMEOUT=5e3,Constants.REDHAWK_DEFAULT_OPACITY=.4,Constants.REDHAWK_DEFAULT_STICKY_NOTE_OPACITY=.8,Constants.REDHAWK_DEFAULT_HIGHLIGHT_OPACITY=.4,Constants.DEFAULT_COMMENT_SELECTION_FACTOR=1.25,Constants.DEFAULT_REDHAWK_COMMENT_TYPE="AdobeAnnoSelector",Constants.URI_COMMENT_ID="comment_id",Constants.PARCEL_PUBLIC_SHARING="PARCEL_PUBLIC_SHARING",Constants.ADD_REVIEWER_VERSION=2,Constants.URI_MEGAVERB="viewer!megaVerb",Constants.DEFAULT_RHP_ACTIVE_PARAM="defaultRHPFeature",Constants.REDHAWK_STICKY_HIGHLIGHT_STROKE_WIDTH_PARAM="highlightToolStrokeWidth",Constants.COMMENTS_PANEL_ID="comments",Constants.VIEWPORT_MARGIN=30,Constants.Y_VIEWPORT_MARGIN=60,Constants.REDHAWK_DEFAULT_STROKE_WIDTH=3,Constants.REDHAWK_FREE_HIGHLIGHT_STROKE_WIDTH=14,Constants.REDHAWK_PREVIEW_MARGIN_BOTTOM=15,Constants.COMMENTS_BACKGROUND_DIV_WIDTH=325,Constants.DEFAULT_SCROLL_BAR_WIDTH=15,Constants.REDHAWK_COMMENT_POPUP_LEFT_MARGIN=8,Constants.NOTE_ICON_MARGIN=19,Constants.MODERN_NOTE_ICON_MARGIN=23,Constants.IMAGE_APPEARANCE_DEFAULT_SCALE=300/72,Constants.SHAPE_MAX_STROKE_WIDTH=12,Constants.HIGHLIGHT_MAX_STROKE_WIDTH=72,Constants.SMOOTHENING_THRESHOLD=15,Constants.LEFT_CLICK_IMAGE_CONTEXT_MENU_BBOX_HEIGHT_WIDTH=17,Constants.STICKY_NOTE_MARGIN=10,Constants.DEFAULT_FREE_HIGHLIGHT_OPACITY=.5,Constants.MODERN_MARKUP_BORDER_COLOR="#1473e6",Constants.FREETEXT_BORDER_COLOR="#1473e6",Constants.FREEHAND_MARKUP_BORDER_WIDTH=3,Constants.MODERN_MARKUP_BORDER_WIDTH=2,Constants.MODERN_MARKUP_HOVER_BORDER_WIDTH=1.5,Constants.FREEHAND_RESIZE_RECT_BORDER=5,Constants.CORNER_CIRCLE_FILL_COLOR="white",Constants.REPLACE_COLOR="#FFA500",Constants.INSERT_COLOR="#5D3FD3",Constants.REDHAWK_COMMENT_REPLACE="replace",Constants.REDHAWK_COMMENT_INSERT="insert",Constants.REDHAWK_YELLOW_COLOR="#F8D147",Constants.REDHAWK_TENN_COLOR="#EE7830",Constants.REDHAWK_DEFAULT_COLOR="#EE7830",Constants.WHITE_COLOUR="#ffffff",Constants.REDHAWK_MAIN_BG_COLOR="var(--docViewBgColorAfterFileLoad)",Constants.PC_MAIN_BG_COLOR="var(--docViewBgColorBeforeFileLoad)",Constants.UNREAD_DIV_COLOR="rgba(173, 223, 255, 0.18)",Constants.REVIEW_FOOTER_HEIGHT=50,Constants.COMMENT_POPUP_BOTTOM_PADDING=30,Constants.PAGE_TOP_TO_FIRST_COMMENT_DIFF=165,Constants.PAGE_TOP_OFFSET=112,Constants.RESOLVE_ICON_COLOR="#4b4b4b",Constants.RESOLVE_ANNOT_COLOR="#cacaca",Constants.DEFAULT_NOTE_COLOR="#FFC100",Constants.DEFAULT_SHAPE_COLOR="#DB3425",Constants.DEFAULT_HIGHLIGHT_COLOR="#FFC100",Constants.DEFAULT_UNDERLINE_COLOR="#068A1C",Constants.DEFAULT_STRIKEOUT_COLOR="#DB3425",Constants.DEFAULT_FREETEXT_COLOR="#000000",Constants.STRIKETHROUGH_ANNOT_COLOR="#D3393F",Constants.AT_THE_RATE=50,Constants.DEL_KEY_MAC=8,Constants.DEL_KEY_WINDOWS=46,Constants.ENTER_KEY=13,Constants.ESC_KEY=27,Constants.TAB_KEY=9,Constants.PERIOD_KEY=190,Constants.COMMA_KEY=188,Constants.REDHAWK_COMMENT_HIGHLIGHT="highlight",Constants.REDHAWK_COMMENT_HIGHLIGHTNOTE="highlightNote",Constants.REDHAWK_COMMENT_STRIKEOUT="strikeout",Constants.REDHAWK_COMMENT_UNDERLINE="underline",Constants.REDHAWK_COMMENT_SHAPE="shape",Constants.REDHAWK_COMMENT_NOTE="note",Constants.REDHAWK_COMMENT_FREETEXT="freetext",Constants.REDHAWK_COMMENT_SOUND="sound",Constants.REDHAWK_ERASER="eraser",Constants.REDHAWK_COMMENT_UNSUPPORTED="unsupported",Constants.REDHAWK_COMMENT_COLORPICKER="colorpicker",Constants.REDHAWK_COMMENT_SCALE="scale",Constants.REDHAWK_UNDO="undo",Constants.REDHAWK_REDO="redo",Constants.REDHAWK_COMMENT_GRADIENT="gradient",Constants.SEPARATOR_LINE="line",Constants.FREE_HIGHLIGHT_INTENT="InkHighlight",Constants.FREE_HIGHLIGHT_SUBJECT="Highlight",Constants.SHAPE_SUBJECT="Pencil",Constants.QUICK_COMMENTS="quickComments",Constants.REPLY_SUGGESTIONS="replySuggestions",Constants.API_SUPPORTED_COMMENTS=[r.REDHAWK_COMMENT_HIGHLIGHT,r.REDHAWK_COMMENT_STRIKEOUT,r.REDHAWK_COMMENT_UNDERLINE,r.REDHAWK_COMMENT_NOTE,r.REDHAWK_COMMENT_SHAPE,r.REDHAWK_COMMENT_FREETEXT,r.REDHAWK_COMMENT_INSERT,r.REDHAWK_COMMENT_REPLACE],Constants.TOOL_ID_MAP={"verb-comment-stickynote":r.REDHAWK_COMMENT_NOTE,"verb-comment-text":r.REDHAWK_COMMENT_FREETEXT,"verb-comment-highlight":r.REDHAWK_COMMENT_HIGHLIGHT,"verb-comment-underline":r.REDHAWK_COMMENT_UNDERLINE,"verb-comment-strikeout":r.REDHAWK_COMMENT_STRIKEOUT,"verb-comment-draw":r.REDHAWK_COMMENT_SHAPE,"verb-comment-replace":r.REDHAWK_COMMENT_REPLACE,"verb-comment-insert":r.REDHAWK_COMMENT_INSERT},Constants.SHARED_SUPPORTED_COMMENTS=[r.REDHAWK_COMMENT_HIGHLIGHT,r.REDHAWK_COMMENT_STRIKEOUT,r.REDHAWK_COMMENT_UNDERLINE,r.REDHAWK_COMMENT_NOTE,r.REDHAWK_COMMENT_SHAPE,r.REDHAWK_COMMENT_REPLACE,r.REDHAWK_COMMENT_INSERT],Constants.API_EVENTS={ANNOTATION_ADDED:"ANNOTATION_ADDED",ANNOTATION_UPDATED:"ANNOTATION_UPDATED",ANNOTATION_DELETED:"ANNOTATION_DELETED",ANNOTATION_SELECTED:"ANNOTATION_SELECTED",ANNOTATION_UNSELECTED:"ANNOTATION_UNSELECTED",ANNOTATION_MODE_STARTED:"ANNOTATION_MODE_STARTED",ANNOTATION_MODE_ENDED:"ANNOTATION_MODE_ENDED",ANNOTATION_CLICKED:"ANNOTATION_CLICKED",ANNOTATION_MOUSE_OVER:"ANNOTATION_MOUSE_OVER",ANNOTATION_MOUSE_OUT:"ANNOTATION_MOUSE_OUT",ANNOTATION_COUNT:"ANNOTATION_COUNT",ANNOTATION_ADDED_FROM_BOTTOM_BAR:"ANNOTATION_ADDED_FROM_BOTTOM_BAR"},Constants.QUICKTOOLS_COMMENT_STICKYNOTE="note",Constants.QUICKTOOLS_COMMENT_DRAW="shape",Constants.QUICKTOOLS_COMMENT_HIGHLIGHT="highlight",Constants.QUICKTOOLS_COMMENT_UNDERLINE="underline",Constants.QUICKTOOLS_COMMENT_STRIKEOUT="strikeout",Constants.QUICKTOOLS_COMMENT_FREETEXT="freetext",Constants.QUICKTOOLS_COMMENT_ERASER="eraser",Constants.QUICKTOOLS_COMMENT_REPLACE="replace",Constants.QUICKTOOLS_COMMENT_INSERT="insert",Constants.QUICKTOOLS_TRANSLATIONS=Object.freeze({[r.QUICKTOOLS_COMMENT_STICKYNOTE]:"quicktool.note",[r.QUICKTOOLS_COMMENT_DRAW]:"modernViewerColorpickerDrawTooltip",[r.QUICKTOOLS_COMMENT_HIGHLIGHT]:"quicktool.highlight",[r.QUICKTOOLS_COMMENT_REPLACE]:"quicktool.replace",[r.QUICKTOOLS_COMMENT_INSERT]:"quicktool.insert",[r.QUICKTOOLS_COMMENT_UNDERLINE]:"quicktool.underline",[r.QUICKTOOLS_COMMENT_STRIKEOUT]:"quicktool.strikeout",[r.QUICKTOOLS_COMMENT_FREETEXT]:"quicktool.freetext",[r.QUICKTOOLS_COMMENT_ERASER]:"quicktool.eraser"}),Constants.TOPBAR_FREEHAND_TOOLNAME="freehandTool",Constants.TOPBAR_STICKYNOTE_TOOLNAME="stickyNote",Constants.TOPBAR_HIGHLIGHT_TOOLNAME="highlight",Constants.TOPBAR_UNDERLINE_TOOLNAME="underline",Constants.TOPBAR_STRIKEOUT_TOOLNAME="strikeout",Constants.TOPBAR_FREETEXT_TOOLNAME="freetext",Constants.TOPBAR_ERASER_TOOLNAME="eraserTool",Constants.TOPBAR_REPLACE_TOOLNAME="replaceTool",Constants.TOPBAR_INSERT_TOOLNAME="insertTool",Constants.REDHAWK_COMMENT_COLORPICKER_TOOLNAME="colorpicker",Constants.REDHAWK_FONTSIZE_SCALE_TOOLNAME="fontsizeScale",Constants.REDHAWK_STROKEWIDTH_SCALE_TOOLNAME="strokewidthScale",Constants.REDHAWK_HIGHLIGHT_THICKNESS_SCALE_TOOLNAME="HighlightThicknessScale",Constants.CUSTOM_EVENT_ELLIPSIS_EDIT="editClick",Constants.CUSTOM_EVENT_ELLIPSIS_DELETE="deleteClick",Constants.CUSTOM_EVENT_READ_CLICK="readClick",Constants.CUSTOM_EVENT_UNREAD_CLICK="unreadClick",Constants.CUSTOM_EVENT_ELLIPSIS_RESOLVE="resolveClick",Constants.CUSTOM_EVENT_ELLIPSIS_UNRESOLVE="unresolveClick",Constants.CUSTOM_EVENT_ELLIPSIS_COPY_TEXT="copyTextClick",Constants.CUSTOM_EVENT_ELLIPSIS_COPY_LINK_TO_COMMENT="copyLinkToCommentClick",Constants.CUSTOM_EVENT_NUDGING="adobe:comments:nudging",Constants.OPERATOR_ADD="+",Constants.OPERATOR_MULTIPLY="*",Constants.OPERATOR_SUBTRACT="-",Constants.OPERATOR_DIVIDE="/",Constants.HEIGHT_OF_TOP_BAR=97,Constants.WIDTH_OF_LEFT_BAR=49,Constants.CONTEXT_MENU_HEIGHT=40,Constants.CONTEXT_MENU_WIDTH=158,Constants.CONTEXT_MENU_MARGIN=8,Constants.MOBILE_MENU_ITEM_HEIGHT=37,Constants.MOBILE_MENU_GAP=2,Constants.MOBILE_MENU_ITEM_WIDTH=140,Constants.CONTACT_SYNC_INTERVAL=7e3,Constants.BOTTOMBAR_COMMENT_PREVIEW_DURATION=3e3,Constants.GUEST_AFFILIATION="guest",Constants.UNAUTHORIZED_STATUS=401,Constants.PRE_CONDITION_FAILURE_STATUS=412,Constants.FORBIDDEN_ACTION_FAILURE_STATUS=403,Constants.REACTIONS_LIMIT_REACHED_STATUS="reactionsLimitReachedStatus",Constants.REDHAWK_REACTIONS_LIMIT_PER_ANNOT=20,Constants.DROPIN_ID="dc-comments",Constants.TEST_CAPTCHA_SITE_KEY="TEST_CAPTCHA_SITE_KEY",Constants.PROD_CAPTCHA_SITE_KEY="6LcuP04UAAAAAK5qbcdvgz9GYLk1P33z4Ln-lF6Q",Constants.STAGE_CAPTCHA_SITE_KEY="6LdeOU4UAAAAAG4OaA939sGRW2c6Krsad3c_TgBw",Constants.DEV_CAPTCHA_SITE_KEY="6Ld6ZUsUAAAAADIux6hVVu6Y69mN9v-Lu0bHYHA-",Constants.TEXT_SELECTION="textSelection",Constants.COMMENT_SELECTED="commentSelected",Constants.COLOR_PICKER="colorPicker",Constants.SCALE_ANNOT="scaleAnnot",Constants.RIGHT_CLICK="rightClick",Constants.IMAGE_CLICK="imageClick",Constants.SPACE_CLICK="spaceClick",Constants.EDIT="edit",Constants.RESOLVE="resolve",Constants.UNRESOLVE="unresolve",Constants.ADD_REACTION="add",Constants.REMOVE_REACTION="remove",Constants.NOT_APPLICABLE="notApplicable",Constants.COMMENT_OP_ADD="add",Constants.COMMENT_OP_REPLACE="replace",Constants.COMMENT_PATH_BODYVALUE="/bodyValue",Constants.COMMENT_PATH_MENTIONS="/mentions",Constants.COMMENT_PATH_SELECTOR="/target/selector",Constants.COMMENT_PATH_STATUS="/status",Constants.COMMENT_PATH_REACTIONS="/perUserPerAnnotation/myReactions/",Constants.COMMENT_PATH_ASSET_VERSION="/assetVersion",Constants.REDIRECT_PARAM_X_API_CLIENT_ID="shared_recipient",Constants.REDIRECT_PARAM_X_API_CLIENT_LOCATION_REVIEW="review",Constants.REDIRECT_PARAM_X_API_CLIENT_LOCATION_REVIEW_DOWNLOAD="review_download",Constants.CONSENT_DONE="done",Constants.DEFAULT_TOOLS_MAP={[r.REDHAWK_COMMENT_FREETEXT]:r.DEFAULT_FREETEXT_COLOR,[r.REDHAWK_COMMENT_NOTE]:r.DEFAULT_NOTE_COLOR,[r.REDHAWK_COMMENT_SHAPE]:r.DEFAULT_SHAPE_COLOR,[r.REDHAWK_COMMENT_HIGHLIGHT]:r.DEFAULT_HIGHLIGHT_COLOR,[r.REDHAWK_COMMENT_UNDERLINE]:r.DEFAULT_UNDERLINE_COLOR,[r.REDHAWK_COMMENT_STRIKEOUT]:r.DEFAULT_STRIKEOUT_COLOR,[r.REDHAWK_COMMENT_REPLACE]:r.REPLACE_COLOR,[r.REDHAWK_COMMENT_INSERT]:r.INSERT_COLOR},Constants.NOTE="Note",Constants.REPLY="Reply",Constants.MODERN_VIEWER_DEEPLINK="ModernViewerDeepLink",Constants.MODERN_VIEWER_QUICKTOOLS="ModernViewerQuickTools",Constants.MODERN_VIEWER_STICKYTOOLS="ModernViewerStickyTools",Constants.MODERN_VIEWER_MORE_TOOLS="ModernViewerMoreTools",Constants.MOBILE_MODERN_VIEWER_CONTEXT_MENU="MobileMvContextMenu",Constants.MODERN_VIEWER_CONTEXT_MENU="ViewerContextMenu",Constants.MODERN_VIEWER_SKINNY_RAIL="ModernViewerSkinnyRail",Constants.COMMENTS_TOOLBAR="CommentsToolBar",Constants.CONTEXT_MENU="ContextMenu",Constants.VERB_COMMENT_HIGHLIGHT="verb-comment-highlight",Constants.VERB_HIGHLIGHT_WITH_COMMENT="verb-comment-highlight-note",Constants.VERB_COMMENT_STRIKEOUT="verb-comment-strikeout",Constants.VERB_COMMENT_UNDERLINE="verb-comment-underline",Constants.VERB_COMMENT_STICKYNOTE="verb-comment-stickynote",Constants.VERB_COMMENT_TEXT="verb-comment-text",Constants.VERB_COMMENT_DRAW="verb-comment-draw",Constants.VERB_COMMENT_COLOR_PICKER="verb-comment-color-picker",Constants.VERB_COMMENT_DELETE="verb-comment-delete",Constants.VERB_COMMENT_STROKE_WIDTH="verb-comment-stroke-width",Constants.VERB_COMMENT_REPLY="verb-comment-reply",Constants.VERB_PREVIEW_PAN="preview-pan",Constants.VERB_COMMENT_REPLACE="verb-comment-replace",Constants.VERB_COMMENT_INSERT="verb-comment-insert",Constants.VERB_COMMENT_SUGGEST="verb-comment-suggest",Constants.VERB_COMMENT_TEXTBOX="verb-comment-textbox",Constants.DROPIN_COMMENTS="comments",Constants.DROPIN_BB_COLLAB="bottom-banner-collab",Constants.VERB_COMMENT_QUICK_COMMENT_1="verb-comment-quick-comment-1",Constants.VERB_COMMENT_QUICK_COMMENT_2="verb-comment-quick-comment-2",Constants.VERB_COMMENT_QUICK_COMMENT_3="verb-comment-quick-comment-3",Constants.VERB_COMMENT_QUICK_COMMENT_4="verb-comment-quick-comment-4",Constants.VERB_COMMENT_QUICK_COMMENT_5="verb-comment-quick-comment-5",Constants.QUICK_COMMENT_VERBS_MAP={"verb-comment-quick-comment-1":{label:"label.quickcomment.looksGreat",ariaLabel:"label.quickcomment.looksGreat",tooltip:"label.quickcomment.looksGreat",analytics:"Looks Great"},"verb-comment-quick-comment-2":{label:"label.quickcomment.approved",ariaLabel:"label.quickcomment.approved",tooltip:"label.quickcomment.approved",analytics:"Approved"},"verb-comment-quick-comment-3":{label:"label.quickcomment.heartSuite",ariaLabel:"label.quickcomment.heartSuite",tooltip:"label.quickcomment.heartSuite",analytics:"Heart"},"verb-comment-quick-comment-4":{label:"label.quickcomment.100",ariaLabel:"label.quickcomment.100",tooltip:"label.quickcomment.100",analytics:"100"},"verb-comment-quick-comment-5":{label:"label.quickcomment.goodpoint",ariaLabel:"label.quickcomment.goodpoint",tooltip:"label.quickcomment.goodpoint",analytics:"Good Point"}},Constants.VERB_COMMENTS_FTE="comments-fte",Constants.TARGET_PRODUCTIVITY_CONTEXT_MENU="productivity_contextMenu",Constants.TARGET_PRODUCTIVITY_COMMENTS_PANEL="productivity_commentPanel",Constants.TARGET_PRODUCTIVITY_QUICK_ACTION="productivity_quickAction",Constants.PAGE_LEVEL_COMMENT_CONTAINER="PAGE_LEVEL_COMMENT_CONTAINER",Constants.TARGET_BUILTIN_TOOLTIP="builtIn",Constants.LOCAL_STORAGE_LOCATION="FTE_BUILT_IN_TOOL_TIP_COUNT",Constants.CONTEXT_MENU_PLACEMENT_HEADER="CONTEXT_MENU_HEADER",Constants.CONTEXT_MENU_PLACEMENT_BODY="CONTEXT_MENU_BODY",Constants.CONTEXT_MENU_PLACEMENT_PRE_HEADER="CONTEXT_MENU_PRE_HEADER",Constants.SELECTION_TOOLS=[r.REDHAWK_COMMENT_HIGHLIGHT,r.REDHAWK_COMMENT_STRIKEOUT,r.REDHAWK_COMMENT_UNDERLINE],Constants.HIGHLIGHT_TOOLS=[r.VERB_COMMENT_HIGHLIGHT,r.VERB_COMMENT_UNDERLINE,r.VERB_COMMENT_STRIKEOUT],Constants.STICKYNOTE_TOOLS=[r.VERB_COMMENT_STICKYNOTE,r.VERB_COMMENT_TEXT,r.VERB_COMMENT_REPLACE,r.VERB_COMMENT_INSERT],Constants.DRAW_TOOLS=[r.VERB_COMMENT_DRAW],Constants.COMMENTS_PANEL_VIEWPORT_TOP=30,Constants.COMMENTS_PANEL_VIEWPORT_BOTTOM=30,Constants.COMMENTS_OVERLAY_VIEWPORT_OFFSET_TOP=64,Constants.COMMENTS_MOBILE_VIEWPORT_BUFFER=50,Constants.HC_THEME_CHANGE_EVT="hcThemeChange",Constants.COMMENTS_PANEL_VISIBILITY_CHANGED_EVT="commentsPanelVisibilityChanged",Constants.IMAGE_CONTENT_TYPE="IMAGE",Constants.TEXT_CONTENT_TYPE="TEXT",Constants.LINK_CONTENT_TYPE="HYPERLINK",Constants.HC_OPACITY=1,Constants.CREATE_COMMENTS_BATCH_SIZE=100,Constants.DELETE_COMMENTS_BATCH_SIZE=100,Constants.DEBOUCE_TIMEOUT=250,Constants.COLOR_PALETTE=["#1373EB","#068A1C","#FFC100","#FF6200","#DB3425","#C037C4","#9643FC","#38E5FF","#C5FB72","#FCF485","#FFA97B","#F86464","#FB88FF","#DCAAFF","#FFFFFF","#CCCCCC","#AAAAAA","#767676","#444444","#333333","#000000"],Constants.DARK_PAGE_THEME_INVERT_COLORS=["#000000","#ffffff"],Constants.COLOR_PALETTE_SET=new Set(r.COLOR_PALETTE),Constants.COLORS_MAP={[r.COLOR_PALETTE[0]]:"colorPicker.colorMap.blue",[r.COLOR_PALETTE[1]]:"colorPicker.colorMap.green",[r.COLOR_PALETTE[2]]:"colorPicker.colorMap.yellow",[r.COLOR_PALETTE[3]]:"colorPicker.colorMap.orange",[r.COLOR_PALETTE[4]]:"colorPicker.colorMap.red",[r.COLOR_PALETTE[5]]:"colorPicker.colorMap.fuchsia",[r.COLOR_PALETTE[6]]:"colorPicker.colorMap.purple",[r.COLOR_PALETTE[7]]:"colorPicker.colorMap.lightBlue",[r.COLOR_PALETTE[8]]:"colorPicker.colorMap.lightGreen",[r.COLOR_PALETTE[9]]:"colorPicker.colorMap.lightYellow",[r.COLOR_PALETTE[10]]:"colorPicker.colorMap.lightOrange",[r.COLOR_PALETTE[11]]:"colorPicker.colorMap.lightRed",[r.COLOR_PALETTE[12]]:"colorPicker.colorMap.lightFuchsia",[r.COLOR_PALETTE[13]]:"colorPicker.colorMap.lightPurple",[r.COLOR_PALETTE[14]]:"colorPicker.colorMap.white",[r.COLOR_PALETTE[15]]:"colorPicker.colorMap.paleGray",[r.COLOR_PALETTE[16]]:"colorPicker.colorMap.lightGray",[r.COLOR_PALETTE[17]]:"colorPicker.colorMap.mediumGray",[r.COLOR_PALETTE[18]]:"colorPicker.colorMap.darkGray",[r.COLOR_PALETTE[19]]:"colorPicker.colorMap.darkerGray",[r.COLOR_PALETTE[20]]:"colorPicker.colorMap.black"},Constants.COLOR_NAMES=["colorPicker.colorMap.blue","colorPicker.colorMap.green","colorPicker.colorMap.yellow","colorPicker.colorMap.orange","colorPicker.colorMap.red","colorPicker.colorMap.fuchsia","colorPicker.colorMap.purple","colorPicker.colorMap.lightBlue","colorPicker.colorMap.lightGreen","colorPicker.colorMap.lightYellow","colorPicker.colorMap.lightOrange","colorPicker.colorMap.lightRed","colorPicker.colorMap.lightFuchsia","colorPicker.colorMap.lightPurple","colorPicker.colorMap.white","colorPicker.colorMap.paleGray","colorPicker.colorMap.lightGray","colorPicker.colorMap.mediumGray","colorPicker.colorMap.darkGray","colorPicker.colorMap.darkerGray","colorPicker.colorMap.black"],Constants.ADD_REVIEW_API_VERSION=2,Constants.COACHMARK_POSITION={[r.TARGET_PRODUCTIVITY_QUICK_ACTION]:"right top",[r.TARGET_PRODUCTIVITY_CONTEXT_MENU]:"left bottom",[r.TARGET_PRODUCTIVITY_COMMENTS_PANEL]:"left top"},Constants.ANNOT_HOVER_TIMEOUT=4e3,Constants.NEW_ANNOT_ICON_HOVER_TIMEOUT=5e3,Constants.THUMBS_UP_EMOT="thumbsUp",Constants.PARTY_EMOT="party",Constants.PRAISE_EMOT="praise",Constants.EMOTICONS_MAP={[r.THUMBS_UP_EMOT]:"&#128077;",[r.PARTY_EMOT]:"&#127881;",[r.PRAISE_EMOT]:"&#128588;"},Constants.OPEN_SUGGESTED_COMMENTS_POPOVER=15e3,Constants.CLOSE_SUGGESTED_COMMENTS_POPOVVER=15e3,Constants.SHOW_OPTIONS_TOOLTIP=5e3,Constants.REACTION_DEBOUNCE=1e3,Constants.EXPANDED_SUGGESTED_COMMENTS_COUNT="expandedSuggestedCommentsCount",Constants.DISABLE_EXPANDED_SUGGESTED_COMMENTS="disableExpandedSuggestedComments",Constants.EXPANDED_SUGGESTED_COMMENTS_MAX_COUNT=3,Constants.SUGGESTED_COMMENT_TYPE_EMOT="Emot",Constants.SUGGESTED_COMMENT_TYPE_STRING="String",Constants.DRAFT_COMMENTING_FLOODGATE_FLAG="dc-web-draftcomment",Constants.ONE_CLICK_DRAFT_TARGET_ID="DCWeb_1Click_draft",Constants.EMOJI_REACTIONS_FLOODGATE_FLAG="dc-web-emoji-reactions",Constants.AUTO_MENTION_FLOODGATE_FLAG="dc-web-auto-mention",Constants.AUTO_MENTION_PREFERENCE_FLOODGATE_FLAG="dc-web-automention-preference",Constants.SUGGESTED_MENTION_DELETE_COUNT="suggestedMentionDeleteCount",Constants.INLINE_PREFERENCE_FLOODGATE_FLAG="dc-web-inlinepreference",Constants.COMMENT_TEXTBOX_TARGET_ID="DCWeb_comment_textbox",Constants.COMMENT_INTENT_DRIVEN_REVIEW_TARGET_ID="DCWeb_comment_intent_driven_review",Constants.COMMENT_STICKY_NOTE_LANDING_TARGET_ID="DCWeb_comment_stickynote_landing",Constants.KEYBOARD_SHORTCUT_TARGET_ID="DCWeb_edit_keyboard_shortcut_caret_mode_shared_files",Constants.PENDING_COMMENT_SS_KEY="pendingComment",Constants.GUEST_USERNAME_LS_KEY="guestUsername",Constants.GUEST_USERNAME_PREFIX="Guest ",Constants.COMMENT_GUIDE_USER_TARGET_ID="DCWeb_comment_guide_user",Constants.MOUSELEFTBUTTON=0,Constants.MOUSE_RIGHT_BUTTON=2,Constants.PAGES_VIEW_MARGIN_LEFT=66,Constants.COMMENT_PREVIEW_MARGIN=20,Constants.COMMENT_PREVIEW_DELTA=10,Constants.INPUT_TAG_NAME="INPUT",Constants.EDITABLE_DIV_ROLE="textbox",Constants.TEXTAREA_TAG_NAME="TEXTAREA",Constants.PIN_TOOL_ID="pin-tool-qt",Constants.PIN_TOOL_PREFS="pin-tool-prefs",Constants.PIN_TOOLTIP_SHOW_TIMEOUT=5e3,Constants.PIN_TOOLTIP_MAX_SHOW_TIMES=3,Constants.PIN_TOOLTIP_SHOWN="pin-tooltip-shown",Constants.PIN_TOOLTIP_SHOW_COUNT="pin-tooltip-show-count",Constants.PIN_TOOL_USED="pin-tool-used",Constants.ADD_COMMENT="comment.addComment",Constants.ADD_A_COMMENT="comment.addAComment",Constants.SELECT_VERB="preview-select",Constants.TEXT_LENGTH=Object.freeze({OKAY:"OKAY",WARNING:"WARNING",EXCEEDED:"EXCEEDED"}),Constants.DISCLAIMER_TYPE=Object.freeze({ERROR:"ERROR",WARNING:"WARNING",POPUP_WARNING:"POPUP_WARNING",POPUP_ERROR:"POPUP_ERROR"}),Constants.THEMES=Object.freeze({DARK:"dark",LIGHT:"light"}),Constants.ERROR_TOAST_TIMEOUT=5e3,Constants.GUIDE_USER_TOAST=1e4,Constants.LANDING_EXPERIENCE_TOAST_TIMEOUT=15e3,Constants.EDIT_TOOLSBOARD_GROUP_ID="group-edit",Constants.COMMENTING_DISABLED_TOOLTIP_TIMEOUT=5e3,Constants.AVATAR_IMAGE_SIZE="50",Constants.KEYBOARD_KEY_TEXT=Object.freeze({COMMAND:"",CONTROL:"Ctrl",SHIFT:"Shift",ENTER:"Enter",RETURN:"Return",Z:"Z",COMMA:",",PERIOD:"."}),Constants.COMMENT_PLACEHOLDERS=["comment","question","suggestion"],Constants.ANON_RHP_TARGET_ID="DCWeb_Collab_Anon_RHP",Constants.COMMENT_STARTERS_TARGET_ID="DCWeb_Collab_Comment_Starters",Constants.REPLY_SUGGESTIONS_TARGET_ID="DCWeb_Collab_Reply_Suggestions",Constants.GEN_AI_SHARE_FUNNEL_TARGET_ID="DCWeb_GenAI_comment_panel",Constants.GENAI_COLLAB_NBA_TARGET_ID="DCWeb_GenAI_Collab_NBA",Constants.QUICK_COMMENT_VERBS_FLOODGATE_FLAG="dc-web-quick-comments",Constants.ONE_CLICK_COMMENT_FLOODGATE_FLAG="dc-web-one-click-comment",Constants.HYPERLINK_FLOODGATE_FLAG="dc-web-hyperlink",Constants.NEW_COMMENT_POPUP_FLOODGATE_FLAG="dc-web-newcommentpopup",Constants.MR_PREVIEW_NAV_FLOODGATE_FLAG="dc-web-preview-nav",Constants.MR_PREVIEW_REPLY_FLOODGATE_FLAG="dc-web-preview-reply",Constants.ADD_TEXT_COMMENT_FLOODGATE_FLAG="dc-web-addtextcomment",Constants.VIEW_COMMENTS_IN_MWEB_FLOODGATE_FLAG="dc-web-view-comments-in-mweb",Constants.MENTION_TOOLTIP_TIMEOUT=5e3,Constants.INVITE_TOOLTIP_MAX_COUNT=3,Constants.LS_TOOLTIP_ASSET_KEY="tooltipShownForURI",Constants.COMMENTS_DROPIN_ID="comments",Constants.UPSELL_BUTTON_ID="upsellButton",Constants.QUICK_COMMENTING_TOGGLE_KEY=`${r.COMMENTS_PANEL_ID}.${r.QUICK_COMMENTS}`,Constants.REPLY_SUGGESTIONS_TOGGLE_KEY=`${r.COMMENTS_PANEL_ID}.${r.REPLY_SUGGESTIONS}`,Constants.COMMENTS_STORAGE_KEY="comments",Constants.ALLOWED_COMMENT_TOOLTIP_MAX_COUNT="allowedCommentTooltipMaxCount",Constants.ALLOWED_COMMENT_TOOLTIP_MAX_COUNT_LIMIT=3,Constants.IS_COMMENT_POSTED_IN_SESSION="isCommentPostedForSession",Constants.PREV_SESSION_ID="prevSessionId",Constants.CURR_SESSION_ID="ingestSessionId",Constants.REDLINING_FEATURE_FLAG="dc-web-redlining-annots",Constants.REDLINING_IMPROVEMENT_FLAG="dc-web-redlining-enhance",Constants.ADD_EMOJI_REACTION_TOOLTIP_MAX_COUNT=3,Constants.ADD_EMOJI_REACTION_TOOLTIP_KEY="addEmojiReactionTooltipCount",Constants.ENABLE_TOOLS_MULTIDOC="enable-tools-multidoc",Constants.GUEST_USER_EMOJI_REACTIONS="selectedGuestEmoji",Constants.GUEST_USER_EMOJI_REACTIONS_COMMENT_ID="selectedGuestEmojiCommentId",Constants.GEN_AI_PROMPT_BUTTON_PROMPTS=["comment.rhp.genAIPrompt.topButton","comment.rhp.genAIPrompt.middleButton","comment.rhp.genAIPrompt.bottomButton"],Constants.VERB_QANDA="verb-qanda",Constants.VERB_OUTLINE="verb-outline",Constants.VERB_COMMENTS="comments",Constants.CLICK_CONTEXT_GENAI_PROMPT_CARD="GenAIPromptCard",Constants.CLICK_CONTEXT_GENAI_PROMPT_ONE_CLICK="GenAIPromptOneClick",Constants.GUIDE_USER_ONBOARDING_TOOLS=["comment.rhp.guideUserOnBoarding.addCommentsOnPage","comment.rhp.guideUserOnBoarding.addCommentsOnText","comment.rhp.guideUserOnBoarding.markArea"],Constants.ANALYTICS_ATTRIBUTES={menu_location:"adb.event.context.dc.participate.use.menu_location",triggertype:"adb.event.context.dc.participate.use.triggertype",clickcontext:"adb.event.context.dcweb.clickcontext",firsttoolselected:"adb.event.context.dc.participate.use.firsttoolselected",timetofirsttoast:"adb.event.context.dc.participate.use.timetofirsttoast"},Constants.MWEB_CLICK_CONTEXT=Object.freeze({INDIVIDUAL_COMMENT:"IndividualComment",FULL_COMMENT_PANEL:"FullCommentPanel"}),Constants.VIEW_MODE=Object.freeze({FULL:"full",HALF:"half"}),Constants.UPSELL_SOURCE_EDIT="edit",Constants.UPSELL_SOURCE_RESOLVE="resolve",Constants.UPSELL_SOURCE_UNRESOLVE="unresolve",Constants.UPSELL_SOURCE_DELETE="delete",Constants.UPSELL_DEFAULT_DESCRIPTION="Reply, add new comments, and keep up with feedback in the Acrobat Reader app.",Constants.UPSELL_CARD_CONTENT=Object.freeze({[r.UPSELL_SOURCE_EDIT]:{titleId:"mobile.upsell.edit.title",descriptionId:"mobile.upsell.edit.description",defaultTitle:"Finish editing your comment in the app",defaultDescription:r.UPSELL_DEFAULT_DESCRIPTION},[r.UPSELL_SOURCE_RESOLVE]:{titleId:"mobile.upsell.resolve.title",descriptionId:"mobile.upsell.resolve.description",defaultTitle:"Finish resolving your comment in the app",defaultDescription:r.UPSELL_DEFAULT_DESCRIPTION},[r.UPSELL_SOURCE_UNRESOLVE]:{titleId:"mobile.upsell.unresolve.title",descriptionId:"mobile.upsell.unresolve.description",defaultTitle:"Finish unresolving your comment in the app",defaultDescription:r.UPSELL_DEFAULT_DESCRIPTION},[r.UPSELL_SOURCE_DELETE]:{titleId:"mobile.upsell.delete.title",descriptionId:"mobile.upsell.delete.description",defaultTitle:"Finish deleting your comment in the app",defaultDescription:r.UPSELL_DEFAULT_DESCRIPTION}}),Constants.SNAP_POINTS=Object.freeze({UPSELL_CARD:"35%",HALF_SHEET:"50%",FULL_SHEET:"100%"}),Constants.TOOLS_BOARD_PROVIDER="tools-board-provider",Constants.EVENT_TYPES={TOUCHSTART:"touchstart",MOUSEDOWN:"mousedown",SCROLL:"scroll"},Constants.SPECTRUM_GRAY_800_COLOR="var(--spectrum-global-color-gray-800)",Constants.ESTIMATED_VIEWPORT_COMMENTS=10,Constants.RENDER_DELAY_MS=50,Constants.ROLE_CREATOR="creator",Constants.ROLE_REVIEWER="reviewer",Constants.ROLE_VIEWER="viewer";const n=["fr","de","es","it","pt","ja"],s=Object.freeze({fr:"fr",de:"de",es:"es",it:"it",pt:"pt",ja:"jp"})},D9Xh:(e,t,o)=>{var r=o("YWiy");function SDCTileUnderline64(e){return r.createElement("svg",e,[r.createElement("path",{d:"m59,0H5C2.2002,0,0,2.20001,0,5v54c0,2.79999,2.2002,5,5,5h54c2.7998,0,5-2.20001,5-5V5c0-2.79999-2.2002-5-5-5ZM19.25,18.49316c0-1.2373.97949-2.24316,2.18262-2.24316h21.13477c1.20312,0,2.18262,1.00586,2.18262,2.24316v2.50684c0,.41406-.33594.75-.75.75s-.75-.33594-.75-.75v-2.50684c0-.41016-.30664-.74316-.68262-.74316h-9.81738v21.25c0,.08868-.02246.17102-.05078.25h3.30078c.41406,0,.75.33594.75.75s-.33594.75-.75.75h-8c-.41406,0-.75-.33594-.75-.75s.33594-.75.75-.75h3.30078c-.02832-.07898-.05078-.16132-.05078-.25v-21.25h-9.81738c-.37598,0-.68262.33301-.68262.74316v2.50684c0,.41406-.33594.75-.75.75s-.75-.33594-.75-.75v-2.50684Zm28.5,28.25684c0,.55176-.44824,1-1,1h-29.5c-.55176,0-1-.44824-1-1v-2.5c0-.55176.44824-1,1-1h29.5c.55176,0,1,.44824,1,1v2.5Z",fill:"var(--iconRed, #d7373f)",opacity:".1",key:0}),r.createElement("rect",{x:"17.75",y:"44.75",width:"28.5",height:"1.5",fill:"var(--iconRed, #d7373f)",opacity:".1",key:1}),r.createElement("rect",{x:"17.75",y:"44.75",width:"28.5",height:"1.5",fill:"var(--iconRed, #d7373f)",opacity:".2",key:2}),r.createElement("path",{d:"m46.75,43.25h-29.5c-.55176,0-1,.44824-1,1v2.5c0,.55176.44824,1,1,1h29.5c.55176,0,1-.44824,1-1v-2.5c0-.55176-.44824-1-1-1Zm-.5,3h-28.5v-1.5h28.5v1.5Z",fill:"var(--iconRed, #d7373f)",key:3}),r.createElement("path",{d:"m20,21.75c.41406,0,.75-.33594.75-.75v-2.50684c0-.41016.30664-.74316.68262-.74316h9.81738v21.25c0,.08868.02246.17102.05078.25h-3.30078c-.41406,0-.75.33594-.75.75s.33594.75.75.75h8c.41406,0,.75-.33594.75-.75s-.33594-.75-.75-.75h-3.30078c.02832-.07898.05078-.16132.05078-.25v-21.25h9.81738c.37598,0,.68262.33301.68262.74316v2.50684c0,.41406.33594.75.75.75s.75-.33594.75-.75v-2.50684c0-1.2373-.97949-2.24316-2.18262-2.24316h-21.13477c-1.20312,0-2.18262,1.00586-2.18262,2.24316v2.50684c0,.41406.33594.75.75.75Z",fill:"var(--iconRed, #d7373f)",key:4})])}SDCTileUnderline64.defaultProps={id:"b","data-name":"Icons",width:"64",height:"64",viewBox:"0 0 64 64"},e.exports=SDCTileUnderline64,SDCTileUnderline64.default=SDCTileUnderline64},DZGl:(e,t,o)=>{var r=o("QWpd"),n=o("Rtow"),s=o("GCJH"),a=o("T7i7"),l=o("bsB8"),c=o("wjb0");function Stack(e){var t=this.__data__=new r(e);this.size=t.size}Stack.prototype.clear=n,Stack.prototype.delete=s,Stack.prototype.get=a,Stack.prototype.has=l,Stack.prototype.set=c,e.exports=Stack},DrWp:(e,t,o)=>{var r=o("uJ/a"),n=o("Ha/P"),s=o("Gl2o");e.exports=function keysIn(e){return s(e)?r(e,!0):n(e)}},DxSP:e=>{e.exports=function eq(e,t){return e===t||e!=e&&t!=t}},EI1Z:(e,t,o)=>{var r=o("BwN7"),n=o("M6QY"),s=o("S1m8");e.exports=function getAllKeys(e){return r(e,s,n)}},EazC:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var r,n,s,a=o("abd3"),l=o("D/Yr");let c=null;const p=(r=a.action.bound,s=class AnalyticsStore{constructor(){this.fileType=void 0,this.userType=void 0,this.shareType=void 0,this.sharePrivileges=void 0,this.commentInitiationSource=void 0}static getInstance(){return null===c&&(c=new AnalyticsStore),c}setFileType(e){this.fileType=e}setUserType(e){this.userType=e}setShareType(e){this.shareType=e}setSharePrivileges(e){this.sharePrivileges=e}setCommentInitiationSource(e){this.commentInitiationSource=e}getFileType(){return this.fileType}getUserType(){return this.userType}getShareType(){return this.shareType}getSharePrivileges(){return this.sharePrivileges}getCommentInitiationSource(){return this.commentInitiationSource}},s.FILE_STORAGE_TYPE={ACP_FILE:"acp",SC_FILE:"sc"},s.FILE_SHARE_TYPE={REVIEW_FILE:"review",TRACK_FILE:"track"},s.USER_SHARE_PRIVILEGES={SENDER:"sender",RECIPIENT:"recipient"},s.COMMENT_INITIATION_PREFIXES={QUICK_TOOL:"QT",CONTEXT_MENU:"CM",TEXT_HIGHLIGHTED:"TextHighlighted",KEYBOARD_SHORTCUT:"KeyboardShortcut"},s.COMMENT_INITIATION_SOURCES={QT_HIGHLIGHT:`${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_HIGHLIGHT}`,TEXT_HIGHLIGHTED_QT_HIGHLIGHT:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_HIGHLIGHT}`,CM_HIGHLIGHT:`${s.COMMENT_INITIATION_PREFIXES.CONTEXT_MENU}-${l.Ay.QUICKTOOLS_COMMENT_HIGHLIGHT}`,TEXT_HIGHLIGHTED_CM_HIGHLIGHT:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.CONTEXT_MENU}-${l.Ay.QUICKTOOLS_COMMENT_HIGHLIGHT}`,QT_UNDERLINE:`${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_UNDERLINE}`,TEXT_HIGHLIGHTED_QT_UNDERLINE:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_UNDERLINE}`,TEXT_HIGHLIGHTED_CM_UNDERLINE:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.CONTEXT_MENU}-${l.Ay.QUICKTOOLS_COMMENT_UNDERLINE}`,QT_STRIKEOUT:`${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_STRIKEOUT}`,TEXT_HIGHLIGHTED_QT_STRIKEOUT:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_STRIKEOUT}`,TEXT_HIGHLIGHTED_CM_STRIKEOUT:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.CONTEXT_MENU}-${l.Ay.QUICKTOOLS_COMMENT_STRIKEOUT}`,QT_STICKYNOTE:`${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_STICKYNOTE}`,TEXT_HIGHLIGHTED_QT_STICKYNOTE:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_STICKYNOTE}`,CM_STICKYNOTE:`${s.COMMENT_INITIATION_PREFIXES.CONTEXT_MENU}-${l.Ay.QUICKTOOLS_COMMENT_STICKYNOTE}`,TEXT_HIGHLIGHTED_CM_STICKYNOTE:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.CONTEXT_MENU}-${l.Ay.QUICKTOOLS_COMMENT_STICKYNOTE}`,QT_FREETEXT:`${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_FREETEXT}`,QT_REPLACE:`${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_REPLACE}`,TEXT_HIGHLIGHTED_QT_REPLACE:`${s.COMMENT_INITIATION_PREFIXES.TEXT_HIGHLIGHTED}-${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_REPLACE}`,QT_INSERT:`${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_INSERT}`,QT_DRAWING:`${s.COMMENT_INITIATION_PREFIXES.QUICK_TOOL}-${l.Ay.QUICKTOOLS_COMMENT_DRAW}`,CM_DRAWING:`${s.COMMENT_INITIATION_PREFIXES.CONTEXT_MENU}-${l.Ay.QUICKTOOLS_COMMENT_DRAW}`,CM_REPLY:`${s.COMMENT_INITIATION_PREFIXES.CONTEXT_MENU}-reply`,KEYBOARD_SHORTCUT_BACKSPACE:`${s.COMMENT_INITIATION_PREFIXES.KEYBOARD_SHORTCUT}-backspace`,KEYBOARD_SHORTCUT_TYPING:`${s.COMMENT_INITIATION_PREFIXES.KEYBOARD_SHORTCUT}-typing`},s.USER_STATUS={INITIATOR:"Initiator",REVIEWER:"Reviewer IMS",REVIEWER_GUEST:"Reviewer Guest"},function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}((n=s).prototype,"setCommentInitiationSource",[r],Object.getOwnPropertyDescriptor(n.prototype,"setCommentInitiationSource"),n.prototype),n)},EbA6:e=>{e.exports=function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},F835:e=>{e.exports=function setToArray(e){var t=-1,o=Array(e.size);return e.forEach(function(e){o[++t]=e}),o}},"FL3/":e=>{e.exports=function baseUnary(e){return function(t){return e(t)}}},FWUW:(e,t,o)=>{var r=o("0Lu8"),n=Object.prototype.hasOwnProperty;e.exports=function hashHas(e){var t=this.__data__;return r?void 0!==t[e]:n.call(t,e)}},FvTn:e=>{e.exports=function listCacheClear(){this.__data__=[],this.size=0}},Fyfs:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("qVjQ");var r=function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var o=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?r:o){if(n.has(e))return n.get(e);n.set(e,a)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(a,t,s):a[t]=e[t]);return a}(e,t)}(o("4cbv")),n=o("XF5l");const s="http",a=5,l=4;class CommentSDKUtils{static detectBrowserProps(){let e={"screen.width":screen.width,"screen.height":screen.height,"screen.availHeight":screen.availHeight,"screen.availWidth":screen.availWidth,"screen.pixelDepth":screen.pixelDepth,"screen.colorDepth":screen.colorDepth,"navigator.userAgent":navigator.userAgent,robotClientLikely:!1};return 1280===screen.width&&960===screen.height&&1280===screen.availWidth&&960===screen.availHeight&&(e.robotClientLikely=!0),e}static fetch(e,t,o,n){let s=n;s||(s={});let a=e,l={method:t,headers:s};return o&&(l.body=JSON.stringify(o),n["Content-Type"]===r.config.api.getFileDownloadUrl.headers["Content-Type"]&&(l.body=o)),fetch(a,l).then(e=>{if(e.status>=200&&e.status<300)return e;{423===e.status?CommentSDKUtils.emitterInstance.emit("RESOURCE_LOCKED"):404===e.status&&CommentSDKUtils.emitterInstance.emit("RESOURCE_UNAVAILABLE");let t=new Error(`${e.status} ${e.statusText}`);throw t.response=e,t}}).then(e=>{let t=e.headers.get("Retry-After");var o=e.headers.get("Content-Type");return new Promise((r,n)=>{[204,208,304,429].indexOf(e.status)>-1||"text/plain; charset=utf-8"===o||"0"===e.headers.get("Content-Length")?e.text().then(e=>{r(e)}):e.json().then(e=>{r({data:e,headers:{retryAfter:t}})})})})}static getInvitationId(e){return CommentSDKUtils.isAssetUriHttpLink(e)?CommentSDKUtils.__getInvitationIdFromUri(e):CommentSDKUtils.__getInvitationIdFromUrn(e)}static __getInvitationIdFromUri(e){let t=e.split("/");if(t.length>=a+1)return t[a]}static __getInvitationIdFromUrn(e){let t=e.split(":");return t.length>=l+1?t[l]:1==t.length?e:void 0}static isAssetUriHttpLink(e){return e.startsWith(s)}static getAssetUri(){let e;const t=window.location.pathname.replace(/\/$/,"");if(/^\/id\//.test(t)){const o=t.split("/");e=o[o.length-1]}else{const t=new URLSearchParams(window.location.search);e=t.get("uri")||t.get("assetUri")}return e&&(e=window.decodeURIComponent(e)),e}}CommentSDKUtils.emitterInstance=new n.EventEmitter2;t.default=CommentSDKUtils;e.exports=t.default},G5bJ:(e,t,o)=>{"use strict";o.d(t,{A:()=>CommentsUtil});var r=o("buDb"),n=o("PIOo"),s=o("plsW");const a=JSON.parse('["aaa","aarp","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerryproperties","kfh","kg","kh","ki","kia","kids","kim","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","link","live","living","lk","llc","llp","loan","loans","locker","locus","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mv","mw","mx","my","mz","na","nab","nagoya","name","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shell","shia","shiksha","shoes","shop","shopping","shouji","show","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermgensberater","vermgensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volvo","vote","voting","voto","voyage","vu","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]');var l,c=o("abd3"),p=o("4eby"),d=o("9+t3"),m=o("nnZV"),u=o("WJQs"),h=o("7otS"),g=o("CKE+"),y=o("Wvr3"),C=o("kPFd"),_=o("D/Yr"),b=o("hGRN"),E=o("QNhk"),v=o("qgO1"),T=o("iaHC"),A=o("v3fp"),O=o("6egC"),D=o("CoNQ"),P=o("YY8+"),I=o("Jm6I"),S=o("EazC"),w=o("6AL6"),R=o("a8bA"),M=o("mrdZ"),N=o("LwNf"),L=o("WJZ5"),x=o("Ww+/"),U=o("llUt"),k=o("XWif"),F=o("guU5");class CommentsUtil{constructor(){this.isCommentSupportedForSharedFiles=e=>-1!==_.Ay.SHARED_SUPPORTED_COMMENTS.indexOf(e.target.selector.subtype),this.isCommentUnsupported=e=>!!(e&&e.target&&e.target.selector&&e.target.selector.appearance),this.isCursorStyleSupported=e=>{if((0,C.UP)()&&!(0,C.op)())return!1;let t;try{t=CSS.supports("cursor",e)}catch{t=!1}return t},this.canEditComment=(e,t)=>{let o=!1,r=!1;if(o=!0,r=!0,t.integrationStore.isSharedCommentingMode()){const n=(0,A.xI)();if(!n.isSignedIn)return o=!1,void n.signIn();o=this.isCommentEditable(e,t.userProfileStore.getUserProfile()),r=this.isCommentDeletable(e,t.userProfileStore.getUserProfile())}else E.A.isSharedFileMode()&&(o=this.isCommentEditable(e,t.userProfileStore.getUserProfile()),r=this.isCommentDeletable(e,t.userProfileStore.getUserProfile()));return{showEdit:o,showDelete:r}}}static getInstance(){return CommentsUtil._instance||(CommentsUtil._instance=new CommentsUtil),CommentsUtil._instance}static openRHPIfNotVisible(e){(0,A.LX)().then(t=>{t||(e.clearPrevSessionPageLevelAnnot(),e.setShouldShowCommentsPanel(!0))})}static isAutoCommitComment(e){const t=e.target.selector;return t.subtype===_.Ay.REDHAWK_COMMENT_HIGHLIGHT||t.subtype===_.Ay.REDHAWK_COMMENT_STRIKEOUT||t.subtype===_.Ay.REDHAWK_COMMENT_SHAPE||t.subtype===_.Ay.REDHAWK_COMMENT_FREETEXT||t.subtype===_.Ay.REDHAWK_COMMENT_UNDERLINE}isMarkupComment(e){const t=e.target.selector;return t.subtype===_.Ay.REDHAWK_COMMENT_HIGHLIGHT||t.subtype===_.Ay.REDHAWK_COMMENT_STRIKEOUT||t.subtype===_.Ay.REDHAWK_COMMENT_UNDERLINE}isFreeTextComment(e){return e.target.selector.subtype===_.Ay.REDHAWK_COMMENT_FREETEXT}isShapeComment(e){return e.target.selector.subtype===_.Ay.REDHAWK_COMMENT_SHAPE}isStickyComment(e){return e.target.selector.subtype===_.Ay.REDHAWK_COMMENT_NOTE}showCopyText(e){return""!==e.bodyValue}showCopyLinkToComment(e){return!(0,b.eF)()&&e.syncedWithServer&&e.motivation===_.Ay.MOTIVATION_COMMENTING}static isVoiceNote(e){var t,o;return(null===(t=e.target)||void 0===t||null===(o=t.selector)||void 0===o?void 0:o.subtype)===_.Ay.REDHAWK_COMMENT_SOUND}isSubtypeMarkup(e){return e===_.Ay.REDHAWK_COMMENT_HIGHLIGHT||e===_.Ay.REDHAWK_COMMENT_STRIKEOUT||e===_.Ay.REDHAWK_COMMENT_UNDERLINE}isSupportedCommentType(e){return CommentsUtil.supportedCommentTypes.indexOf(e)>=0}static isIdForComment(e,t){return!!t&&(e.id===t||e.cid===t)}getFormattedTimeDifference(e){const t=Math.floor((new Date).getTime()),o=this.getLastModifiedTime(e),r=new Date(o).getTime(),n=6e4,s=36e5,a=t-r;let l,c,p;const d=this.isCommentModified(e);let m,u;return a<n?(p=d?"time.editedJustNow":"time.createdJustNow",c="time.justNow"):a<s?(l=Math.round(a/n),1===l?(p=d?"time.editedMinAgo":"time.createdMinAgo",c="time.minAgo"):(p=d?"time.editedMinsAgo":"time.createdMinsAgo",c="time.minsAgo")):a<864e5?(l=Math.round(a/s),1===l?(p=d?"time.editedHourAgo":"time.createdHourAgo",c="time.hourAgo"):(p=d?"time.editedHoursAgo":"time.createdHoursAgo",c="time.hoursAgo")):(m=new Date(0),m.setUTCMilliseconds(r),u=m.toDateString(),p=d?"time.editedOn":"time.createdOn",c="time.displayTime",l=u.substring(4,u.length-5)),{templateId:c,toolTipId:p,time:l}}static updateSessionCountForUser(e){const t=e?e.userId:null,o=(0,N.bV)(_.Ay.PREV_SESSION_ID),r=(0,N.tM)(_.Ay.CURR_SESSION_ID);if(t){const e=`${_.Ay.COMMENTS_STORAGE_KEY}_${t}`;let n=parseInt((0,N.bV)(e),10)||0;null===o||0===n?(0,N.y9)(e,1):o!==r&&null!==r&&(n+=1,(0,N.y9)(e,n))}else{let e=parseInt((0,N.bV)(_.Ay.ALLOWED_COMMENT_TOOLTIP_MAX_COUNT),10)||0;null===o?(0,N.y9)(_.Ay.ALLOWED_COMMENT_TOOLTIP_MAX_COUNT,1):o!==r&&null!==r&&(e+=1,(0,N.y9)(_.Ay.ALLOWED_COMMENT_TOOLTIP_MAX_COUNT,e))}(0,N.y9)(_.Ay.PREV_SESSION_ID,r)}static getSessionCount(e){let t=0;if(e.isAnnonymous()&&!e.hasAuth)t=parseInt((0,N.bV)(_.Ay.ALLOWED_COMMENT_TOOLTIP_MAX_COUNT),10)||0;else{const o=e.getUserProfile().userId,r=`${_.Ay.COMMENTS_STORAGE_KEY}_${o}`;t=parseInt((0,N.bV)(r),10)||0}return t}swapCoordinates(e,t,o,r){const n=r[8*e+t];r[8*e+t]=r[8*e+o],r[8*e+o]=n}getCurrentTimeStamp(){return Date(1e3*Math.floor((new Date).getTime()))}getCurrentTime(){return(new Date).getTime()}getLastModifiedTime(e){let t=e.modified;return t||(t=(new Date).toISOString()),t}isCommentModified(e){let t=!1;return e.modified!==e.created&&(t=!0),t}getAuthorInitials(e){let t=e.name,o="";return""===t&&(t="Anonymous"),o=this.getUserNameInitials(t),o}getUserNameInitials(e){e&&void 0!==e&&""!==e||(e="Anonymous");const t=e.split(" ");let o="",r=0;for(let e=0;e<t.length&&r<2;e++)o+=t[e].charAt(0),r++;return o=o.toUpperCase(),o}encodeContent(e){let t=e.bodyValue;const o=e.target.selector?e.target.selector.subtype:CommentsUtil.NOTE_COMMENT;return t||(o===CommentsUtil.HIGHLIGHT_COMMENT?t="encodedContent.highlightedText":o===CommentsUtil.STRIKEOUT_COMMENT?t="encodedContent.struckOutText":o===CommentsUtil.UNDERLINE_COMMENT?t="encodedContent.underlinedText":o===CommentsUtil.NODE_COMMENT?t="encodedContent.pageLevelComment":o===CommentsUtil.NOTE_COMMENT?t="encodedContent.defaultNote":o===CommentsUtil.DRAW_COMMENT?t=v.A.isCommentFreeHighlight(e)?"encodedContent.freehighlightedText":"encodedContent.defaultShape":o===CommentsUtil.REPLACE_COMMENT?t="encodedContent.defaultReplace":o===CommentsUtil.INSERT_COMMENT?t="encodedContent.defaultInsert":o===CommentsUtil.FREETEXT_COMMENT?t="encodedContent.defaultFreeText":o===CommentsUtil.UNSUPPORTED_COMMENT&&(t="encodedContent.defaultUnsupported")),t}getGuid(){return(0,p.A)()}getDeltaBetweenInkListAndBB(e){const t=[],o=e.target.selector,{inkList:r,boundingBox:n}=o;for(let e=0;e<r.length;e++){const o=[],s=r[e];for(let e=0;e<s.length-1;e+=2){const t=Math.abs(n[0]-s[e]),r=Math.abs(n[1]-s[e+1]);o.push(t),o.push(r)}t.push(o)}return t}getDeltaBetweenBBoxCenterAndEvent(e,t){const o=(e[0]+e[2])/2,r=(e[1]+e[3])/2,{xInPage:n,yInPage:s}=d.default.getInstance().previewApis.previewPublicApis.document.getPageDetails(t);let a=0,l=0;return-1!==n&&-1!==s?(a=n-o,l=s-r,[a,l]):[a,l]}getCoordPointsWrtPdf(e,t){const o=[];if(!e||0===e.length)return;let r=0;for(r=0;r<e.length-1;r+=2){const n=d.default.getInstance().previewApis.pageView.transformViewToPDF(e[r],e[r+1],t);o[r]=parseFloat(n.x),o[r+1]=parseFloat(n.y)}return o}getUpdatedInkList(e,t,o){const r=[],n=e[0],s=e[1];for(let e=0;e<t.length;e++){const a=[],l=t[e];for(let e=0;e<l.length-1;e+=2)a.push(n+l[e]),a.push(s-l[e+1]);r.push(this.getCoordPointsWrtPdf(a,o))}return r}getPointedCoordinates(e,t,o){let r,n,s=0;const a=[];this.getPointedCoordinatesWithoutFactors(a,o.eventObj),r=a[0],n=a[1];const l=d.default.getInstance().previewApis.pageView.transformViewToPDF(r,n,t);e[s]=l.x,e[++s]=l.y}getPointedCoordinatesForTouch(e,t){const o=this.getPointedCoordinatesWithoutFactorsForTouch(t),r=o[0],n=o[1],s=d.default.getInstance().previewApis.pageView.transformViewToPDF(r,n,e);return[s.x,s.y]}transformRectViewToPDF(e,t,o){let r=0;const n=d.default.getInstance().previewApis.pageView.transformViewToPDF(e[0],e[1],t),s=d.default.getInstance().previewApis.pageView.transformViewToPDF(e[2],e[3],t);e[r]=n.x,e[++r]=n.y,e[++r]=s.x,e[++r]=s.y}transformRectPDFToView(e,t,o){let r=0;const n=d.default.getInstance().previewApis.pageView.transformPDFToView(e[0],e[1],t),s=d.default.getInstance().previewApis.pageView.transformPDFToView(e[2],e[3],t);e[r]=n.x,e[++r]=n.y,e[++r]=s.x,e[++r]=s.y}getRearrangedQuadpoints(e){const[t,o,r,n,s,a,l,c]=e;return[t,o,r,n,l,c,s,a]}getPointedCoordinatesWithoutFactorsForTouch(e){const t=[],o=e.target.getBoundingClientRect().left,r=e.target.getBoundingClientRect().top;let n,s,a=0;return n=e.center.x-o,s=e.center.y-r,t[a]=n,t[++a]=s,t}getPointedCoordinatesWithoutFactors(e,t){let o,r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=0;if(_.Ay.SELECTION_TOOLS.includes(t.commentType))o=t.bbox.right+_.Ay.STICKY_NOTE_MARGIN,r=(t.bbox.top+t.bbox.bottom)/2-_.Ay.STICKY_NOTE_MARGIN;else if(CommentsUtil.isEmpty(n)||!n.quads||CommentsUtil.isEmpty(n.quads))o=t.clientX-t.target.getBoundingClientRect().left,r=t.clientY-t.target.getBoundingClientRect().top;else{const e=n.quads[`page${n.pageIndex}`],t=e.bbox0;let s;const a=Object.values(e);for(let e=0;e<a.length&&a[e].deviceTop==t.deviceTop;e++)s=a[e].deviceRight;o=s+2*_.Ay.STICKY_NOTE_MARGIN,r=(t.deviceTop+t.deviceBottom)/2}e[s]=o,e[++s]=r}restructureQuadsForMerging(e){const t=[];for(let o=0;o<e[`page${e.startPage}`].bboxCount;o++){const r=e[`page${e.startPage}`][`bbox${o}`],s=new n.A({quadPoints:r.quadPoints});t.push(s)}return{quads:t}}getSelectedQuadCoordinates(e){const transformViewToPDF=(t,o)=>d.default.getInstance().previewApis.pageView.transformViewToPDF(t,o,e.startPage),{quads:t}=this.restructureQuadsForMerging(e),o=t.reduce((e,t)=>{const o=t.transform(transformViewToPDF),r=this.getRearrangedQuadpoints(o.quadPoints);return e.push(...r),e},[]),n=(0,r.ZO)(t).reduce((e,t)=>e.mergeQuad(t)),{left:s,top:a,right:l,bottom:c}=n.polygonBoundsUnion,p=transformViewToPDF(s,a),m=transformViewToPDF(l,c);return{selectedTextBounds:[p.x,p.y,m.x,m.y],quadCoords:o}}getWordCoordinates(e,t,o){const r={startPoint:{pageNum:e+1,x:t,y:o},endPoint:{pageNum:e+1,x:t,y:o},priority:10,snapToWords:!1,getCaret:!0,force:!0};return d.default.getInstance().previewApis.documentActions.getStartingCoords(r)}isUserOwnerOfComment(e,t){let o=!1;const r=e.creator.id;return t&&t.userId&&r===t.userId&&(o=!0),!!(0,b.eF)()||o}isReplyPresent(e){return e.replies&&e.replies.length>0}canResolveComment(e,t){return t&&CommentsUtil.isUserIMS(t)&&!this.isCommentResolved(e.status)&&!this.isCommentUnsupported(e)}isCommentResolved(e){return e===_.Ay.STATUS_RESOLVED}canUnresolveComment(e,t){return t&&CommentsUtil.isUserIMS(t)&&this.isCommentResolved(e.status)}canMarkRead(e,t){return e&&CommentsUtil.isUserIMS(e)&&!this.isCommentResolved(t.status)&&!t.read.readValue}canMarkUnread(e,t){return e&&CommentsUtil.isUserIMS(e)&&!this.isCommentResolved(t.status)&&t.read.readValue}isCommentDeletable(e,t,o){return(!(0,b.eF)()||e.target.selector.subtype!==_.Ay.REDHAWK_COMMENT_UNSUPPORTED)&&((0,b.eF)()&&(E.A.isSharedCommentingMode()||E.A.isSharedFileMode())?!e.target.selector.appearance&&(e.creator.id?e.creator.id===t.getUserId():e.creator.name===t.userName):!this.isCommentUnsupported(e)&&h.A.reviewParticipants.length>0&&this.isInitiator(t)||this.isUserOwnerOfComment(e,t))}isInitiator(e){if(!e)return;let t,o=e.userId&&e.userId.split(":");return o=o&&o[o.length-1],!!h.A.reviewParticipants.length&&(t=h.A.reviewParticipants.filter(e=>e.role===_.Ay.ROLE_CREATOR)[0],t.userId===o||t.email===e.email)}isUserInitiator(){const e=g.A.getUserProfile();return this.isInitiator(e)}isUserIMSUser(){const e=g.A.getUserProfile();return CommentsUtil.isUserIMS(e)}isCommentEditable(e,t,o){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!((0,b.eF)()&&!(0,b.lJ)())&&(!(U.PreviewStore.instance.useMobileModernViewer&&!r)&&((0,b.eF)()&&(E.A.isSharedCommentingMode()||E.A.isSharedFileMode())?!e.target.selector.appearance&&(e.creator.id?e.creator.id===(null==t?void 0:t.getUserId()):!(E.A.isSharedCommentingMode()||!t)&&e.creator.name===t.getUserName()):!this.isCommentResolved(o)&&(this.isUserOwnerOfComment(e,t)&&!this.isCommentResolved(e.status)&&!CommentsUtil.isVoiceNote(e))))}isStickyLinkedToFreehand(e){var t,o;return!!(null==e||null===(t=e.target)||void 0===t||null===(o=t.selector)||void 0===o?void 0:o.appearance)}isEditingTrueInCommentThread(e){let t=!1;if(!0===e.isEditing)t=!0;else if(e.replies&&e.replies.length)for(let o=e.replies.length-1;o>=0;o--)if(!0===e.replies[o].isEditing){t=!0;break}return t}static getMentionDisplayName(e){if(!e)return"";let t,o,r,n,s=!1,a="";return o=e.name||e.displayName,r=e.email,(o||r)&&(n=o||r,s=!!o,t=n.split(" "),a=s?"@":"",t.forEach(e=>{a+=e})),a}static getMentionedListObject(e){const t={name:e.name,type:e.type,email:e.email,synthetic:e.synthetic,token:e.token};return e.id&&""!==e.id&&(t.id=e.id),t}static getMentionedListInStandardFormat(e){const t=[];for(const o in e){const r=e[o];t.push({name:r.name,email:r.email,id:r.id,type:r.type})}return t}static getMentionsList(e,t){if(t)return[];const o=[];let r,n;for(n=0;n<e.length;n++)r=e[n],CommentsUtil.isUserAnon(r,null)||!r.userId&&!r.email||o.push(r);return o}static convertMobxListToStandardMentionedMap(e,t){if(console.assert(!e||Array.isArray(e)||(0,c.isObservableArray)(e),"CommentsUtil.convertMobxListToStandardMentionedMap mentionsList not an array."),!e||0===e.length)return{};const o={},r=this;return e.forEach(e=>{const n=r.getMentionDisplayName(e);"object"==typeof e&&(o[n]={...e,count:r.getMentionedCount(n,t)})}),o}static convertMentionedMapToMobxList(e){const t=[];for(const o in e){const{count:r,...n}=e[o];t.push(n)}return t}static escapeSpecialCharacters(e){return e.replace(/[\[\]\\\^$.|?*+()_@]/g,e=>`\\${e}`)}static getMentionedCount(e,t){const o=CommentsUtil.escapeSpecialCharacters(e),r=new RegExp(o,"gi");return(t.match(r)||[]).length}static isUserMentionable(e){return!!e.email}static getFiltersList(e,t){const o=t.findIndex(t=>t.id===e.creator.id&&t.name===e.creator.name);return o>-1?t[o].count=t[o].count+1:t.push({name:e.creator.name,email:e.creator.email,id:e.creator.id,type:e.creator.type,count:1}),t}static isElementInYViewport(e){const t=e.getBoundingClientRect().top;return t>_.Ay.HEIGHT_OF_TOP_BAR&&CommentsUtil.isElementAboveBottomViewport(t)}static isElementAboveBottomViewport(e){return(0,O.isInSDKBundle)()?e-(0,O.getSDKBundleDOM)().getBoundingClientRect().top<(0,O.getSDKAwareWindowInnerHeight)(window.innerHeight-_.Ay.REVIEW_FOOTER_HEIGHT-_.Ay.COMMENT_POPUP_BOTTOM_PADDING):e<window.innerHeight-_.Ay.REVIEW_FOOTER_HEIGHT-_.Ay.COMMENT_POPUP_BOTTOM_PADDING}static getFiltersMentionsList(e,t){return e.mentions.forEach(e=>{const o=t.findIndex(t=>t.email===e.email);o>-1?t[o].count=t[o].count+1:t.push({name:e.name,email:e.email,id:e.id,type:e.type,count:1})}),t}static isUserIMS(e){return e&&"IMS"===e.getUserType()}static isUserFromIntegrationContext(e){return e&&e.getUserType()===_.Ay.INTEGRATION_USER_TYPE}static hexToRGB(e,t){const o=e.toLowerCase(),r="0123456789abcdef",n=16*r.indexOf(o[1])+r.indexOf(o[2]),s=16*r.indexOf(o[3])+r.indexOf(o[4]),a=16*r.indexOf(o[5])+r.indexOf(o[6]);return null!=t?`rgba(${n}, ${s}, ${a},${t})`:`rgb(${n}, ${s}, ${a})`}isTargetEditable(e){let t=!1;return"INPUT"!=e.target.tagName.toUpperCase()&&"TEXTAREA"!=e.target.tagName.toUpperCase()&&"true"!==e.target.contentEditable||(t=!0),t}static detectMobile(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}static detectIpadMini(){return!!navigator.userAgent.match("iPad")}static dispatchEventPolyfill(e,t,o){const r=document.createEvent("Event");return r.initEvent(e,t,o),r}static createTextboxContentDispatchEvent(e,t,o,r){const n={content:e,mentions:t,...r&&{optionalData:r}};return new CustomEvent(o,{detail:n,bubbles:!0,cancelable:!0})}calculateValueByOperator(e,t,o){switch(o){case _.Ay.OPERATOR_ADD:e+=t;break;case _.Ay.OPERATOR_MULTIPLY:e*=t;break;case _.Ay.OPERATOR_SUBTRACT:e-=t;break;case _.Ay.OPERATOR_DIVIDE:e/=t}return e}initiateRecursiveArray(e){if(void 0===e||0===e.length)return;const t=[],o=e[0]instanceof Array;for(let r=0;r<e.length;r++)t[r]=o?this.initiateRecursiveArray(e[r]):e[r];return t}updateRecursiveArrayCoordinatesWithDeltaAndOperator(e,t,o){if(void 0===e||0===e.length||void 0===t||0===t.length)return;const r=t[0],n=t[1],s=e[0]instanceof Array;for(let a=0;a<e.length;a++)s?this.updateRecursiveArrayCoordinatesWithDeltaAndOperator(e[a],t,o):e[a]=a%2==0?this.calculateValueByOperator(e[a],r,o):this.calculateValueByOperator(e[a],n,o)}static isUserAnon(e,t){const o=e.affiliation;return o?-1!==o.indexOf(_.Ay.GUEST_AFFILIATION):!!t&&(e.id===t.userId&&(!CommentsUtil.isUserIMS(t)&&!CommentsUtil.isUserFromIntegrationContext(t)))}createCommentModel(e,t,o,r){const n={bodyValue:e,motivation:_.Ay.MOTIVATION_COMMENTING,mentions:t,target:{selector:o},creator:r,created:Date(1e3*Math.floor((new Date).getTime())),modified:Date(1e3*Math.floor((new Date).getTime()))},s=g.A.getUserProfile();return(0,b.eF)()&&s&&s.getPictureURL()&&(n.creator.img=s.getPictureURL()),n}createSelectorWithCommonAttributes(e,t,o,r){return{node:{index:e},strokeColor:t,opacity:o,type:r}}getCreatorDetailsForCommentFromUserProfile(e,t){let o={};return e&&(o={id:e.getUserId(),name:e.getUserName(),email:e.getEmail(),type:t}),o}calculateFreehandInkListForFreehand(e,t,o){const r=e;return void 0===r[t]&&r.push([]),r[t].push(o[0]),r[t].push(o[1]),r}smoothenInkList(e){const t=e[0],o=e[1];let r=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;e.forEach((e,t)=>{t%2?(n>e&&(n=e),a<e&&(a=e)):(r>e&&(r=e),s<e&&(s=e))});const l=s-r-(a-n)>0,c=s-r<_.Ay.SMOOTHENING_THRESHOLD*window.devicePixelRatio,p=a-n<_.Ay.SMOOTHENING_THRESHOLD*window.devicePixelRatio;let d;return(c||p)&&(d=e.map((e,r)=>p&&l&&r%2?o:!c||l||r%2?e:t)),d}calculateBoundingBoxForFreehand(e,t,o,r,n){const s=n;let a,l,c,p;const d=t[0]-s,m=t[1]-s,u=t[0]+s,h=t[1]+s;void 0!==e&&0!=e.length?(a=e[0],l=e[3],c=e[2],p=e[1],a=Math.min(a,d),l=Math.min(l,m),c=Math.max(c,u),p=Math.max(p,h)):(a=d,l=m,c=u,p=h),a=Math.max(a,0),l=Math.max(l,0),c=Math.min(c,o),p=Math.min(p,r);return[a,p,c,l]}calculateScalingFactor(e,t,o){const r=e[0]-o[0],n=t[0]-o[0],s=e[1]-o[1],a=t[1]-o[1],l=Math.abs(n/r),c=Math.abs(a/s);return Math.max(l,c)}static isUserOffline(e){let t,o="",r=!1;return(0,C.H8)()?(o="Failed to fetch",t=e.match(/Failed to fetch/gi)):(0,C.gm)()?(o="NetworkError when attempting to fetch resource.",t=e.match(/NetworkError/gi)):(o="Network request failed",t=e.match(/Network/gi)),r=t&&t.length>0,r}static getTestCaptchaSiteKey(){return(0,N.tM)(_.Ay.TEST_CAPTCHA_SITE_KEY)}static shouldUseTestCaptcha(e){return!(!CommentsUtil.getTestCaptchaSiteKey()||"stage"!==e&&"dev"!==e)}static getCaptchaSiteKey(){const e=s.envUtil.getHostEnv(),t=CommentsUtil.shouldUseTestCaptcha(e);let o;return e===I.dT.PROD?o=_.Ay.PROD_CAPTCHA_SITE_KEY:e===I.dT.STAGE?(o=_.Ay.STAGE_CAPTCHA_SITE_KEY,t&&(o=CommentsUtil.getTestCaptchaSiteKey())):(o=_.Ay.DEV_CAPTCHA_SITE_KEY,t&&(o=CommentsUtil.getTestCaptchaSiteKey())),o}static isListUpdated(e,t){if(e===t)return!1;if(!e||!t)return!1;if(e.length!==t.length)return!0;let o=!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r]){o=!0;break}if(!o)return!1;let r=!1;return t.forEach(t=>{-1===e.findIndex(e=>e.email&&t.email&&e.email.toLowerCase()===t.email.toLowerCase())&&(r=!0)}),r}static isEmpty(e){return Object.keys(e).length<=0}reOrderQuadPointsForRotation(e,t){const o=[...e];switch(t){case 90:o[0]=e[2],o[1]=e[3],o[2]=e[6],o[3]=e[7],o[4]=e[0],o[5]=e[1],o[6]=e[4],o[7]=e[5];break;case 180:o[0]=e[6],o[1]=e[7],o[2]=e[4],o[3]=e[5],o[4]=e[2],o[5]=e[3],o[6]=e[0],o[7]=e[1];break;case 270:o[0]=e[4],o[1]=e[5],o[2]=e[0],o[3]=e[1],o[4]=e[6],o[5]=e[7],o[6]=e[2],o[7]=e[3];break;default:return o}return o}getStartingPointForRotatedComments(e,t){switch(t){case 90:case 270:return[e[6],e[7]];default:return[e[0],e[1]]}}getUpdatedBoundingBoxBasedOnCoords(e,t,o,r,n){const s=[o,r],a=e.target.selector.boundingBox,l=Math.abs(a[3]-a[1]),c=Math.abs(a[2]-a[0]),p=u.A.getPageCurHeight(t),d=u.A.getPageCurWidth(t);return this.calculateUpdatedBoundingBox(l,c,s,d,p,n)}calculateUpdatedBoundingBox(e,t,o,r,n,s){const a=s[0],l=s[1];let c=o[0]-a,p=o[1]-l;p>n-e/2?p=n-e/2:p<e/2&&(p=e/2),c>r-t/2?c=r-t/2:c<t/2&&(c=t/2);const d=Math.max(p-e/2,0),m=Math.min(p+e/2,n);return[Math.max(c-t/2,0),m,Math.min(c+t/2,r),d]}doHitTest(e,t,o){return d.default.getInstance().previewApis.previewPublicApis.document.hitTest(e,t,o)}static evaluateNoteIconLeft(e){let{left:t,strokeWidth:o=0,strokeFactor:r=0,freeHandConfig:n={isFreeHandComment:!1}}=e;if((null==n?void 0:n.isFreeHandComment)&&!n.leftMostIsPageCorner){let e=0;e=n.isFreeHandDot?r*o*Math.sqrt(2)/2:r*o/(2*Math.sqrt(2)),t-=0===n.viewRotation||270===n.viewRotation?e:-e,t=t<n.bbLeftBoundary?n.bbLeftBoundary:t}const s=_.Ay.MODERN_NOTE_ICON_MARGIN;return t-s<=0?t:t-s}static evaluateNoteIconTop(e){let{top:t,strokeWidth:o=0,strokeFactor:r=0,freeHandConfig:n={isFreeHandComment:!1}}=e;if((null==n?void 0:n.isFreeHandComment)&&!n.leftMostIsPageCorner){let e=0;e=n.isFreeHandDot?r*o*Math.sqrt(2)/2:r*o/(2*Math.sqrt(2)),t-=0===n.viewRotation||90===n.viewRotation?e:-e,t=t<n.bbTopBoundary?n.bbTopBoundary:t}return t-_.Ay.MODERN_NOTE_ICON_MARGIN<=0?t:t-_.Ay.MODERN_NOTE_ICON_MARGIN}static getAnnotIdFromCommentURI(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/");return e.length<5?null:e[4]}static createGuestUsername(e){const t=new Set,checkForGuestUsername=e=>{(null==e?void 0:e.startsWith(_.Ay.GUEST_USERNAME_PREFIX))&&!Number.isNaN(Number(e.split(_.Ay.GUEST_USERNAME_PREFIX)[1]))&&t.add(Number(e.split(_.Ay.GUEST_USERNAME_PREFIX)[1]))};e.forEach(e=>{var t,o;checkForGuestUsername(null===(t=e.creator)||void 0===t?void 0:t.name),null===(o=e.replies)||void 0===o||o.forEach(e=>{var t;checkForGuestUsername(null===(t=e.creator)||void 0===t?void 0:t.name)})});let o=1;for(;t.has(o)&&o<1e5;)o++;return`${_.Ay.GUEST_USERNAME_PREFIX}${o}`}static appendCommentIdToUrl(e){if(s.router.history&&!(0,b.eF)()&&e){const t=new URLSearchParams(window.location.search),o=CommentsUtil.getAnnotIdFromCommentURI(e);o&&t.get(_.Ay.URI_COMMENT_ID)!==o&&(t.set(_.Ay.URI_COMMENT_ID,o),s.router.history.replace(`${window.location.pathname}?${t.toString()}`))}}static removeCommentIdFromUrl(){if(s.router.history&&!(0,b.eF)()){const e=new URLSearchParams(window.location.search);e.delete(_.Ay.URI_COMMENT_ID),s.router.history.replace(`${window.location.pathname}?${e.toString()}`)}}saveCommentToServer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this&&this!==window){if(!(0,b.eF)()&&!this.userProfileStore.hasAuth||this.commentsStore.showFrictionlessSigninDialog)return this.commentsStore.setShowPageLevelWelcomeDialog(!0),void this.commentsStore.setPendingComment(this);D.A.queueOperation(D.A.saveComment(this.pageIndex,this.comment,e,t)).then(e=>{const t=this.commentsStore.clientServerIdMap;t.has(this.comment.cid)&&t.get(this.comment.cid)===e.id?CommentsUtil.appendCommentIdToUrl(e.id):this.commentsStore.setSelectedCommentId(e.id,I._6.MAIN_CONTENT_AREA,!1),this.comment.setSID(e.id),(0,N.kn)(_.Ay.IS_COMMENT_POSTED_IN_SESSION,"true")}),this.commentsStore.pendingCommentCleanup(),this.comment.resetSyncPending(),this.comment.setSyncWithServer(!0)}}static isInternalUser(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&""!==e&&((null==e?void 0:e.toLocaleLowerCase().endsWith("@adobe.com"))||(null==e?void 0:e.toLocaleLowerCase().endsWith("@adobetest.com")))}static convertRedhawkFreeHighlightToPDFSpecFreeHighlight(e){var t,o,r,n;const s=null==e||null===(t=e.target)||void 0===t||null===(o=t.selector)||void 0===o?void 0:o.subtype,a=null==e||null===(r=e.target)||void 0===r||null===(n=r.selector)||void 0===n?void 0:n.intentProperty;return CommentsUtil.isFreeHighlight(s,a)&&(e.target.selector.intent=_.Ay.FREE_HIGHLIGHT_INTENT,e.target.selector.subject=_.Ay.FREE_HIGHLIGHT_SUBJECT,delete e.target.selector.intentProperty),e}static convertPDFSpecFreeHighlightToRedhawkFreeHighlight(e){var t,o,r,n;const s=null==e||null===(t=e.target)||void 0===t||null===(o=t.selector)||void 0===o?void 0:o.subtype,a=null==e||null===(r=e.target)||void 0===r||null===(n=r.selector)||void 0===n?void 0:n.intent;return CommentsUtil.isFreeHighlight(s,a)&&(e.target.selector.intentProperty=_.Ay.FREE_HIGHLIGHT_INTENT,delete e.target.selector.intent,delete e.target.selector.subject),e}static isFreeHighlight(e,t){return e===_.Ay.REDHAWK_COMMENT_SHAPE&&t===_.Ay.FREE_HIGHLIGHT_INTENT}static async fetchVoiceNoteDataFromServer(e){try{const t=await m.A.getAsset(),{id:o}=t,r=e.getServerCommentData(e),n=m.A.getAnnotation(o,r),{annot:s}=await n.getVoiceNoteData();e.setVoiceNoteData(s)}catch(e){}}static isCurrentTextBoxDraftCommentReply(e){var t,o,r;return(null===T.A||void 0===T.A||null===(t=T.A.draftCommentReplyTransientObject)||void 0===t?void 0:t.commentId)===e&&(null===T.A||void 0===T.A||null===(o=T.A.draftCommentReplyTransientObject)||void 0===o?void 0:o.assetURN)&&(null===T.A||void 0===T.A||null===(r=T.A.draftCommentReplyTransientObject)||void 0===r?void 0:r.assetURN)===(null===m.A||void 0===m.A?void 0:m.A.assetURN)&&e&&(null===y.A||void 0===y.A?void 0:y.A.isDraftCommentReplyFloodGateEnabled)}static isNotCurrentTextBoxDraftCommentReply(e){var t,o,r,n;return((null===T.A||void 0===T.A||null===(t=T.A.draftCommentReplyTransientObject)||void 0===t?void 0:t.assetURN)!==(null===m.A||void 0===m.A?void 0:m.A.assetURN)||(null===T.A||void 0===T.A||null===(o=T.A.draftCommentReplyTransientObject)||void 0===o?void 0:o.assetURN)===(null===m.A||void 0===m.A?void 0:m.A.assetURN)&&(null===T.A||void 0===T.A||null===(r=T.A.draftCommentReplyTransientObject)||void 0===r?void 0:r.assetURN)&&(null===T.A||void 0===T.A||null===(n=T.A.draftCommentReplyTransientObject)||void 0===n?void 0:n.commentId)!==e&&e)&&(null===y.A||void 0===y.A?void 0:y.A.isDraftCommentReplyFloodGateEnabled)}static isReplaceAnnot(e){var t,o;const r=null==e||null===(t=e.target)||void 0===t||null===(o=t.selector)||void 0===o?void 0:o.subtype,n=null==e?void 0:e.bodyValue;return r===_.Ay.REDHAWK_COMMENT_REPLACE&&""!==n}static isInsertAnnot(e){var t,o;return(null==e||null===(t=e.target)||void 0===t||null===(o=t.selector)||void 0===o?void 0:o.subtype)===_.Ay.REDHAWK_COMMENT_INSERT}static isRedliningComment(e){const t=e.target.selector.subtype;return t===_.Ay.REDHAWK_COMMENT_INSERT||t===_.Ay.REDHAWK_COMMENT_REPLACE}static getRedliningCommentType(e){return e===_.Ay.REDHAWK_COMMENT_INSERT||e===_.Ay.REDHAWK_COMMENT_REPLACE?e:null}static getFeatureFlag(e){return new Promise(t=>{(0,x.r)(y.A,"isDropinLoaded",o=>{d.default.getInstance().previewApis?d.default.getInstance().previewApis.previewPublicApis.app.getFeatureFlag(e).then(e=>{t(e)}).catch(e=>{t(!1)}):t(!1)})})}static setReactionTooltipCommentId(e,t,o){if(T.A.hasReactions)T.A.setReactionOnboardingTooltipCommentId(null);else if(e)for(let e=0;e<t;e++){var r;if((null===(r=o[e])||void 0===r?void 0:r.length)>0){const t=o[e][0];if(!T.A.reactionOnboardingTooltipCommentId&&(null==t?void 0:t.sid)){T.A.setReactionOnboardingTooltipCommentId(null==t?void 0:t.sid);break}}}}static setFABVisibility(e,t){try{U.PreviewStore.instance.bottomBoardApis.showPanel(e,t)}catch(e){console.error("Error calling FAB showPanel:",e)}}static hideFAB(){CommentsUtil.setFABVisibility(!1,!1)}static compareByPosition(e,t){const o=e.target.selector.selector.boundingBox,r=t.target.selector.selector.boundingBox;return o[3]!==r[3]?r[3]-o[3]:o[0]-r[0]}static getUserStatus(){return(0,b.eF)()?"":CommentsUtil.getInstance().isUserInitiator()?S.A.USER_STATUS.INITIATOR:CommentsUtil.getInstance().isUserIMSUser()?S.A.USER_STATUS.REVIEWER:S.A.USER_STATUS.REVIEWER_GUEST}}l=CommentsUtil,CommentsUtil._instance=void 0,CommentsUtil.NODE_COMMENT="node",CommentsUtil.NOTE_COMMENT="note",CommentsUtil.HIGHLIGHT_COMMENT="highlight",CommentsUtil.DRAW_COMMENT="shape",CommentsUtil.STRIKEOUT_COMMENT="strikeout",CommentsUtil.UNDERLINE_COMMENT="underline",CommentsUtil.UNSUPPORTED_COMMENT="unsupported",CommentsUtil.COLORPICKER="colorpicker",CommentsUtil.FREETEXT_COMMENT="freetext",CommentsUtil.REPLACE_COMMENT="replace",CommentsUtil.INSERT_COMMENT="insert",CommentsUtil.supportedCommentTypes=["highlight","strikeout","underline"],CommentsUtil.getSuggestedMention=(e,t,o,r,n)=>{if(!t)return{disposition:I.iK.OFF};if(o)return{disposition:I.iK.NONE_USER_TURNED_OFF};if(e)return{disposition:I.iK.NONE_USER_IS_ANONYMOUS};const s=(r.replies?r.replies.length:0)>0?r.replies.slice(-1)[0].creator:r.creator;if(l.isUserAnon(s)||!l.isUserMentionable(s))return{disposition:I.iK.NONE_SUGGESTED_MENTION_IS_ANONYMOUS};if(s.id===n.getUserId())return{disposition:I.iK.NONE_REPLY_TO_SELF};return{suggestedMention:{name:s.name,email:s.email,id:s.id,type:s.type,isAutoSuggested:!0},disposition:I.iK.KEPT}},CommentsUtil.isACP=()=>{const e=window.location.pathname.replace(/\/$/,"");return!!/^\/id\//.test(e)},CommentsUtil.createHighlightWithNoteComment=e=>{const t={shouldCancelEmptyComment:!0,quickCommentVerbId:e.quickCommentVerbId,isMenuItemCustomUI:e.isMenuItemCustomUI,textValue:e.textValue},o={strokeColor:P.A.getToolColor(_.Ay.REDHAWK_COMMENT_NOTE),quickCommentVerbId:e.quickCommentVerbId};d.default.getOverlay(e.pageIndex).onContextMenuClick(_.Ay.QUICKTOOLS_COMMENT_HIGHLIGHT,t,e.quads,o)},CommentsUtil.createReplaceComment=e=>{const t={strokeColor:P.A.getToolColor(_.Ay.REDHAWK_COMMENT_REPLACE)};d.default.getOverlay(e.pageIndex).onContextMenuClick(_.Ay.QUICKTOOLS_COMMENT_REPLACE,{shouldCancelEmptyComment:!0},e.quads,t)},CommentsUtil.replyToSelectedComment=e=>{const t=e.selectedCommentModel;if(!t)return;if(l.hasDraftCommentReplyInStore()&&l.isNotCurrentTextBoxDraftCommentReply(t.id))return void l.validateExistingDraftCommentReply();const{isEditing:o,syncPending:r,syncedWithServer:n}=t;o||r||!n||(t.setShouldTextTakeFocus(!0),t.showTextBoxTool(),t.setIsReplyMode(!0))},CommentsUtil.isUserOwnerOfSelectedComment=e=>{const t=e.selectedCommentModel;return l.getInstance().isUserOwnerOfComment(t,g.A.getUserProfile())},CommentsUtil.triggerPlaceholderMicroanimation=e=>{(0,w.BI)("Commenting","Use","Placeholder Microanimation shown");const{placeholderAnimation:{animationIteration:t},setIsAnimationInProgress:o,updateAnimationIteration:r}=e;-1===t&&(o(),r(0))},CommentsUtil.validateExistingDraftCommentReply=()=>{var e,t,o;let r=!1;if(!y.A.isDraftCommentReplyFloodGateEnabled)return r;if((null===T.A||void 0===T.A||null===(e=T.A.draftCommentReplyTransientObject)||void 0===e?void 0:e.commentId)&&(null===T.A||void 0===T.A||null===(t=T.A.draftCommentReplyTransientObject)||void 0===t?void 0:t.assetURN)&&(null===T.A||void 0===T.A||null===(o=T.A.draftCommentReplyTransientObject)||void 0===o?void 0:o.assetURN)===(null===m.A||void 0===m.A?void 0:m.A.assetURN)&&(null===y.A||void 0===y.A?void 0:y.A.isDraftCommentReplyFloodGateEnabled)){r=!0;const e=T.A.draftCommentReplyTransientObject;y.A.inlineCommentEnabled&&!y.A.isModernViewerCommentsPanelExist?l.navigateToDraftComment(e):(0,A.LX)().then(t=>{t?l.navigateToDraftComment(e):(0,A.Px)().then(()=>{l.navigateToDraftComment(e)})})}return r},CommentsUtil.navigateToDraftComment=e=>{if(y.A.isDraftCommentReplyFloodGateEnabled){if(T.A.setSelectedCommentId(e.commentId,void 0),y.A.isModernViewerCommentsPanelExist)"defaultTextBox"===e.commentId?l.openRHPIfNotVisible(y.A):R.A.selectComment(e.commentId);else if(y.A.inlineCommentEnabled&&"defaultTextBox"!==e.commentId&&!y.A.isModernViewerCommentsPanelExist){var t;const o=T.A.getUICommentFromId(e.commentId),r=!o.target||!o.target.source||o.target.source&&-1===(null===(t=o.target.source)||void 0===t?void 0:t.indexOf("/annots/"));l.gotoDraftPopupLocation(o).then(()=>{T.A.setSelectedCommentId(e.commentId,void 0),T.A.setHoveredCommentId(null),!o||o.bodyValue&&""!==o.bodyValue||o.replies&&0!==o.replies.length||!l.getInstance().isUserOwnerOfComment(o,g.A.getUserProfile())||!r?T.A.setSelectedPreviewCommentId(e.commentId):T.A.setSelectedNewCommentPopupId(e.commentId)})}document.dispatchEvent(new CustomEvent(_.Ay.CUSTOM_EVENT_EXITING_DRAFT_COMMENT_REPLY_ERROR,{detail:{id:e.isNew||e.isComment?e.commentId:e.currentCommentId,commentBody:e.commentBody,mentionedList:e.mentionedList}})),(0,w.BI)("Commenting","DraftComment","Error")}},CommentsUtil.gotoDraftPopupLocation=async e=>{const t=await U.PreviewStore.instance.getCurrentPageNumber();return new Promise((o,r)=>{try{const o=e.target.selector.node.index-t;(o<-1||o>0)&&(o>2||o<0?U.PreviewStore.instance.goToPage(e.target.selector.node.index+1):R.A.previewApis.documentActions.goToLocation({pageIndex:e.target.selector.node.index,left:0,top:0}))}catch(t){U.PreviewStore.instance.documentApis.goto(e.target.selector.node.index+1)}o()})},CommentsUtil.resetDraftCommentReply=()=>{(null===y.A||void 0===y.A?void 0:y.A.isDraftCommentReplyFloodGateEnabled)&&T.A.resetDraftCommentReplyTransientObject()},CommentsUtil.hasDraftCommentReplyInStore=()=>{var e,t,o;return(null===T.A||void 0===T.A||null===(e=T.A.draftCommentReplyTransientObject)||void 0===e?void 0:e.commentId)&&(null===T.A||void 0===T.A||null===(t=T.A.draftCommentReplyTransientObject)||void 0===t?void 0:t.assetURN)&&(null===T.A||void 0===T.A||null===(o=T.A.draftCommentReplyTransientObject)||void 0===o?void 0:o.assetURN)===(null===m.A||void 0===m.A?void 0:m.A.assetURN)&&(null===y.A||void 0===y.A?void 0:y.A.isDraftCommentReplyFloodGateEnabled)},CommentsUtil.shouldShowCommentsPreview=e=>{return!(!(g.A.hasAuth||(0,b.eF)()||e.syncedWithServer)&&e.syncPending)&&(!(!y.A.inlineCommentEnabled||y.A.isModernViewerCommentsPanelExist)&&(!U.PreviewStore.instance.useMobileModernViewer&&!y.A.isInMultidocMode&&((null==e?void 0:e.bodyValue)||(null==e||null===(t=e.replies)||void 0===t?void 0:t.length))||y.A.showCommentPreviewNav&&!(0,b.eF)()&&!U.PreviewStore.instance.useMobileModernViewer&&(0,C.Gz)()));var t},CommentsUtil.shouldShowAnonymousDialog=e=>!(!T.A.showFrictionlessSigninDialog&&!T.A.showPageLevelWelcomeDialog||(0,b.eF)()||y.A.isModernViewerCommentsPanelExist)&&e===T.A.selectedCommentId,CommentsUtil.showCaptchaView=e=>{var t,o,r,n;return!g.A.hasAuth&&!y.A.isModernViewerCommentsPanelExist&&T.A.showCaptcha&&(e===(null===(t=T.A.pendingComment)||void 0===t||null===(o=t.comment)||void 0===o?void 0:o.cid)||e===(null===(r=T.A.pendingReply)||void 0===r||null===(n=r.comment)||void 0===n?void 0:n.id))},CommentsUtil.isParentInEmojiMart=(e,t)=>{let o=e;for(;o;){if("string"==typeof o.className){if(o.classList.contains(t))return!1;if(o.classList.contains("emoji-mart"))return!0}if("EM-EMOJI-PICKER"===o.tagName)return!0;o=o.parentElement}return!1},CommentsUtil.getCurrentColor=e=>{if(e){if(L.A.isFreeText(e)){var t;const o=(null===(t=e.target.selector.style)||void 0===t?void 0:t.color)||e.target.selector.borderColor;return l.hexToRGB(o.toLowerCase())}return l.hexToRGB(e.target.selector.strokeColor.toLowerCase())}},CommentsUtil.isToRenderEditableTextComponent=(e,t)=>{let o=!0;((0,b.eF)()&&!(0,b.lJ)()||e.isReadOnly||y.A.isInMultidocMode)&&(o=!1);const r=e.isPageLevelAnnot;return(e.isEditing||t&&e.motivation===_.Ay.MOTIVATION_COMMENTING&&(!r||e.isAuthPending))&&o},CommentsUtil.createHyperlinks=(e,t,o)=>{const r=String.raw`(\b(?:https?|ftp|file):\/\/[-A-Z0-9+&@#/%?=~_|!:,.;()*$!'[\]]*[-A-Z0-9+&@#/%=~_|*$!'[\]])|(\b[-A-Z0-9+&@#/%?=~_|!:,.;()*$!'[\]]+\.(?:${a.join("|")})\b[-A-Z0-9+&@#/%?=~_|!:,.;()*$!'[\]]*)`,n=new RegExp(r,"gi");return e.split(n).filter(e=>e).map(e=>{if(n.test(e)&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)&&!e.startsWith("@")){let t;return t=/^(https?|ftp|file):\/\//i.test(e)?e:`https://${e}`,o(t,e)}return t?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e})},CommentsUtil.getSharedAssetVersion=async()=>{try{const e=d.default.getInstance().previewApis.previewPublicApis.document;return e.waitForPendingChanges&&e.getAssetVersion?(await e.waitForPendingChanges(),e.getAssetVersion()):Promise.resolve()}catch(e){return e.message.startsWith("No callback registered")?Promise.resolve():Promise.reject(e)}},CommentsUtil.getConditionalToolTipInfo=async e=>{const t={[_.Ay.VERB_COMMENT_STICKYNOTE]:"comment.guideUserOnBoarding.addCommentsOnPage.tooltip",[_.Ay.VERB_COMMENT_DRAW]:"comment.guideUserOnBoarding.markArea.tooltip"}[e];return{variant:"info",message:await(0,k.I)(t),isControlled:!0,autoHideDuration:15e3}},CommentsUtil.resolveComments=e=>{if(!e.annotationIds||!Array.isArray(e.annotationIds))return Promise.reject(new Error("No annotationIds provided in body"));const t=d.default.getInstance().previewApis.commandManager,o=[];return e.annotationIds.forEach(r=>{const n=T.A.getUICommentFromId(r);if(n&&v.A.isSupportedCommentForAPI(n)){const r=new M.A(n,n.target.selector.node.index,n,T.A);try{e.isEditOp?r.execute():t.executeCommand(r),E.A.isSharedCommentingMode()&&t.removeLastEntryFromUndoStack()}catch(e){o.push(e)}}}),o.length>0?Promise.reject(o):Promise.resolve()},CommentsUtil.unresolveComment=(e,t)=>{const o=d.default.getInstance().previewApis.commandManager;try{if(t.boundingBox){const o=e.target.selector.getCoordPointsWrtImg(t.boundingBox);e.target.selector.setBoundingBox(o),e.target.selector.updateSelectorBoundingBox(t.boundingBox)}if(t.quadPoints){const o=e.target.selector.getCoordPointsWrtImg(t.quadPoints);e.target.selector.setQuadPoints(o),e.target.selector.updateSelectorQuadPoints(t.quadPoints)}const r=new F.A(e,e.target.selector.node.index,e,T.A);return t.isEditOp?r.execute():o.executeCommand(r),E.A.isSharedCommentingMode()&&o.removeLastEntryFromUndoStack(),Promise.resolve()}catch(e){return Promise.reject(e)}},CommentsUtil.isNewCommentFromContextMenu=e=>T.A.selectedCMTextBoxId===e&&y.A.commentTextBoxEnabled,CommentsUtil.isNewCommentFromStickyNoteLanding=e=>T.A.stickyNoteLandingCommentId===e&&y.A.stickyNoteLandingCohort===I.lc.STICKY_NOTE_LANDING_INLINE},GCJH:e=>{e.exports=function stackDelete(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o}},Gl2o:(e,t,o)=>{var r=o("miHg"),n=o("sbR2");e.exports=function isArrayLike(e){return null!=e&&n(e.length)&&!r(e)}},GyVh:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function get(){return l.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function get(){return m.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function get(){return d.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function get(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function get(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function get(){return s.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function get(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function get(){return p.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function get(){return c.default}});var r=_interopRequireDefault(o("hxLg")),n=_interopRequireDefault(o("dbIV")),s=_interopRequireDefault(o("OlF6")),a=_interopRequireDefault(o("wLXU")),l=_interopRequireDefault(o("7mdI")),c=_interopRequireDefault(o("OC5I")),p=_interopRequireDefault(o("3DC5")),d=_interopRequireDefault(o("Yrbn")),m=_interopRequireDefault(o("1u9O"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}},H0qY:(e,t,o)=>{"use strict";o.d(t,{A:()=>c});var r,n,s,a=o("abd3"),l=o("Yfoa");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const c=new(n=_applyDecoratedDescriptor((r=class CommentsPositionStore{constructor(){_initializerDefineProperty(this,"commentsPosition",n,this),_initializerDefineProperty(this,"commentPopupAnimatedCount",s,this),this.commentsPosition=[],this.commentPopupAnimatedCount=0}addCommentPosition(e){let t=this.getCommentIndex(e.commentId);-1===t?(t=this.getCommentPositionInsertIndex(e),this.commentsPosition.splice(t,0,e)):this.updateCommentPosition(t,e)}addViewrefToCommentPosition(e,t){const o=this.getCommentIndex(e);-1!==o&&(this.commentsPosition[o].viewRef=t),void 0===t.tabIndex&&this.updateTabIndexOfCommentPopups()}updateTabIndexOfCommentPopups(){for(let e=0;e<this.commentsPosition.length;e++){const t=this.commentsPosition[e];t.viewRef&&t.viewRef.setAttribute("tabindex",e+50)}}updateViewrefToCommentPosition(e,t){const o=this.getCommentIndex(e);-1===o||this.commentsPosition[o].viewRef||(this.commentsPosition[o].viewRef=t),void 0===t.tabIndex&&this.updateTabIndexOfCommentPopups()}updateCommentPopupAnimatedCount(){this.commentPopupAnimatedCount++}updateCommentPositionHeight(e,t){const o=this.getCommentIndex(e);-1!==o&&this.commentsPosition[o].height!==t&&(this.commentsPosition[o].height=t)}updateCommentPositionRTop(e,t){const o=this.getCommentIndex(e);this.commentsPosition[o].rTop=t}updateCommentPositionNTop(e,t){const o=this.getCommentIndex(e);-1!==o&&(this.commentsPosition[o].nTop=t,this.updateCommentPositionStatus(this.commentsPosition[o]))}updateCommentPositionStatus(e){e.isUpdated=!e.isUpdated}deleteCommentPosition(e){const t=this.getCommentIndex(e);if(-1!==t){if(this.commentsPosition[t].resetCommentPositionCache(),this.commentsPosition.splice(t,1),t<this.commentsPosition.length){const e=this.commentsPosition[t];l.A.getInstance().alignComment(e.commentId)}this.updateCommentPopupAnimatedCount()}}updateCommentPosition(e,t){this.commentsPosition[e]=t}getCommentPositionInsertIndex(e){let t=-1;for(let o=0;o<this.commentsPosition.length;o+=1){const r=this.commentsPosition[o];if(e.pageIndex<r.pageIndex&&-1===t)t=o;else if(e.pageIndex===r.pageIndex){if(!(e.nTop>=r.nTop)){t=o;break}t=o+1}}return-1===t&&(t=0===this.commentsPosition.length?0:this.commentsPosition.length),t}getCommentIndex(e){return this.commentsPosition.findIndex(t=>t.commentId===e)}resetCommentPopupAnimatedCount(){this.commentPopupAnimatedCount=0}resetCommentsPosition(){for(const e in this.commentsPosition)e.resetCommentPositionCache()}resetCommentsPositionCache(){this.resetCommentsPosition(),this.resetCommentPopupAnimatedCount()}}).prototype,"commentsPosition",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=_applyDecoratedDescriptor(r.prototype,"commentPopupAnimatedCount",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(r.prototype,"addCommentPosition",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"addCommentPosition"),r.prototype),_applyDecoratedDescriptor(r.prototype,"addViewrefToCommentPosition",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"addViewrefToCommentPosition"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateViewrefToCommentPosition",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"updateViewrefToCommentPosition"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateCommentPopupAnimatedCount",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"updateCommentPopupAnimatedCount"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateCommentPositionHeight",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"updateCommentPositionHeight"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateCommentPositionRTop",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"updateCommentPositionRTop"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateCommentPositionNTop",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"updateCommentPositionNTop"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateCommentPositionStatus",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"updateCommentPositionStatus"),r.prototype),_applyDecoratedDescriptor(r.prototype,"deleteCommentPosition",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"deleteCommentPosition"),r.prototype),_applyDecoratedDescriptor(r.prototype,"resetCommentPopupAnimatedCount",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"resetCommentPopupAnimatedCount"),r.prototype),_applyDecoratedDescriptor(r.prototype,"resetCommentsPosition",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"resetCommentsPosition"),r.prototype),r)},"Ha/P":(e,t,o)=>{var r=o("EbA6"),n=o("XHmI"),s=o("yhG+"),a=Object.prototype.hasOwnProperty;e.exports=function baseKeysIn(e){if(!r(e))return s(e);var t=n(e),o=[];for(var l in e)("constructor"!=l||!t&&a.call(e,l))&&o.push(l);return o}},Hlvc:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var r=o("abd3"),n=o("9+t3"),s=o("qgO1"),a=o("G5bJ"),l=o("WJZ5"),c=o("UJUO");const p=class T4Annotation{constructor(e,t){this.assetId=e,this.annotationObject=t,this.annotationId=t.id}updateCommentInUIAfterT4Response(e){return e&&"Ink"===e.type?{inkList:s.A.flattenInkList(e.inkList),boundingBox:[e.docRect.xMin,e.docRect.yMin,e.docRect.xMax,e.docRect.yMax]}:e&&"FreeText"===e.type?{boundingBox:[e.docRect.xMin,e.docRect.yMin,e.docRect.xMax,e.docRect.yMax]}:{}}updateCommentInServer(e){return new Promise(t=>{let o,a=e;a.modified=Date(),o=l.A.isFreeText(this.annotationObject)?s.A.reverseTranslate(a):s.A.findChanges((0,r.toJS)(this.annotationObject),a),this.annotationObject=a;const p=a.target.selector.node.index;n.default.getInstance().previewApis.comments.editComment(p,c.A.get(a.id),o).then(e=>{const o=e.params.status.comment;a.response=this.updateCommentInUIAfterT4Response(o),l.A.isFreeText(a)&&(a=s.A.updateFreeText(a,o)),t(a)})})}getCommentAppearance(){return new Promise(e=>{const t=this.annotationObject,o=t.target.selector.node.index;n.default.getInstance().previewApis.comments.getCommentAppearance(o,c.A.get(t.id),{appearanceType:"N"}).then(t=>{t.data.foundAppearance&&e(t.data)})})}getVoiceNoteData(){return new Promise((e,t)=>{const o=this.annotationObject,r=o.target.selector.node.index+1;n.default.getInstance().previewApis.comments.getVoiceNoteData(r,c.A.get(o.id)).then(t=>{e(t.data)}).catch(e=>{t(e)})})}reverseTranslate(e){return{type:s.A.getType(e.target.selector.subtype),docRect:s.A.getDocRectForAnnot(e.target.selector.boundingBox),contents:e.bodyValue,color:s.A.getColorHexToRGB(e.target.selector.strokeColor),border:{width:"1.000000",dash:{}},canZoom:"0",author:e.creator.name,opacity:e.target.selector.opacity,isHidden:"0",quadPoints:s.A.getQuadPoints(e.target.selector.quadPoints),inkList:s.A.getInkList(e.target.selector.inkList),parentID:c.A.get(e.target.source),intent:s.A.getIntent(e),subject:s.A.getSubject(e),commentRotation:s.A.getCommentRotation(e)}}makeAnnotSchema(e,t,o){const r=this.annotationObject,n={type:"Annotation",bodyValue:e,created:o.created,creator:o.creator,etag:"",mentions:t,modified:o.modified,motivation:o.motivation,status:o.status,target:JSON.parse(JSON.stringify(r.target))};return n.target.selector.opacity=o.target.selector.opacity,n.target.selector.subtype="note",n.target.selector.noteX=r.target.selector.boundingBox[0],n.target.selector.noteY=r.target.selector.boundingBox[1],n.target.source=r.id||o.target.source,n}replyNote(e,t,o){const r=this.annotationObject,s=this.makeAnnotSchema(e,t,o),l=this.reverseTranslate(s),p=r.target.selector.node.index;return n.default.getInstance().previewApis.comments.createComment(p,l).then(e=>{const t=o.id||a.A.getInstance().getGuid();return c.A.set({clientId:t,t4Id:e.params.commentData.id}),{...s,id:t}})}delete(){const e=this.annotationObject.id,t=this.annotationObject.pageNo;return n.default.getInstance().previewApis.comments.deleteComment(t,c.A.get(e)).then(()=>Promise.resolve({}))}updateCommentMetadata(e,t){return Promise.resolve({annotationId:this.annotationObject.id,etag:"",read:!0})}}},IBYW:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var r=o("abd3"),n=o("9+t3"),s=o("6AL6"),a=o("D/Yr"),l=o("qgO1"),c=o("G5bJ"),p=o("UJUO"),d=o("QNhk"),m=o("WJZ5"),u=o("iaHC");const h=class T4Asset{constructor(e,t){this.id=e,this.shouldEnableVoiceAnnotations=t,this.collection={},this.getCommentsCollectionPromise=new Promise(e=>{this.getCommentsCollectionResolve=e}),this.previewApis=n.default.getInstance().previewApis,this.previewApis.comments.onCommentsReady(e=>{e&&this.getCommentsCollectionResolve()})}translate(e){let t;e.parentID&&(t=[...p.A.entries()].filter(t=>{let{1:o}=t;return o===e.parentID}).map(e=>{let[t]=e;return t})[0]);const o={type:"Annotation",id:e.id,bodyValue:e.contents||"",name:e.name,mentions:[],motivation:l.A.getMotivation(e.parentID),target:{source:t||this.id,selector:{node:{index:e.pageIndex},opacity:e.opacity||"0.5",subtype:l.A.getSubtype(e.type,this.shouldEnableVoiceAnnotations),inkList:l.A.flattenInkList(e.inkList),quadPoints:l.A.flattenQuadPoints(e.quadPoints),boundingBox:[e.docRect.xMin,e.docRect.yMin,e.docRect.xMax,e.docRect.yMax],strokeColor:e.color?l.A.getColor(e.color):void 0,strokeWidth:e.border&&e.border.width||1,appearance:l.A.getSubtype(e.type,this.shouldEnableVoiceAnnotations)===a.Ay.REDHAWK_COMMENT_UNSUPPORTED?{id:e.id}:"",unsupportedAnnotationType:l.A.getSubtype(e.type,this.shouldEnableVoiceAnnotations)===a.Ay.REDHAWK_COMMENT_UNSUPPORTED?e.type:void 0,type:"AdobeAnnoSelector",intent:e.intent,subject:e.subject,commentRotation:e.commentRotation}},creator:{affiliation:"",type:"Person",id:"",name:e.author||"",email:""},created:`${e.modifiedDate}Z`,modified:`${e.modifiedDate}Z`,status:"open",etag:"",replies:[]},r=e.fontInfo||{};return m.A.isFreeText(o)&&(o.target.selector.style={color:l.A.getColor(r.color),fontName:r.fontName,fontSize:r.fontSize,letterSpacing:r.letterSpacing},o.target.selector.textOffsetPoint=e.textOffsetPoint,o.target.selector.appearanceData=e.appearanceData,o.target.selector.lineHeight=e.lineHeight,o.target.selector.descent=1,o.bodyValue=o.bodyValue.replace(/\r/g,"\n")),o}translateAnnots(e){let t=e.map(e=>this.translate(e));t=t.filter(e=>!!e.target.selector.subtype),d.A.integrationProvider.apis.comments.isFreetextEnabled()||(t=t.filter(e=>!m.A.isFreeText(e)));const o=t.filter(e=>"commenting"===e.motivation);return t.filter(e=>"replying"===e.motivation).forEach(e=>{let r=o.filter(t=>t.id===e.target.source)[0];if(!r)for(r=t.filter(t=>t.id===e.target.source)[0];r&&"commenting"!==r.motivation;)r=t.filter(e=>e.id===r.target.source)[0];r&&("strikeout"===e.target.selector.subtype?(r.target.selector.quadPoints=e.target.selector.quadPoints,r.target.selector.subtype="replace",r.target.selector.rect=r.target.selector.boundingBox,r.target.selector.boundingBox=e.target.selector.boundingBox):r.replies.push(e))}),o.forEach(e=>{"insert"===e.target.selector.subtype&&(e.target.selector.rect=e.target.selector.boundingBox)}),o}makeCollectionSchema(e,t){return{type:"AnnotationCollection",id:this.id,count:e,annotations:t,etag:"",retryAfter:"blah"}}getCollection(e){p.A.clear();const t=[];for(let o=0;o<e;o+=1){const e=this.previewApis.comments.getCommentsList(o);t.push(e)}return Promise.all(t).then(e=>{let t=[];e.forEach((e,o)=>{const r=e.params.commentsList.comments;r.forEach(e=>{e.pageIndex=o,u.A.addAnnotToNameMap(o,e)}),t=t.concat(r)}),t=t.map(e=>{const t=c.A.getInstance().getGuid();return p.A.set({clientId:t,t4Id:e.id}),{...e,id:t}});const o=this.translateAnnots(t);let r=o.filter(e=>"unsupported"===e.target.selector.subtype);const n=r.length,a=o.length-r.length;r=r.map(e=>e.target.selector.unsupportedAnnotationType),r=Array.from(new Set(r)),(0,s.BI)("Commenting","CommentProperty","UnsupportedAnnot",{"adb.event.context.dc.parentAnnot":r,"adb.event.context.dc.count":n}),(0,s.BI)("Commenting","CommentProperty","SupportedAnnot",{"adb.event.context.dc.count":a});const l=t.length;return this.makeCollectionSchema(l,o)})}get(){return this.getCommentsCollectionPromise.then(()=>n.default.getInstance().previewApis.documentState.getTotalPages().then(e=>this.getCollection(e)))}getCommentMetadata(){return Promise.resolve([])}transformToAnnotSchema(e,t,o,r,n,s){const l={type:"Annotation",bodyValue:e,motivation:o.motivation,mentions:t,target:{source:this.id,selector:{node:{indices:[{boundingBox:s.boundingBox,index:o.target.selector.node.index,quadPoints:s.quadPoints}],index:o.target.selector.node.index},quadPoints:s.quadPoints,opacity:s.opacity,subtype:n,boundingBox:s.boundingBox,inkList:s.inkList,strokeColor:s.strokeColor,strokeWidth:s.strokeWidth||a.Ay.REDHAWK_DEFAULT_STROKE_WIDTH,type:s.type,style:s.style||{},styleClass:s.styleClass,textOffsetPoint:s.textOffsetPoint,appearanceData:s.appearanceData||{},lineHeight:s.lineHeight,descent:s.descent,intent:s.intent,subject:s.subject,commentRotation:s.commentRotation}},creator:o.creator,created:o.created,modified:o.modified,status:o.status,etag:""};return s.appearance&&(l.target.selector.appearance=s.appearance),l}comment(e,t,o,n,s,a){let d=this.transformToAnnotSchema(e,t,o,n,s,a);const u=(0,r.toJS)(l.A.reverseTranslate(d)),h=a.node.index;return this.previewApis.comments.createComment(h,u).then(e=>{const t=o.id||c.A.getInstance().getGuid();return p.A.set({clientId:t,t4Id:e.params.commentData.id}),m.A.isFreeText(d)&&(d=l.A.updateFreeText(d,e.params.commentData.comment)),{...d,id:t}})}getAnnotDataForAJS(e,t,o,n,s,a){const c=this.transformToAnnotSchema(e,t,o,n,s,a),p=(0,r.toJS)(l.A.reverseTranslate(c));return{pageIndex:a.node.index,newComment:p,response:c}}createComments(e){return this.previewApis.comments.createComments(e)}on(e,t){return t(this.collection)}stopCheckingForUpdates(){}}},J4lf:(e,t,o)=>{var r=o("M7mU");e.exports=function getMapData(e,t){var o=e.__data__;return r(t)?o["string"==typeof t?"string":"hash"]:o.map}},JGHU:(e,t,o)=>{"use strict";o.d(t,{Y_:()=>shouldShowGenAIPromptForCurrentDocument,zd:()=>suppressGenAIPromptForCurrentDocument});var r=o("LwNf"),n=o("iaHC"),s=o("CKE+"),a=o("uHBz");const l=r.bV,c=r.y9,getDataStructureFromStorage=(e,t)=>{const o=((e,t)=>e(t()))(e,t);try{return o?JSON.parse(o):null}catch(e){return null}},getDocumentId=()=>(0,r.tM)("viewerDocumentId"),GEN_AI_KEY_NAME_GETTER=()=>"gen_ai_prompt_dismissed",shouldShowGenAIPromptForCurrentDocument=async()=>{const e=getDocumentId(),t=getDataStructureFromStorage(l,GEN_AI_KEY_NAME_GETTER),o=await(0,a.h)();return!(!s.A.isAnnonymous()&&!o)&&(!(n.A.comments.length>0)&&(!Array.isArray(t)||!(t.length>=2)&&!t.includes(e)))},suppressGenAIPromptForCurrentDocument=()=>{const e=getDocumentId();let t=getDataStructureFromStorage(l,GEN_AI_KEY_NAME_GETTER),o=!1;var r;Array.isArray(t)||(t=[],o=!0),t.length<2&&!t.includes(e)&&(t.push(e),o=!0),t.length>2&&(t.splice(2),o=!0),o&&((e,t,o)=>{e(t(),o)})(c,GEN_AI_KEY_NAME_GETTER,(r=t)?JSON.stringify(r):null)}},Jm6I:(e,t,o)=>{"use strict";o.d(t,{Em:()=>r,UV:()=>m,VG:()=>a,Xg:()=>s,YU:()=>u,_6:()=>n,dT:()=>y,fN:()=>l,iK:()=>h,lc:()=>c,ru:()=>p,uv:()=>d,y$:()=>g});const r=Object.freeze({LOCAL:"local",REDIRECT_TO_APP:"RedirectToApp"}),n=Object.freeze({RHP:"RHP",MAIN_CONTENT_AREA:"MAIN_CONTENT_AREA"}),s=(Object.freeze({TOOLTIP_RIGHT_PLACEMENT:"right",TOOLTIP_DELAY:1e3,TOOLTIP_HOVER:"hover"}),Object.freeze({COMMENT_POSTED_EVENT:"comment-posted",REPLY_POSTED_EVENT:"reply-posted",PERSONAL_COMMENT_POSTED_EVENT:"personal-comment-posted"})),a=Object.freeze({CONTROL:"comment_guide_user_control",GUIDED:"comment_guide_user"}),l=(Object.freeze({CONTROL:"comment_textbox_control",TEXTBOX:"comment_textbox"}),Object.freeze({CONTROL:"comment_intent_driven_review_control",INTENT_DRIVEN_REVIEW:"comment_intent_driven_review"})),c=Object.freeze({CONTROL:"comment_stickynote_landing_control",STICKY_NOTE_LANDING_INLINE:"comment_stickynote_landing_inline",STICKY_NOTE_LANDING_RHP:"comment_stickynote_landing_rhp"}),p=Object.freeze({MICROANIMATION:"microanimation",ILLUSTRATIONS:"illustrations"}),d=Object.freeze({COMMENT_SUGGESTIONS:"commentSuggestions",REPLY_SUGGESTIONS:"replySuggestions"}),m=Object.freeze({CONTROL:"comment_panel_genai_control",PROMPT_CARD:"comment_panel_genai_challengerA",PROMPT_ONE_CLICK:"comment_panel_genai_challengerB"}),u=(Object.freeze({comment_1click_draft_control:"comment_1click_draft_control",comment_1click:"comment_1click",comment_draft:"comment_draft"}),Object.freeze({TOP_RIGHT:"TOP_RIGHT",BOTTOM_RIGHT:"BOTTOM_RIGHT"})),h=Object.freeze({OFF:"off",KEPT:"kept",DELETED:"deleted",NONE_REPLY_TO_SELF:"noneReplyToSelf",NONE_USER_TURNED_OFF:"noneUserTurnedOff",NONE_USER_IS_ANONYMOUS:"noneUserIsAnonymous",NONE_SUGGESTED_MENTION_IS_ANONYMOUS:"noneSuggestedMentionIsAnonymous"}),g=Object.freeze({TOOLS_EVENTS:"TOOLS_EVENTS"}),y=Object.freeze({DEV:"dev",STAGE:"stage",PROD:"prod"})},JssA:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedDate=void 0;t.getFormattedDate=function(e){void 0===e&&(e=new Date);return`${addPrecision(e.getFullYear())}-${addPrecision(e.getMonth()+1)}-${addPrecision(e.getDate())}T${addPrecision(e.getHours())}:${addPrecision(e.getMinutes())}:${addPrecision(e.getSeconds())}.${addPrecision(e.getMilliseconds(),3)}${e.toString().match(/([-\+][0-9]+)\s/)[1]}`};const addPrecision=function(e,t){return void 0===t&&(t=2),Number(e).toLocaleString("en-US",{minimumIntegerDigits:t,useGrouping:!1})}},K5St:(e,t,o)=>{var r=o("5/P2"),n=o("QWpd"),s=o("yW/x");e.exports=function mapCacheClear(){this.size=0,this.__data__={hash:new r,map:new(s||n),string:new r}}},"KEN/":(e,t,o)=>{var r=o("wxXx"),n=o("QeO5");e.exports=function copySymbolsIn(e,t){return r(e,n(e),t)}},KvYl:(e,t,o)=>{e.exports=o("jmza")()},LHoH:e=>{var t=Object.prototype.toString;e.exports=function objectToString(e){return t.call(e)}},LQfy:e=>{e.exports=function setCacheAdd(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},LZTs:(e,t,o)=>{var r=o("1XbB")(o("nsdc"),"DataView");e.exports=r},LwNf:(e,t,o)=>{"use strict";o.d(t,{Qy:()=>deleteVariableValueFromSessionStorage,bV:()=>getVariableValueFromStorage,kn:()=>storeVariableValueIntoSessionStorage,tM:()=>getVariableValueFromSessionStorage,y9:()=>storeVariableValueIntoStorage});var r=o("plsW"),n=o("0/0f");function getSafeSessionStorage(){return r.webPlatform.locateImplementationSync("ISessionStorage")}function getVariableValueFromStorage(e){try{let t;return window.localStorage&&(t=window.localStorage[e]),null===t&&(t=void 0),t}catch(e){return void(0,n.A)({context:"LocalstorageError"}).error(JSON.stringify(e))}}function storeVariableValueIntoStorage(e,t){if(null!=e)try{window.localStorage&&(window.localStorage[e]=t)}catch(e){(0,n.A)({context:"LocalstorageError"}).error(JSON.stringify(e))}}function getVariableValueFromSessionStorage(e){try{let t;const o=getSafeSessionStorage();return o&&(t=o.getItem(e)),null===t&&(t=void 0),t}catch(e){return void(0,n.A)({context:"SessionStorageError"}).error(JSON.stringify(e))}}function storeVariableValueIntoSessionStorage(e,t){if(null!=e)try{const o=getSafeSessionStorage();o&&o.setItem(e,t)}catch(e){(0,n.A)({context:"SessionStorageError"}).error(JSON.stringify(e))}}function deleteVariableValueFromSessionStorage(e){if(null!=e)try{const t=getSafeSessionStorage();t&&t.removeItem(e)}catch(e){(0,n.A)({context:"SessionStorageError"}).error(JSON.stringify(e))}}},Lx6e:(e,t,o)=>{e.exports=o("U2o4")("MG6g")},M2Fx:e=>{"use strict";e.exports=window.adobe_dc_sdk["dc-mobx"]},M2M1:(e,t,o)=>{var r=o("8f/F"),n=r?r.prototype:void 0,s=n?n.valueOf:void 0;e.exports=function cloneSymbol(e){return s?Object(s.call(e)):{}}},M6QY:(e,t,o)=>{var r=o("lD0t"),n=o("Rr17"),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,l=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return s.call(e,t)}))}:n;e.exports=l},M7mU:e=>{e.exports=function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},MZZ1:e=>{e.exports=function mapToArray(e){var t=-1,o=Array(e.size);return e.forEach(function(e,r){o[++t]=[r,e]}),o}},MotB:(e,t,o)=>{var r=o("YWiy");function SDCDeletePages18N(e){return r.createElement("svg",e,r.createElement("g",null,[r.createElement("rect",{x:"6.37477",y:"6.03956",width:"1.50045",height:"7.9658",rx:"0.5",transform:"translate(-0.55386 0.41775) rotate(-3.23282)",fill:"var(--iconFill, #464646)",key:0}),r.createElement("rect",{x:"6.94235",y:"9.27224",width:"7.96586",height:"1.50045",rx:"0.5",transform:"translate(0.30027 20.36271) rotate(-86.75398)",fill:"var(--iconFill, #464646)",key:1}),r.createElement("path",{d:"M18,3.75a.5.5,0,0,0-.5-.5H13.75V1A.75.75,0,0,0,13,.25H5.00977a.75.75,0,0,0-.75.75V3.25H.5a.5.5,0,0,0-.5.5v.5a.5.5,0,0,0,.5.5H2.33276L3.78223,16.6056a.5.5,0,0,0,.4963.43932h9.44226a.5.5,0,0,0,.49613-.4379l1.484-11.857H17.5a.5.5,0,0,0,.5-.5Zm-12.24023-2H12.25v1.5H5.75977Zm7.07812,13.79492H5.16406L3.84473,4.75H14.18945Z",fill:"var(--iconFill, #464646)",key:2})]))}SDCDeletePages18N.defaultProps={width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=SDCDeletePages18N,SDCDeletePages18N.default=SDCDeletePages18N},Mv5R:(e,t,o)=>{var r=o("QwGB"),n=o("FL3/"),s=o("RS7y"),a=s&&s.isSet,l=a?n(a):r;e.exports=l},NBrC:(e,t,o)=>{var r=o("wxXx"),n=o("M6QY");e.exports=function copySymbols(e,t){return r(e,n(e),t)}},NDgk:(e,t,o)=>{var r=o("YWiy");function SDCTileHighlight64(e){return r.createElement("svg",e,[r.createElement("path",{d:"m59,0H5C2.19995,0,0,2.20001,0,5v54c0,2.79999,2.19995,5,5,5h54c2.80005,0,5-2.20001,5-5V5c0-2.79999-2.19995-5-5-5ZM20.88623,48h-7.5354c-1.42554,0-2.24023-1.41803-1.22192-2.83612l3.05493-4.65924c.61084-.8103,1.83276-.8103,2.64746,0l4.48047,4.65924c.8147,1.01294.20361,2.83612-1.42554,2.83612Zm4.16064-3.84668c-.73438,0-1.4248-.28613-1.94434-.80566l-3.90918-3.9082c-.52148-.51953-.80859-1.21094-.80859-1.94727s.28711-1.42773.80859-1.94727l21.22852-21.17773c1.06934-1.06738,2.81055-1.06934,3.88379-.00098l3.72754,3.71875c.52148.51953.80859,1.21094.80859,1.94727s-.28711,1.42773-.80859,1.94727l-21.02734,21.35352c-.51855.52637-1.20996.81738-1.94922.82031h-.00977Zm26.99512-1.45734l-4.8457,4.99957c-.1897.19568-.45093.3056-.72339.30438l-18.80005.00006c-.90039-.00403-1.33716-1.18188-.6853-1.80304l5.16382-4.9209c.18604-.17725.43311-.27606.68994-.27606h18.48267c.88354,0,1.33301,1.06165.71802,1.69598Z",fill:"var(--iconMagenta, #ce2783)",fillRule:"evenodd",opacity:".1",key:0}),r.createElement("path",{d:"m17.8313,40.50464c-.8147-.8103-2.03662-.8103-2.64746,0l-3.05493,4.65924c-1.01831,1.41809-.20361,2.83612,1.22192,2.83612h7.5354c1.62915,0,2.24023-1.82318,1.42554-2.83612l-4.48047-4.65924Z",fill:"var(--iconMagenta, #ce2783)",key:1}),r.createElement("path",{d:"m47.3418,20.03223c0-.33496-.13086-.64844-.36719-.88477l-3.72754-3.71875c-.24414-.24316-.56348-.36426-.88281-.36426-.32031,0-.63965.12207-.88281.36426l-21.22949,21.17871c-.23633.23633-.36719.5498-.36719.88477s.13086.64844.36719.88477l3.91113,3.91016c.23633.23633.5498.36621.88379.36621h.00488c.33496-.00195.65039-.13379.88574-.37305l21.03223-21.3584c.24121-.24121.37207-.55469.37207-.88965Z",fill:"var(--iconMagenta, #ce2783)",opacity:".2",key:2}),r.createElement("path",{d:"m48.0332,21.97949c.52148-.51953.80859-1.21094.80859-1.94727s-.28711-1.42773-.80859-1.94727l-3.72754-3.71875c-1.07324-1.06836-2.81445-1.06641-3.88379.00098l-21.22852,21.17773c-.52148.51953-.80859,1.21094-.80859,1.94727s.28711,1.42773.80859,1.94727l3.90918,3.9082c.51953.51953,1.20996.80566,1.94434.80566h.00977c.73926-.00293,1.43066-.29395,1.94922-.82031l21.02734-21.35352Zm-22.98145,20.67383h-.00488c-.33398,0-.64746-.12988-.88379-.36621l-3.91113-3.91016c-.23633-.23633-.36719-.5498-.36719-.88477s.13086-.64844.36719-.88477l21.22949-21.17871c.24316-.24219.5625-.36426.88281-.36426.31934,0,.63867.12109.88281.36426l3.72754,3.71875c.23633.23633.36719.5498.36719.88477s-.13086.64844-.37207.88965l-21.03223,21.3584c-.23535.23926-.55078.37109-.88574.37305Z",fill:"var(--iconMagenta, #ce2783)",key:3}),r.createElement("path",{d:"m51.32397,41h-18.48267c-.25684,0-.50391.09882-.68994.27606l-5.16382,4.9209c-.65186.62115-.21509,1.79901.6853,1.80304l18.80005-.00006c.27246.00122.53369-.1087.72339-.30438l4.8457-4.99957c.61499-.63434.16553-1.69598-.71802-1.69598Z",fill:"var(--iconMagenta, #ce2783)",key:4})])}SDCTileHighlight64.defaultProps={id:"b","data-name":"Icons",width:"64",height:"64",viewBox:"0 0 64 64"},e.exports=SDCTileHighlight64,SDCTileHighlight64.default=SDCTileHighlight64},NjQJ:e=>{"use strict";e.exports=function(e){var t=e[1],o=e[3];if(!o)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(n," */");return[t].concat([s]).join("\n")}return[t].join("\n")}},OC5I:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("3DC5"));var n=function version(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=n},OLgS:(e,t,o)=>{var r=o("LZTs"),n=o("yW/x"),s=o("C16B"),a=o("A+JF"),l=o("bWDU"),c=o("2VCT"),p=o("2fQ+"),d="[object Map]",m="[object Promise]",u="[object Set]",h="[object WeakMap]",g="[object DataView]",y=p(r),C=p(n),_=p(s),b=p(a),E=p(l),v=c;(r&&v(new r(new ArrayBuffer(1)))!=g||n&&v(new n)!=d||s&&v(s.resolve())!=m||a&&v(new a)!=u||l&&v(new l)!=h)&&(v=function(e){var t=c(e),o="[object Object]"==t?e.constructor:void 0,r=o?p(o):"";if(r)switch(r){case y:return g;case C:return d;case _:return m;case b:return u;case E:return h}return t}),e.exports=v},ONWK:e=>{e.exports=function arrayPush(e,t){for(var o=-1,r=t.length,n=e.length;++o<r;)e[n+o]=t[o];return e}},OlF6:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(o("RWB1")),n=_interopRequireDefault(o("rrFL")),s=o("Yrbn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var a=function v4(e,t,o){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const a=(e=e||{}).random||(e.rng||n.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){o=o||0;for(let e=0;e<16;++e)t[o+e]=a[e];return t}return(0,s.unsafeStringify)(a)};t.default=a},Otif:e=>{var t=Array.isArray;e.exports=t},PBIp:(e,t,o)=>{var r=o("2VCT"),n=o("CXG2");e.exports=function baseIsArguments(e){return n(e)&&"[object Arguments]"==r(e)}},PIOo:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});const r=class RGBAColor{constructor(e,t,o,r){this.red=e,this.green=t,this.blue=o,this.alpha=r}};var n=o("CTXV"),s=o("zA4s"),a=o("/y6s");function sliceArrayInHalf(e){const t=Math.ceil(e.length/2);return{firstHalf:e.slice(0,t),secondHalf:e.slice(-t)}}class CanvasQuad{constructor(e){let{quadPoints:t=[],originalQuadPointsArray:o=[],type:s=null,color:a=new r(n.Ow.red,n.Ow.green,n.Ow.blue,n.Ow.alpha)}=e;this.originalQuadPointsArray=this._getValidQuadsArray(o,t),this.color=a,this.type=s}_getValidQuadsArray(e,t){let o=[];return CanvasQuad.isQuadPointsArrayValid(e)?o=e:CanvasQuad.areQuadPointsValid(t)&&(o=[t]),o}static isQuadPointsArrayValid(e){return Array.isArray(e)&&e.length>0&&e.every(CanvasQuad.areQuadPointsValid)}static areQuadPointsValid(e){return Array.isArray(e)&&8===e.length}get topLeft(){const[e,t,o,r,n,s,a,l]=this.quadPoints;return{x:e,y:t}}get topRight(){const[e,t,o,r,n,s,a,l]=this.quadPoints;return{x:o,y:r}}get bottomRight(){const[e,t,o,r,n,s,a,l]=this.quadPoints;return{x:n,y:s}}get bottomLeft(){const[e,t,o,r,n,s,a,l]=this.quadPoints;return{x:a,y:l}}get left(){return Math.min(this.topLeft.x,this.topRight.x,this.bottomLeft.x,this.bottomRight.x)}get right(){return Math.max(this.topLeft.x,this.topRight.x,this.bottomLeft.x,this.bottomRight.x)}get top(){return Math.min(this.topLeft.y,this.topRight.y,this.bottomLeft.y,this.bottomRight.y)}get bottom(){return Math.max(this.topLeft.y,this.topRight.y,this.bottomLeft.y,this.bottomRight.y)}get width(){const{right:e,left:t}=this;return Math.abs(e-t)}get height(){const{bottom:e,top:t}=this;return Math.abs(e-t)}get angle(){const e=this.topLeft.y-this.bottomLeft.y,t=this.topLeft.x-this.bottomLeft.x;return 180*Math.atan2(-e,t)/Math.PI}get polygonTopEdgePoints(){let e=[];const t=this.originalQuadPointsArray.slice();return this.type===a.Z9.CARET_QUAD&&t.pop(),t.forEach(t=>{const{firstHalf:o}=sliceArrayInHalf(t);e=e.concat(o)}),e}get polygonBottomEdgePoints(){let e=[];return this.originalQuadPointsArray.forEach(t=>{const{secondHalf:o}=sliceArrayInHalf(t);e=o.concat(e)}),e}get polygonPoints(){let e=[],t=[];this.originalQuadPointsArray.forEach(o=>{const{firstHalf:r,secondHalf:n}=sliceArrayInHalf(o);e=e.concat(r),t=n.concat(t)});return e.concat(t)}get polygonBoundsUnion(){let e=Number.MAX_SAFE_INTEGER,t=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;return this.originalQuadPointsArray.forEach(n=>{const s=new CanvasQuad({quadPoints:n});e=Math.min(e,s.left),t=Math.max(t,s.right),o=Math.min(o,s.top),r=Math.max(r,s.bottom)}),{left:e,top:o,right:t,bottom:r,width:Math.abs(t-e),height:Math.abs(o-r)}}get leftMostQuad(){return this.originalQuadPointsArray.length?new CanvasQuad({quadPoints:this.originalQuadPointsArray[0]}):null}get rightMostQuad(){return this.originalQuadPointsArray.length?new CanvasQuad({quadPoints:this.originalQuadPointsArray[this.originalQuadPointsArray.length-1]}):null}get quadPoints(){let e=[];const t=this.originalQuadPointsArray.slice();return this.type===a.Z9.CARET_QUAD&&t.pop(),t.forEach(t=>{let[o,r,n,s,a,l,c,p]=t;0===e.length?e=t.slice():e.splice(2,4,n,s,a,l)}),e}_translatePointsArray(e,t,o){return this._transformPointsArray(o,(o,r)=>({x:o-e,y:r-t}))}_transformPointsArray(e,t,o){const r=[];for(let n=0;n<e.length-1;n+=2){const s=e[n],a=e[n+1],l=n/2,{x:c,y:p}=t(s,a,l,o);r.push(c,p)}return r}equals(e){if(e&&e instanceof CanvasQuad&&CanvasQuad.isQuadPointsArrayValid(e.originalQuadPointsArray)&&CanvasQuad.isQuadPointsArrayValid(this.originalQuadPointsArray)&&e.originalQuadPointsArray.length===this.originalQuadPointsArray.length){const areQuadPointsEqual=(e,t)=>e.every((e,o)=>t[o]===e);return this.originalQuadPointsArray.every((t,o)=>{const r=e.originalQuadPointsArray[o];return areQuadPointsEqual(t,r)})}return!1}updateColor(e){this.color=e}updateType(e){this.type=e}transform(e){const t=this.originalQuadPointsArray.map((t,o)=>this._transformPointsArray(t,e,o));return new CanvasQuad({...this,originalQuadPointsArray:t,type:this.type})}translate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const o=this.originalQuadPointsArray.map(o=>this._translatePointsArray(e,t,o));return new CanvasQuad({...this,originalQuadPointsArray:o})}mergeQuad(e){const t=this.originalQuadPointsArray.slice().concat(e.originalQuadPointsArray);return new CanvasQuad({...this,originalQuadPointsArray:t})}getEffectiveCaretQuad(e){const t=this.originalQuadPointsArray.slice(),o=t[t.length-1],r=this.getEdgesAsPerRotation(o,e.originalQuadPointsArray[0],this.angle),n=new s.e_({x:r.rightEdgeQuad[0],y:r.rightEdgeQuad[1]},{x:r.rightEdgeQuad[2],y:r.rightEdgeQuad[3]}),l=new s.e_({x:r.topEdgeCaret[0],y:r.topEdgeCaret[1]},{x:r.topEdgeCaret[2],y:r.topEdgeCaret[3]});let c=(0,s.w5)(n,l);const p=new s.e_({x:r.rightEdgeCaret[0],y:r.rightEdgeCaret[1]},{x:r.rightEdgeCaret[2],y:r.rightEdgeCaret[3]}),d=new s.e_({x:r.bottomEdgeQuad[0],y:r.bottomEdgeQuad[1]},{x:r.bottomEdgeQuad[2],y:r.bottomEdgeQuad[3]});let m=(0,s.w5)(p,d);if(!c){const t=e.originalQuadPointsArray[0];c={x:t[0],y:t[1]}}if(!m){const t=e.originalQuadPointsArray[0];m={x:t[4],y:t[5]}}const u=[c.x,c.y,r.topEdgeCaret[2],r.topEdgeCaret[3],m.x,m.y,r.bottomEdgeQuad[0],r.bottomEdgeQuad[1]],h=t.concat([u]);return new CanvasQuad({...this,originalQuadPointsArray:h,type:a.Z9.CARET_QUAD})}getEdgesAsPerRotation(e,t){const[o,r,n,s,a,l,c,p]=e,[d,m,u,h,g,y,C,_]=this.findCaretVerticesInOrder(e,t);return{topEdgeQuad:[o,r,n,s],rightEdgeQuad:[n,s,a,l],bottomEdgeQuad:[a,l,c,p],leftEdgeQuad:[c,p,o,r],topEdgeCaret:[d,m,u,h],rightEdgeCaret:[u,h,g,y],bottomEdgeCaret:[g,y,C,_],leftEdgeCaret:[C,_,d,m]}}findCaretVerticesInOrder(e,t){const[o,r,n,a,l,c,p,d]=t,[m,u,h,g,y,C,_,b]=e,E=new s.e_({x:h,y:g},{x:y,y:C}),v=new s.e_({x:o,y:r},{x:n,y:a}),T=new s.e_({x:n,y:a},{x:l,y:c}),A=new s.e_({x:l,y:c},{x:p,y:d});let O=(0,s.w5)(v,E);return O&&O.intersectionPointLocation===s.gh.BOTH?t:(O=(0,s.w5)(T,E),O&&O.intersectionPointLocation===s.gh.BOTH?this.rotateArray(t,2):(O=(0,s.w5)(A,E),O&&O.intersectionPointLocation===s.gh.BOTH?this.rotateArray(t,4):this.rotateArray(t,6)))}rotateArray(e,t){if(t<0||t>=e.length)throw new Error("Index out of bounds");const o=e.slice(t),r=e.slice(0,t);return o.concat(r)}get area(){return(0,s.PL)(this.topLeft,this.topRight)*(0,s.PL)(this.topLeft,this.bottomLeft)}}const l=CanvasQuad},PRz2:(e,t,o)=>{var r=o("ysGJ");e.exports=function cloneTypedArray(e,t){var o=t?r(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}},Pn9q:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function initCloneArray(e){var o=e.length,r=new e.constructor(o);return o&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},Q8Bv:(e,t,o)=>{var r=o("aFUB"),n=o("1zOy"),s=o("XHmI");e.exports=function initCloneObject(e){return"function"!=typeof e.constructor||s(e)?{}:r(n(e))}},QKqB:(e,t,o)=>{"use strict";o.d(t,{U:()=>SignalDispatcher});class SignalDispatcher{constructor(){this.reset()}trigger(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];const n=this.observerMap[e];void 0!==e&&void 0!==n&&n.forEach(e=>{e(...o)})}on(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.observerMap[e];if(void 0!==e){void 0===r&&(this.observerMap[e]=[],r=this.observerMap[e]),r.push(t);const{signal:n}=o;if(!n)return;if("function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener){if(n.aborted)return void this.unregister(e,t);const abortHandler=()=>{this.unregister(e,t)};n.addEventListener("abort",abortHandler,{once:!0,signal:this.observerController.signal})}}}unregister(e,t){if(this.observerMap[e]){const o=this.observerMap[e];o.includes(t)&&o.splice(o.indexOf(t),1)}}reset(){this.observerController&&this.observerController.abort(),this.observerMap={},this.observerController=new AbortController}}},"QMW/":(e,t,o)=>{"use strict";o.d(t,{L:()=>getIsModernViewerCommentsPanelExist});const getIsModernViewerCommentsPanelExist=e=>e.isModernViewerCommentsPanelExist},QNhk:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var r=o("0/0f");let n={};n=o("plsW").providers;const s=new class IntegrationStore{constructor(){this.integrationProvider=void 0,this.integrationProviderFunctionOverride=void 0,this.getIntegrationProvider=()=>this.integrationProvider?Promise.resolve(this.integrationProvider):new Promise(e=>{var t,o;const r=null!==(t=this.integrationProviderFunctionOverride)&&void 0!==t?t:null===(o=n)||void 0===o?void 0:o.integrationProvider;"function"==typeof r?r().then(t=>{this.integrationProvider=t,console.log("IntegrationStore.getIntegrationProvider: successful fetch, resolve to provider "+(this.integrationProviderFunctionOverride?"from override":"from providers")),e(t)},()=>{console.error("IntegrationStore.getIntegrationProvider: failed fetch, resolve to undefined"),e(void 0)}):(console.error("IntegrationStore.getIntegrationProvider: no fetch function, resolve to undefined"),e(void 0))})}clearIntegrationProvider(){this.integrationProvider=void 0,this.integrationProviderFunctionOverride=void 0}setIntegrationProviderFunctionOverride(e){this.integrationProviderFunctionOverride=e}setUserSetting(e,t){this.integrationProvider&&this.integrationProvider.getUserSettings().then(o=>{const n={...o,[e]:t};this.integrationProvider.setUserSettings(n).then(()=>{}).catch(()=>{(0,r.A)({context:"UserProfileStore"}).error("preferences not saved")})})}isSharedCommentingMode(){return!(!this.integrationProvider||"function"!=typeof this.integrationProvider.apis.comments.isSharedCommentingMode)&&this.integrationProvider.apis.comments.isSharedCommentingMode()}isReadOnlyMode(){return!(!this.integrationProvider||"function"!=typeof this.integrationProvider.apis.comments.isReadOnlyMode)&&this.integrationProvider.apis.comments.isReadOnlyMode()}isMentionEnabled(){var e,t,o,r;return(null===(e=this.integrationProvider)||void 0===e||null===(t=e.apis)||void 0===t||null===(o=t.comments)||void 0===o||null===(r=o.isMentionEnabled)||void 0===r?void 0:r.call(o))||!1}getSuggestiveList(e){var t,o,r;return null===(t=this.integrationProvider)||void 0===t||null===(o=t.apis)||void 0===o||null===(r=o.comments)||void 0===r?void 0:r.getSuggestionList(e)}isFreetextEnabled(){var e,t,o,r;return(null===(e=this.integrationProvider)||void 0===e||null===(t=e.apis)||void 0===t||null===(o=t.comments)||void 0===o||null===(r=o.isFreetextEnabled)||void 0===r?void 0:r.call(o))||!1}isSharedFileMode(){var e,t,o,r;return(null===(e=this.integrationProvider)||void 0===e||null===(t=e.apis)||void 0===t||null===(o=t.comments)||void 0===o||null===(r=o.isSharedFileMode)||void 0===r?void 0:r.call(o))||!1}}},QT1v:(e,t,o)=>{"use strict";o.d(t,{l:()=>initializeActionUtil});var r=o("D/Yr");function initializeActionUtil(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t,showCallback:o,previewConfig:n}=e;return t&&t===r.Ay.MODERN_VIEWER_DEEPLINK?Promise.resolve():(o&&o(!0),!n||n.shouldRenderCommentsDropin&&!n.shouldRenderPersonalCommentsDropin||!1!==(null==n?void 0:n.isCommentingAllowed)?!(!n||!n.shouldRenderCommentsDropin&&!n.shouldRenderPersonalCommentsDropin)&&this.load().then(t=>t.initializeAction(e)):("function"==typeof e.isDisabled&&e.isDisabled(!0,"modernviewer.quickToolsDisabledForProtectedFileToast"),!1))}},QWpd:(e,t,o)=>{var r=o("FvTn"),n=o("TqnU"),s=o("Xxrq"),a=o("nulL"),l=o("TaC2");function ListCache(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}ListCache.prototype.clear=r,ListCache.prototype.delete=n,ListCache.prototype.get=s,ListCache.prototype.has=a,ListCache.prototype.set=l,e.exports=ListCache},QZQi:(e,t,o)=>{var r=o("0Lu8");e.exports=function hashClear(){this.__data__=r?r(null):{},this.size=0}},QcwK:e=>{e.exports=function copyArray(e,t){var o=-1,r=e.length;for(t||(t=Array(r));++o<r;)t[o]=e[o];return t}},QeO5:(e,t,o)=>{var r=o("ONWK"),n=o("1zOy"),s=o("M6QY"),a=o("Rr17"),l=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,s(e)),e=n(e);return t}:a;e.exports=l},QwGB:(e,t,o)=>{var r=o("OLgS"),n=o("CXG2");e.exports=function baseIsSet(e){return n(e)&&"[object Set]"==r(e)}},R4fn:(e,t,o)=>{var r=o("K5St"),n=o("sGyT"),s=o("9Mxr"),a=o("8KhM"),l=o("tl3b");function MapCache(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}MapCache.prototype.clear=r,MapCache.prototype.delete=n,MapCache.prototype.get=s,MapCache.prototype.has=a,MapCache.prototype.set=l,e.exports=MapCache},RS7y:(e,t,o)=>{e=o.nmd(e);var r=o("Z7YH"),n=t&&!t.nodeType&&t,s=n&&e&&!e.nodeType&&e,a=s&&s.exports===n&&r.process,l=function(){try{var e=s&&s.require&&s.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=l},RWB1:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=o},Rr17:e=>{e.exports=function stubArray(){return[]}},RrlM:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},Rtow:(e,t,o)=>{var r=o("QWpd");e.exports=function stackClear(){this.__data__=new r,this.size=0}},S0lO:(e,t,o)=>{var r=o("YWiy");function SDCTextUnderline18N(e){return r.createElement("svg",e,r.createElement("g",null,[r.createElement("path",{d:"M3.51678,2a.50174.50174,0,0,0-.50173.50174L3.01072,4.393a.50172.50172,0,0,0,.50171.50173h.50608A.50173.50173,0,0,0,4.52024,4.393l.00433-.8669H8v9.507H6.0225a.50175.50175,0,0,0-.50173.50174v.50825a.50174.50174,0,0,0,.50173.50174h5.47785a.50174.50174,0,0,0,.50173-.50174v-.50825a.50175.50175,0,0,0-.50173-.50174H9.52265V3.5261h3.48488V4.393a.50173.50173,0,0,0,.50173.50173h.52208a.50174.50174,0,0,0,.50174-.50173V2.50174A.50174.50174,0,0,0,14.03134,2H3.51678Z",fill:"var(--iconFill, #464646)",key:0}),r.createElement("rect",{x:"2",y:"16.252",width:"13.5",height:"1.5",rx:"0.5",fill:"var(--iconFill, #464646)",key:1})]))}SDCTextUnderline18N.defaultProps={width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=SDCTextUnderline18N,SDCTextUnderline18N.default=SDCTextUnderline18N},S1m8:(e,t,o)=>{var r=o("uJ/a"),n=o("polL"),s=o("Gl2o");e.exports=function keys(e){return s(e)?r(e):n(e)}},SEmX:e=>{"use strict";e.exports=window.adobe_dc_sdk["dc-spectrum-v3-core"]},T7i7:e=>{e.exports=function stackGet(e){return this.__data__.get(e)}},TaC2:(e,t,o)=>{var r=o("XNqU");e.exports=function listCacheSet(e,t){var o=this.__data__,n=r(o,e);return n<0?(++this.size,o.push([e,t])):o[n][1]=t,this}},TqnU:(e,t,o)=>{var r=o("XNqU"),n=Array.prototype.splice;e.exports=function listCacheDelete(e){var t=this.__data__,o=r(t,e);return!(o<0)&&(o==t.length-1?t.pop():n.call(t,o,1),--this.size,!0)}},U2o4:e=>{"use strict";e.exports=window.adobe_dc_sdk["dc-extras"]},UJUO:(e,t,o)=>{"use strict";o.d(t,{A:()=>r});const r=(e=>{let{id1:t,id2:o}=e;const r=new Map,n=new Map;return r.set=function set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=e[t],a=e[o];s&&a&&(Object.getPrototypeOf(n).set.call(n,a,s),Object.getPrototypeOf(r).set.call(r,s,a))},r.clear=function clear(){return Object.getPrototypeOf(n).clear.call(n),Object.getPrototypeOf(r).clear.call(r)},r.reverseGet=function reverseGet(e){return n.get(e)},r})({id1:"clientId",id2:"t4Id"})},Uhg2:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("qVjQ");var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("lqA/")),n=o("GyVh"),s=o("XF5l"),a=o("JssA");let l=Symbol(),c=Symbol();const p="https://cc-api-data-stage.adobe.io/ingest";let d=p;class Client extends s.EventEmitter2{constructor(e){if(super(),this._token=null,this._tokenType="Bearer",this._environment="dev",this._clientId="CCXCommentsSDK",this._logObject={},this._disableGetAuthorization=!1,this._commentType=null,this._isLoggingEnabled=!1,this._commentsApiUrl=void 0,e!==c)throw"Cannot create singleton"}static get instance(){return this[l]||(this[l]=new Client(c)),this[l]}configure(e){if(e.token&&(this.token=e.token),e.apiKey&&(this._apiKey=e.apiKey),e.appName&&(this._appName=e.appName),e.environment&&(this.environment=e.environment),e.clientId&&(this.clientId=e.clientId),e.logObject&&(this.logObject=e.logObject),e.disableGetAuthorization&&(this.disableGetAuthorization=e.disableGetAuthorization),e.commentType){let t;"object"==typeof e.commentType&&e.commentType.length?t=e.commentType.join():"string"==typeof e.commentType&&(t=e.commentType),this.commentType=t}return e.commentsApiUrl&&(this._commentsApiUrl=e.commentsApiUrl),this.log("configure",null,null,{environment:this.environment,clientId:this._clientId}),this}set token(e){if("string"==typeof e&&(e.startsWith("Bearer ")||e.startsWith("AnonBearer "))){const t=e.split(" ",2);this._tokenType=t[0],e=t[1]}this._token=e}get token(){return this._token}get tokenType(){return this._tokenType}get bearerToken(){let e=this._token;return"function"==typeof e&&(e=this._token()),`${this._tokenType} ${e}`}set environment(e){let t=["dev","development","stage","prod","production","local","localdev"],o="";if(t.forEach((e,r)=>{let n=r+1===t.length?"":", ";o+=e+n}),-1===t.indexOf(e))throw new Error("Setting the environment to "+e+" is not accepted. Acceptable values are "+o);d="stage"===e?p:"prod"===e||"production"===e?"https://cc-api-data.adobe.io/ingest":p,this._environment=e}get environment(){return this._environment}set clientId(e){this._clientId=e}get clientId(){return this._clientId}set logObject(e){this._logObject=e}get logObject(){return this._logObject}set disableGetAuthorization(e){this._disableGetAuthorization=e}get disableGetAuthorization(){return this._disableGetAuthorization}set commentType(e){let t;e&&("object"==typeof e&&e.length?t=e.join():"string"==typeof e&&(t=e)),this._commentType=t}get commentType(){return this._commentType}request(e,t,o,n,s){return this.fetch(e,t,o,n,s).then(e=>t.indexOf("/page_size")>-1?e.data.dimensions:e&&-1===t.indexOf("annots/acl")?(0,r.default)(e.data,e.headers):t.indexOf("annots/acl")>-1?e.data:e)}fetch(e,t,o,r,n){let s={"Content-Type":"PATCH"===o?"application/json-patch+json":'application/ld+json; profile="https://www.w3.org/ns/anno.jsonld"',Accept:"PATCH"===o?'application/ld+json; profile="https://www.w3.org/ns/anno.jsonld"':t.indexOf("page_size")>-1?"application/vnd.adobe.skybox+json;version=1":t.indexOf("annots/acl")>-1?'application/vnd.adobe.dc+json;profile="https://comments.acrobat.com/schemas/acl_v1.json"':'application/ld+json; profile="https://www.w3.org/ns/anno.jsonld"',Prefer:'return=representation;include="https://www.w3.org/ns/oa#PreferContainedDescriptions"'};n&&n["If-None-Match"]?s["If-None-Match"]=n["If-None-Match"]:n&&n["If-Match"]&&(s["If-Match"]=n["If-Match"]),n&&n.Accept&&(s.Accept=n.Accept),n&&n["Content-Type"]&&(s["Content-Type"]=n["Content-Type"]),n&&n.directive&&(s.directive=n.directive),this._apiKey&&(s["x-api-key"]=this._apiKey),this._appName&&(s["x-api-app-info"]=this._appName);let a=this._commentsApiUrl+t;if("GET"!==(o=o||"GET")&&!this._token)throw new Error("Authorization not configured. Please set the bearer token before calling this method.");this._token&&(s.Authorization=this.bearerToken);let l={method:o,headers:s};return r&&(l.body=JSON.stringify(r)),fetch(a,l).then(t=>{if(this.logResponse(e,o,t),t.status>=200&&t.status<300||304===t.status)return t;{423===t.status?this.emit("RESOURCE_LOCKED"):404===t.status&&this.emit("RESOURCE_UNAVAILABLE");let e=new Error(`${t.status} ${t.statusText}`);throw e.response=t,e}}).then(e=>{let t=e.headers.get("ETag"),o=e.headers.get("Retry-After");return new Promise((r,n)=>{[204,208,304,429].indexOf(e.status)>-1?e.text().then(e=>{r(e)}):e.json().then(e=>{e.first&&e.first.items&&e.first.items.forEach(function(e){e.bodyValue=e.bodyValue.replace(/(\r\n|\r)/g,"\n")}),r({data:e,headers:{etag:t,retryAfter:o}})})})})}flattenObj(e,t,o){for(let r in e){let n=e[r],s=o?o+"."+r:r;n&&"object"==typeof n?this.flattenObj(n,t,s):t[s]=n}return t}isLoggingEnabled(){return this._isLoggingEnabled}log(e,t,o,r){if(!this.isLoggingEnabled())return;let s={"Content-Type":"application/json","x-api-key":"CCXComments1"};this._token&&(s.Authorization=this.bearerToken());let l={event:{guid:(0,n.v1)(),dts_end:(0,a.getFormattedDate)(),type:e,subtype:t,category:"Web",subcategory:o},source:{client_id:"CCXComments1",platform:"Web"},content:r};if(this.logObject&&this.logObject.event){let e=Object.assign(l.event,this.logObject.event);l.event=e}if(this.logObject&&this.logObject.content){let e=Object.assign(l.content,this.logObject.content);l.content=e}let c={events:[{time:(0,a.getFormattedDate)(),project:"comment-service-sdk",environment:this._environment,ingesttype:"dunamis",data:this.flattenObj(l,{})}]};fetch(d,{method:"POST",headers:s,body:JSON.stringify(c)})}logResponse(e,t,o){let r=e.split("."),n=r[0],s=r[1];this.log("request",n,s,{id:o.url,clientId:this.clientId,method:t,status:o.status,statusText:o.statusText,"request-id":o.headers.get("x-request-id"),"unique-id":o.headers.get("x-unique-id")})}createAnonymousSession(e){let t=this._commentsApiUrl+"create_anonymous_session?x-api-client-id=api_browser";if(!e||!e.userName)throw new Error("Guest username not provided. Please provide a username before calling this method.");if(!e.captchaSiteKey)throw new Error("reCaptcha site key not provided. Please provide a reCaptcha site key before calling this method.");if(!e.captchaResponseCode)throw new Error("reCaptcha response code not provided. Please provide a reCaptcha response code before calling this method.");return fetch(t,{method:"POST",headers:{"Content-Type":'application/vnd.adobe.dc+json;profile="https://comments.acrobat.com/schemas/anon_session_req_v1.json"',Accept:'application/vnd.adobe.dc+json;profile="https://comments.acrobat.com/schemas/anon_session_res_v1.json"'},body:JSON.stringify(e)}).then(e=>new Promise((t,o)=>{201===e.status?e.json().then(e=>{e.ticket&&e.id?t({token:"AnonBearer "+e.ticket,id:e.id}):o()}):o()}))}}t.default=Client;e.exports=t.default},VjBA:(e,t,o)=>{e.exports=o("M2Fx")("Mn8c")},WH6Y:(e,t,o)=>{"use strict";o.d(t,{A:()=>u});var r=o("plsW"),n=o("YWiy"),s=o("KvYl"),a=o.n(s),l=o("D/Yr"),c=o("Jm6I"),p=o("XWif"),d=o("QT1v"),m=o("G5bJ");class StickynoteCommentBootstrap extends n.Component{constructor(){var e;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),e=this,this.getLabel=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{quickCommentVerbId:o}=e.props;if(o){const e=l.Ay.QUICK_COMMENT_VERBS_MAP[o];if(null==e?void 0:e.label)return(0,p.I)(e.label)}const{context:r}=t;return r===l.Ay.MODERN_VIEWER_MORE_TOOLS?(0,p.I)("mobile.label.stickynote"):r===l.Ay.MODERN_VIEWER_STICKYTOOLS?(0,p.I)("mobile.ariaLabel.stickynote"):r===l.Ay.MOBILE_MODERN_VIEWER_CONTEXT_MENU?(0,p.I)("comment.addComment"):(0,p.I)("label.stickynote")},this.getIcon=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(o=>o.getIcon({quickCommentVerbId:e.props.quickCommentVerbId,...t}))},this.getTooltipInfo=function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conditionalTooltip)return m.A.getConditionalToolTipInfo(l.Ay.VERB_COMMENT_STICKYNOTE)},this.getTooltip=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{quickCommentVerbId:o}=e.props;if(o){const e=l.Ay.QUICK_COMMENT_VERBS_MAP[o];if(null==e?void 0:e.tooltip)return(0,p.I)(e.tooltip)}const{isMobile:r,context:n}=t;return n===l.Ay.MODERN_VIEWER_STICKYTOOLS&&r?(0,p.I)("mobile.tooltip.stickynote"):n===l.Ay.MODERN_VIEWER_CONTEXT_MENU?e.getPlacement(t).then(e=>e===l.Ay.CONTEXT_MENU_PLACEMENT_BODY?"":(0,p.I)("tooltip.stickynote")):(0,p.I)("tooltip.stickynote")},this.getAriaLabel=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{quickCommentVerbId:o}=e.props;if(o){const e=l.Ay.QUICK_COMMENT_VERBS_MAP[o];if(null==e?void 0:e.ariaLabel)return(0,p.I)(e.ariaLabel)}const{isMobile:r,context:n}=t;return n===l.Ay.MODERN_VIEWER_STICKYTOOLS&&r?(0,p.I)("mobile.ariaLabel.stickynote"):(0,p.I)("ariaLabel.stickynote")},this.getActionTags=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isMobile:o,context:n}=t,s=[c.Em.LOCAL];if(n===l.Ay.MODERN_VIEWER_STICKYTOOLS&&o){r.analytics.getEventSender(e.id)({event:{workflow:"acrobat",subcategory:e.id,type:"entry",subtype:"clicked"},custom:{"adb.event.context.dcweb.clickcontext":"Viewer"}}),s.push(c.Em.REDIRECT_TO_APP)}return s},this.getQuickTools=()=>l.Ay.STICKYNOTE_TOOLS,this.getPlacement=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(o=>o.getPlacement({quickCommentVerbId:e.props.quickCommentVerbId,...t}))},this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.l.call(e,t)},this.exitCallback=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.exitCallback(t))},this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(o=>o.executeAction({quickCommentVerbId:e.props.quickCommentVerbId,...t}))},this.id=this.props.quickCommentVerbId||l.Ay.VERB_COMMENT_STICKYNOTE}load(){return Promise.all([o.e(9387),o.e(8669),o.e(8632)]).then(o.bind(o,"cfWR")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}StickynoteCommentBootstrap.propTypes={quickCommentVerbId:a().string},StickynoteCommentBootstrap.defaultProps={quickCommentVerbId:""};const u=StickynoteCommentBootstrap},WJQs:(e,t,o)=>{"use strict";o.d(t,{A:()=>O});var r,n,s,a,l,c,p,d,m,u,h,g,y,C,_,b,E,v=o("abd3"),T=o("6egC");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}let A=(n=_applyDecoratedDescriptor((r=class PageData{constructor(){_initializerDefineProperty(this,"width",n,this),_initializerDefineProperty(this,"height",s,this),_initializerDefineProperty(this,"curWidth",a,this),_initializerDefineProperty(this,"curHeight",l,this),_initializerDefineProperty(this,"yOffset",c,this),_initializerDefineProperty(this,"xOffset",p,this),_initializerDefineProperty(this,"curZoomLevel",d,this),_initializerDefineProperty(this,"pageRotation",m,this),_initializerDefineProperty(this,"isAJSRenditionLoded",u,this)}setWidth(e){this.width=e}setHeight(e){this.height=e}setCurWidth(e){this.curWidth=e}setCurHeight(e){this.curHeight=e}setCurZoomLevel(e){this.curZoomLevel=e}setPageOffset(e){e&&(this.yOffset=e.top,this.xOffset=e.left)}setPageRotation(e){this.pageRotation=e}get pageSize(){return{top:this.height,bottom:0,left:0,right:this.width}}}).prototype,"width",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=_applyDecoratedDescriptor(r.prototype,"height",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=_applyDecoratedDescriptor(r.prototype,"curWidth",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=_applyDecoratedDescriptor(r.prototype,"curHeight",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=_applyDecoratedDescriptor(r.prototype,"yOffset",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=_applyDecoratedDescriptor(r.prototype,"xOffset",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=_applyDecoratedDescriptor(r.prototype,"curZoomLevel",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_applyDecoratedDescriptor(r.prototype,"pageRotation",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=_applyDecoratedDescriptor(r.prototype,"isAJSRenditionLoded",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(r.prototype,"setWidth",[v.action],Object.getOwnPropertyDescriptor(r.prototype,"setWidth"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setHeight",[v.action],Object.getOwnPropertyDescriptor(r.prototype,"setHeight"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCurWidth",[v.action],Object.getOwnPropertyDescriptor(r.prototype,"setCurWidth"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCurHeight",[v.action],Object.getOwnPropertyDescriptor(r.prototype,"setCurHeight"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCurZoomLevel",[v.action],Object.getOwnPropertyDescriptor(r.prototype,"setCurZoomLevel"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setPageOffset",[v.action],Object.getOwnPropertyDescriptor(r.prototype,"setPageOffset"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setPageRotation",[v.action],Object.getOwnPropertyDescriptor(r.prototype,"setPageRotation"),r.prototype),_applyDecoratedDescriptor(r.prototype,"pageSize",[v.computed],Object.getOwnPropertyDescriptor(r.prototype,"pageSize"),r.prototype),r);const O=new(g=_applyDecoratedDescriptor((h=class PageStore{constructor(){_initializerDefineProperty(this,"pageStore",g,this),_initializerDefineProperty(this,"scrollLeft",y,this),_initializerDefineProperty(this,"scrollTop",C,this),_initializerDefineProperty(this,"commentNumber",_,this),_initializerDefineProperty(this,"viewRotation",b,this),this.contentTypeUnderMouse=null,this.textSelected=null,_initializerDefineProperty(this,"windowInnerWidth",E,this)}updateScrollTop(e){this.scrollTop=e}setCommentNumber(){this.commentNumber+=1}setPageCurZoomLevel(e,t){let o=this.pageStore.get(e);o||(o=new A,this.pageStore.set(e,o)),o.setCurZoomLevel(t)}updateScrollLeft(e){this.scrollLeft!==e&&(this.scrollLeft=e)}updateInnerWidth(e){this.windowInnerWidth!==e&&(this.windowInnerWidth=(0,T.getSDKAwareWindowInnerWidth)(e))}setPageWidthHeight(e,t,o){let r=this.pageStore.get(e);r||(r=new A,this.pageStore.set(e,r)),r.setWidth(t),r.setHeight(o)}setPageCurWidth(e,t){let o=this.pageStore.get(e);o||(o=new A,this.pageStore.set(e,o)),o.setCurWidth(t)}setPageAjsRenditionLoaded(e,t){let o=this.pageStore.get(e);o||(o=new A,this.pageStore.set(e,o)),o.isAJSRenditionLoded=t}setPageCurHeight(e,t){let o=this.pageStore.get(e);o||(o=new A,this.pageStore.set(e,o)),o.setCurHeight(t)}setPageOffset(e,t){let o=this.pageStore.get(e);o||(o=new A,this.pageStore.set(e,o)),o.setPageOffset(t)}setPageRotation(e,t){let o=this.pageStore.get(e);o||(o=new A,this.pageStore.set(e,o)),o.setPageRotation(t)}setViewRotation(e){this.viewRotation=e}setCurrentTheme(e){this.currentTheme=e}getPageRotation(e){return this.pageStore.get(e)?this.pageStore.get(e).pageRotation:void 0}getPageCurZoomLevel(e){return this.pageStore.get(e)?this.pageStore.get(e).curZoomLevel:void 0}getViewRotation(){return this.viewRotation}getPageSize(e){return this.pageStore.get(e)?this.pageStore.get(e).pageSize:void 0}getPageYOffset(e){return this.pageStore.get(e)?this.pageStore.get(e).yOffset:void 0}getPageXOffset(e){return this.pageStore.get(e)?this.pageStore.get(e).xOffset:void 0}getPageHeight(e){return this.pageStore.get(e)?this.pageStore.get(e).height:void 0}getPageWidth(e){return this.pageStore.get(e)?this.pageStore.get(e).width:void 0}getPageCurHeight(e){return this.pageStore.get(e)?this.pageStore.get(e).curHeight:void 0}getPageCurWidth(e){return this.pageStore.get(e)?this.pageStore.get(e).curWidth:void 0}getPageAjsRenditionLoaded(e){return this.pageStore.get(e)?this.pageStore.get(e).isAJSRenditionLoded:void 0}getCurrentTheme(){return this.currentTheme}setContentTypeUnderMouse(e){this.contentTypeUnderMouse=e}setTextSelected(e){this.textSelected=e}}).prototype,"pageStore",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),y=_applyDecoratedDescriptor(h.prototype,"scrollLeft",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=_applyDecoratedDescriptor(h.prototype,"scrollTop",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=_applyDecoratedDescriptor(h.prototype,"commentNumber",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),b=_applyDecoratedDescriptor(h.prototype,"viewRotation",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(h.prototype,"updateScrollTop",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"updateScrollTop"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setCommentNumber",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setCommentNumber"),h.prototype),E=_applyDecoratedDescriptor(h.prototype,"windowInnerWidth",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,T.getSDKAwareWindowInnerWidth)(window.innerWidth)}}),_applyDecoratedDescriptor(h.prototype,"setPageCurZoomLevel",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setPageCurZoomLevel"),h.prototype),_applyDecoratedDescriptor(h.prototype,"updateScrollLeft",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"updateScrollLeft"),h.prototype),_applyDecoratedDescriptor(h.prototype,"updateInnerWidth",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"updateInnerWidth"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setPageWidthHeight",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setPageWidthHeight"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setPageCurWidth",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setPageCurWidth"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setPageAjsRenditionLoaded",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setPageAjsRenditionLoaded"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setPageCurHeight",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setPageCurHeight"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setPageOffset",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setPageOffset"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setPageRotation",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setPageRotation"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setViewRotation",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setViewRotation"),h.prototype),_applyDecoratedDescriptor(h.prototype,"setCurrentTheme",[v.action],Object.getOwnPropertyDescriptor(h.prototype,"setCurrentTheme"),h.prototype),h)},WJZ5:(e,t,o)=>{"use strict";o.d(t,{A:()=>FreeTextUtil});var r=o("D/Yr"),n=o("kPFd"),s=o("hGRN");class FreeTextUtil{static isFreeText(e){const t=e.target&&e.target.selector&&e.target.selector.subtype===r.Ay.REDHAWK_COMMENT_FREETEXT;return(!e.motivation||e.motivation===r.Ay.MOTIVATION_COMMENTING)&&t}static getPixelsOccupiedStringInView(e,t,o){if(e&&t&&o){const r=document.createElement("canvas"),n=r.getContext("2d");document.body.appendChild(r),n.font=`${t}px ${o}`;const s=n.measureText(e).width;return document.body.removeChild(r),s}return 0}static getIndividualCharacterWidth(e,t){if(t){const o=[],n=e.fontSize||r.Ay.FREETEXT_DEFAULT_FONT_SIZE,s="Helvetica";let a=0;for(let e=0;e<t.length;e++)a=FreeTextUtil.getPixelsOccupiedStringInView(t[e],n,s),o.push(a);return o}return[]}static isWithinMaxLimit(e,t,o,r){const n=parseFloat((e+t).toFixed(2))<=o,s=Math.abs(e+t-o)<r;return n||s}static getTextLines(e){const t=e.target.selector.boundingBox,o=e.target.selector.style,n=(null==o?void 0:o.fontSize)||r.Ay.FREETEXT_DEFAULT_FONT_SIZE,s=e.target.selector.commentRotation,a=Math.abs(0===s||180===s?t[2]-t[0]:t[1]-t[3])+1,l=[],c=(e.bodyValue||"").split("\n");c.forEach(e=>{const t=e.length;if(0===t)l.push({string:"",charWidths:[]});else{let o=0,r=0,s="",c=0,p=[];const d=e.split(" ").filter(e=>e.trim().length);let m=0;for(;o<t;)if(0===e[o].trim().length)c=FreeTextUtil.getPixelsOccupiedStringInView(e[o],n,"Helvetica"),FreeTextUtil.isWithinMaxLimit(c,r,a,.1)?(r+=c,s+=e[o],p.push(c),o++):(l.push({string:s,charWidths:p}),s="",p=[],r=0);else{const e=FreeTextUtil.getPixelsOccupiedStringInView(d[m],n,"Helvetica"),t=d[m],u=t.length;if(FreeTextUtil.isWithinMaxLimit(e,r,a,.1)){for(let e=0;e<u;e++)c=FreeTextUtil.getPixelsOccupiedStringInView(t[e],n,"Helvetica"),p.push(c);s+=t,r+=e,o+=u,m++}else if(0!==r)l.push({string:s,charWidths:p}),s="",p=[],r=0;else{let e=0;for(;e<u;)c=FreeTextUtil.getPixelsOccupiedStringInView(t[e],n,"Helvetica"),FreeTextUtil.isWithinMaxLimit(c,r,a,.1)?(r+=c,s+=t[e],p.push(c),e++,o++):(l.push({string:s,charWidths:p}),s="",p=[],r=0);m++}}s&&p.length&&l.push({string:s,charWidths:p})}});const p=l[l.length-1];return 0===p.string.length&&0===p.charWidths.length&&l.pop(),l}static createCanvasWithProperties(e,t,o,n){var s,a;const l=r.Ay.IMAGE_APPEARANCE_DEFAULT_SCALE,c=document.createElement("canvas");c.height=Math.ceil(t*l),c.width=Math.ceil(o*l);const p=c.getContext("2d");p.fillStyle=(null===(s=e.style)||void 0===s?void 0:s.color)||e.borderColor;const d=(null===(a=e.style)||void 0===a?void 0:a.fontSize)||r.Ay.FREETEXT_DEFAULT_FONT_SIZE;p.font=d*l+"px Helvetica",p.textBaseline="middle";const m=-1*(e.commentRotation-n)*Math.PI/180;p.rotate(m);let u={x:0,y:0};switch(e.commentRotation-n){case 90:u={x:-c.height,y:0};break;case 180:u={x:-c.width,y:-c.height};break;case 270:u={x:0,y:-c.width}}return p.translate(u.x,u.y),c}static createAppearanceData(e,t){var o,n;const s=e.target.selector,a=FreeTextUtil.getTextLines(e),l=0===t||180===t?Math.abs(s.boundingBox[1]-s.boundingBox[3]):Math.abs(s.boundingBox[2]-s.boundingBox[0]),c=0===t||180===t?Math.abs(s.boundingBox[2]-s.boundingBox[0]):Math.abs(s.boundingBox[1]-s.boundingBox[3]),p=FreeTextUtil.createCanvasWithProperties(s,l,c,t),d=p.getContext("2d"),m=parseInt(s.lineHeight,10),u={x:0,y:1.2*r.Ay.FREETEXT_DEFAULT_FONT_SIZE-4};d.translate((null===(o=s.textOffsetPoint)||void 0===o?void 0:o.x)||u.x,(null===(n=s.textOffsetPoint)||void 0===n?void 0:n.y)||u.y);let h=m/2;for(let e=0;e<a.length&&h<=l+m;e+=1)d.fillText(a[e].string,0*r.Ay.IMAGE_APPEARANCE_DEFAULT_SCALE,h*r.Ay.IMAGE_APPEARANCE_DEFAULT_SCALE),h+=m;const g=d.getImageData(0,0,p.width,p.height);return{buffer:g.data,height:g.height,width:g.width,textLines:a,mimeType:"img/png"}}static createURLFromBuffer(e,t){const o=new Blob([e],{type:t||"img/png"});return window.URL.createObjectURL(o)}static isPlainTextNotSupported(){return(0,n.gm)()||(0,n.lT)()}static getTextContent(e){return((0,n.gm)()||(0,n.lT)())&&e.innerText.length>2?e.innerText:e.textContent}static evaluateXCoordForFreeText(e){return Math.min(e.boundingBox[0],e.boundingBox[2])}static evaluateYCoordForFreeText(e){return Math.min(e.boundingBox[3],e.boundingBox[1])}static evaluateHeight(e){return Math.abs(e.boundingBox[1]-e.boundingBox[3])}static evaluateWidth(e){return Math.abs(e.boundingBox[2]-e.boundingBox[0])}static shouldHideCircleRadius(){return(0,n.UP)()||(0,n.lT)()||(0,n.gm)()||(0,n.nr)()}static normalizeRotation(e,t){return(360+e+t-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))%360}static populateFreeText(e,t){const o=e.target.selector,n=e,a=(0,s.eF)();if(a){const e={letterSpacing:0,fontName:"Helvetica",fontSize:t.toolBarStore.fontSize,color:t.toolBarStore.getToolColor(r.Ay.REDHAWK_COMMENT_FREETEXT)};o.style&&(e.fontSize=o.style.fontSize?o.style.fontSize:e.fontSize,e.color=o.style.color?o.style.color:e.color),o.lineHeight=1.2*e.fontSize,o.style=e,o.textOffsetPoint={x:0,y:1.2*e.fontSize-4}}if(a||(o.borderColor=o.borderColor?o.borderColor:t.toolBarStore.getToolColor(r.Ay.REDHAWK_COMMENT_FREETEXT)),o.noteX=o.noteX||o.boundingBox[0],o.noteY=o.noteY||o.boundingBox[3],a){const r=t.pageStore.viewRotation,n=t.pageStore.getPageRotation(e.target.selector.node.index);o.commentRotation=o.commentRotation?o.commentRotation:(r+n)%360,console.log("creating appearance data"),o.appearanceData=FreeTextUtil.createAppearanceData(e,n)}return n.target.selector=o,n}}},WMSz:(e,t,o)=>{var r=o("YWiy");function SDCTextStrikethru18N(e){return r.createElement("svg",e,r.createElement("g",null,[r.createElement("path",{d:"M3.50171,4.89471h.5061a.50174.50174,0,0,0,.50171-.50177l.0044-.86688H7.98926V6.75H9.512V3.52606h3.48487v.86688a.50174.50174,0,0,0,.50171.50177h.522a.5018.5018,0,0,0,.502-.5016V2.50171A.50174.50174,0,0,0,14.02081,2H3.5061a.50168.50168,0,0,0-.50171.50167v0L3,4.39294A.50174.50174,0,0,0,3.50171,4.89471Z",fill:"var(--iconFill, #464646)",key:0}),r.createElement("path",{d:"M15.5,9.25v-.5a.5.5,0,0,0-.5-.5H2.5a.5.5,0,0,0-.5.5v.5a.5.5,0,0,0,.5.5H7.98926v3.74738H6.01172a.50174.50174,0,0,0-.50171.50177v.50824a.50168.50168,0,0,0,.50168.5017h5.478a.50185.50185,0,0,0,.50171-.5017v-.50824a.5019.5019,0,0,0-.50171-.50177H9.512V9.75H15A.5.5,0,0,0,15.5,9.25Z",fill:"var(--iconFill, #464646)",key:1})]))}SDCTextStrikethru18N.defaultProps={width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=SDCTextStrikethru18N,SDCTextStrikethru18N.default=SDCTextStrikethru18N},WcJz:(e,t,o)=>{var r=o("8f/F"),n=o("2q2Q"),s=o("DxSP"),a=o("sXS8"),l=o("MZZ1"),c=o("F835"),p=r?r.prototype:void 0,d=p?p.valueOf:void 0;e.exports=function equalByTag(e,t,o,r,p,m,u){switch(o){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!m(new n(e),new n(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=l;case"[object Set]":var g=1&r;if(h||(h=c),e.size!=t.size&&!g)return!1;var y=u.get(e);if(y)return y==t;r|=2,u.set(e,t);var C=a(h(e),h(t),r,p,m,u);return u.delete(e),C;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},WkRA:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class Annotation{constructor(e){void 0===e&&(e={}),this["@context"]=e["@context"],this.type=e.type,this.id=e.id,this.bodyValue=e.bodyValue,this.motivation=e.motivation,this.mentions=e.mentions,this.target=e.target,this.creator=e.creator,this.created=e.created,this.modified=e.modified,this.status=e.status,this.etag=e.etag,this.perUserPerAnnotation=e.perUserPerAnnotation,this.aggregatedInfo=e.aggregatedInfo,e.assetVersion&&(this.assetVersion=e.assetVersion)}};e.exports=t.default},Wvr3:(e,t,o)=>{"use strict";o.d(t,{A:()=>Ee});var r,n,s,a,l,c,p,d,m,u,h,g,y,C,_,b,E,v,T,A,O,D,P,I,S,w,R,M,N,L,x,U,k,F,H,B,j,z,W,G,V,K,q,Y,X,Q,J,$,Z,ee,te,oe,re,ie,ne,se,ae=o("abd3"),le=o("QKqB"),ce=o("plsW"),pe=o("9+t3"),de=o("D/Yr"),me=o("iaHC"),ue=o("7otS"),he=o("llUt"),ge=o("kiUt"),ye=o("CKE+"),Ce=o("kPFd"),_e=o("Jm6I"),fe=o("hGRN"),be=o("LwNf");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const Ee=new(r=ae.action.bound,n=ae.action.bound,s=ae.action.bound,a=ae.action.bound,l=ae.action.bound,c=ae.action.bound,p=ae.action.bound,d=ae.action.bound,m=ae.action.bound,u=ae.action.bound,h=ae.action.bound,g=ae.action.bound,y=ae.action.bound,C=ae.action.bound,_=ae.action.bound,b=ae.action.bound,E=ae.action.bound,T=_applyDecoratedDescriptor((v=class CommentsDropinStore{constructor(){this.scrollbarWidth=void 0,this.commitUnsavedDrawing=void 0,this.commentDialogEvents=void 0,this.oneClickPopoverEvents=void 0,this.isDraftCommentReplyFloodGateEnabled=void 0,this.isEmojiReactionsEnabled=void 0,this.showEmojiReactionsUI=void 0,_initializerDefineProperty(this,"enableNewCommentPopup",T,this),_initializerDefineProperty(this,"disableCommenting",A,this),_initializerDefineProperty(this,"forcedShouldShowCommentsPanel",O,this),_initializerDefineProperty(this,"shouldShowCommentsPanel",D,this),_initializerDefineProperty(this,"frictionlessPanelVisible",P,this),_initializerDefineProperty(this,"showCommentSuggestions",I,this),_initializerDefineProperty(this,"shouldShowToggleButton",S,this),_initializerDefineProperty(this,"isDropinLoaded",w,this),_initializerDefineProperty(this,"isModernViewerCommentsPanelExist",R,this),_initializerDefineProperty(this,"anonRHPCohort",M,this),_initializerDefineProperty(this,"shouldCloseCommentDialog",N,this),_initializerDefineProperty(this,"enableCommentPreviewNav",L,this),_initializerDefineProperty(this,"shouldShowRedliningComments",x,this),_initializerDefineProperty(this,"enableInlinePreference",U,this),_initializerDefineProperty(this,"inlineCommentingDisabled",k,this),_initializerDefineProperty(this,"enableAutoMentionPreference",F,this),_initializerDefineProperty(this,"autoMentionsUserPrefEnabled",H,this),_initializerDefineProperty(this,"shouldShowRedliningImprovements",B,this),_initializerDefineProperty(this,"isCommentBubbleOpen",j,this),_initializerDefineProperty(this,"enableCommentPreviewReply",z,this),this.editFrictionlessExperimentTargetPromise=void 0,this.commentStarterCohort=void 0,this.replySuggestionCohort=void 0,this.qucikCommentEnabled=void 0,_initializerDefineProperty(this,"genAIShareFunnelCohort",W,this),_initializerDefineProperty(this,"nudgedCommentId",G,this),_initializerDefineProperty(this,"commentGuideUserCohort",V,this),_initializerDefineProperty(this,"commentTextBoxEnabled",K,this),_initializerDefineProperty(this,"commentTextBoxBlurred",q,this),_initializerDefineProperty(this,"stickyNoteLandingCohort",Y,this),_initializerDefineProperty(this,"enableIntentDrivenReviewCohort",X,this),this.oneClickCommentEnabled=void 0,_initializerDefineProperty(this,"commentUnreadBadge",Q,this),_initializerDefineProperty(this,"hyperlinkEnabled",J,this),_initializerDefineProperty(this,"isInMultidocMode",$,this),_initializerDefineProperty(this,"isStickyNoteToolSwitched",Z,this),_initializerDefineProperty(this,"isKeyboardShortcutEnabled",ee,this),_initializerDefineProperty(this,"isUpsellTrialEligible",te,this),_initializerDefineProperty(this,"isLHPToolsBoardClosed",oe,this),this.isValidIdentifier=void 0,this.genAICollabNBAEnabled=void 0,_initializerDefineProperty(this,"enableAutoMentions",re,this),_initializerDefineProperty(this,"enableStickyNoteLandingCohort",ie,this),_initializerDefineProperty(this,"enableAddTextComment",ne,this),_initializerDefineProperty(this,"viewCommentsInMwebEnabled",se,this),this.deepLinkCreator=void 0,this.isBoolean=e=>"boolean"==typeof e,this.init(),this.scrollbarWidth=0==this.getScrollbarWidth()?de.Ay.DEFAULT_SCROLL_BAR_WIDTH:this.getScrollbarWidth(),this.isInMultidocMode=!1,this.commentDialogEvents=new le.U,this.oneClickPopoverEvents=new le.U}init(){this.shouldShowCommentsPanel=!1,this.isCommentBubbleOpen=!1,this.frictionlessPanelVisible=!1,this.showCommentSuggestions=!1,this.shouldShowToggleButton=!0,this.isDropinLoaded=!1,this.isModernViewerCommentsPanelExist=!1,this.shouldCloseCommentDialog=!0,this.shouldShowRedliningComments=!0,this.shouldShowRedliningImprovements=!1,this.anonRHPCohort=null,this.commentStarterCohort=null,this.replySuggestionCohort=null,this.genAIShareFunnelCohort=null,this.commentGuideUserCohort=null,this.stickyNoteLandingCohort=!1,this.enableIntentDrivenReviewCohort=!1,this.nudgedCommentId="",this.isValidIdentifier=!1,this.qucikCommentEnabled=!1,this.enableNewCommentPopup=!1,this.enableCommentPreviewNav=!1,this.enableCommentPreviewReply=!1,this.oneClickCommentEnabled=!1,this.commentUnreadBadge=!1,this.enableInlinePreference=!1,this.inlineCommentingDisabled=!1,this.hyperlinkEnabled=!1,this.isDraftCommentReplyFloodGateEnabled=!1,this.genAICollabNBAEnabled=!1,this.commentTextBoxEnabled=!1,this.commentTextBoxBlurred=!1,this.enableAutoMentions=!1,this.autoMentionsUserPrefEnabled=!1,this.enableStickyNoteLandingCohort=!1,this.isStickyNoteToolSwitched=!1,this.isLHPToolsBoardClosed=!1,this.isKeyboardShortcutEnabled=!1,this.isUpsellTrialEligible=!1,this.viewCommentsInMwebEnabled=!1,this.deepLinkCreator=null,ce.providers.floodgate().then(e=>{"function"==typeof e.ready&&e.ready().then(e=>{this.setEnableInlinePreference(e.hasFlag(de.Ay.INLINE_PREFERENCE_FLOODGATE_FLAG)),this.setEnableAutoMentionPreference(e.hasFlag(de.Ay.AUTO_MENTION_PREFERENCE_FLOODGATE_FLAG))})}),ce.providers.user().then(e=>{e.getPreferences("dcweb").then(e=>{var t;this.setInlineCommentingDisabled(null===(t=e.inlineCommenting)||void 0===t?void 0:t.disabled),this.setAutoMentionsUserPrefEnabled(e.autoMention)})})}setInlineCommentingDisabled(e){this.inlineCommentingDisabled=e}setAutoMentionsUserPrefEnabled(e){void 0===e||e.enabled?this.autoMentionsUserPrefEnabled=!0:this.autoMentionsUserPrefEnabled=!1}setValidIdentifier(e){this.isValidIdentifier=e}setHandlerForUnsavedDrawing(e){this.commitUnsavedDrawing=e}resetHandlerForUnsavedDrawing(){this.commitUnsavedDrawing=void 0}clearPrevSessionPageLevelAnnot(){me.A.prevSessionPageLevelAnnot=null}handleUnsavedDrawing(){return new Promise(e=>{"function"==typeof this.commitUnsavedDrawing?((0,ae.reaction)(()=>me.A.comments.length,(t,o)=>{o.dispose(),e()}),this.commitUnsavedDrawing()):e()})}getScrollbarWidth(){const e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=e.offsetWidth;e.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",e.appendChild(o);const r=o.offsetWidth;return e.parentNode.removeChild(e),t-r}get showNewCommentPopup(){return(!this.isModernViewerCommentsPanelExist&&this.enableNewCommentPopup||this.commentTextBoxEnabled&&!!me.A.selectedCMTextBoxId)&&this.inlineCommentEnabled&&!this.isKeyboardShortcutEnabled}get inlineCommentEnabled(){return!this.enableInlinePreference||this.enableInlinePreference&&!this.inlineCommentingDisabled}get ncpEnabled(){return this.enableInlinePreference||this.enableNewCommentPopup}setDeepLinkCreator(e){this.deepLinkCreator=e}getDeepLinkCreator(){return this.deepLinkCreator}get enableGenAIPromptCard(){return this.isValidIdentifier&&this.genAIShareFunnelCohort===_e.UV.PROMPT_CARD}get enableGenAIPromptOneClick(){return this.isValidIdentifier&&this.genAIShareFunnelCohort===_e.UV.PROMPT_ONE_CLICK}isCommentFromDocumentOwner(e){return e.creator.id.substring(9)===ue.A.documentOwner.userId}get triggerCommentGuidedUserExperience(){let e;const t="true"===(0,be.tM)("suppressGuideUserOnboarding");return e=!(!(this.commentGuideUserCohort===_e.VG.GUIDED&&!t&&me.A.comments&&me.A.comments.length<=1)||(0,fe.eF)()||ye.A.isUserAuthenticated()),e}get triggerNudgingExperience(){if(!(0,fe.eF)()&&me.A.haveCommentsLoaded&&me.A.comments&&1===me.A.comments.length){if(me.A.selectedCommentId)return!1;if(me.A.nudgingReplyPosted)return!1;var e;if(!this.triggerCommentGuidedUserExperience&&me.A.comments[0].replies&&0===me.A.comments[0].replies.length&&!me.A.hasReactions&&(ye.A.isAnnonymous&&!ye.A.hasAuth||this.isCommentFromDocumentOwner(me.A.comments[0])))if(!(null===(e=ge.A.getBootstrapData())||void 0===e?void 0:e.isOwner))return!0}return!1}get showCommentPreviewNav(){return this.enableCommentPreviewNav}setShouldShowToggleButton(e){this.shouldShowToggleButton=e}setIsDropinLoaded(e){this.isDropinLoaded=e}setIsCommentBubbleOpen(e){this.isCommentBubbleOpen=e}setShouldShowCommentsPanel(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e;this.isBoolean(o)&&(t&&(this.forcedShouldShowCommentsPanel=!1===o?o:void 0),this.isBoolean(this.forcedShouldShowCommentsPanel)&&(o=this.forcedShouldShowCommentsPanel),o=!(0,Ce.sq)()&&o,o&&he.PreviewStore.instance.rhpApis.then(e=>{e.openPanel("comments")}),this.shouldShowCommentsPanel=o,this.setIsModernViewerCommentsPanelExist(o),pe.default.getInstance().previewApis.documentActions.setShowCommentsPanel(o))}setIsModernViewerCommentsPanelExist(e){this.isBoolean(e)&&(this.isModernViewerCommentsPanelExist=e)}setFrictionlessPanelVisible(e){this.frictionlessPanelVisible=e}setDisableCommenting(e){this.disableCommenting=e}setShowCommentSuggestions(e){this.showCommentSuggestions=e}setDraftCommentReplyFloodGateFlag(e){this.isDraftCommentReplyFloodGateEnabled=e}setEmojiReactionsFlag(e){this.isEmojiReactionsEnabled=e}setShowEmojiReactionsUI(e){this.showEmojiReactionsUI=e}setModernViewer(e){this.shouldUseModernViewer=e}resetCommentsDropinStore(){this.init()}setEnableNewCommentPopup(e){this.enableNewCommentPopup=e}setEnableCommentPreviewNav(e){this.enableCommentPreviewNav=e}setEnableInlinePreference(e){this.enableInlinePreference=e}setEnableAutoMentionPreference(e){this.enableAutoMentionPreference=e}setEnableCommentPreviewReply(e){this.enableCommentPreviewReply=e}setEnableAddTextComment(e){this.enableAddTextComment=e}setEnableGenAICollabNBA(e){this.genAICollabNBAEnabled=e}setCommentGuideUserCohort(e){this.commentGuideUserCohort=e}setStickyNoteLandingCohort(e){this.stickyNoteLandingCohort=e,this.enableStickyNoteLandingCohort=e===_e.lc.STICKY_NOTE_LANDING_RHP||e===_e.lc.STICKY_NOTE_LANDING_INLINE,this.enableStickyNoteLandingCohort&&this.setCommentTextBoxEnabled(!1)}setEnableIntentDrivenReviewCohort(e){this.enableIntentDrivenReviewCohort=e}setAnonRHPCohort(e){this.anonRHPCohort=e}setCommentStartersCohort(e){this.commentStarterCohort=e}setReplySuggestionsCohort(e){this.replySuggestionCohort=e}setGenAIShareFunnelCohort(e){this.genAIShareFunnelCohort=e}setNudgedCommentId(e){this.nudgedCommentId=e}setShouldCloseCommentDialog(e){this.shouldCloseCommentDialog=e}setShouldShowRedliningComments(e){this.shouldShowRedliningComments=e}setShouldShowRedliningImprovements(e){this.shouldShowRedliningImprovements=e}setIsInMultidocMode(e){this.isInMultidocMode=e}setEnableAutoMentions(e){this.enableAutoMentions=e}setQuickCommentEnabled(e){this.qucikCommentEnabled=e}setOneClickCommentEnabled(e){this.oneClickCommentEnabled=e}setCommentUnreadBadge(e){this.commentUnreadBadge=e}setCommentTextBoxEnabled(e){this.commentTextBoxEnabled=e}setCommentTextBoxBlurred(e){this.commentTextBoxBlurred=e}setHyperlinkEnabled(e){this.hyperlinkEnabled=e}setViewCommentsInMwebEnabled(e){this.viewCommentsInMwebEnabled=e}setIsStickyNoteToolSwitched(e){this.isStickyNoteToolSwitched=e}setIsLHPToolsBoardClosed(e){this.isLHPToolsBoardClosed=e}setIsKeyboardShortcutEnabled(e){this.isKeyboardShortcutEnabled=e}setIsUpsellTrialEligible(e){this.isUpsellTrialEligible=e}}).prototype,"enableNewCommentPopup",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=_applyDecoratedDescriptor(v.prototype,"disableCommenting",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=_applyDecoratedDescriptor(v.prototype,"forcedShouldShowCommentsPanel",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=_applyDecoratedDescriptor(v.prototype,"shouldShowCommentsPanel",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=_applyDecoratedDescriptor(v.prototype,"frictionlessPanelVisible",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=_applyDecoratedDescriptor(v.prototype,"showCommentSuggestions",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=_applyDecoratedDescriptor(v.prototype,"shouldShowToggleButton",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=_applyDecoratedDescriptor(v.prototype,"isDropinLoaded",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=_applyDecoratedDescriptor(v.prototype,"isModernViewerCommentsPanelExist",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=_applyDecoratedDescriptor(v.prototype,"anonRHPCohort",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=_applyDecoratedDescriptor(v.prototype,"shouldCloseCommentDialog",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=_applyDecoratedDescriptor(v.prototype,"enableCommentPreviewNav",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=_applyDecoratedDescriptor(v.prototype,"shouldShowRedliningComments",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=_applyDecoratedDescriptor(v.prototype,"enableInlinePreference",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=_applyDecoratedDescriptor(v.prototype,"inlineCommentingDisabled",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=_applyDecoratedDescriptor(v.prototype,"enableAutoMentionPreference",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=_applyDecoratedDescriptor(v.prototype,"autoMentionsUserPrefEnabled",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=_applyDecoratedDescriptor(v.prototype,"shouldShowRedliningImprovements",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=_applyDecoratedDescriptor(v.prototype,"isCommentBubbleOpen",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=_applyDecoratedDescriptor(v.prototype,"enableCommentPreviewReply",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=_applyDecoratedDescriptor(v.prototype,"genAIShareFunnelCohort",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=_applyDecoratedDescriptor(v.prototype,"nudgedCommentId",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=_applyDecoratedDescriptor(v.prototype,"commentGuideUserCohort",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=_applyDecoratedDescriptor(v.prototype,"commentTextBoxEnabled",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=_applyDecoratedDescriptor(v.prototype,"commentTextBoxBlurred",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=_applyDecoratedDescriptor(v.prototype,"stickyNoteLandingCohort",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=_applyDecoratedDescriptor(v.prototype,"enableIntentDrivenReviewCohort",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=_applyDecoratedDescriptor(v.prototype,"commentUnreadBadge",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=_applyDecoratedDescriptor(v.prototype,"hyperlinkEnabled",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=_applyDecoratedDescriptor(v.prototype,"isInMultidocMode",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=_applyDecoratedDescriptor(v.prototype,"isStickyNoteToolSwitched",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=_applyDecoratedDescriptor(v.prototype,"isKeyboardShortcutEnabled",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=_applyDecoratedDescriptor(v.prototype,"isUpsellTrialEligible",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=_applyDecoratedDescriptor(v.prototype,"isLHPToolsBoardClosed",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=_applyDecoratedDescriptor(v.prototype,"enableAutoMentions",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=_applyDecoratedDescriptor(v.prototype,"enableStickyNoteLandingCohort",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=_applyDecoratedDescriptor(v.prototype,"enableAddTextComment",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=_applyDecoratedDescriptor(v.prototype,"viewCommentsInMwebEnabled",[ae.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(v.prototype,"init",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"init"),v.prototype),_applyDecoratedDescriptor(v.prototype,"showNewCommentPopup",[ae.computed],Object.getOwnPropertyDescriptor(v.prototype,"showNewCommentPopup"),v.prototype),_applyDecoratedDescriptor(v.prototype,"inlineCommentEnabled",[ae.computed],Object.getOwnPropertyDescriptor(v.prototype,"inlineCommentEnabled"),v.prototype),_applyDecoratedDescriptor(v.prototype,"ncpEnabled",[ae.computed],Object.getOwnPropertyDescriptor(v.prototype,"ncpEnabled"),v.prototype),_applyDecoratedDescriptor(v.prototype,"enableGenAIPromptCard",[ae.computed],Object.getOwnPropertyDescriptor(v.prototype,"enableGenAIPromptCard"),v.prototype),_applyDecoratedDescriptor(v.prototype,"enableGenAIPromptOneClick",[ae.computed],Object.getOwnPropertyDescriptor(v.prototype,"enableGenAIPromptOneClick"),v.prototype),_applyDecoratedDescriptor(v.prototype,"triggerCommentGuidedUserExperience",[ae.computed],Object.getOwnPropertyDescriptor(v.prototype,"triggerCommentGuidedUserExperience"),v.prototype),_applyDecoratedDescriptor(v.prototype,"triggerNudgingExperience",[ae.computed],Object.getOwnPropertyDescriptor(v.prototype,"triggerNudgingExperience"),v.prototype),_applyDecoratedDescriptor(v.prototype,"showCommentPreviewNav",[ae.computed],Object.getOwnPropertyDescriptor(v.prototype,"showCommentPreviewNav"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setShouldShowToggleButton",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setShouldShowToggleButton"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setIsDropinLoaded",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setIsDropinLoaded"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setIsCommentBubbleOpen",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setIsCommentBubbleOpen"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setShouldShowCommentsPanel",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setShouldShowCommentsPanel"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setIsModernViewerCommentsPanelExist",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setIsModernViewerCommentsPanelExist"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setFrictionlessPanelVisible",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setFrictionlessPanelVisible"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setDisableCommenting",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setDisableCommenting"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setShowCommentSuggestions",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setShowCommentSuggestions"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setDraftCommentReplyFloodGateFlag",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setDraftCommentReplyFloodGateFlag"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEmojiReactionsFlag",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setEmojiReactionsFlag"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setShowEmojiReactionsUI",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setShowEmojiReactionsUI"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setModernViewer",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setModernViewer"),v.prototype),_applyDecoratedDescriptor(v.prototype,"resetCommentsDropinStore",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"resetCommentsDropinStore"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableNewCommentPopup",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setEnableNewCommentPopup"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableCommentPreviewNav",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setEnableCommentPreviewNav"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableInlinePreference",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setEnableInlinePreference"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableAutoMentionPreference",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setEnableAutoMentionPreference"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableCommentPreviewReply",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setEnableCommentPreviewReply"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableAddTextComment",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setEnableAddTextComment"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableGenAICollabNBA",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setEnableGenAICollabNBA"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setCommentGuideUserCohort",[r],Object.getOwnPropertyDescriptor(v.prototype,"setCommentGuideUserCohort"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setStickyNoteLandingCohort",[n],Object.getOwnPropertyDescriptor(v.prototype,"setStickyNoteLandingCohort"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableIntentDrivenReviewCohort",[s],Object.getOwnPropertyDescriptor(v.prototype,"setEnableIntentDrivenReviewCohort"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setAnonRHPCohort",[a],Object.getOwnPropertyDescriptor(v.prototype,"setAnonRHPCohort"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setCommentStartersCohort",[l],Object.getOwnPropertyDescriptor(v.prototype,"setCommentStartersCohort"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setReplySuggestionsCohort",[c],Object.getOwnPropertyDescriptor(v.prototype,"setReplySuggestionsCohort"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setGenAIShareFunnelCohort",[p],Object.getOwnPropertyDescriptor(v.prototype,"setGenAIShareFunnelCohort"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setNudgedCommentId",[d],Object.getOwnPropertyDescriptor(v.prototype,"setNudgedCommentId"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setShouldCloseCommentDialog",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setShouldCloseCommentDialog"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setShouldShowRedliningComments",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setShouldShowRedliningComments"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setShouldShowRedliningImprovements",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setShouldShowRedliningImprovements"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setIsInMultidocMode",[m],Object.getOwnPropertyDescriptor(v.prototype,"setIsInMultidocMode"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setEnableAutoMentions",[u],Object.getOwnPropertyDescriptor(v.prototype,"setEnableAutoMentions"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setQuickCommentEnabled",[h],Object.getOwnPropertyDescriptor(v.prototype,"setQuickCommentEnabled"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setOneClickCommentEnabled",[g],Object.getOwnPropertyDescriptor(v.prototype,"setOneClickCommentEnabled"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setCommentUnreadBadge",[y],Object.getOwnPropertyDescriptor(v.prototype,"setCommentUnreadBadge"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setCommentTextBoxEnabled",[C],Object.getOwnPropertyDescriptor(v.prototype,"setCommentTextBoxEnabled"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setCommentTextBoxBlurred",[_],Object.getOwnPropertyDescriptor(v.prototype,"setCommentTextBoxBlurred"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setHyperlinkEnabled",[b],Object.getOwnPropertyDescriptor(v.prototype,"setHyperlinkEnabled"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setViewCommentsInMwebEnabled",[E],Object.getOwnPropertyDescriptor(v.prototype,"setViewCommentsInMwebEnabled"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setIsLHPToolsBoardClosed",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setIsLHPToolsBoardClosed"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setIsKeyboardShortcutEnabled",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setIsKeyboardShortcutEnabled"),v.prototype),_applyDecoratedDescriptor(v.prototype,"setIsUpsellTrialEligible",[ae.action],Object.getOwnPropertyDescriptor(v.prototype,"setIsUpsellTrialEligible"),v.prototype),v)},"Ww+/":(e,t,o)=>{"use strict";o.d(t,{X:()=>unsubscribeFromState,r:()=>subscribeToState});var r=o("abd3");let n=[];const unsubscribeFromState=()=>{n.forEach(e=>{e&&e()}),n=[]},subscribeToState=function(e,t,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(e,t)=>e!==t,a=e[t],l=!0;const c=(0,r.autorun)(r=>{const n=e[t];(s(a,n)||l)&&(l=!1,a=n,o(n,r))});return n.push(c),c}},WxV1:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var r=o("NjQJ"),n=o.n(r),s=o("AXyZ"),a=o.n(s)()(n());a.push([e.id,".CommentsRHPIcon__commentIconCountWrapper___PqftK{border:2px solid;border-radius:14px;display:flex;font-size:10px;height:14px;justify-content:center;min-width:10px;padding:0 2px;position:absolute;right:-10%;top:-14%;z-index:1}.spectrum--light .CommentsRHPIcon__commentIconCountWrapper___PqftK{background:#0265dc;border-color:#fff;color:var(--spectrum-global-color-gray-50)}.spectrum--dark .CommentsRHPIcon__commentIconCountWrapper___PqftK{background:#72b7f9;border-color:#f8f8f8;color:var(--spectrum-global-color-gray-900)}.CommentsRHPIcon__customIcon___GsZeo svg path[fill-rule=evenodd]{fill:var(--iconBlue)!important}","",{version:3,sources:["webpack://./src/comments/CommentsRHPIcon.css"],names:[],mappings:"AAAA,kDAKI,gBAAiB,CACjB,kBAAmB,CACnB,YAAa,CACb,cAAe,CACf,WAAY,CACZ,sBAAuB,CACvB,cAAe,CACf,aAAc,CACd,iBAAkB,CAClB,UAAW,CACX,QAAS,CACT,SACJ,CAEA,mEACI,kBAA0D,CAC1D,iBAAwD,CACxD,0CACJ,CAEA,kEACI,kBAA0D,CAC1D,oBAA2D,CAC3D,2CACJ,CAEA,iEACI,8BACJ",sourcesContent:['.commentIconCountWrapper {\n    /*\n    background: var(--spectrum-global-color-blue-900);\n    border: 2px solid var(--spectrum-global-color-gray-50);\n     */\n    border: 2px solid;\n    border-radius: 14px;\n    display: flex;\n    font-size: 10px;\n    height: 14px;\n    justify-content: center;\n    min-width: 10px;\n    padding: 0 2px;\n    position: absolute;\n    right: -10%;\n    top: -14%;\n    z-index: 1;\n}\n\n:global(.spectrum--light) .commentIconCountWrapper {\n    background: var(--spectrum-global-color-blue-900, #0265dc);\n    border-color: var(--spectrum-global-color-gray-50, #fff);\n    color: var(--spectrum-global-color-gray-50);\n}\n\n:global(.spectrum--dark) .commentIconCountWrapper {\n    background: var(--spectrum-global-color-blue-900, #72b7f9);\n    border-color: var(--spectrum-global-color-gray-50, #f8f8f8);\n    color: var(--spectrum-global-color-gray-900);\n}\n\n.customIcon svg path[fill-rule="evenodd"] {\n    fill: var(--iconBlue) !important;\n}\n'],sourceRoot:""}]),a.locals={commentIconCountWrapper:"CommentsRHPIcon__commentIconCountWrapper___PqftK",customIcon:"CommentsRHPIcon__customIcon___GsZeo"};const l=a},XF5l:(e,t,o)=>{var r;!function(n){var s=Array.isArray?Array.isArray:function _isArray(e){return"[object Array]"===Object.prototype.toString.call(e)};function init(){this._events={},this._conf&&configure.call(this,this._conf)}function configure(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._events.maxListeners=e.maxListeners!==n?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._events.maxListeners=10}function logPossibleMemoryLeak(e,t){var o="(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak?(o+=" Event name: %s.",console.error(o,e,t)):console.error(o,e),console.trace&&console.trace()}function EventEmitter(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,configure.call(this,e)}function searchListenerTree(e,t,o,r){if(!o)return[];var n,s,a,l,c,p,d,m=[],u=t.length,h=t[r],g=t[r+1];if(r===u&&o._listeners){if("function"==typeof o._listeners)return e&&e.push(o._listeners),[o];for(n=0,s=o._listeners.length;n<s;n++)e&&e.push(o._listeners[n]);return[o]}if("*"===h||"**"===h||o[h]){if("*"===h){for(a in o)"_listeners"!==a&&o.hasOwnProperty(a)&&(m=m.concat(searchListenerTree(e,t,o[a],r+1)));return m}if("**"===h){for(a in(d=r+1===u||r+2===u&&"*"===g)&&o._listeners&&(m=m.concat(searchListenerTree(e,t,o,u))),o)"_listeners"!==a&&o.hasOwnProperty(a)&&("*"===a||"**"===a?(o[a]._listeners&&!d&&(m=m.concat(searchListenerTree(e,t,o[a],u))),m=m.concat(searchListenerTree(e,t,o[a],r))):m=a===g?m.concat(searchListenerTree(e,t,o[a],r+2)):m.concat(searchListenerTree(e,t,o[a],r)));return m}m=m.concat(searchListenerTree(e,t,o[h],r+1))}if((l=o["*"])&&searchListenerTree(e,t,l,r+1),c=o["**"])if(r<u)for(a in c._listeners&&searchListenerTree(e,t,c,u),c)"_listeners"!==a&&c.hasOwnProperty(a)&&(a===g?searchListenerTree(e,t,c[a],r+2):a===h?searchListenerTree(e,t,c[a],r+1):((p={})[a]=c[a],searchListenerTree(e,t,{"**":p},r+1)));else c._listeners?searchListenerTree(e,t,c,u):c["*"]&&c["*"]._listeners&&searchListenerTree(e,t,c["*"],u);return m}function growListenerTree(e,t){for(var o=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;o+1<r;o++)if("**"===e[o]&&"**"===e[o+1])return;for(var s=this.listenerTree,a=e.shift();a!==n;){if(s[a]||(s[a]={}),s=s[a],0===e.length)return s._listeners?("function"==typeof s._listeners&&(s._listeners=[s._listeners]),s._listeners.push(t),!s._listeners.warned&&this._events.maxListeners>0&&s._listeners.length>this._events.maxListeners&&(s._listeners.warned=!0,logPossibleMemoryLeak.call(this,s._listeners.length,a))):s._listeners=t,!0;a=e.shift()}return!0}EventEmitter.EventEmitter2=EventEmitter,EventEmitter.prototype.delimiter=".",EventEmitter.prototype.setMaxListeners=function(e){e!==n&&(this._events||init.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},EventEmitter.prototype.event="",EventEmitter.prototype.once=function(e,t){return this.many(e,1,t),this},EventEmitter.prototype.many=function(e,t,o){var r=this;if("function"!=typeof o)throw new Error("many only accepts instances of Function");function listener(){0===--t&&r.off(e,listener),o.apply(this,arguments)}return listener._origin=o,this.on(e,listener),r},EventEmitter.prototype.emit=function(){this._events||init.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,o,r,n,s,a=arguments.length;if(this._all&&this._all.length){if(s=this._all.slice(),a>3)for(t=new Array(a),n=0;n<a;n++)t[n]=arguments[n];for(r=0,o=s.length;r<o;r++)switch(this.event=e,a){case 1:s[r].call(this,e);break;case 2:s[r].call(this,e,arguments[1]);break;case 3:s[r].call(this,e,arguments[1],arguments[2]);break;default:s[r].apply(this,t)}}if(this.wildcard){s=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();searchListenerTree.call(this,s,l,this.listenerTree,0)}else{if("function"==typeof(s=this._events[e])){switch(this.event=e,a){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),n=1;n<a;n++)t[n-1]=arguments[n];s.apply(this,t)}return!0}s&&(s=s.slice())}if(s&&s.length){if(a>3)for(t=new Array(a-1),n=1;n<a;n++)t[n-1]=arguments[n];for(r=0,o=s.length;r<o;r++)switch(this.event=e,a){case 1:s[r].call(this);break;case 2:s[r].call(this,arguments[1]);break;case 3:s[r].call(this,arguments[1],arguments[2]);break;default:s[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},EventEmitter.prototype.emitAsync=function(){this._events||init.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,o,r,n,s,a=[],l=arguments.length;if(this._all){if(l>3)for(t=new Array(l),n=1;n<l;n++)t[n]=arguments[n];for(r=0,o=this._all.length;r<o;r++)switch(this.event=e,l){case 1:a.push(this._all[r].call(this,e));break;case 2:a.push(this._all[r].call(this,e,arguments[1]));break;case 3:a.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[r].apply(this,t))}}if(this.wildcard){s=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();searchListenerTree.call(this,s,c,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s)switch(this.event=e,l){case 1:a.push(s.call(this));break;case 2:a.push(s.call(this,arguments[1]));break;case 3:a.push(s.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(l-1),n=1;n<l;n++)t[n-1]=arguments[n];a.push(s.apply(this,t))}else if(s&&s.length){if(l>3)for(t=new Array(l-1),n=1;n<l;n++)t[n-1]=arguments[n];for(r=0,o=s.length;r<o;r++)switch(this.event=e,l){case 1:a.push(s[r].call(this));break;case 2:a.push(s[r].call(this,arguments[1]));break;case 3:a.push(s[r].call(this,arguments[1],arguments[2]));break;default:a.push(s[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},EventEmitter.prototype.on=function(e,t){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||init.call(this),this.emit("newListener",e,t),this.wildcard?(growListenerTree.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),this._events[e].push(t),!this._events[e].warned&&this._events.maxListeners>0&&this._events[e].length>this._events.maxListeners&&(this._events[e].warned=!0,logPossibleMemoryLeak.call(this,this._events[e].length,e))):this._events[e]=t,this)},EventEmitter.prototype.onAny=function(e){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var o,r=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();r=searchListenerTree.call(this,null,a,this.listenerTree,0)}else{if(!this._events[e])return this;o=this._events[e],r.push({_listeners:o})}for(var l=0;l<r.length;l++){var c=r[l];if(o=c._listeners,s(o)){for(var p=-1,d=0,m=o.length;d<m;d++)if(o[d]===t||o[d].listener&&o[d].listener===t||o[d]._origin&&o[d]._origin===t){p=d;break}if(p<0)continue;return this.wildcard?c._listeners.splice(p,1):this._events[e].splice(p,1),0===o.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(o===t||o.listener&&o.listener===t||o._origin&&o._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this.emit("removeListener",e,t))}return function recursivelyGarbageCollect(e){if(e!==n){var t=Object.keys(e);for(var o in t){var r=t[o],s=e[r];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&recursivelyGarbageCollect(e[r]),0===Object.keys(s).length&&delete e[r])}}}(this.listenerTree),this},EventEmitter.prototype.offAny=function(e){var t,o=0,r=0;if(e&&this._all&&this._all.length>0){for(o=0,r=(t=this._all).length;o<r;o++)if(e===t[o])return t.splice(o,1),this.emit("removeListenerAny",e),this}else{for(o=0,r=(t=this._all).length;o<r;o++)this.emit("removeListenerAny",t[o]);this._all=[]}return this},EventEmitter.prototype.removeListener=EventEmitter.prototype.off,EventEmitter.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||init.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),o=searchListenerTree.call(this,null,t,this.listenerTree,0),r=0;r<o.length;r++){o[r]._listeners=null}else this._events&&(this._events[e]=null);return this},EventEmitter.prototype.listeners=function(e){if(this.wildcard){var t=[],o="string"==typeof e?e.split(this.delimiter):e.slice();return searchListenerTree.call(this,t,o,this.listenerTree,0),t}return this._events||init.call(this),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},EventEmitter.prototype.listenerCount=function(e){return this.listeners(e).length},EventEmitter.prototype.listenersAny=function(){return this._all?this._all:[]},(r=function(){return EventEmitter}.call(t,o,t,e))===n||(e.exports=r)}()},XHmI:e=>{var t=Object.prototype;e.exports=function isPrototype(e){var o=e&&e.constructor;return e===("function"==typeof o&&o.prototype||t)}},XNqU:(e,t,o)=>{var r=o("DxSP");e.exports=function assocIndexOf(e,t){for(var o=e.length;o--;)if(r(e[o][0],t))return o;return-1}},XWif:(e,t,o)=>{"use strict";o.d(t,{I:()=>getMessage});var r=o("plsW"),n=o("doTx");const getMessage=async e=>{let t=await(async()=>{let e;try{const t=r.locale2.getLocale();e=t?await loadTranslation(t):await loadTranslation("en-US")}catch(t){e=await loadTranslation("en-US")}return e})();return t[e]||(t=await loadTranslation("en-US")),t[e]},loadTranslation=e=>new Promise(t=>{try{t(n.A.loadTranslations(e))}catch(e){t({})}})},"Xm+I":(e,t,o)=>{"use strict";o.d(t,{A:()=>n});var r=o("eWqp");const n=new class OperationFactory{constructor(){this.initialize=()=>r.p.initialize().then(e=>{this.lazyOps=e}),this.ensureInitialized=()=>{if(!this.lazyOps)throw new Error("OperationFactory not initialized")},this.createAddCollaboratorsOp=e=>(this.ensureInitialized(),this.lazyOps.createAddCollaboratorsOp(e))}createFetchCollaboratorsOp(){return this.ensureInitialized(),this.lazyOps.createFetchCollaboratorsOp()}}},Xxrq:(e,t,o)=>{var r=o("XNqU");e.exports=function listCacheGet(e){var t=this.__data__,o=r(t,e);return o<0?void 0:t[o][1]}},YB2R:(e,t,o)=>{var r=o("2KPK"),n=o("WxV1");"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var s={insert:"head",singleton:!1};r(n,s);e.exports=n.locals||{}},YWiy:(e,t,o)=>{e.exports=o("2pFd")("GiK3")},"YY8+":(e,t,o)=>{"use strict";o.d(t,{A:()=>U});var r,n,s,a,l,c,p,d,m,u,h,g,y,C,_,b,E,v,T,A=o("abd3"),O=o("9+t3"),D=o("D/Yr"),P=o("hGRN"),I=o("G5bJ"),S=o("CKE+"),w=o("a8bA"),R=o("WJQs"),M=o("LwNf");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const N={[D.Ay.REDHAWK_COMMENT_FREETEXT]:D.Ay.DEFAULT_FREETEXT_COLOR,[D.Ay.REDHAWK_COMMENT_NOTE]:D.Ay.DEFAULT_NOTE_COLOR,[D.Ay.REDHAWK_COMMENT_SHAPE]:D.Ay.DEFAULT_SHAPE_COLOR,[D.Ay.REDHAWK_COMMENT_HIGHLIGHT]:D.Ay.DEFAULT_HIGHLIGHT_COLOR,[D.Ay.REDHAWK_COMMENT_UNDERLINE]:D.Ay.DEFAULT_UNDERLINE_COLOR,[D.Ay.REDHAWK_COMMENT_STRIKEOUT]:D.Ay.DEFAULT_STRIKEOUT_COLOR,[D.Ay.REDHAWK_COMMENT_REPLACE]:D.Ay.DEFAULT_HIGHLIGHT_COLOR,[D.Ay.REDHAWK_COMMENT_INSERT]:D.Ay.DEFAULT_HIGHLIGHT_COLOR},L={[D.Ay.REDHAWK_COMMENT_FREETEXT]:!1,[D.Ay.REDHAWK_COMMENT_NOTE]:!1,[D.Ay.REDHAWK_COMMENT_SHAPE]:!1,[D.Ay.REDHAWK_COMMENT_HIGHLIGHT]:!1,[D.Ay.REDHAWK_COMMENT_UNDERLINE]:!1,[D.Ay.REDHAWK_COMMENT_STRIKEOUT]:!1,[D.Ay.REDHAWK_ERASER]:!1},x={[D.Ay.REDHAWK_COMMENT_FREETEXT]:!1,[D.Ay.REDHAWK_COMMENT_NOTE]:!1,[D.Ay.REDHAWK_COMMENT_SHAPE]:!1,[D.Ay.REDHAWK_COMMENT_HIGHLIGHT]:!1,[D.Ay.REDHAWK_COMMENT_UNDERLINE]:!1,[D.Ay.REDHAWK_COMMENT_STRIKEOUT]:!1,[D.Ay.REDHAWK_COMMENT_REPLACE]:!1,[D.Ay.REDHAWK_COMMENT_INSERT]:!1,[D.Ay.PIN_TOOLTIP_SHOW_COUNT]:0};const U=new(n=_applyDecoratedDescriptor((r=class ToolBarStore{constructor(){_initializerDefineProperty(this,"selectedTool",n,this),_initializerDefineProperty(this,"currentColor",s,this),_initializerDefineProperty(this,"currentOpacity",a,this),_initializerDefineProperty(this,"isGradientPickerSelected",l,this),_initializerDefineProperty(this,"showBanner",c,this),_initializerDefineProperty(this,"currentStrokeWidth",p,this),_initializerDefineProperty(this,"freeHighlightStrokeWidth",d,this),_initializerDefineProperty(this,"fontSize",m,this),_initializerDefineProperty(this,"toolsColorMap",u,this),_initializerDefineProperty(this,"tooltipShownMap",h,this),_initializerDefineProperty(this,"isFreetextEnabled",g,this),_initializerDefineProperty(this,"isPinToolTipEnabled",y,this),_initializerDefineProperty(this,"isPinToolEnabled",C,this),_initializerDefineProperty(this,"isEraserToolEnabled",_,this),_initializerDefineProperty(this,"isEraserSelected",b,this),_initializerDefineProperty(this,"isHCEnabled",E,this),_initializerDefineProperty(this,"pinToolPrefs",v,this),_initializerDefineProperty(this,"showPinTooltip",T,this),this.lastUsedTool=void 0,this.tooltipShownForTools=void 0,this.isPinToolUsed=void 0,this.clearTooltipTimeoutForAllTools=()=>{Object.values(this.tooltipTimeout).forEach(e=>{e&&clearTimeout(e)}),this.tooltipTimeout={}},this.tooltipTimeout={},this.selectedTextPageNo={},this.lastUsedTool=null,this.tooltipShownForTools=[],this.isPinToolUsed=!1,(0,A.reaction)(()=>this.selectedTool,()=>{this.setEraserSelection(!1),this.clearTooltipTimeoutForAllTools(),this.setCursor()}),(0,A.reaction)(()=>this.isHCEnabled,()=>{this.setCursor()})}setShowTooltip(){const e=this.getSelectedToolOrSubtool();this.isToolSelected()&&(this.setTooltipShownForTool(e),this.clearTooltipTimeoutForAllTools(e))}setShowPinTooltip(e){this.showPinTooltip=e}setIsPinToolUsed(e){this.isPinToolUsed=e}setLastUsedTool(e){this.lastUsedTool=e}updateLastUsedTool(e){let t={};t=localStorage.getItem(D.Ay.PIN_TOOL_PREFS)?JSON.parse(localStorage.getItem(D.Ay.PIN_TOOL_PREFS)):this.pinToolPrefs;if(!(0,M.tM)(D.Ay.PIN_TOOLTIP_SHOWN)&&!t[D.Ay.PIN_TOOL_USED]&&(!t[D.Ay.PIN_TOOLTIP_SHOW_COUNT]||t[D.Ay.PIN_TOOLTIP_SHOW_COUNT]&&t[D.Ay.PIN_TOOLTIP_SHOW_COUNT]<D.Ay.PIN_TOOLTIP_MAX_SHOW_TIMES))if(this.lastUsedTool)if(this.lastUsedTool===e){"true"===!(0,M.tM)("guideUserOnboardingShown")&&this.setShowPinTooltip(!0);let e={};e=null===localStorage.getItem(D.Ay.PIN_TOOL_PREFS)?{[D.Ay.PIN_TOOLTIP_SHOW_COUNT]:1}:{...JSON.parse(localStorage.getItem(D.Ay.PIN_TOOL_PREFS)),[D.Ay.PIN_TOOLTIP_SHOW_COUNT]:(t[D.Ay.PIN_TOOLTIP_SHOW_COUNT]||0)+1},(0,M.kn)(D.Ay.PIN_TOOLTIP_SHOWN,!0),localStorage.setItem(D.Ay.PIN_TOOL_PREFS,JSON.stringify(e)),S.A.syncPinToolPrefs(e).then(()=>{}),this.setPinToolPrefs(e),this.setLastUsedTool(void 0)}else this.setLastUsedTool(e);else this.setLastUsedTool(e)}setIsFreetextEnabled(e){this.isFreetextEnabled=(0,P.eF)()&&e}setIsPinToolEnabled(e){this.isPinToolEnabled=e}setIsPinToolTipEnabled(e){this.isPinToolTipEnabled=e}setFontSize(e){this.fontSize=e}setSelectedTool(e){this.selectedTool&&this.resetSelectedTool(),this.selectedTool=e,w.A.triggerEvent(D.Ay.API_EVENTS.ANNOTATION_MODE_STARTED,e)}setIsHCEnabled(e){this.isHCEnabled=e}toggleSelectedTool(e){this.selectedTool===e?this.resetSelectedTool():this.setSelectedTool(e)}setToolsColorMap(e){const t={};Object.keys(e).forEach(o=>{t[o]=D.Ay.COLOR_PALETTE_SET.has(e[o].toUpperCase())?e[o]:N[o]}),this.toolsColorMap={...N,...t}}setTooltipShownMap(e){this.tooltipShownMap={...L,...e}}setIsEraserToolEnabled(e){this.isEraserToolEnabled=(0,P.eF)()&&e}setSelectedTextPageNo(e,t){this.selectedTextPageNo.startPage=e,this.selectedTextPageNo.endPage=t}resetSelectedTextPageNo(){this.selectedTextPageNo.startPage=void 0,this.selectedTextPageNo.endPage=void 0}getCursorUrlInCurFormat(e){const t=document.getElementById(e);return window.getComputedStyle(t).backgroundImage}getCursorUrlInCurFormatInHC(e){const t=document.getElementById(e);return t?t.style.backgroundImage:"none"}setCursor(){let e,t,o;const r=window.devicePixelRatio>1?`${D.Ay.HIGHLIGHT_DRAWING_HOTSPOT_X} ${D.Ay.HIGHLIGHT_DRAWING_HOTSPOT_Y}`:`${D.Ay.HIGHLIGHT_DRAWING_HOTSPOT_X_LOW_RES} ${D.Ay.HIGHLIGHT_DRAWING_HOTSPOT_Y_LOW_RES}`;if(t=`${D.Ay.HIGHLIGHT_CURSOR_HOTSPOT_X} ${D.Ay.HIGHLIGHT_CURSOR_HOTSPOT_Y}`,this.isEraserSelected)o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("erasercurHC"):this.getCursorUrlInCurFormat("erasercur"),e=`${o+t}, pointer`,I.A.getInstance().isCursorStyleSupported(e)||(e="default"),O.default.getInstance().previewApis.modifyCursor.setCursor(e);else if(this.selectedTool){switch(this.selectedTool){case D.Ay.REDHAWK_COMMENT_HIGHLIGHT:R.A.contentTypeUnderMouse===D.Ay.IMAGE_CONTENT_TYPE?(o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("freeHighlightCur"):this.getCursorUrlInCurFormat("freeHighlightCur"),e=`${o+r}, pointer`):(o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("highlightcur"):this.getCursorUrlInCurFormat("highlightcur"),e=`${o+t}, pointer`),I.A.getInstance().isCursorStyleSupported(e)||(e="text");break;case D.Ay.REDHAWK_COMMENT_STRIKEOUT:case D.Ay.REDHAWK_COMMENT_REPLACE:case D.Ay.REDHAWK_COMMENT_UNDERLINE:o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("highlightcurHC"):this.getCursorUrlInCurFormat("highlightcur"),e=`${o+t}, pointer`,I.A.getInstance().isCursorStyleSupported(e)||(e="text");break;case D.Ay.REDHAWK_COMMENT_FREETEXT:o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("addtextcurHC"):this.getCursorUrlInCurFormat("addtextcur"),e=`${o+t}, pointer`,I.A.getInstance().isCursorStyleSupported(e)||(e="text");break;case D.Ay.REDHAWK_COMMENT_INSERT:o=this.getCursorUrlInCurFormat("insertcur"),e=`${o+t}, pointer`,I.A.getInstance().isCursorStyleSupported(e)||(e="text");break;case D.Ay.REDHAWK_ERASER:o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("erasercurHC"):this.getCursorUrlInCurFormat("erasercur"),e=`${o+t}, pointer`,I.A.getInstance().isCursorStyleSupported(e)||(e="default");break;case D.Ay.REDHAWK_COMMENT_NOTE:{let t;t=`${D.Ay.STICKY_CURSOR_HOTSPOT_X} ${D.Ay.STICKY_CURSOR_HOTSPOT_Y}`,R.A.contentTypeUnderMouse===D.Ay.TEXT_CONTENT_TYPE||R.A.contentTypeUnderMouse===D.Ay.LINK_CONTENT_TYPE?(t=`${D.Ay.HIGHLIGHT_WITH_NOTE_CURSOR_HOTSPOT_X} ${D.Ay.HIGHLIGHT_WITH_NOTE_CURSOR_HOTSPOT_Y}`,o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("highlightWithNoteCurHC"):this.getCursorUrlInCurFormat("highlightWithNoteCur"),e=`${o+t}, pointer`):(o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("stickycurHC"):this.getCursorUrlInCurFormat("stickycur"),e=`${o+t}, pointer`),I.A.getInstance().isCursorStyleSupported(e)||(e="default");break}case D.Ay.REDHAWK_COMMENT_SHAPE:{let t;t=window.devicePixelRatio>1?`${D.Ay.FREEDRAW_CURSOR_HOTSPOT_X} ${D.Ay.FREEDRAW_CURSOR_HOTSPOT_Y}`:`${D.Ay.FREEDRAW_CURSOR_HOTSPOT_X_LOW_RES} ${D.Ay.FREEDRAW_CURSOR_HOTSPOT_Y_LOW_RES}`,o=this.isHCEnabled?this.getCursorUrlInCurFormatInHC("drawingcurHC"):this.getCursorUrlInCurFormat("drawingcur"),e=`${o+t}, pointer`,I.A.getInstance().isCursorStyleSupported(e)||(e="default");break}default:e="auto"}O.default.getInstance().previewApis.modifyCursor.setCursor(e)}else O.default.getInstance().previewApis.modifyCursor.resetCursor();if((0,P.eF)()){O.default.getInstance().previewApis.topBar&&O.default.getInstance().previewApis.topBar.updateTopbar();const e=w.A.showToolsOnTextSelection&&!this.isToolSelected();O.default.getInstance().previewApis.contextMenu.setShouldTriggerContextMenuOnTextSelection(e)}}isToolSelected(){return""!=this.selectedTool&&null!=this.selectedTool}getSelectedTool(){return this.selectedTool}getSelectedToolOrSubtool(){return this.isEraserSelected?D.Ay.REDHAWK_ERASER:this.selectedTool}resetSelectedTool(e){w.A.triggerEvent(D.Ay.API_EVENTS.ANNOTATION_MODE_ENDED,this.selectedTool),this.setEraserSelection(!1,e),this.selectedTool=void 0}isThisToolSelected(e){return e===this.selectedTool}setCurrentColor(e){this.currentColor=e||D.Ay.REDHAWK_YELLOW_COLOR}getToolColor(e){return this.toolsColorMap[e]}setToolColor(e,t){this.toolsColorMap[e]=t,S.A.setUserColorMap(this.toolsColorMap)}getPinToolPref(e){const t=JSON.parse(localStorage.getItem(D.Ay.PIN_TOOL_PREFS)||"null");return t&&t[e]||this.pinToolPrefs[e]}setPinToolPrefForTool(e,t){this.pinToolPrefs[e]=t}setPinToolPrefs(e){this.pinToolPrefs=e}shouldShowTooltip(e){return!!(0,P.eF)()&&!this.tooltipShownMap[e]}setTooltipShownForTool(e){this.tooltipShownMap[e]||(this.tooltipShownMap[e]=!0,(0,P.eF)()&&S.A.setTooltipShownToUser(this.tooltipShownMap))}getCurrentColor(){return this.currentColor}setCurrentOpacity(e){this.currentOpacity=e}getCurrentOpacity(){return this.currentOpacity}invertIsGradientPickerSelected(){this.isGradientPickerSelected=!this.isGradientPickerSelected}getIsGradientPickerSelected(){return this.isGradientPickerSelected}setShowBanner(e){this.showBanner=e}getCurrentStrokeWidth(){return this.currentStrokeWidth}setCurrentStrokeWidth(e){this.currentStrokeWidth=e}getFreeHighlightStrokeWidth(){return this.freeHighlightStrokeWidth}setFreeHighlightStrokeWidth(e){(0,M.y9)(D.Ay.REDHAWK_STICKY_HIGHLIGHT_STROKE_WIDTH_PARAM,e),this.freeHighlightStrokeWidth=e}resetCurrentOpacity(){this.currentOpacity=D.Ay.REDHAWK_DEFAULT_OPACITY}resetIsGradientPickerSelected(){this.isGradientPickerSelected=!1}resetToolbarCache(){this.resetSelectedTool(!0),this.resetCurrentOpacity(),this.resetIsGradientPickerSelected(),this.setShowBanner(!1),this.setCurrentStrokeWidth(D.Ay.REDHAWK_DEFAULT_STROKE_WIDTH)}setEraserSelection(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isEraserSelected=e,t||this.setCursor(),this.clearTooltipTimeoutForAllTools()}getEraserSelectionStatus(){return this.isEraserSelected}}).prototype,"selectedTool",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=_applyDecoratedDescriptor(r.prototype,"currentColor",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.Ay.REDHAWK_YELLOW_COLOR}}),a=_applyDecoratedDescriptor(r.prototype,"currentOpacity",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.Ay.REDHAWK_DEFAULT_OPACITY}}),l=_applyDecoratedDescriptor(r.prototype,"isGradientPickerSelected",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=_applyDecoratedDescriptor(r.prototype,"showBanner",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=_applyDecoratedDescriptor(r.prototype,"currentStrokeWidth",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.Ay.REDHAWK_DEFAULT_STROKE_WIDTH}}),d=_applyDecoratedDescriptor(r.prototype,"freeHighlightStrokeWidth",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return parseInt((0,M.bV)(D.Ay.REDHAWK_STICKY_HIGHLIGHT_STROKE_WIDTH_PARAM),10)||D.Ay.REDHAWK_FREE_HIGHLIGHT_STROKE_WIDTH}}),m=_applyDecoratedDescriptor(r.prototype,"fontSize",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.Ay.FREETEXT_DEFAULT_FONT_SIZE}}),u=_applyDecoratedDescriptor(r.prototype,"toolsColorMap",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N}}),h=_applyDecoratedDescriptor(r.prototype,"tooltipShownMap",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L}}),g=_applyDecoratedDescriptor(r.prototype,"isFreetextEnabled",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=_applyDecoratedDescriptor(r.prototype,"isPinToolTipEnabled",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=_applyDecoratedDescriptor(r.prototype,"isPinToolEnabled",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=_applyDecoratedDescriptor(r.prototype,"isEraserToolEnabled",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=_applyDecoratedDescriptor(r.prototype,"isEraserSelected",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=_applyDecoratedDescriptor(r.prototype,"isHCEnabled",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=_applyDecoratedDescriptor(r.prototype,"pinToolPrefs",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return x}}),T=_applyDecoratedDescriptor(r.prototype,"showPinTooltip",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_applyDecoratedDescriptor(r.prototype,"setShowPinTooltip",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setShowPinTooltip"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setIsFreetextEnabled",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsFreetextEnabled"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setIsPinToolEnabled",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsPinToolEnabled"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setIsPinToolTipEnabled",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsPinToolTipEnabled"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setFontSize",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setFontSize"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setSelectedTool",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedTool"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setIsHCEnabled",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsHCEnabled"),r.prototype),_applyDecoratedDescriptor(r.prototype,"toggleSelectedTool",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"toggleSelectedTool"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setToolsColorMap",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setToolsColorMap"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setTooltipShownMap",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setTooltipShownMap"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setIsEraserToolEnabled",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsEraserToolEnabled"),r.prototype),_applyDecoratedDescriptor(r.prototype,"resetSelectedTool",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"resetSelectedTool"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCurrentColor",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setCurrentColor"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setToolColor",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setToolColor"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setPinToolPrefForTool",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setPinToolPrefForTool"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setPinToolPrefs",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setPinToolPrefs"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setTooltipShownForTool",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setTooltipShownForTool"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCurrentOpacity",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setCurrentOpacity"),r.prototype),_applyDecoratedDescriptor(r.prototype,"invertIsGradientPickerSelected",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"invertIsGradientPickerSelected"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setShowBanner",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setShowBanner"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setCurrentStrokeWidth",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setCurrentStrokeWidth"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setFreeHighlightStrokeWidth",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setFreeHighlightStrokeWidth"),r.prototype),_applyDecoratedDescriptor(r.prototype,"resetCurrentOpacity",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"resetCurrentOpacity"),r.prototype),_applyDecoratedDescriptor(r.prototype,"resetIsGradientPickerSelected",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"resetIsGradientPickerSelected"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setEraserSelection",[A.action],Object.getOwnPropertyDescriptor(r.prototype,"setEraserSelection"),r.prototype),r)},Yfoa:(e,t,o)=>{"use strict";o.d(t,{A:()=>CommentsPositionUtil});var r=o("abd3"),n=o("H0qY"),s=o("iaHC"),a=o("WJQs");class CommentsPositionUtil{constructor(){this.adjustedCommentTops=new Object,this.commentsPosition=n.A.commentsPosition,(0,r.reaction)(()=>a.A.viewRotation,()=>{n.A.commentsPosition=n.A.commentsPosition.sort((e,t)=>{const o=e.nTop+a.A.getPageYOffset(e.pageIndex),r=t.nTop+a.A.getPageYOffset(t.pageIndex);return t.pageIndex>e.pageIndex||o<r||(o===r||o-r<1)&&e.bbLeft<=t.bbLeft?-1:1}),this.commentsPosition=n.A.commentsPosition,this.commentsPosition.forEach(e=>this.alignComment(e.commentId))})}static getInstance(){return CommentsPositionUtil._instance||(CommentsPositionUtil._instance=new CommentsPositionUtil),CommentsPositionUtil._instance}animateCommentPopups(){for(const e in this.adjustedCommentTops){const t=this.getCommentIndex(e);if(-1!==t){const o=this.commentsPosition[t],r=this.adjustedCommentTops[e]-a.A.getPageYOffset(o.pageIndex);o.rTop!==r&&n.A.updateCommentPositionRTop(o.commentId,r)}else delete this.adjustedCommentTops[e]}}getMovingDistForUpperPopups(e,t){if(e<=0||t<0)return 0;const o=this.commentsPosition[e],r=this.commentsPosition[t],n=this.adjustedCommentTops[o.commentId];return this.adjustedCommentTops[r.commentId]+r.height-n+20}getMovingDistForDownPopups(e,t){const o=this.commentsPosition,r=o[e],n=this.commentsPosition[t],s=this.adjustedCommentTops[r.commentId],a=r.height,l=this.adjustedCommentTops[n.commentId];if(t>=o.length)return;return s+a-l+20}setUpperCommentsPosition(e){if(e<0)return;const t=this.commentsPosition[e],o=t.commentId,r=a.A.getPageYOffset(t.pageIndex);let n=this.adjustedCommentTops[o];const s=this.getMovingDistForUpperPopups(e+1,e);s>0?n=this.adjustedCommentTops[o]-s:s<0&&t.nTop+r>this.adjustedCommentTops[o]&&(n=Math.min(n-s,t.nTop+a.A.getPageYOffset(t.pageIndex))),this.adjustedCommentTops[o]===n||s<2&&s>-2||(this.adjustedCommentTops[o]=n,this.setUpperCommentsPosition(e-1))}setDownCommentsPosition(e){const t=this.commentsPosition;if(e<0||e>=t.length)return;const o=t[e],r=o.commentId,n=a.A.getPageYOffset(o.pageIndex);let s=this.adjustedCommentTops[r];const l=this.getMovingDistForDownPopups(e-1,e);l>0?s=this.adjustedCommentTops[r]+l:l<0&&o.nTop+n<this.adjustedCommentTops[r]&&(s=Math.max(o.nTop+n,s+l)),this.adjustedCommentTops[r]===s||l<2&&l>-2||(this.adjustedCommentTops[r]=s,this.setDownCommentsPosition(e+1))}cascadeUpperPopups(e){0!==e&&this.setUpperCommentsPosition(e-1)}cascadeDownPopups(e){e===this.commentsPosition.length-1||e<0||this.setDownCommentsPosition(e+1)}cascadeSurroundingCommentPopups(e){this.cascadeUpperPopups(e),this.cascadeDownPopups(e)}alignCommentWithText(e){const t=this.getCommentIndex(e),o=this.commentsPosition[t];o&&(this.adjustedCommentTops[o.commentId]=o.nTop+(a.A.getPageYOffset(o.pageIndex)?a.A.getPageYOffset(o.pageIndex):0),this.cascadeSurroundingCommentPopups(t),this.animateCommentPopups())}alignCommentAtAdjustedPos(e){const t=this.getCommentIndex(e),o=this.commentsPosition[t];o&&(this.adjustedCommentTops[o.commentId]=o.nTop+(a.A.getPageYOffset(o.pageIndex)?a.A.getPageYOffset(o.pageIndex):0),t?(this.cascadeDownPopups(t-1,e),this.cascadeDownPopups(t,e)):this.cascadeDownPopups(t,e),this.animateCommentPopups())}alignComment(e){e===s.A.selectedCommentId?setTimeout(()=>{CommentsPositionUtil.getInstance().alignCommentWithText(e)},0):(CommentsPositionUtil.getInstance().alignCommentAtAdjustedPos(e),void 0!==s.A.selectedCommentId&&setTimeout(()=>{CommentsPositionUtil.getInstance().alignCommentWithText(s.A.selectedCommentId)},0))}bringTopCommentPopupsIntoView(){if(this.commentsPosition.length>0){const e=this.commentsPosition[0];e.rTop<0&&this.alignCommentWithText(e.commentId)}}getCommentIndex(e){return this.commentsPosition.findIndex(t=>t.commentId===e)}}CommentsPositionUtil._instance=void 0},Yrbn:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=unsafeStringify;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("3DC5"));const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function unsafeStringify(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]}var s=function stringify(e){const t=unsafeStringify(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);if(!(0,r.default)(t))throw TypeError("Stringified UUID is invalid");return t};t.default=s},YxO2:(e,t)=>{"use strict";function getOutputLength(e){return 14+(e+64>>>9<<4)+1}function safeAdd(e,t){const o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function md5cmn(e,t,o,r,n,s){return safeAdd(function bitRotateLeft(e,t){return e<<t|e>>>32-t}(safeAdd(safeAdd(t,e),safeAdd(r,s)),n),o)}function md5ff(e,t,o,r,n,s,a){return md5cmn(t&o|~t&r,e,t,n,s,a)}function md5gg(e,t,o,r,n,s,a){return md5cmn(t&r|o&~r,e,t,n,s,a)}function md5hh(e,t,o,r,n,s,a){return md5cmn(t^o^r,e,t,n,s,a)}function md5ii(e,t,o,r,n,s,a){return md5cmn(o^(t|~r),e,t,n,s,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function md5(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let o=0;o<t.length;++o)e[o]=t.charCodeAt(o)}return function md5ToHexEncodedArray(e){const t=[],o=32*e.length,r="0123456789abcdef";for(let n=0;n<o;n+=8){const o=e[n>>5]>>>n%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(s)}return t}(function wordsToMd5(e,t){e[t>>5]|=128<<t%32,e[getOutputLength(t)-1]=t;let o=1732584193,r=-271733879,n=-1732584194,s=271733878;for(let t=0;t<e.length;t+=16){const a=o,l=r,c=n,p=s;o=md5ff(o,r,n,s,e[t],7,-680876936),s=md5ff(s,o,r,n,e[t+1],12,-389564586),n=md5ff(n,s,o,r,e[t+2],17,606105819),r=md5ff(r,n,s,o,e[t+3],22,-1044525330),o=md5ff(o,r,n,s,e[t+4],7,-176418897),s=md5ff(s,o,r,n,e[t+5],12,1200080426),n=md5ff(n,s,o,r,e[t+6],17,-1473231341),r=md5ff(r,n,s,o,e[t+7],22,-45705983),o=md5ff(o,r,n,s,e[t+8],7,1770035416),s=md5ff(s,o,r,n,e[t+9],12,-1958414417),n=md5ff(n,s,o,r,e[t+10],17,-42063),r=md5ff(r,n,s,o,e[t+11],22,-1990404162),o=md5ff(o,r,n,s,e[t+12],7,1804603682),s=md5ff(s,o,r,n,e[t+13],12,-40341101),n=md5ff(n,s,o,r,e[t+14],17,-1502002290),r=md5ff(r,n,s,o,e[t+15],22,1236535329),o=md5gg(o,r,n,s,e[t+1],5,-165796510),s=md5gg(s,o,r,n,e[t+6],9,-1069501632),n=md5gg(n,s,o,r,e[t+11],14,643717713),r=md5gg(r,n,s,o,e[t],20,-373897302),o=md5gg(o,r,n,s,e[t+5],5,-701558691),s=md5gg(s,o,r,n,e[t+10],9,38016083),n=md5gg(n,s,o,r,e[t+15],14,-660478335),r=md5gg(r,n,s,o,e[t+4],20,-405537848),o=md5gg(o,r,n,s,e[t+9],5,568446438),s=md5gg(s,o,r,n,e[t+14],9,-1019803690),n=md5gg(n,s,o,r,e[t+3],14,-187363961),r=md5gg(r,n,s,o,e[t+8],20,1163531501),o=md5gg(o,r,n,s,e[t+13],5,-1444681467),s=md5gg(s,o,r,n,e[t+2],9,-51403784),n=md5gg(n,s,o,r,e[t+7],14,1735328473),r=md5gg(r,n,s,o,e[t+12],20,-1926607734),o=md5hh(o,r,n,s,e[t+5],4,-378558),s=md5hh(s,o,r,n,e[t+8],11,-2022574463),n=md5hh(n,s,o,r,e[t+11],16,1839030562),r=md5hh(r,n,s,o,e[t+14],23,-35309556),o=md5hh(o,r,n,s,e[t+1],4,-1530992060),s=md5hh(s,o,r,n,e[t+4],11,1272893353),n=md5hh(n,s,o,r,e[t+7],16,-155497632),r=md5hh(r,n,s,o,e[t+10],23,-1094730640),o=md5hh(o,r,n,s,e[t+13],4,681279174),s=md5hh(s,o,r,n,e[t],11,-358537222),n=md5hh(n,s,o,r,e[t+3],16,-722521979),r=md5hh(r,n,s,o,e[t+6],23,76029189),o=md5hh(o,r,n,s,e[t+9],4,-640364487),s=md5hh(s,o,r,n,e[t+12],11,-421815835),n=md5hh(n,s,o,r,e[t+15],16,530742520),r=md5hh(r,n,s,o,e[t+2],23,-995338651),o=md5ii(o,r,n,s,e[t],6,-198630844),s=md5ii(s,o,r,n,e[t+7],10,1126891415),n=md5ii(n,s,o,r,e[t+14],15,-1416354905),r=md5ii(r,n,s,o,e[t+5],21,-57434055),o=md5ii(o,r,n,s,e[t+12],6,1700485571),s=md5ii(s,o,r,n,e[t+3],10,-1894986606),n=md5ii(n,s,o,r,e[t+10],15,-1051523),r=md5ii(r,n,s,o,e[t+1],21,-2054922799),o=md5ii(o,r,n,s,e[t+8],6,1873313359),s=md5ii(s,o,r,n,e[t+15],10,-30611744),n=md5ii(n,s,o,r,e[t+6],15,-1560198380),r=md5ii(r,n,s,o,e[t+13],21,1309151649),o=md5ii(o,r,n,s,e[t+4],6,-145523070),s=md5ii(s,o,r,n,e[t+11],10,-1120210379),n=md5ii(n,s,o,r,e[t+2],15,718787259),r=md5ii(r,n,s,o,e[t+9],21,-343485551),o=safeAdd(o,a),r=safeAdd(r,l),n=safeAdd(n,c),s=safeAdd(s,p)}return[o,r,n,s]}(function bytesToWords(e){if(0===e.length)return[];const t=8*e.length,o=new Uint32Array(getOutputLength(t));for(let r=0;r<t;r+=8)o[r>>5]|=(255&e[r/8])<<r%32;return o}(e),8*e.length))};t.default=o},Z7YH:(e,t,o)=>{var r="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;e.exports=r},ZNXq:(e,t,o)=>{"use strict";o.d(t,{A:()=>p});var r=o("D/Yr"),n=o("hGRN"),s=o("CoNQ"),a=o("Jm6I"),l=o("6AL6"),c=o("G5bJ");const p=class CreateReplyCommand{constructor(e,t,o,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.comment=e,this.replyBody=t,this.pageIndex=o,this.newReply=void 0,this.stores=r,this.shouldTakeFocus=n.shouldTakeFocus,this.replyFailureCallback=n.replyFailureCallback,this.replySuccessCallback=n.replySuccessCallback,this.autoMentionDisposition=n.autoMentionDisposition}sendAutoMentionDispositionEvent(){this.autoMentionDisposition&&this.autoMentionDisposition!==a.iK.OFF&&((0,l.BI)("Participate","Use","ReplyAutoMention",{"adb.event.context.eureka.participate.use.autoMentionDisposition":this.autoMentionDisposition}),this.autoMentionDisposition=a.iK.OFF)}executeOnUI(){let e;if(this.replyBody.content){const t=this.replyBody.mentions;e={bodyValue:this.replyBody.content||this.replyBody.bodyValue,target:{source:this.comment.sid},motivation:r.Ay.REPLYING,parent:this.comment,mentions:t}}else e=this.replyBody;const t=this.stores.commentsStore.getReplyUIModel(e,this.comment);"boolean"==typeof this.shouldTakeFocus&&t.setShouldTextTakeFocus(this.shouldTakeFocus),this.stores.commentsStore.setShouldReplyFieldBeActive(!1),((0,n.eF)()||this.stores.userProfileStore.hasAuth)&&(this.comment.addReply(t),this.stores.commentsStore.setNudgingReplyPosted(!0)),this.newReply=t}executeOnUIForAnonUser(){this.comment.addReply(this.newReply)}executeOnServer(){const{userProfileStore:e,commentsStore:t}=this.stores;if(!(0,n.eF)()&&!e.hasAuth)return t.setShowPageLevelWelcomeDialog(!0),void t.setPendingReply(this);s.A.queueOperation(s.A.saveReply(this.comment,this.newReply,this.replyFailureCallback)),t.pendingCommentCleanup(),this.comment.resetUnsavedReplyBody(),"function"==typeof this.replySuccessCallback&&this.replySuccessCallback(),this.newReply.resetSyncPending(),this.newReply.setSyncWithServer(!0),this.sendAutoMentionDispositionEvent()}execute(){(this.stores.userProfileStore.hasAuth||(0,n.eF)())&&this.comment.resetUnsavedReplyBody();(this.replyBody.content||this.replyBody.bodyValue)&&(this.executeOnUI(),this.executeOnServer(),(0,l.BI)("Participate","Use","Reply to existing comment"))}undoOnUI(){this.comment.deleteReply(this.newReply)}undoOnServer(){s.A.queueOperation(s.A.deleteReply(this.comment,this.newReply,this.pageIndex),r.Ay.REDHAWK_UNDO)}undo(e){if(c.A.validateExistingDraftCommentReply())return;const t=this.stores.commentsStore.getCommentByTid(this.comment.tid,this.pageIndex);t&&(this.comment=t);const o=this.stores.commentsStore.getCommentByTid(this.newReply.tid,this.pageIndex);o&&(this.newReply=o);const{isRollback:r}=e||{};this.undoOnUI(),r||this.undoOnServer()}redoOnUI(){this.comment.resetUnsavedReplyBody(),this.comment.addReply(this.newReply)}redoOnServer(){s.A.queueOperation(s.A.saveReply(this.comment,this.newReply),r.Ay.REDHAWK_REDO),this.newReply.resetSyncPending(),this.newReply.setSyncWithServer(!0)}redo(e){if(c.A.validateExistingDraftCommentReply())return;const t=this.stores.commentsStore.getCommentByTid(this.comment.tid,this.pageIndex);t&&(this.comment=t);const o=this.stores.commentsStore.getCommentByTid(this.newReply.tid,this.pageIndex);o&&(this.newReply=o);const{isRollback:r}=e||{};this.redoOnUI(),r||this.redoOnServer()}}},Zm2D:(e,t,o)=>{e.exports=o("2pFd")("L4Le")},Zzaa:(e,t,o)=>{var r=o("YWiy");function SDCDraw18N(e){return r.createElement("svg",e,r.createElement("path",{d:"M9.81348,15.01259c-5.75613,0-9.08013-2.91078-9.30148-5.75935C.32108,6.80035,2.37968,3.908,8.727,3.14524c4.048-.48374,7.01693.25318,8.15413,2.02724a2.71914,2.71914,0,0,1-.01107,2.98274c-.8551,1.396-3.11456,2.75029-6.92352,2.495a.47883.47883,0,0,1-.44-.51476l.00066-.00762L9.554,9.65761a.47476.47476,0,0,1,.50926-.41938c3.17637.20551,4.99208-.83235,5.5995-1.82316a1.32862,1.32862,0,0,0,.02582-1.478C15.055,4.94882,12.93641,4.06613,8.8967,4.55176,4.4853,5.0816,1.74881,6.88429,1.92405,9.14348c.18077,2.32514,3.37564,4.61339,8.464,4.4423a16.74728,16.74728,0,0,0,2.16089-.18589A.475.475,0,0,1,13.1,13.7463l.11508.45848a.46876.46876,0,0,1-.333.57321l-.02642.00619a17.646,17.646,0,0,1-2.41777.21734C10.22668,15.00891,10.01916,15.01259,9.81348,15.01259Z",fill:"var(--iconFill, #464646)"}))}SDCDraw18N.defaultProps={width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=SDCDraw18N,SDCDraw18N.default=SDCDraw18N},a8bA:(e,t,o)=>{"use strict";o.d(t,{A:()=>D});var r=o("abd3"),n=o("7qRf"),s=o.n(n),a=o("9+t3"),l=o("ntwr"),c=o("ZNXq"),p=o("D/Yr"),d=o("2d48"),m=o("WJZ5"),u=o("CoNQ"),h=o("G5bJ");const g=class EditCommentCommand{constructor(e,t,o,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.comment=e,this.oldProperties=t,this.newProperties=o,this.commentsStore=r,this.isEditOp=n}updateOnServer(){m.A.isFreeText(this.comment)?setTimeout(()=>{this.commentsStore.updateComment(this.comment.target.selector.node.index,this.comment)},100):this.isEditOp?u.A.queueOperation(u.A.updateComment(this.comment.target.selector.node.index,this.comment),void 0,this.comment):u.A.queueOperation(u.A.updateComment(this.comment.target.selector.node.index,this.comment))}updateUiModel(e,t){if(e.strokeColor&&this.comment.target.selector.setStrokeColor(e.strokeColor),e.strokeWidth&&this.comment.target.selector.setStrokeWidth(e.strokeWidth),e.opacity&&this.comment.target.selector.setOpacity(e.opacity),e.boundingBox){const t=this.comment.target.selector.getCoordPointsWrtImg(e.boundingBox);this.comment.target.selector.setBoundingBox(t),this.comment.target.selector.updateSelectorBbox(e.boundingBox)}if(e.quadPoints){const t=this.comment.target.selector.getCoordPointsWrtImg(e.quadPoints);this.comment.target.selector.setQuadPoints(t),this.comment.target.selector.updateSelectorQuadPoints(e.quadPoints)}if(e.inkList){const t=this.comment.target.selector.updateInkList(e.inkList);this.comment.target.selector.setInkList(t)}e.styleClass&&(this.comment.target.selector.styleClass=e.styleClass),e.style&&(e.style.fontSize&&this.comment.target.selector.setFontSize(e.style.fontSize),e.style.color&&this.comment.target.selector.setFontColor(e.style.color),this.comment.setUpdatedStyle(!0)),"bodyValue"in e&&this.comment.setBodyValue(e.bodyValue)}executeOnServer(){this.comment.syncedWithServer&&this.updateOnServer()}undoOnServer(){this.comment.syncedWithServer&&this.updateOnServer()}redoOnServer(){this.comment.syncedWithServer&&this.updateOnServer()}execute(){this.updateUiModel(this.newProperties,!0),this.executeOnServer()}undo(e){if(h.A.validateExistingDraftCommentReply())return;const{isRollback:t}=e||{};this.updateUiModel(this.oldProperties,!1),t||this.undoOnServer()}redo(e){if(h.A.validateExistingDraftCommentReply())return;const{isRollback:t}=e||{};this.updateUiModel(this.newProperties,!0),t||this.redoOnServer()}};var y=o("qgO1"),C=o("llUt"),_=o("IBYW"),b=o("Hlvc"),E=o("H0qY"),v=o("QNhk"),T=o("UJUO"),A=o("v3fp"),O=o("/Hez");const selectComment=e=>{a.default.getInstance().previewApis.documentActions.goToLocation({pageIndex:e.target.selector.node.index,left:0,top:0}),setTimeout(()=>{const t=E.A.getCommentIndex(e.id);t>=0&&E.A.commentsPosition[t].viewRef&&E.A.commentsPosition[t].viewRef.dispatchEvent(new CustomEvent("bringCommentPopupInView"))})};const D=new class CommentsApi{constructor(){var e=this;this.initialize=e=>{const{stores:t}=e;this.stores={...this.stores,...t}},this.addComment=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(r=>{const n=a.default.getInstance().previewApis.commandManager,s=e.stores,c={autoCommit:!0};"boolean"==typeof o.shouldTakeFocus&&(c.shouldTakeFocus=o.shouldTakeFocus),"freetext"===t.target.selector.subtype&&(t=m.A.populateFreeText(t,s));const p=new l.A(t,void 0,s,c),commAddListener=(o,n)=>{"ANNOTATION_ADDED"===o&&n.id===t.id&&(e.removeEventListener(commAddListener),c.shouldTakeFocus&&e.selectComment(t.id),r())};e.registerEventListener(commAddListener),t.isEditOp?p.execute():n.executeCommand(p),v.A.isSharedCommentingMode()&&n.removeLastEntryFromUndoStack()})},this.addReply=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((r,n)=>{const s=a.default.getInstance().previewApis.commandManager,l=e.stores.commentsStore.getUICommentFromId(t.target.source);if(l){const n={};"boolean"==typeof o.shouldTakeFocus&&(n.shouldTakeFocus=o.shouldTakeFocus);const a=new c.A(l,t,l.target.selector.node.index,{commentsStore:e.stores.commentsStore,userProfileStore:e.stores.userProfileStore},n),replyAddListener=(o,s)=>{"ANNOTATION_ADDED"===o&&s.id===t.id&&(e.removeEventListener(replyAddListener),n.shouldTakeFocus&&selectComment(l),r())};e.registerEventListener(replyAddListener),a.execute(),v.A.isSharedCommentingMode()&&s.removeLastEntryFromUndoStack()}else n(new Error(`Parent not found for given annotation ${t.id}`))})},this.getComments=e=>this.stores.commentsStore.isCommentsFetched.then(()=>new Promise(t=>{let o;if(e.annotationIds)o=this.stores.commentsStore.getCommentByIds(e.annotationIds),o=o.map(e=>({...e,replies:[]}));else if(e.pageRange){const{startPage:t,endPage:r}=e.pageRange;o=this.stores.commentsStore.getCommentsByPageRange(t,r)}else o=this.stores.commentsStore.getAllComment();t(y.A.getFlattenCommentSupportedForAPI(o))})),this.deleteComments=e=>new Promise((t,o)=>{const r=a.default.getInstance().previewApis.commandManager;let n=[];if(e.annotationIds)n=this.stores.commentsStore.getCommentByIds(e.annotationIds);else if(e.pageRange){const{startPage:t,endPage:o}=e.pageRange;n=this.stores.commentsStore.getCommentsByPageRange(t,o)}else n=this.stores.commentsStore.getAllComment();n=y.A.getFlattenCommentSupportedForAPI(n),n=[...n.filter(e=>e.motivation===p.Ay.REPLYING),...n.filter(e=>e.motivation===p.Ay.MOTIVATION_COMMENTING)];const s=n.map(t=>new Promise(o=>{const n=this.stores.commentsStore.getUICommentFromId(t.id);let s=n;const a=t.motivation===p.Ay.REPLYING;if(a&&(s=this.stores.commentsStore.getUICommentFromId(t.target.source)),s){const l=new d.A(s,n,!a,t.target.selector.node.index,this.stores.commentsStore),deleteListener=(e,t)=>{"ANNOTATION_DELETED"===e&&t.id===n.id&&(this.removeEventListener(deleteListener),o())};this.registerEventListener(deleteListener),e.isEditOp?l.execute():r.executeCommand(l),v.A.isSharedCommentingMode()&&r.removeLastEntryFromUndoStack()}}));n.length>0?e.isEditOp?t():Promise.all(s).then(()=>{t()}):o(new Error("Annotation not found for given filter"))}),this.commitUnsavedChanges=()=>this.stores.commentsStore.handleUnsavedChanges(),this.updateComment=(e,t)=>{const o=a.default.getInstance().previewApis.commandManager,r=this.stores.commentsStore.getUICommentFromId(e.id);if(r&&y.A.isSupportedCommentForAPI(r)){"freetext"===r.target.selector.subtype&&r.motivation===p.Ay.MOTIVATION_COMMENTING&&(r.target.selector.selector.style=r.target.selector.style);const n=y.A.getProperties(r.bodyValue,r.motivation,r.target.selector.selector),s=y.A.getProperties(e.bodyValue,e.motivation,e.target.selector);if(t||y.A.hasAnnotationChanged(n,s)){const e=new g(r,n,s,this.stores.commentsStore,t);return t?e.execute():o.executeCommand(e),v.A.isSharedCommentingMode()&&o.removeLastEntryFromUndoStack(),Promise.resolve()}return Promise.reject(new Error(`No updated allowed field found in annotation for given id ${e.id}`))}return Promise.reject(new Error(`Annotation not found for given id ${e.id}`))},this.selectComment=e=>{const t=this.stores.commentsStore.getUICommentFromId(e);let o=t;return t&&t.motivation===p.Ay.REPLYING&&(o=this.stores.commentsStore.getUICommentFromId(t.target.source)),o?(selectComment(o),setTimeout(()=>{this.stores.commentsStore.setSelectedCommentId(o.id)}),Promise.resolve()):Promise.reject(new Error("Annotation not found for given id"))},this.unselectComment=()=>{this.stores.commentsStore.resetSelectedCommentId()},this.registerEventListener=e=>{this.eventListeners.push(e)},this.removeEventListener=e=>{this.eventListeners=this.eventListeners.filter(t=>t!==e)},this.triggerEvent=(e,t)=>{if(void 0!==t){const o=v.A.integrationProvider;if(t.motivation&&o&&o.apis.comments.areAnnotationAPIsEnabled()&&!y.A.isSupportedCommentForAPI(t))return;let n=t;"object"==typeof t&&(n=s()({...t,mentions:(0,r.toJS)(t.mentions),replies:(0,r.toJS)(t.replies)})),v.A.isMentionEnabled()&&n.mentions&&(n={...n,mentions:(0,r.toJS)(n.mentions)},!n.mentions.length&&delete n.mentions),this.eventListeners.forEach(t=>t(e,n)),e!==p.Ay.API_EVENTS.ANNOTATION_ADDED&&e!==p.Ay.API_EVENTS.ANNOTATION_DELETED||this.triggerEvent(p.Ay.API_EVENTS.ANNOTATION_COUNT,this.stores.commentsStore.getFlattenComments().length)}},this.setConfig=e=>{if("showCommentsPanel"in e){const t=!1;this.stores.commentsDropinStore.setShouldShowCommentsPanel(e.showCommentsPanel,t)}"showToolsOnTextSelection"in e&&(this.showToolsOnTextSelection=e.showToolsOnTextSelection,C.PreviewStore.instance.apis.contextMenu.setShouldTriggerContextMenuOnTextSelection(e.showToolsOnTextSelection))},this.toggleCommenting=function(t){if("enableCommentsPanel"in(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})?e.stores.commentsDropinStore.setShouldShowCommentsPanel(!1,!1):e.stores.commentsDropinStore.setShouldShowCommentsPanel(t,!0),e.stores.commentsDropinStore.setDisableCommenting(!t),!t&&a.default.getInstance().previewApis.previewPublicApis.rhp&&a.default.getInstance().previewApis.previewPublicApis.rhp.closePanel(),a.default.getInstance().previewApis.topBar&&a.default.getInstance().previewApis.topBar.updateTopbar(),a.default.getInstance().previewApis.previewPublicApis.app){const e=a.default.getInstance().previewApis.previewPublicApis.app.customizeUIControl;e("COMMENT_STICKYNOTE_CONTROL",{visible:t}),v.A.isFreetextEnabled()&&e("COMMENT_TEXT_CONTROL",{visible:t}),e("COMMENT_REPLACE_CONTROL",{visible:t}),e("COMMENT_INSERT_CONTROL",{visible:t}),e("COMMENT_HIGHLIGHT_CONTROL",{visible:t}),e("COMMENT_UNDERLINE_CONTROL",{visible:t}),e("COMMENT_STRIKEOUT_CONTROL",{visible:t}),e("COMMENT_DRAW_CONTROL",{visible:t})}},this.startAnnotationMode=(e,t)=>{let o="";const{toolBarStore:r,commentsDropinStore:n}=this.stores;switch(e){case"shape":case"eraser":o="draw";break;case"note":o="stickynote";break;case"freetext":o="text";break;default:o=e}let s=!1;e===p.Ay.QUICKTOOLS_COMMENT_ERASER?s=!0:r.isEraserSelected&&(s=!1),setTimeout(()=>{r.setEraserSelection(s)},0),t.defaultColor&&r.setToolColor(e,t.defaultColor),t.fontSize&&r.setFontSize(t.fontSize),t.strokeWidth&&r.setCurrentStrokeWidth(t.strokeWidth),a.default.getInstance().previewApis.previewPublicApis.quickTools.setActiveVerb&&a.default.getInstance().previewApis.previewPublicApis.quickTools.setActiveVerb(`verb-comment-${o}`)},this.endAnnotationMode=()=>{this.stores.toolBarStore.resetSelectedTool(),a.default.getInstance().previewApis.previewPublicApis.quickTools.reset()},this.beforePrintDownload=e=>new Promise(t=>{this.pdfAnnotations||(this.pdfAnnotations=this.stores.assetStore.getAssetURN().then(e=>new _.A(e).get().then(e=>{let{annotations:t}=e;return t.filter(e=>y.A.isSupportedCommentForAPI(e))}))),this.pdfAnnotations.then(e=>this.removeAnnotationsFromPDF(e)).then(()=>{e?this.addAnnotationsInPDF(this.stores.commentsStore.comments.map(e=>this.stores.commentsStore.getUICommentFromId(e.id))).then(()=>t()):t()})}),this.afterPrintDownload=e=>new Promise(t=>{let o=Promise.resolve();e&&(o=this.removeAnnotationsFromPDF(this.stores.commentsStore.comments)),o.then(()=>{this.pdfAnnotations.then(e=>this.addAnnotationsInPDF(e)).then(()=>{t()})})}),this.removeAnnotationsFromPDFBuffer=async()=>{const e=await this.stores.assetStore.getAssetURN(),t=new _.A(e),o=(await t.get()).annotations.filter(e=>h.A.getInstance().isCommentSupportedForSharedFiles(e));return await this.removeAnnotationsFromPDF(o),o},this.getAllRepliesToAddInPDF=(e,t)=>{const o=[];return t.forEach(t=>{if(t.replies&&t.replies.length>0){const r=new b.A(e,"function"==typeof t.getServerCommentData?t.getServerCommentData(t):t);t.replies.forEach(e=>{const t=r.makeAnnotSchema(e.bodyValue,e.mentions,e),n=r.reverseTranslate(t),s=r.annotationObject.target.selector.node.index;o.push({pageNum:s+1,...n})})}}),o},this.addRepliesInPDF=(e,t)=>{const o=this.getAllRepliesToAddInPDF(e,t);return 0===o.length?Promise.resolve():a.default.getInstance().previewApis.comments.createComments(o).then(e=>{const o=JSON.parse(e.data.response);let r=-1;t.forEach(e=>{e.replies&&e.replies.length>0&&e.replies.forEach(e=>{r+=1,T.A.set({clientId:e.id,t4Id:o[r].annot.id})})})})},this.addAnnotationsInPDF=e=>new Promise(t=>{this.stores.assetStore.getAssetURN().then(o=>{const r=new _.A(o);let n=[];const s=[],a=[];let l=-1;e.forEach((t,o)=>{const{pageIndex:c,newComment:d,annotSchema:u}=r.getAnnotDataForAJS(t.bodyValue,t.mentions,t,"",t.target.selector.subtype,"function"==typeof t.target.selector.getSelectorForServer?t.target.selector.getSelectorForServer():t.target.selector);n.push({pageNum:c+1,...d}),s.push({annotSchema:u});if((o+1)%p.Ay.CREATE_COMMENTS_BATCH_SIZE===0||o+1===e.length){const t=r.createComments(n).then(t=>{JSON.parse(t.data.response).forEach(t=>{if(l+=1,"success"===t.status){const o=e[l].id;T.A.set({clientId:o,t4Id:t.id}),m.A.isFreeText(s[l])&&y.A.updateFreeText(s[l],t.annot)}})});a.push(t),n=[]}}),Promise.all(a).then(()=>{this.addRepliesInPDF(o,e).then(()=>t())})})}),this.getAllRepliesToRemoveFromPDF=e=>{const t=[];return e.forEach(e=>{e.replies&&e.replies.length>0&&e.replies.forEach(e=>{t.push({id:T.A.get(e.id),pageNum:e.target.selector.node.index+1})})}),t},this.removeAnnotationsFromPDF=e=>new Promise(t=>{const o=this.getAllRepliesToRemoveFromPDF(e);a.default.getInstance().previewApis.comments.deleteComments(o).then(()=>{let o=[];const r=[];e.forEach((t,n)=>{const s="function"==typeof t.target.selector.getSelectorForServer?t.target.selector.getSelectorForServer():t.target.selector;o.push({id:T.A.get(t.id),pageNum:s.node.index+1});if((n+1)%p.Ay.DELETE_COMMENTS_BATCH_SIZE===0||n+1===e.length){const e=a.default.getInstance().previewApis.comments.deleteComments(o);r.push(e),o=[]}}),Promise.all(r).then(t)})}),this.commentClickHandler=e=>{const t=T.A.reverseGet(e);this.stores.commentsStore.setSelectedCommentId(t),this.selectComment(t);const o=this.stores.commentsStore.selectedCommentModel;(0,A.LX)().then(e=>{e||(0,A.Px)();setTimeout(()=>{const e=this.stores.userProfileStore.getUserProfile(),t=h.A.getInstance().isUserOwnerOfComment(o,e),r=h.A.getInstance().isReplyPresent(o),n={pageIndex:o.target.selector.node.index,bbox:O.A.translateBbox(o.target.selector.boundingBox),commentNote:o.bodyValue,commentType:o.target.selector.subtype,...h.A.getInstance().canEditComment(o,this.stores,{}),isUserCommentOwner:t,isReplyPresent:r,status:o.status};a.default.getInstance().previewApis.contextMenu.triggerContextMenu(n,{trapFocus:!0},p.Ay.COMMENT_SELECTED)},e?0:1e3)})},this.eventListeners=[],this.showToolsOnTextSelection=!0,this.stores={}}}},aFUB:(e,t,o)=>{var r=o("EbA6"),n=Object.create,s=function(){function object(){}return function(e){if(!r(e))return{};if(n)return n(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}();e.exports=s},abd3:(e,t,o)=>{e.exports=o("M2Fx")("y986")},bWDU:(e,t,o)=>{var r=o("1XbB")(o("nsdc"),"WeakMap");e.exports=r},bsB8:e=>{e.exports=function stackHas(e){return this.__data__.has(e)}},buDb:(e,t,o)=>{"use strict";o.d(t,{Yv:()=>exhaustiveQuadMergeVertical,ZO:()=>SelectionUtils_mergeQuads,c8:()=>mergeQuadsExhaustively,vT:()=>unflattenArray});var r=o("PIOo"),n=o("zA4s");const unflattenArray=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const o=e.slice(),r=[];for(;o.length;)r.push(o.splice(0,t));return r},getLeftEdgeMidPoint=e=>{const{topLeft:t,bottomLeft:o}=e;return{x:(t.x+o.x)/2,y:(t.y+o.y)/2}},getRightEdgeMidPoint=e=>{const{topRight:t,bottomRight:o}=e;return{x:(t.x+o.x)/2,y:(t.y+o.y)/2}},s={LEFT:"left",RIGHT:"right"},shouldMergeQuads=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=!1;const{LEFT:a,RIGHT:l}=s;let c=(0,n.PL)(getRightEdgeMidPoint(e),getLeftEdgeMidPoint(t)),p=(0,n.PL)(e.topRight,t.topLeft),d=(0,n.PL)(e.bottomRight,t.bottomLeft);return r=d<=o||c<=o||p<=o,r?{shouldMerge:r,direction:l,minDistance:Math.min(d,c,p)}:(c=(0,n.PL)(getLeftEdgeMidPoint(e),getRightEdgeMidPoint(t)),p=(0,n.PL)(e.topLeft,t.topRight),d=(0,n.PL)(e.bottomLeft,t.bottomRight),r=d<=o||c<=o||p<=o,{shouldMerge:r,direction:a,minDistance:Math.min(d,c,p)})},exhaustiveQuadMergeHorizontal=(e,t,o,r)=>{let a=e.slice();const l=a.slice(),getMinDistanceIndex=(e,r,n)=>{const s={indexToMerge:-1,minDistance:Number.MAX_SAFE_INTEGER,direction:null,shouldMerge:!1};let a=r;for(;a<e.length;){const r=e[a],{shouldMerge:l,direction:c,minDistance:p}=t(n,r,o);l&&s.minDistance>p&&(s.minDistance=p,s.indexToMerge=a,s.direction=c,s.shouldMerge=l),a+=1}return s};do{a=l.slice();let e=0;for(;e<l.length;){const t=l[e],o=getMinDistanceIndex(l,e+1,t);if(o.shouldMerge){const{RIGHT:r}=s,n=l[o.indexToMerge],a=o.direction===r?t.mergeQuad(n):n.mergeQuad(t);l[e]=a,l.splice(o.indexToMerge,1)}e+=1}}while(a.length!==l.length);if(r){const e=((e,t)=>{const o=e.slice(),r=e[e.length-1];if((0,n.pu)(r.quadPoints,t.quadPoints))return e.length-1;let s=0;for(const e of o){if((0,n.pu)(e.quadPoints,t.quadPoints))return s;s+=1}return s})(l,r);let t;if(e>=l.length)t=r;else{t=l[e].getEffectiveCaretQuad(r),l.splice(e,1)}l.push(t)}return l},exhaustiveQuadMergeVertical=(e,t,o)=>{let r=e.slice();const n=r.slice(),getMaxAreaIntersectingQuad=(e,r,n,s)=>{const a={...s};let l=r,c=a.minDistance;for(;l<e.length;){const r=e[l],s=t(n,r,o);if(!s.shouldMerge)break;if(c=s.minDistance,0!==c)break;r.area>a.maxArea&&(a.maxArea=r.area,a.indexToMerge=l),l+=1}return a},getMinDistanceIndex=(e,r,n)=>{const s={indexToMerge:-1,minDistance:Number.MAX_SAFE_INTEGER,maxArea:Number.MIN_SAFE_INTEGER,shouldMerge:!1};let a=r;const l=e[n];for(;a<e.length;){const r=e[a],{shouldMerge:n,minDistance:c}=t(l,r,o);if(n){if(0===c)return s.maxArea=r.area,s.indexToMerge=a,s.shouldMerge=n,s.minDistance=0,getMaxAreaIntersectingQuad(e,a+1,l,s);s.maxArea<r.area&&(s.maxArea=r.area,s.indexToMerge=a,s.shouldMerge=n,s.minDistance=c)}a+=1}return s};do{r=n.slice();let e=0;for(;e<n.length;){const t=getMinDistanceIndex(n,e+1,e),{shouldMerge:o,indexToMerge:r}=t;if(o){const t=n[e],o=n[r],s=t.mergeQuad(o);n[e]=s,n.splice(r,1)}e+=1}}while(r.length!==n.length);return n};function SelectionUtils_mergeQuads(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:shouldMergeQuads,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=[];if(Array.isArray(e)&&e.length){let s=e;e[0]instanceof r.A||(s=e.map(e=>new r.A(e))),s.forEach(e=>{if(0===n.length)n.push(e);else{const r=n.length-1,s=n[r],{shouldMerge:a}=t(s,e,o);a?n[r]=s.mergeQuad(e):n.push(e)}})}return n}function mergeQuadsExhaustively(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:shouldMergeQuads,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3?arguments[3]:void 0;if(Array.isArray(e)&&e.length){let s=e;e[0]instanceof r.A||(s=e.map(e=>new r.A(e)));return exhaustiveQuadMergeHorizontal(s,t,o,n)}return[]}},dbIV:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(o("yaHd")),n=_interopRequireDefault(o("YxO2"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v3",48,n.default);t.default=s},"df/W":(e,t,o)=>{var r=o("2VCT"),n=o("sbR2"),s=o("CXG2"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function baseIsTypedArray(e){return s(e)&&n(e.length)&&!!a[r(e)]}},doTx:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var r=o("YWiy");const n=r.lazy(()=>Promise.all([o.e(98),o.e(7751),o.e(571)]).then(o.bind(o,"xK7G"))),s=r.lazy(()=>Promise.all([o.e(98),o.e(7751),o.e(9582)]).then(o.bind(o,"GmMg"))),a=r.lazy(()=>Promise.all([o.e(1131),o.e(4714),o.e(566)]).then(o.bind(o,"aAPs")));const l=new class LibraryStore{constructor(){this.showRhpControlCallback=void 0,this.LazyColorPickerComponent=e=>r.createElement(r.Suspense,{fallback:null},r.createElement(n,e)),this.LazyGradientPickerComponent=e=>r.createElement(r.Suspense,{fallback:null},r.createElement(s,e)),this.LazyEmojiPickerComponent=e=>r.createElement(r.Suspense,{fallback:null},r.createElement(a,e))}loadColorPicker(){return Promise.all([o.e(98),o.e(7751),o.e(571)]).then(o.bind(o,"xK7G"))}loadGradientPicker(){return Promise.all([o.e(98),o.e(7751),o.e(9582)]).then(o.bind(o,"GmMg"))}loadEmojiPicker(){return Promise.all([o.e(1131),o.e(4714),o.e(566)]).then(o.bind(o,"aAPs"))}loadAnimateCss(){return o.e(4346).then(o.t.bind(o,"7ejT",23))}loadTranslations(e){return o("AWKe")(`./${e}.json`)}loadExpandedPanelContainer(){return Promise.all([o.e(98),o.e(1131),o.e(9387),o.e(7381),o.e(4714),o.e(1360),o.e(4346),o.e(2664),o.e(9855)]).then(o.bind(o,"uaGI")).then(e=>e.default)}loadToolsUtils(){return o.e(907).then(o.bind(o,"pUtt")).then(e=>e.default())}loadCustomDialogComponent(){return Promise.all([o.e(98),o.e(1131),o.e(9387),o.e(7381),o.e(8871)]).then(o.bind(o,"l+0I")).then(e=>e.default)}LoadBBCollabCmp(){return o.e(5772).then(o.bind(o,"rWdz")).then(e=>e.default)}}},eWqp:(e,t,o)=>{"use strict";o.d(t,{p:()=>LazyOperations});var r=o("llUt");class LazyOperations{}LazyOperations.initialize=()=>r.PreviewStore.instance.knowledgeWorkspaceId?LazyOperations.loadKWOperations():LazyOperations.loadDefaultOperations(),LazyOperations.loadKWOperations=()=>o.e(4591).then(o.bind(o,"qO8/")).then(e=>e.default).then(e=>e.asLazyOps()),LazyOperations.loadDefaultOperations=()=>o.e(224).then(o.bind(o,"PutS")).then(e=>e.default).then(e=>e.asLazyOps())},evJI:(e,t,o)=>{var r=o("PBIp"),n=o("CXG2"),s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return n(e)&&a.call(e,"callee")&&!l.call(e,"callee")};e.exports=c},ezW3:(e,t,o)=>{"use strict";o.d(t,{k:()=>ajsMakeCancellablePromise,A:()=>cancelAllPromises});const Utils_cancellablePromise=e=>{let t=!1,o=e;o||(o=Promise.reject());return{promise:new Promise((e,r)=>{o.then(o=>{t||e(o)}).catch(e=>{t||r(e)})}),cancel:()=>{t=!0}}};class Node{constructor(e,t){this.next=this,this.previous=this,this[e]=t}}class LinkedList{constructor(){this.head=null,this.length=0}getHead(){return this.head}get tail(){return this.head&&this.head.previous}getTail(){return this.tail}getLength(){return this.length}insertNodeAtBeginning(e){this.insertNodeAtEnd(e),this.head=e}insertNodeAtEnd(e){if(!(e instanceof Node))throw new Error("Linked List node must be a Node object");null===this.head?this.head=e:(e.next=this.head,e.previous=this.tail,this.tail.next=e,this.head.previous=e),this.length+=1}removeNode(e){e&&this.length&&(1===this.length?this.head=null:(e.previous.next=e.next,e.next.previous=e.previous,e===this.head&&(this.head=e.next)),this.length-=1)}deleteAll(e){if(0===this.length)return;let t,o=this.head,r=0;for(;r<this.length;)e(o)?(t=o.next,this.removeNode(o),o=t,r-=1):o=o.next,r+=1}forEach(e){if(this.length>0){let t=this.head,o=0;for(;o<this.length;)e(t),t=t.next,o+=1}}}let r=new LinkedList;const cancelAllPromises=()=>{r.forEach(e=>{e&&e.cancellablePromise&&e.cancellablePromise.cancel()}),r=new LinkedList},ajsMakeCancellablePromise=e=>{const t=Utils_cancellablePromise(e);try{const e=new Node("cancellablePromise",t);r.insertNodeAtEnd(e);const removePromise=()=>{r.removeNode(e)};t.promise.then(removePromise).catch(removePromise)}catch(e){}return t.promise}},fX6w:(e,t,o)=>{var r=o("j7/m"),n=o("CXG2");e.exports=function baseIsEqual(e,t,o,s,a){return e===t||(null==e||null==t||!n(e)&&!n(t)?e!=e&&t!=t:r(e,t,o,s,baseIsEqual,a))}},fdrD:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var r=o("ljF6"),n=o("G5bJ");class RHAsset extends r.Asset{comment(e,t,o,r,s,a){return n.A.getSharedAssetVersion().then(n=>n?super.comment(e,t,o,r,s,a,n):super.comment(e,t,o,r,s,a))}}const s=RHAsset},gHxW:(e,t,o)=>{var r=o("gKYf"),n=o("DxSP"),s=Object.prototype.hasOwnProperty;e.exports=function assignValue(e,t,o){var a=e[t];s.call(e,t)&&n(a,o)&&(void 0!==o||t in e)||r(e,t,o)}},gKYf:(e,t,o)=>{var r=o("weTa");e.exports=function baseAssignValue(e,t,o){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}},guU5:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var r=o("D/Yr"),n=o("G5bJ");const s=class UnResolveCommentCommand{constructor(e,t,o,r){this.comment=e,this.pageIndex=t,this.commentStore=o,this.commentsStore=r}execute(){this.executeOnUi(),this.executeOnServer()}executeOnUi(){this.commentStore.setStatus(r.Ay.STATUS_OPEN)}executeOnServer(){this.commentsStore.unresolveComment(this.pageIndex,this.comment)}undo(){n.A.validateExistingDraftCommentReply()||(this.undoOnUi(),this.undoOnServer())}undoOnUi(){this.commentStore.setStatus(r.Ay.STATUS_RESOLVED)}undoOnServer(){this.commentsStore.resolveComment(this.pageIndex,this.comment)}redo(){n.A.validateExistingDraftCommentReply()||(this.redoOnUi(),this.redoOnServer())}redoOnUi(){this.commentStore.setStatus(r.Ay.STATUS_OPEN)}redoOnServer(){this.commentsStore.unresolveComment(this.pageIndex,this.comment)}}},hGRN:(e,t,o)=>{"use strict";o.d(t,{lJ:()=>isCommentingEnabled,eF:()=>isPersonalCommenting,YD:()=>isUndoRedoEnabled,g_:()=>shouldEnableCNPDF,_h:()=>showTopBarEmbedded});o("CTXV");var r=o("9+t3"),n=o("QNhk");const isPersonalCommenting=()=>{const e=r.default.getInstance();return!!(e&&e.previewApis&&e.previewApis.personalCommenting)&&e.previewApis.personalCommenting.isPersonalCommenting()},isUndoRedoEnabled=()=>!0,isCommentingEnabled=()=>{const e=r.default.getInstance();return!(e&&e.previewApis&&e.previewApis.personalCommenting&&isPersonalCommenting())||!n.A.isReadOnlyMode()&&e.previewApis.personalCommenting.isCommentingEnabled()},showTopBarEmbedded=()=>{const e=r.default.getInstance();return!!(e&&e.previewApis&&e.previewApis.topBarEmbedded)&&e.previewApis.topBarEmbedded.showTopBarEmbedded()},shouldEnableCNPDF=()=>"false"!==function getQueryParameterFromUrl(e,t){return function getUrlVars(e){const t={};if(e&&-1!==e.indexOf("?")){let o=[];const r=e.indexOf("?");if(e.slice(r+1)){o=e.slice(r+1).split("&");for(let e=0;e<o.length;){const r=o[e].split("#")[0],n=r.split("=")[0],s=r.split("=")[1];n&&(t[n]=s),e+=1}}}return t}(window.decodeURIComponent(e))[t]}(window.location.href,"enableCNPDF")},hLfH:(e,t,o)=>{var r=o("fX6w");e.exports=function isEqualWith(e,t,o){var n=(o="function"==typeof o?o:void 0)?o(e,t):void 0;return void 0===n?r(e,t,void 0,o):!!n}},hxLg:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("rrFL")),n=o("Yrbn");let s,a,l=0,c=0;var p=function v1(e,t,o){let p=t&&o||0;const d=t||new Array(16);let m=(e=e||{}).node||s,u=void 0!==e.clockseq?e.clockseq:a;if(null==m||null==u){const t=e.random||(e.rng||r.default)();null==m&&(m=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==u&&(u=a=16383&(t[6]<<8|t[7]))}let h=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:c+1;const y=h-l+(g-c)/1e4;if(y<0&&void 0===e.clockseq&&(u=u+1&16383),(y<0||h>l)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=h,c=g,a=u,h+=122192928e5;const C=(1e4*(268435455&h)+g)%4294967296;d[p++]=C>>>24&255,d[p++]=C>>>16&255,d[p++]=C>>>8&255,d[p++]=255&C;const _=h/4294967296*1e4&268435455;d[p++]=_>>>8&255,d[p++]=255&_,d[p++]=_>>>24&15|16,d[p++]=_>>>16&255,d[p++]=u>>>8|128,d[p++]=255&u;for(let e=0;e<6;++e)d[p+e]=m[e];return t||(0,n.unsafeStringify)(d)};t.default=p},iaHC:(e,t,o)=>{"use strict";o.d(t,{A:()=>at});var r=o("ljF6"),n=o("abd3"),s=o("plsW"),a=o("QKqB"),l=o("ezW3"),c=o("0/0f"),p=o("9+t3"),d=o("6AL6"),m=o("Yfoa"),u=o("D/Yr"),h=o("Jm6I"),g=o("hGRN"),y=o("WJZ5"),C=o("/Oxh"),_=o("mOsn");const b=class AnnotStoreFactory{static makeStore(e,t,o,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{isUndo:s=!1,reassignSelectors:a=!1}=n,l=_.A.getClonedComment(t);return e===u.Ay.FROM_SERVER?l.motivation===u.Ay.REPLYING?_.A.replyServerModel(l,!0,!1,o,r):_.A.commentServerModel(l,!0,!1,o,r,{reassignSelectors:a}):e===u.Ay.FROM_CLIENT?l.motivation===u.Ay.REPLYING?_.A.replyUImodel(r,l,!1,!0,s):_.A.commentUImodel(l,!1,!0,{isUndo:s,reassignSelectors:a}):null}};var E,v,T,A,O,D,P,I,S,w,R,M,N,L,x,U,k,F,H,B,j,z,W,G,V,K,q,Y,X,Q,J,$,Z,ee,te,oe,re,ie,ne,se,ae,le,ce,pe,de,me,ue,he,ge,ye,Ce,_e,fe,be,Ee,ve,Te,Ae,Oe,De,Pe,Ie,Se,we,Re,Me,Ne,Le,xe,Ue,ke,Fe,He,Be,je,ze=o("nnZV"),We=o("H0qY"),Ge=o("tcys"),Ve=o("4h5g"),Ke=o("7otS"),qe=o("kiUt"),Ye=o("YY8+"),Xe=o("llUt"),Qe=o("CKE+"),Je=o("ycnN"),$e=o("a8bA"),Ze=o("Ww+/"),et=o("0d5H"),tt=o("G5bJ"),ot=o("EazC"),rt=o("Wvr3"),it=o("AvEB"),nt=o("LwNf");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}let st={};st=o("plsW").auth2;const updatePropsInNodeIndices=(e,t)=>{let{quadPoints:o,boundingBox:r}=t;const n=e||{};return n.indices&&0!==n.indices.length||(n.indices=[{boundingBox:r,quadPoints:o,index:n.index}]),o&&(n.indices[0].quadPoints=o),r&&(n.indices[0].boundingBox=r),n};const at=new(E=n.action.bound,v=n.action.bound,T=n.action.bound,A=n.action.bound,O=n.action.bound,D=n.action.bound,P=n.action.bound,I=n.action.bound,S=n.action.bound,w=n.action.bound,R=n.action.bound,M=n.action.bound,N=n.action.bound,L=n.action.bound,x=n.action.bound,U=n.action.bound,k=n.action.bound,F=n.action.bound,H=n.action.bound,B=n.action.bound,j=n.action.bound,z=n.action.bound,W=n.action.bound,G=n.action.bound,V=n.action.bound,q=_applyDecoratedDescriptor((K=class CommentsStore{constructor(){var e=this;this.supportedCommentTypes=void 0,this.supportedDVCommentTypes=void 0,_initializerDefineProperty(this,"comments",q,this),_initializerDefineProperty(this,"selectedCommentId",Y,this),_initializerDefineProperty(this,"pendingNavigationCommentId",X,this),_initializerDefineProperty(this,"hoveredCommentId",Q,this),_initializerDefineProperty(this,"editedAnnotId",J,this),_initializerDefineProperty(this,"selectedCommentSource",$,this),_initializerDefineProperty(this,"readCommentsList",Z,this),_initializerDefineProperty(this,"isReadListLoaded",ee,this),_initializerDefineProperty(this,"selectedPageIndex",te,this),_initializerDefineProperty(this,"showAuthFailedNotification",oe,this),_initializerDefineProperty(this,"haveCommentsLoaded",re,this),_initializerDefineProperty(this,"unsavedAnnotList",ie,this),_initializerDefineProperty(this,"draftCommentReplyTransientObject",ne,this),_initializerDefineProperty(this,"showPageLevelWelcomeDialog",se,this),_initializerDefineProperty(this,"lastCommentTransitionedToView",ae,this),_initializerDefineProperty(this,"triggerAnimationForGuestLogin",le,this),_initializerDefineProperty(this,"isCommentExpanded",ce,this),_initializerDefineProperty(this,"guestLoginDownload",pe,this),_initializerDefineProperty(this,"focusForFTE",de,this),_initializerDefineProperty(this,"hcColorPalette",me,this),_initializerDefineProperty(this,"lastSelectedCommentTimestamp",ue,this),_initializerDefineProperty(this,"expandedSuggestedComments",he,this),_initializerDefineProperty(this,"showSuggestedComments",ge,this),this.clientServerIdMap=void 0,this.openExpandedSuggestedComments=void 0,this.isMigrationModalVisible=void 0,_initializerDefineProperty(this,"pendingComment",ye,this),_initializerDefineProperty(this,"pendingReply",Ce,this),this.isIntentionalRedirection=void 0,this.captchaEvent=void 0,this.inlineOrganizeDone=void 0,_initializerDefineProperty(this,"showCaptcha",_e,this),_initializerDefineProperty(this,"executeCaptcha",fe,this),_initializerDefineProperty(this,"placeholderAnimation",be,this),_initializerDefineProperty(this,"isDarkPageThemeEnabled",Ee,this),this.shouldReplyFieldBeActive=void 0,this.isCommentingAllowed=void 0,_initializerDefineProperty(this,"showFrictionlessSigninDialog",ve,this),_initializerDefineProperty(this,"frictionlessSigninDialogText",Te,this),this.prevSessionPageLevelAnnot=void 0,_initializerDefineProperty(this,"suppressAutoMentions",Ae,this),this.reactionOnboardingTooltipCommentId=void 0,this.isReactionTooltipShown=!1,this.numberOfReactionsOnLoad=0,_initializerDefineProperty(this,"selectedPreviewCommentId",Oe,this),_initializerDefineProperty(this,"hoveredPreviewCommentId",De,this),_initializerDefineProperty(this,"selectedNewCommentPopupId",Pe,this),_initializerDefineProperty(this,"selectedCMTextBoxId",Ie,this),_initializerDefineProperty(this,"convertHoverToSelectionOpts",Se,this),_initializerDefineProperty(this,"replyDeleted",we,this),_initializerDefineProperty(this,"nudgingReplyPosted",Re,this),_initializerDefineProperty(this,"commentTextBoxObject",Me,this),_initializerDefineProperty(this,"contextualMenuTriggerType",Ne,this),_initializerDefineProperty(this,"isCommentOrReplyBeingPosted",Le,this),this.userOnboardingCardId=void 0,_initializerDefineProperty(this,"stickyNoteLandingCommentId",xe,this),_initializerDefineProperty(this,"ncpDismissedCount",Ue,this),_initializerDefineProperty(this,"stickyNoteLandingExperienceEnd",ke,this),_initializerDefineProperty(this,"commentsFetchedTimestamp",Fe,this),_initializerDefineProperty(this,"firstTimeToastShown",He,this),_initializerDefineProperty(this,"isHalfSheetOpen",Be,this),this.commentBeingDragged={dragStatus:!1},_initializerDefineProperty(this,"convertHoverToSelection",je,this),this.findCorrectIndexForNewComment=(e,t)=>{var o,r;const n=e.length,s=null==t||null===(o=t.target)||void 0===o||null===(r=o.selector)||void 0===r?void 0:r.boundingBox;let a;if(s)for(a=0;a<n;a+=1){var l,c,p;const t=null===(l=e[a])||void 0===l||null===(c=l.target)||void 0===c||null===(p=c.selector)||void 0===p?void 0:p.boundingBox;if(t){if(s[3]<t[3])return a;if(s[3]===t[3]&&s[0]<t[0])return a}}return n},this.fireCommentPosted=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(st.isSignedIn){var o,r;const n={id:null==t?void 0:t.id,subtype:null==t||null===(o=t.target)||void 0===o||null===(r=o.selector)||void 0===r?void 0:r.subtype},a=(0,g.eF)()?h.Xg.PERSONAL_COMMENT_POSTED_EVENT:h.Xg.COMMENT_POSTED_EVENT;e.commentsProviderInstance?e.commentsProviderInstance.emitAnnotEvent(a,n):s.providers["comments-provider"]().then(t=>{e.commentsProviderInstance=t,t.emitAnnotEvent(a,n)})}},this.unsavedPageLevelAnnotId,this.isTextSelected=!1,this.isSelectionInProgress=!1,this.tempDeleteList=[],this.createdUIModelFromServerModel={},this.inlineOrganizeDone=!1,this.commentsFetchedFromServer=!1,this.commentUIModels=new Map,this.triggerAnimationForGuestLogin=0,this.guestLoginDownload=!1,this.supportedCommentTypes=[u.Ay.REDHAWK_COMMENT_HIGHLIGHT,u.Ay.REDHAWK_COMMENT_STRIKEOUT,u.Ay.REDHAWK_COMMENT_UNDERLINE,u.Ay.REDHAWK_COMMENT_SHAPE,u.Ay.REDHAWK_COMMENT_NOTE,u.Ay.REDHAWK_COMMENT_FREETEXT,u.Ay.REDHAWK_COMMENT_SOUND,u.Ay.REDHAWK_COMMENT_UNSUPPORTED,u.Ay.REDHAWK_COMMENT_INSERT,u.Ay.REDHAWK_COMMENT_REPLACE],this.supportedDVCommentTypes=[u.Ay.REDHAWK_COMMENT_HIGHLIGHT,u.Ay.REDHAWK_COMMENT_STRIKEOUT,u.Ay.REDHAWK_COMMENT_UNDERLINE,u.Ay.REDHAWK_COMMENT_NOTE],this.isCommentExpanded=!1,this.hcColorPalette=null,this.nameToAnnotDataMap=new Map,this.clientServerIdMap=new Map,this.isPageLevelWelcomeDialogDismissed=!1,this.isMigrationModalVisible=!1,this.showSuggestedComments=!1,this.openExpandedSuggestedComments=!0,this.expandedSuggestedComments=!1,this.shouldReplyFieldBeActive=!0,this.captchaEvent=new a.U,this.isDarkPageThemeEnabled=!1,this.resolveRef,this.isCommentsFetched=new Promise(e=>{this.resolveRef=e}),this.isCommentingAllowed=!1,this.placeholderAnimation={animationIteration:-1,isAnimationInProgress:!1},this.showResolveTooltip=!1,this.showFrictionlessSigninDialog=!1,this.commentTextBoxObject=null,this.contextualMenuTriggerType=null,this.stickyNoteLandingCommentId=null,this.ncpDismissedCount=0,this.stickyNoteLandingExperienceEnd=!1,this.isHalfSheetOpen=!1,(0,n.reaction)(()=>this.selectedCommentId,e=>{e&&(m.A.getInstance().alignComment(e),this.markCommentThreadRead(e))}),r.Client.instance.on("RESOURCE_LOCKED",()=>{this.showAcpMigrationDialog("locked")}),r.Client.instance.on("RESOURCE_UNAVAILABLE",()=>{this.showAcpMigrationDialog("unavailable",!0)})}setSuppressAutoMentions(e){this.suppressAutoMentions=e}setSelectedPreviewCommentId(e){e!==this.selectedPreviewCommentId&&(this.selectedPreviewCommentId=e,e===this.hoveredPreviewCommentId&&this.setHoveredPreviewCommentId(null))}setHoveredPreviewCommentId(e){null!=e&&null!=this.selectedPreviewCommentId&&e===this.selectedPreviewCommentId||e!==this.hoveredPreviewCommentId&&(this.hoveredPreviewCommentId=e)}setSelectedNewCommentPopupId(e){e!==this.selectedNewCommentPopupId&&(this.selectedNewCommentPopupId=e,e===this.hoveredPreviewCommentId&&this.setHoveredPreviewCommentId(null))}setCommentTextBoxObject(e){this.commentTextBoxObject=e}resetCommentTextBoxObject(){this.commentTextBoxObject=null}setContextualMenuTriggerType(e){this.contextualMenuTriggerType=e}setSelectedCMTextBoxId(e){e!==this.selectedCMTextBoxId&&(this.selectedCMTextBoxId=e)}setStickyNoteLandingCommentId(e){e!==this.stickyNoteLandingCommentId&&(this.stickyNoteLandingCommentId=e)}setFirstTimeToastShown(e){this.firstTimeToastShown=e}incrementNcpDismissedCount(){this.ncpDismissedCount+=1}resetNcpDismissedCount(){this.ncpDismissedCount=0}setStickyNoteLandingExperienceEnd(e){this.stickyNoteLandingExperienceEnd=e}get isLandingExperienceOn(){return rt.A.enableStickyNoteLandingCohort&&!this.stickyNoteLandingExperienceEnd}setPendingComment(e){this.pendingComment=e}resetPendingComment(){var e,t;this.pendingComment&&(null===(e=this.pendingComment.comment)||void 0===e||null===(t=e.resetIsAuthPending)||void 0===t||t.call(e)),this.pendingComment=null}setPendingReply(e){this.pendingReply=e}resetPendingReply(){var e,t;this.pendingReply&&(null===(e=this.pendingReply.newReply)||void 0===e||null===(t=e.resetIsAuthPending)||void 0===t||t.call(e)),this.pendingReply=null}showAcpMigrationDialog(e,t){qe.A.getBootstrapData().isOwner||this.isMigrationModalVisible||(this.setShowAcpMigrationModal(!0),s.providers["review-handler"]().then(o=>{o.showFileUnderMaintenanceDialogInternal(e,t,()=>this.setShowAcpMigrationModal(!1))}))}get isAnyCommentBeingDragged(){return this.commentBeingDragged.dragStatus}set isAnyCommentBeingDragged(e){this.commentBeingDragged.dragStatus=e}setIsCommentingAllowed(e){this.isCommentingAllowed=e}updateLastSelectedCommentTimestamp(){this.lastSelectedCommentTimestamp=(new Date).getTime()}setHCColorPalette(e){this.hcColorPalette=e}setIsAnimationInProgress(){this.placeholderAnimation={...this.placeholderAnimation,isAnimationInProgress:!0}}resetIsAnimationInProgress(){this.placeholderAnimation={...this.placeholderAnimation,isAnimationInProgress:!1}}updateAnimationIteration(e){this.placeholderAnimation={...this.placeholderAnimation,animationIteration:e}}setShowResolveTooltip(){this.showResolveTooltip=!0}resetShowResolveTooltip(){this.showResolveTooltip=!1}setDarkPageThemeEnabled(e){this.isDarkPageThemeEnabled=e}getHCColorPalette(){return this.hcColorPalette}get hasReactions(){return this.numberOfReactionsOnLoad>0}get isHighContrastEnabled(){return!!this.hcColorPalette}get selectedAnnotColor(){return this.hcColorPalette?this.hcColorPalette.highlight:null}get annotColor(){return this.hcColorPalette?this.hcColorPalette.text:null}get cornerCircleFillColor(){return this.hcColorPalette?this.hcColorPalette.background:u.Ay.CORNER_CIRCLE_FILL_COLOR}get stickyNoteColorInHC(){return this.hcColorPalette?{selectedBorder:this.hcColorPalette.highlight,innerFill:this.hcColorPalette.buttonFace,annotColor:this.hcColorPalette.buttonFace,innerBorder:this.hcColorPalette.buttonText}:null}getStickyNoteColorMV(e){return this.stickyNoteColorInHC||this.getDefStickyNoteColorMV(e)}getDefStickyNoteColorMV(e){return{selectedBorder:"#1473e6",innerFill:"#fff",annotColor:e,innerBorder:"#fff"}}get commentNoteColorinHC(){return this.hcColorPalette?{selectedBorder:this.hcColorPalette.highlight,background:this.hcColorPalette.background,stroke:this.hcColorPalette.buttonText}:null}getCommentNoteColorMV(e){return this.commentNoteColorinHC||this.getDefCommentNoteColorMV(e)}getDefCommentNoteColorMV(e){return{selectedBorder:"#1473e6",background:e,stroke:"#fff"}}addAnnotToNameMap(e,t){const o=t.name;this.nameToAnnotDataMap.has(e)||this.nameToAnnotDataMap.set(e,new Map);const r=this.nameToAnnotDataMap.get(e);o&&!r.has(o)&&r.set(o,t)}get markupBorderColor(){return this.hcColorPalette?this.hcColorPalette.highlight:u.Ay.MODERN_MARKUP_BORDER_COLOR}get freeHandBorderColor(){return this.hcColorPalette?this.hcColorPalette.highlight:u.Ay.MODERN_MARKUP_BORDER_COLOR}get freeTextBorderColor(){return this.hcColorPalette?this.hcColorPalette.highlight:u.Ay.FREETEXT_BORDER_COLOR}setIsCommentExpanded(e){this.isCommentExpanded=e}setHaveCommentsLoaded(e){this.haveCommentsLoaded=e}setSelectedIndex(e){this.selectedPageIndex=e}resetConvertHoverToSelectionOpts(){this.convertHoverToSelectionOpts={}}setUserOnboardingCardId(e){this.userOnboardingCardId=e}getLastPageNumber(){return this.comments.reduce((e,t)=>{var o,r,n;const s=null===(o=t.target)||void 0===o||null===(r=o.selector)||void 0===r||null===(n=r.node)||void 0===n?void 0:n.index;return s>e?s:e},0)}setReactionOnboardingTooltipCommentId(e){this.reactionOnboardingTooltipCommentId=e}setNumberOfReactionsOnLoad(e){this.numberOfReactionsOnLoad=e}setIsReactionTooltipShown(e){this.isReactionTooltipShown=e}resetReactionOnboardingTooltip(){this.reactionOnboardingTooltipCommentId=null,this.numberOfReactionsOnLoad=0,this.isReactionTooltipShown=!1}get getTotalCommentArray(){const e=(0,et.p)({AssetStore:ze.A});let t=0;(0,g.eF)()||(t=this.haveCommentsLoaded&&this.comments.length>0?this.getLastPageNumber()+1:0);const o=Number.isInteger(e)?Math.max(t,e):t;return{totalPageCountArr:new Set(Array(o).keys()),selectedPageIndex:this.selectedPageIndex<o?this.selectedPageIndex:o-1}}setTriggerAnimationForGuestLogin(){this.triggerAnimationForGuestLogin+=1}setGuestLoginDownload(e){this.guestLoginDownload=e}setFocusForFTE(e){this.focusForFTE=e}setUnsavedPageLevelAnnotId(e){this.unsavedPageLevelAnnotId=e}resetUnsavedPageLevelAnnotId(){this.unsavedPageLevelAnnotId=void 0}setShowPageLevelWelcomeDialog(e){this.showFrictionlessSigninDialog||(this.showPageLevelWelcomeDialog=e)}setShouldReplyFieldBeActive(e){this.shouldReplyFieldBeActive=e}setIsPageLevelWelcomeDialogDismissed(e){this.isPageLevelWelcomeDialogDismissed=e}addToUnsavedAnnotList(e,t){const o={};o.id=e,o.motivation=t;-1===this.unsavedAnnotList.findIndex(o=>o.id===e&&o.motivation===t)&&this.unsavedAnnotList.push(o)}removeFromUnsavedAnnotList(e,t){const o=[];let r;for(r=0;r<this.unsavedAnnotList.length;r++)this.unsavedAnnotList[r].id===e&&this.unsavedAnnotList[r].motivation===t&&o.push(r);for(r=0;r<o.length;r++)this.unsavedAnnotList.splice(o[r],1)}handleUnsavedChanges(){return new Promise(e=>{rt.A.handleUnsavedDrawing().then(()=>{this.unsavedAnnotList.length>=1?setTimeout(()=>e(),200):e()})})}markCommentThreadRead(e){if(e){let t,o;for(const r of this.commentUIModels.keys())if(t=this.commentUIModels.get(r),t=t.filter(t=>t.id===e),t.length>0){o=t[0];break}if(o){let e=!1;o.replies&&o.replies.forEach(t=>{t.read.readValue||(e=!0),t.read.setReadPropertyOfAnnot(null==t?void 0:t.sid,e),t.read.setReadValue(!0)}),o.read.setReadPropertyOfAnnot(o.sid,e)}}}get hasUserCommented(){const e=Qe.A.getUserProfile();if(!e)return!1;const t=e.userId;let o=!1;return this.comments.forEach(e=>{e.creator.id===t?o=!0:e.replies&&e.replies.forEach(e=>{e.creator.id===t&&(o=!0)})}),o}get mentionsList(){let e=[];return this.comments.forEach(t=>{t.mentions&&(e=tt.A.getFiltersMentionsList(t,e)),t.replies&&t.replies.forEach(t=>{t.mentions&&(e=tt.A.getFiltersMentionsList(t,e))})}),e}get unreadCommentsCount(){let e,t=0;for(const o of this.commentUIModels.keys())e=this.commentUIModels.get(o),e.forEach(e=>{e.isCommentThreadRead(e)||(t+=1)});return t}get modernUnreadCommentsCount(){let e=0;const t=ze.A.totalPageCount;for(let o=0;o<t;o+=1)this.getCommentsOfPage(o).forEach(t=>{t.read.readValue||t.status!==u.Ay.STATUS_OPEN||(e+=1)});return e}get allCommentsCount(){let e=0;for(const t of this.commentUIModels.keys())e+=this.commentUIModels.get(t).filter(e=>!e.isCommentUnderCreation).length;return e}get resolvedCommentsCount(){return this.comments.filter(e=>e.status===u.Ay.STATUS_RESOLVED).length}get unresolvedComments(){return this.comments.filter(e=>e.status===u.Ay.STATUS_OPEN)}isSupportedCommentType(e){return this.supportedCommentTypes.indexOf(e)>=0}isSupportedDVCommentType(e){return this.supportedDVCommentTypes.indexOf(e)>=0}get selectedCommentModel(){let e;if(this.selectedCommentId)for(const t of this.commentUIModels.keys()){let o=this.commentUIModels.get(t);if(o=o.filter(e=>e.id===this.selectedCommentId||e.cid===this.selectedCommentId),o.length>0){e=o[0];break}}return e}get selectedComment(){return this.getCommentById(this.selectedCommentId)}get selectedCommentMobile(){return this.selectedCommentId?this.selectedCommentModel:null}getCommentsOfPage(e){let t=this.commentUIModels.get(e);if(this.createdUIModelFromServerModel[e])return t;const o=this.comments.filter(t=>t.target.selector&&this.isSupportedCommentType(t.target.selector.subtype)&&t.target.selector.node.index===e).map(e=>b.makeStore(u.Ay.FROM_SERVER,e));return o.sort(tt.A.compareByPosition),t=(0,n.observable)(o),this.commentUIModels.set(e,t),this.isReadListLoaded&&this.commentsFetchedFromServer&&(this.createdUIModelFromServerModel[e]=!0),t}expandQueryParamComment(){const e=new URLSearchParams(window.location.search).get(u.Ay.URI_COMMENT_ID),t=s.router.getQueryParams()[u.Ay.URI_MEGAVERB]===u.Ay.EDIT_TOOLSBOARD_GROUP_ID,{commentId:o,pageNum:r}=this.getCommentPageAndParentId(e);o&&!t&&(Xe.PreviewStore.instance.goToPage(r+1),setTimeout(()=>{rt.A.triggerNudgingExperience||this.setSelectedCommentId(o,h._6.MAIN_CONTENT_AREA,!0)}))}getFlattenComments(){let e=[];return(0,n.toJS)(this.comments).forEach(t=>{e.push(t),e=e.concat(t.replies||[])}),e}getUnresolvedComments(){return this.comments.filter(e=>e.status===u.Ay.STATUS_OPEN)}getResolvedComments(){return this.comments.filter(e=>e.status===u.Ay.STATUS_RESOLVED)}getFilteredComments(e){const t=this.getCommentsOfPage(e);return Ve.default.getUpdateFilteredComments(t,e)}updateCommentList(){let e=[];for(const t in this.commentUIModels.keys())e=e.concat(this.commentUIModels.get(t));this.setComments(e)}addCommentToPage(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{isInProgress:r,shouldTakeFocus:n,shouldCancelEmptyComment:s,isDraftMode:a}=o,l=this.commentUIModels.get(e),c=b.makeStore(u.Ay.FROM_CLIENT,t);"boolean"==typeof n&&c.setShouldTextTakeFocus(n),c.setShouldCancelEmptyComment(s),c.setIsCommentUnderCreation(r),c.setIsReplyMode(a);const p=this.findCorrectIndexForNewComment(l,c);return l.splice(p,0,c),this.commentUIModels.set(e,l),c}addCommentToPageOnUndo(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{isInProgress:r,shouldTakeFocus:n,isUndo:s,reassignSelectors:a=!1}=o,l=this.commentUIModels.get(e),c=b.makeStore(u.Ay.FROM_CLIENT,t,!1,void 0,{isUndo:s,reassignSelectors:a});"boolean"==typeof n&&c.setShouldTextTakeFocus(n),c.setIsCommentUnderCreation(r);const p=this.findCorrectIndexForNewComment(l,c);return l.splice(p,0,c),this.commentUIModels.set(e,l),c}updatePageForComment(e,t,o){const r=this.commentUIModels.get(t),n=b.makeStore(u.Ay.FROM_SERVER,o,!0,o),s=this.commentUIModels.get(e),a=this.findCorrectIndexForNewComment(r,n);r.splice(a,0,n);const l=s.findIndex(e=>e.id===o.id);-1!==l&&(s.splice(l,1),this.commentUIModels.set(e,s),this.commentUIModels.set(t,r));const c=this.comments.findIndex(e=>e.id===o.id);if(c>-1){const e=this.comments[c],t=o.target.selector;e.target.selector.boundingBox=t.boundingBox,e.target.selector.node=t.node,t.inkList&&(e.target.selector.inkList=t.inkList),t.noteX&&(e.target.selector.noteX=t.noteX),t.noteY&&(e.target.selector.noteY=t.noteY),this.comments[c]=e}}readdCommentsToPage(e,t){const o=this.commentUIModels.get(e);o.push(t),this.commentUIModels.set(e,o)}addSyncCommentsToPage(e,t){const o=this.commentUIModels.get(e),r=b.makeStore(u.Ay.FROM_SERVER,t);let n=!1;o.findIndex(e=>{void 0===e.sid&&this.matchCommentHypothesis(r,e)&&(n=!0)}),n||this.isAnnotationAlreadyDeleted(r.sid)||(o.push(r),this.commentUIModels.set(e,o))}setShowAuthFailedNotification(e){this.showAuthFailedNotification=e}setShowAcpMigrationModal(e){this.isMigrationModalVisible=e}hasEtagChanged(e,t){return e.etag!==t.etag}matchReplyHypothesis(e,t){return e.bodyValue===t.bodyValue&&e.creator.id===t.creator.id&&e.target.source===t.target.source}matchCommentHypothesis(e,t){return e.bodyValue===t.bodyValue&&e.creator.id===t.creator.id&&e.target.selector.subtype===t.target.selector.subtype}editSyncCommentsToPage(e,t,o,r){const n=this.commentUIModels.get(e),s=n.findIndex(e=>e.sid===t.id);if(o){const e=n.get(s);var a;if(e)e.setBodyValue(t.bodyValue),null===(a=e.reactions)||void 0===a||a.syncReactions(t.perUserPerAnnotation,t.aggregatedInfo),e.setEtag(t.etag),e.setModified(t.modified),e.setStatus(t.status),this.mapSelectorPropertiesServerToUI(e,t.target.selector)}if(r&&n.get(s)){const e=void 0===t.replies?[]:t.replies;n.get(s).replies=void 0===n.get(s).replies?[]:n.get(s).replies;for(let t=0;t<n.get(s).replies.length;t++){const o=e.findIndex(e=>e.id===n.get(s).replies[t].sid);if(o>-1){var l;if(this.hasEtagChanged(n.get(s).replies[t],e[o]))n.get(s).replies[t].bodyValue=e[o].bodyValue,null===(l=n.get(s).replies[t].reactions)||void 0===l||l.syncReactions(e[o].perUserPerAnnotation,e[o].aggregatedInfo),n.get(s).replies[t].etag=e[o].etag,n.get(s).replies[t].modified=e[o].modified;e.splice(o,1)}else if(void 0!==n.get(s).replies[t].sid)n.get(s).replies.splice(t,1),t-=1;else{const o=e.findIndex(e=>{if(this.matchReplyHypothesis(e,n.get(s).replies[t]))return!0});e.splice(o,1)}}for(let t=0;t<e.length;t++){const o=b.makeStore(u.Ay.FROM_SERVER,e[t],!1,null);this.isAnnotationAlreadyDeleted(o.sid)||n.get(s).replies.push(o)}}this.commentUIModels.set(e,n)}isAnnotationAlreadyDeleted(e){return this.tempDeleteList.findIndex(t=>t===e)>-1}compareTimeStamp(e,t){return e-t}async handleInlineOrganize(){this.inlineOrganizeDone=!0;const e=await this.fetchComments(!1);Ge.A.syncAnnotations(e)}fetchComments(e){return it.A.getClient({commentsApiUrl:qe.A.commentsApiUrl}),(0,l.k)(new Promise((t,o)=>{ze.A.getAsset(e).then(e=>{const o=new c.P({context:"CommentsStore",name:"FetchComments"});o.start(),(0,l.k)(e.get()).then(e=>{o.log(),this.commentsFetchedTimestamp=Date.now(),(0,Ze.r)(this,"isReadListLoaded",o=>{if(o){if(this.inlineOrganizeDone)return this.inlineOrganizeDone=!1,void t(e.annotations);if(this.commentsFetchedFromServer=!0,this.setComments(e.annotations),this.setHaveCommentsLoaded(!0),this.resolveRef(),(0,g.eF)()){const e=ze.A.totalPageCount;for(let t=0;t<e;t+=1)this.getCommentsOfPage(t).forEach(e=>{y.A.isFreeText(e)&&e.target.selector.fetchAppearanceFromServer(e)})}let o=0;if(e.annotations.length>0){e.annotations.filter(e=>{var t,o;return(null==e?void 0:e.aggregatedInfo)&&(null==e?void 0:e.aggregatedInfo.reactionSummary)&&(null===(t=Object.keys(null==e||null===(o=e.aggregatedInfo)||void 0===o?void 0:o.reactionSummary))||void 0===t?void 0:t.length)>0}).forEach(e=>{var t;o+=Object.keys(null==e||null===(t=e.aggregatedInfo)||void 0===t?void 0:t.reactionSummary).length})}this.setNumberOfReactionsOnLoad(o),Ge.A.setIsNotificationAvailable(!0),(0,g.eF)()&&e.annotations.length&&(rt.A.setShouldShowCommentsPanel(!1),We.A.updateCommentPopupAnimatedCount()),t(e.annotations)}})}).catch(e=>{(0,c.A)({context:"CommentsStore"}).error("Error in fetchComments",JSON.stringify(e)),o.error(e),this.fetchCommentsError(e)}),!(0,g.eF)()&&Ge.A.startCheckForUpdates()})}))}setIsReadListLoaded(e){this.isReadListLoaded=e}fetchReadCommentsList(){it.A.getClient({commentsApiUrl:qe.A.commentsApiUrl});const e=Qe.A.getUserProfile();tt.A.isUserIMS(e)?ze.A.getAsset().then(e=>{const t=new c.P({context:"CommentsStore",name:"GetCommentMetadata"});t.start(),e.getCommentMetadata().then(e=>{t.log(),this.setReadCommentsList(e),this.setIsReadListLoaded(!0)}).catch(e=>{t.error(e),this.setIsReadListLoaded(!1)})}):this.setIsReadListLoaded(!0)}setReadCommentsList(e){this.readCommentsList=e}getCommentPageAndParentId(e){let t,o;for(let r=0;r<this.comments.length;r++){if(-1!==this.comments[r].id.indexOf(e)){t=this.comments[r].id,o=this.comments[r].target.selector.node.index;break}if(this.comments[r].replies){if(this.comments[r].replies.filter(t=>-1!==t.id.indexOf(e)).length>0){t=this.comments[r].id,o=this.comments[r].target.selector.node.index;break}}}return{commentId:t,pageNum:o}}getCommentByIds(e){let t=[];return(0,n.toJS)(this.comments).forEach(o=>{-1!==e.indexOf(o.id)&&t.push(o);const r=(o.replies||[]).filter(t=>-1!==e.indexOf(t.id));r&&(t=t.concat(r))}),t}getCommentById(e){let t;return(0,n.toJS)(this.comments).forEach(o=>{e===o.id&&(t=o);const r=(o.replies||[]).find(t=>e===t.id);r&&(t=r)}),t}getAllComment(){return(0,n.toJS)(this.comments)}getCommentsByPageRange(e,t){return(0,n.toJS)(this.comments).filter(o=>o.target.selector.node.index>=e&&o.target.selector.node.index<=t)}saveReplyToServer(e,t,o){it.A.getClient({commentsApiUrl:qe.A.commentsApiUrl})}saveCommentToServer(e,t){var o,r,s,a;let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!(0,g.eF)()&&p.default.getInstance().previewApis.documentActions.clearPageSelection(e,e),it.A.getClient({commentsApiUrl:qe.A.commentsApiUrl});t.cid;const m=t.target.selector.getCoordPointsWrtPdf(t.target.selector.boundingBox),h=t.target.selector.getCoordPointsWrtPdf(t.target.selector.quadPoints),C=t.target.selector.getCoordPointsWrtPdf([t.target.selector.noteX,t.target.selector.noteY]),_=t.target.selector.inkList,b=[];for(let e=0;void 0!==_&&e<_.length;e++)b[e]=t.target.selector.getCoordPointsWrtPdf(_[e]);const E={node:{index:t.target.selector.node.index},subtype:t.target.selector.subtype,quadPoints:h,boundingBox:m,appearance:t.target.selector.appearance,strokeColor:t.target.selector.strokeColor,strokeWidth:t.target.selector.strokeWidth,opacity:t.target.selector.opacity,type:t.target.selector.type,refinedBy:t.target.selector.refinedBy,intent:t.target.selector.intent,subject:t.target.selector.subject,commentRotation:t.target.selector.commentRotation};y.A.isFreeText(t)&&(Object.assign(E,{style:t.target.selector.style,styleClass:t.target.selector.styleClass,textOffsetPoint:t.target.selector.textOffsetPoint,lineHeight:t.target.selector.lineHeight,descent:t.target.selector.descent,borderColor:t.target.selector.borderColor}),(0,g.eF)()&&(E.appearanceData=(0,n.toJS)(t.target.selector.appearanceData))),!(0,g.eF)()&&tt.A.isInsertAnnot(t)&&(E.rect=m),!(0,g.eF)()&&tt.A.isReplaceAnnot(t)&&(E.rect=t.target.selector.rect),C&&0!=C.length&&(E.noteX=C[0],E.noteY=C[1]),void 0!==b&&b.length>0&&(E.inkList=b),!(0,g.eF)()&&tt.A.isFreeHighlight(null==t||null===(o=t.target)||void 0===o||null===(r=o.selector)||void 0===r?void 0:r.subtype,null==t||null===(s=t.target)||void 0===s||null===(a=s.selector)||void 0===a?void 0:a.intent)&&(E.intentProperty=u.Ay.FREE_HIGHLIGHT_INTENT,delete E.intent,delete E.subject);const v=t;return t.resetSaveStatus(),t.status===u.Ay.STATUS_NEW&&t.setStatus(u.Ay.STATUS_OPEN),ze.A.getAsset().then(o=>{const r=this.isSupportedDVCommentType(t.target.selector.subtype);if(!ze.A.isPDFNext||!r)return this.postCommentCall(o,t,E,v,e,l,d);{const r=t.selectedCoords||{x:t.target.selector.noteX,y:t.target.selector.noteY};p.default.getInstance().previewApis.pdfnext.getDVSelectorInfo(E.boundingBox,r,t.target.selector.node.index).then(r=>{const n={type:"AdobeDynamicViewSelector",startStructElem:r.dvSelectorJson.startStructElem||r.dvSelectorJson.structElem,endStructElem:r.dvSelectorJson.endStructElem,startOffset:r.dvSelectorJson.startOffset,endOffset:r.dvSelectorJson.endOffset,leftOffset:r.dvSelectorJson.leftOffset,topOffset:r.dvSelectorJson.topOffset};return t.target.selector.setRefinedBy(n),E.refinedBy=n,this.postCommentCall(o,t,E,v,e)}).catch(e=>{(0,c.A)({context:"CommentsStore"}).error(" Some error occurred. May be non pdf next doc!! ",JSON.stringify(e))})}})}postCommentCall(e,t,o,r,n){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const p=rt.A.triggerCommentGuidedUserExperience,m=new Promise((m,C)=>{const _=new c.P({context:"CommentsStore",name:"PostCommentCall"}),b=this.draftCommentReplyTransientObject;_.start(),e.comment(t.bodyValue,t.mentions||[],(0,g.eF)()?t:null,"",t.target.selector.subtype,o).then(e=>{_.log(),this.setNudgingReplyPosted(!0),this.editedAnnotId&&this.setEditedAnnotId(null),rt.A.triggerCommentGuidedUserExperience&&this.openQuickToolsFlyout(t.target.selector.subtype),y.A.isFreeText(t)&&(0,g.eF)()&&t.target.selector.fetchAppearanceFromServer(t),!(0,g.eF)()&&t.cid&&e.id&&this.clientServerIdMap.set(t.cid,e.id),t.setSaveStatusTrue(),t.hideTextBoxTool(),t.setIsEditing(!1),t.setError(null),this.addNewCommentToServerCommentList(e),tt.A.resetDraftCommentReply(),this.removeFromUnsavedAnnotList(t.id,t.motivation),(0,g.eF)()&&a?this.refreshCommentOnServerResponse(r,e.id,n,r.etag,r.creator,r.bodyValue):this.refreshCommentOnServerResponse(r,e.id,n,e.etag,e.creator,e.bodyValue),this.pendingCommentToBeDeleted&&this.deleteCommentFromPageUIModel(this.pendingCommentToBeDeleted.id,n),$e.A.triggerEvent(u.Ay.API_EVENTS.ANNOTATION_ADDED,e),this.fireCommentPosted(e),(0,g.eF)()&&We.A.updateCommentPopupAnimatedCount();const o=tt.A.getUserStatus();let c=ot.A.getInstance().getCommentInitiationSource();if(t.isPageLevelAnnot?c="pageLevel":t.isNCPAnnot&&(c=c?`inline-${c}`:"inline"),l){const e=new CustomEvent(u.Ay.API_EVENTS.ANNOTATION_ADDED_FROM_BOTTOM_BAR,{bubbles:!0,detail:{commentId:t.id}});window.dispatchEvent(e)}let C="";this.isLandingExperienceOn&&(C="LandingExperience-");const b={"adb.event.context.eureka.participate.use.commenttype":t.target.selector.subtype,"adb.event.context.dc.participate.use.menu_location":c,"adb.event.context.dc.participate.use.triggertype":this.contextualMenuTriggerType?`${C}${this.contextualMenuTriggerType}`:`${C}${u.Ay.NOT_APPLICABLE}`},{anonRHPCohort:E}=rt.A,v=s.locale2.getLocale().startsWith("en");E&&E===h.ru.ILLUSTRATIONS?b["adb.user.attribute.cohortnumber"]=3:E&&E===h.ru.MICROANIMATION&&v&&(b["adb.user.attribute.cohortnumber"]=2),(0,d.BI)("Participate","Use",`Add comment:${o}`,b),p&&this.comments.length<=2&&this.userOnboardingCardId&&(0,d.BI)("Commenting","UserOnboarding",`Add comment:${o} click on ${this.userOnboardingCardId}`,b),this.commentTextBoxObject&&((0,d.BI)("Commenting","ContextualMenu",this.contextualMenuTriggerType===u.Ay.RIGHT_CLICK?"RCM Text box Comment Posted":"Text box Comment Posted",b),this.setSelectedCMTextBoxId(void 0),this.setCommentTextBoxObject(void 0),this.setContextualMenuTriggerType(u.Ay.NOT_APPLICABLE)),ot.A.getInstance().setCommentInitiationSource(null),t.isNCPAnnot&&t.target.selector.subtype===u.Ay.REDHAWK_COMMENT_NOTE&&this.setSelectedPreviewCommentId(e.id),m(r),this.setContextualMenuTriggerType(u.Ay.NOT_APPLICABLE)}).catch(e=>{_.error(e);let o="";e&&e.message&&tt.A.isUserOffline(e.message)&&(t.setError("offline"),o="offline"),e&&e.response&&e.response.status===u.Ay.UNAUTHORIZED_STATUS&&(this.setShowAuthFailedNotification(!0),o="unauthorized"),t.isNCPAnnot&&this.setDraftCommentReplyTransientObject(b.commentId,b.currentCommentId,b.commentBody,b.mentionedList),t.setSaveStatusFalse(),t.read.setReadValue(!1),Je.A.showErrorMsg(!0),(0,d.BI)("Participate","Use","postingError",{"adb.event.context.eureka.participate.error.reason":`${""!==o?o:JSON.stringify(e)}`}),C(e)})});return this.showSuggestedComments&&this.setShowSuggestedComments(!1),p&&this.setIsCommentOrReplyBeingPosted(!1),m}addNewCommentToServerCommentList(e){const t=tt.A.convertRedhawkFreeHighlightToPDFSpecFreeHighlight(e);this.comments.push(t)}refreshCommentOnServerResponse(e,t,o,r,n,s){var a;let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";var d;(e.setSyncWithServer(!0),e.resetSyncPending(),e.setSID(t),e.setEtag(r),e.setCreatorDetails(n),p)&&(null===(d=e.reactions)||void 0===d||d.removePendingOperation(p));null===(a=e.reactions)||void 0===a||a.syncReactions(l,c)}mapSelectorPropertiesServerToUI(e,t){if(t){let o,r,n,s,a;if(t.noteX&&t.noteY&&(o=[t.noteX,t.noteY]),t.boundingBox&&(r=tt.A.getInstance().initiateRecursiveArray(t.boundingBox)),t.quadPoints&&(n=tt.A.getInstance().initiateRecursiveArray(t.quadPoints)),t.inkList&&(a=tt.A.getInstance().initiateRecursiveArray(t.inkList)),"function"==typeof e.target.selector.getCoordPointsWrtImg){o=e.target.selector.getCoordPointsWrtImg(o),r=e.target.selector.getCoordPointsWrtImg(r),n=e.target.selector.getCoordPointsWrtImg(n);for(let t=0;void 0!==a&&t<a.length;t++)a[t]=e.target.selector.getCoordPointsWrtImg(a[t])}o&&e.setNoteXY(o[0],o[1]),r&&(e.target.selector.setBoundingBox(r),e.target.selector.updateSelectorBoundingBox(t.boundingBox),s=updatePropsInNodeIndices(t.node,{boundingBox:r})),a&&e.target.selector.setInkList(a),n&&(e.target.selector.setQuadPoints(n),e.target.selector.updateSelectorQuadPoints(t.quadPoints),s=updatePropsInNodeIndices(t.node,{quadPoints:n})),s&&e.target.selector.setNode(s)}}mapSelectorPropertiesUIToServer(e,t){if(t){let o,r,s,a,l;if(t.noteX&&t.noteY&&(o=[t.noteX,t.noteY]),t.boundingBox&&(r=tt.A.getInstance().initiateRecursiveArray(t.boundingBox),l=updatePropsInNodeIndices(t.node,{boundingBox:r})),t.quadPoints&&(a=tt.A.getInstance().initiateRecursiveArray(t.quadPoints),l=updatePropsInNodeIndices(t.node,{quadPoints:a})),t.inkList&&(s=tt.A.getInstance().initiateRecursiveArray(t.inkList)),"function"==typeof t.getCoordPointsWrtPdf){o=t.getCoordPointsWrtPdf(o),r=t.getCoordPointsWrtPdf(r),a=t.getCoordPointsWrtPdf(a),l=updatePropsInNodeIndices(t.node,{boundingBox:r,quadPoints:a});for(let e=0;void 0!==s&&e<s.length;e++)s[e]=t.getCoordPointsWrtPdf(s[e])}e.target&&(o&&(e.target.selector.noteX=o[0],e.target.selector.noteY=o[1]),t.strokeColor&&(e.target.selector.strokeColor=t.strokeColor),t.strokeWidth&&(e.target.selector.strokeWidth=t.strokeWidth),r&&(e.target.selector.boundingBox=r),s&&(e.target.selector.inkList=s),a&&(e.target.selector.quadPoints=a),l&&(e.target.selector.node=l),y.A.isFreeText(e)&&(0,g.eF)()&&(e.target.selector.style=JSON.parse(JSON.stringify(t.style)),e.target.selector.appearanceData=(0,n.toJS)(t.appearanceData),t.textOffsetPoint&&(e.target.selector.textOffsetPoint=JSON.parse(JSON.stringify(t.textOffsetPoint))),e.target.selector.lineHeight=t.lineHeight,e.target.selector.styleClass=t.styleClass,e.target.selector.commentRotation=t.commentRotation))}}getServerCommentFromUIComment(e,t,o,r){let s;if(qe.A.isEmojiReactionsEnabled()){s=[];let n={};if(o===u.Ay.EDIT){var a;if(n.op=u.Ay.COMMENT_OP_REPLACE,n.path=u.Ay.COMMENT_PATH_BODYVALUE,n.value=e.bodyValue,s.push(n),(null===(a=e.mentions)||void 0===a?void 0:a.length)>0){const o={};o.op=t.mentions?u.Ay.COMMENT_OP_REPLACE:u.Ay.COMMENT_OP_ADD,o.path=u.Ay.COMMENT_PATH_MENTIONS,o.value=e.mentions,s.push(o)}if(e.target){const o={};this.mapSelectorPropertiesUIToServer(t,e.target.selector),t=tt.A.convertPDFSpecFreeHighlightToRedhawkFreeHighlight(t),o.op=u.Ay.COMMENT_OP_REPLACE,o.path=u.Ay.COMMENT_PATH_SELECTOR,o.value=t.target.selector,s.push(o)}}else o===u.Ay.RESOLVE||o===u.Ay.UNRESOLVE?(n.op=u.Ay.COMMENT_OP_REPLACE,n.path=u.Ay.COMMENT_PATH_STATUS,n.value=o===u.Ay.RESOLVE?u.Ay.STATUS_RESOLVED:u.Ay.STATUS_OPEN,s.push(n)):o!==u.Ay.ADD_REACTION&&o!==u.Ay.REMOVE_REACTION||r.forEach(e=>{n={},n.op=e.action,n.path=u.Ay.COMMENT_PATH_REACTIONS+e.reaction,n.value=e.action===u.Ay.ADD_REACTION?{}:null,s.push(n)})}else{s=(0,g.eF)()?{...(0,n.toJS)(t)}:{...t};const o=e.target.selector;this.mapSelectorPropertiesUIToServer(s,o),s.bodyValue=e.bodyValue,s.mentions=e.mentions,s.status=e.status,s=tt.A.convertPDFSpecFreeHighlightToRedhawkFreeHighlight(s)}return s}getServerCommentToBeUpdated(e){for(const t of this.comments){if(t.id===e.sid)return t;if(t.replies){const o=t.replies.find(t=>t.id===e.sid);if(void 0!==o)return o}}return null}async updateCommentHelper(e,t,o,r,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";const a=new c.P({context:"CommentsStore",name:"UpdateCommentInServer"});a.start();const l=!(n===u.Ay.ADD_REACTION||n===u.Ay.RESOLVE||n===u.Ay.UNRESOLVE);try{const c=await ze.A.getAsset(),p=ze.A.getAnnotation(c.id,t);n===u.Ay.UNRESOLVE&&(o.status="open");const d=await p.updateCommentInServer(o,l);a.log();const m=d||p.annotationObject;return this.updateCommentData(e,m,t,r,s)}catch(c){var p,d,m,h;if(rt.A.isEmojiReactionsEnabled&&((null==c||null===(p=c.response)||void 0===p?void 0:p.status)===u.Ay.PRE_CONDITION_FAILURE_STATUS||(null==c||null===(d=c.response)||void 0===d?void 0:d.status)===u.Ay.FORBIDDEN_ACTION_FAILURE_STATUS||s)){if((null==c||null===(m=c.response)||void 0===m?void 0:m.status)===u.Ay.PRE_CONDITION_FAILURE_STATUS)a.error(c),this.retryWithDelay(e,t,o,r,s,l).then(e=>(a.log(),e)).catch(t=>{this.parseErrorResponseOnUpdate(e,n,t)});else if((null==c||null===(h=c.response)||void 0===h?void 0:h.status)===u.Ay.FORBIDDEN_ACTION_FAILURE_STATUS&&s)try{var g,y;a.error(c),await this.fetchUpdatedCommentFromServer(e,t,r,s),null===(g=e.reactions)||void 0===g||g.showToast(null==c||null===(y=c.response)||void 0===y?void 0:y.status)}catch(t){var C;a.error(t),null===(C=e.reactions)||void 0===C||C.showToast()}else if(s){var _;null===(_=e.reactions)||void 0===_||_.handleOperationFailed(s),a.error(c)}}else a.error(c),this.parseErrorResponseOnUpdate(e,n,c)}}async retryWithDelay(e,t,o,r,n){let s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];let a=0;for(;;)try{return await this.retryUpdateCommentHelper(e,t,o,r,n,s)}catch(t){if(a++,a>=5){if(n){var l;let o="";t.response&&t.response.status&&(o=t.response.status),null===(l=e.reactions)||void 0===l||l.handleOperationFailed(n,o)}throw t}const o=1e3*2**a;await new Promise(e=>{setTimeout(e,o)})}}async retryUpdateCommentHelper(e,t,o,r,n){let s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=new c.P({context:"CommentsStore",name:"retryUpdateCommentHelper"});a.start();try{const l=await ze.A.getAsset();let c=ze.A.getAnnotation(l.id,t);const p=await c.get();t.etag=p.etag,c=ze.A.getAnnotation(l.id,t);const d=await c.updateCommentInServer(o,s);a.log(),this.setNudgingReplyPosted(!0);const m=d||p;return this.updateCommentData(e,m,t,r,n),d}catch(e){throw a.error(e),e}}async fetchUpdatedCommentFromServer(e,t,o,r){const n=new c.P({context:"CommentsStore",name:"fetchUpdatedCommentFromServer"}),s=await ze.A.getAsset(),a=ze.A.getAnnotation(s.id,t),l=await a.get();t.etag=l.etag,n.log(),this.updateCommentData(e,l,t,o,r)}updateCommentData(e,t,o,r,n){return this.refreshCommentOnServerResponse(e,t.id,r,t.etag,t.creator,t.bodyValue,t.perUserPerAnnotation,t.aggregatedInfo,n),e.setModified(t.modified),!(0,g.eF)()&&e.cid&&t.id&&this.clientServerIdMap.set(e.cid,t.id),e.setSaveStatusTrue(),this.updateCommentInServerCommentList(o,t),e.resetUnsavedCommentText(),e.resetUnsavedMentions(),y.A.isFreeText(e)&&(0,g.eF)()&&e.target.selector.fetchAppearanceFromServer(e),e.isNCPAnnot&&""!==e.bodyValue&&this.setSelectedPreviewCommentId(t.id),this.setNudgingReplyPosted(!0),$e.A.triggerEvent(u.Ay.API_EVENTS.ANNOTATION_UPDATED,t),this.removeFromUnsavedAnnotList(e.id,e.motivation),t.response}parseErrorResponseOnUpdate(e,t,o){o&&o.message&&tt.A.isUserOffline(o.message)&&e.setError("offline"),t===u.Ay.EDIT?(e.setSaveStatusFalse(),Je.A.showErrorMsg(!0)):t===u.Ay.RESOLVE?e.setStatus(u.Ay.STATUS_OPEN):t===u.Ay.UNRESOLVE&&e.setStatus(u.Ay.STATUS_RESOLVED)}getCommentAndUpdateInServer(e,t,o,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const s=this.getServerCommentToBeUpdated(t);if(s){const o=s.target.selector.node.index;o!=e&&(s.target.selector.node.index=e,this.deleteCommentFromPageUIModel(t.id,o))}t.resetSaveStatus();const a=this.getServerCommentFromUIComment(t,s,o,r);return this.updateCommentHelper(t,s,a,e,o,n)}updateCommentInServer(e,t,o){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return it.A.getClient({commentsApiUrl:qe.A.commentsApiUrl}),o===u.Ay.RESOLVE&&0===this.getResolvedComments().length&&this.setShowResolveTooltip(),this.getCommentAndUpdateInServer(e,t,o,r,n)}updateComment(e,t){const o=tt.A.getUserStatus(),r={"adb.event.context.eureka.participate.use.commenttype":t.target.selector.subtype};return t.isNCPAnnot&&(r["adb.event.context.dc.participate.use.menu_location"]="inline"),(0,d.BI)("Participate","Use",`Update comment:${o}`,r),this.updateCommentInServer(e,t,u.Ay.EDIT)}getUpdatedUiModel(e,t){return b.makeStore(u.Ay.FROM_SERVER,t,!0,e)}getReplyUIModel(e,t){return b.makeStore(u.Ay.FROM_CLIENT,e,!1,t)}updateReactions(e,t,o,r){return this.updateCommentInServer(e,t,u.Ay.ADD_REACTION,o,r)}resolveComment(e,t){const o=tt.A.getUserStatus();return(0,d.BI)("Participate","Use",`Resolve comment:${o}`,{"adb.event.context.eureka.participate.use.commenttype":t.target.selector.subtype}),this.updateCommentInServer(e,t,u.Ay.RESOLVE)}unresolveComment(e,t){const o=tt.A.getUserStatus();return(0,d.BI)("Participate","Use",`Unresolve comment:${o}`,{"adb.event.context.eureka.participate.use.commenttype":t.target.selector.subtype}),this.updateCommentInServer(e,t,u.Ay.UNRESOLVE)}updateCommentInServerCommentList(e,t){if(t=tt.A.convertRedhawkFreeHighlightToPDFSpecFreeHighlight(t),e.motivation===u.Ay.REPLYING){const o=this.comments.filter(t=>e.target&&t.id===e.target.source)[0],r=o.replies.findIndex(t=>t.id===e.id);null!=r&&-1!==r?o.replies.splice(r,1,t):o.replies.push(t)}else{const o=e.replies,r=t;r.replies=o;const n=this.comments.findIndex(t=>t.id===e.id);this.comments[n]=r}}updateCommentUIModels(e,t){const o=this.commentUIModels.get(t),r=b.makeStore(u.Ay.FROM_SERVER,e,!0,e,{reassignSelectors:!0});if(e.motivation===u.Ay.REPLYING){const t=o.filter(t=>{if(t.replies){return!!t.replies.filter(t=>t.tid===e.tid)}return!1})[0];if(!t)return;const n=t.replies.findIndex(t=>t.tid===e.tid);t.replies[n]=r}else{const t=o.findIndex(t=>t.tid===e.tid);if(-1!==t){o.splice(t,1);const e=this.findCorrectIndexForNewComment(o,r);o.splice(e,0,r)}}return this.commentUIModels.set(t,o),r}setLastCommentTransitionedToView(e){this.lastCommentTransitionedToView=e}setSelectedCommentId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h._6.MAIN_CONTENT_AREA,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.selectedCommentId&&this.selectedCommentId!==e&&this.deleteCommentIfAbandoned(this.selectedCommentId),(0,g.eF)()){if(this.selectedCommentId!==e){this.resetSelectedCommentId(),this.saveEditsForCommentId(this.selectedCommentId),this.selectedCommentId=e,this.selectedCommentSource=t;const o=this.selectedComment;o&&$e.A.triggerEvent(u.Ay.API_EVENTS.ANNOTATION_SELECTED,o)}}else this.selectedCommentId=e,this.selectedCommentSource=t;t===h._6.RHP&&this.updateLastSelectedCommentTimestamp(),this.setShouldReplyFieldBeActive(o),tt.A.appendCommentIdToUrl(this.selectedCommentId),this.pendingNavigationCommentId&&this.pendingNavigationCommentId===e&&this.clearPendingNavigationCommentId()}setHoveredCommentId(e){this.hoveredCommentId!==e&&(this.hoveredCommentId=e)}setHoveredCommentIdIfNoCommentIsBeingDragged(e){this.isAnyCommentBeingDragged||this.hoveredCommentId===e||(this.hoveredCommentId=e)}setPendingNavigationCommentId(e){this.pendingNavigationCommentId=e}clearPendingNavigationCommentId(){this.pendingNavigationCommentId=null}setEditedAnnotId(e){e!==this.editedAnnotId&&(this.editedAnnotId=e)}setDraftCommentReplyTransientObject(e,t,o,r){console.assert(!r||Array.isArray(r)||(0,n.isObservableArray)(r),"CommentsStore.setDraftCommentReplyTransientObject mentionsList not an array.");let a=!0,l=!0;if(e){var c;switch(t){case void 0:(!(0,g.eF)()&&e.startsWith("/assets/")||(0,g.eF)()&&e)&&(a=!0,l=!1);break;case e:(!(0,g.eF)()&&e.startsWith("/assets/")||(0,g.eF)()&&e)&&(a=!1,l=!0);break;default:t!==e&&(!(0,g.eF)()&&e.startsWith("/assets/")||(0,g.eF)()&&e)&&(a=!1,l=!1)}(null===(c=this.draftCommentReplyTransientObject)||void 0===c?void 0:c.commentId)===e?(this.draftCommentReplyTransientObject.mentionedList=[...r],this.draftCommentReplyTransientObject.commentBody=o):(this.draftCommentReplyTransientObject=(0,n.observable)({commentId:e,currentCommentId:t,isComment:l,isNew:a,commentBody:o,mentionedList:r,assetURN:ze.A.assetURN}),s.providers["review-handler"]().then(e=>{e.emitCommentEvent("adobe:comments:draftCommentcreated")}))}}resetDraftCommentReplyTransientObject(){this.draftCommentReplyTransientObject=null,s.providers["review-handler"]().then(e=>{e.emitCommentEvent("adobe:comments:draftCommentcancelled")})}saveEditsForCommentId(e){let t,o,r;for(o of this.commentUIModels.keys())if(t=this.commentUIModels.get(o),t=t.filter(t=>t.id===e),t.length>0){r=t[0];break}if(r){const e=r.sid,t=this.comments.filter(t=>t.id===e)[0];if(t&&!y.A.isFreeText(t)){const e=t.target.selector,n=r.target.selector;e.strokeColor===n.strokeColor&&t.bodyValue===r.bodyValue||this.updateCommentInServer(o,r,u.Ay.EDIT)}}}resetSelectedCommentId(){var e,t;if((0,g.eF)()&&this.selectedCommentId){const e=this.selectedComment;e&&$e.A.triggerEvent(u.Ay.API_EVENTS.ANNOTATION_UNSELECTED,e),this.saveEditsForCommentId(this.selectedCommentId)}this.selectedCommentId!==(null===(e=this.pendingComment)||void 0===e||null===(t=e.comment)||void 0===t?void 0:t.id)&&(this.deleteCommentIfAbandoned(this.selectedCommentId),this.selectedCommentId=void 0,this.selectedCommentSource=void 0,this.selectedPreviewCommentId=void 0,this.setSelectedNewCommentPopupId(void 0),this.setHoveredCommentId(null),tt.A.removeCommentIdFromUrl())}deleteCommentIfAbandoned(e){if(!e)return!1;const t=this.getUICommentFromId(e);return!!t&&(!(t.bodyValue||tt.A.isCurrentTextBoxDraftCommentReply(e)||!t.shouldCancelEmptyComment||t.syncedWithServer||!t.syncPending)&&(this.deleteCommentFromPageUIModel(e,t.target.selector.node.index),this.removeFromUnsavedAnnotList(t.id,t.motivation),this.pendingCommentCleanup(),(0,d.BI)("Commenting","Use","Empty Comment Cancelled"),!0))}setComments(e){this.comments=e.map(e=>tt.A.convertRedhawkFreeHighlightToPDFSpecFreeHighlight(e))}fetchCommentsError(){}addReplyToServerComments(e,t){const o=this.comments.filter(t=>t.id===e);0!==o.length&&(null==o[0].replies&&(o[0].replies=[]),o[0].replies.push(t))}setNudgingReplyPosted(e){this.nudgingReplyPosted=e}setIsCommentOrReplyBeingPosted(e){rt.A.triggerCommentGuidedUserExperience&&(this.isCommentOrReplyBeingPosted=e,e&&this.userOnboardingCardId&&(0,d.BI)("Commenting","UserOnboarding",`Initiate comment for ${this.userOnboardingCardId}`))}async openQuickToolsFlyout(e){const t={[u.Ay.REDHAWK_COMMENT_NOTE]:u.Ay.VERB_COMMENT_STICKYNOTE,[u.Ay.REDHAWK_COMMENT_HIGHLIGHT]:u.Ay.VERB_COMMENT_STICKYNOTE,[u.Ay.REDHAWK_COMMENT_SHAPE]:u.Ay.VERB_COMMENT_DRAW}[e];Xe.PreviewStore.instance.quickToolsApis.setActiveVerb(t,{showFlyout:!0,conditionalTooltip:!0}),t&&(0,d.BI)("Commenting","UserOnboarding",`Tool Flyout Opened ${t}`)}resetNudgingReplyPosted(){this.setNudgingReplyPosted(!1)}deleteCommentFromServer(e,t,o){return new Promise((r,n)=>{it.A.getClient({commentsApiUrl:qe.A.commentsApiUrl}),ze.A.getAssetURN().then(s=>{const a={};if(a.id=e.sid,a.etag=e.etag,a.pageNo=e.target.selector.node.index,e.sid){const l=(0,C.Np)(s,a,qe.A.isEmojiReactionsEnabled());this.tempDeleteList.push(e.sid);const p=new c.P({context:"CommentsStore",name:"DeleteAnnot"});return p.start(),l.delete().then(t=>{p.log();const o=this.getCommentById(a.id);a.id===this.selectedCommentId&&this.resetSelectedCommentId(),(0,g.eF)()&&We.A.updateCommentPopupAnimatedCount(),this.deleteCommentFromServerList(a.id),e.replies&&e.replies.forEach(e=>this.removeFromUnsavedAnnotList(e.id,u.Ay.REPLYING));const n=tt.A.getUserStatus();(0,d.BI)("Participate","Use",`Delete comment:${n}`,{"adb.event.context.eureka.participate.use.commenttype":e.target.selector.subtype}),$e.A.triggerEvent(u.Ay.API_EVENTS.ANNOTATION_DELETED,o),tt.A.resetDraftCommentReply(),r(t)}).catch(r=>{p.error(r),this.isAnnotationAlreadyDeleted(a.id)&&!o&&this.readdCommentsToPage(t,e);const s=this.tempDeleteList.findIndex(e=>e===a.id);-1!==s&&this.tempDeleteList.splice(s,1);(0,c.A)({context:"CommentsStore"}).error("Error in deleteCommentFromServer",JSON.stringify(r)),n(r)})}r()}).catch(e=>{n(e)})})}setReplyDeleted(e){this.replyDeleted=e}deleteReplyFromServerComments(e,t){const o=this.getCommentById(e),r=this.comments.findIndex(e=>e.id===t);if(r>-1){const t=this.comments[r].replies.findIndex(t=>t.id===e);t>-1&&((this.selectedPreviewCommentId||this.hoveredPreviewCommentId)&&this.setReplyDeleted(!0),this.comments[r].replies.splice(t,1))}$e.A.triggerEvent(u.Ay.API_EVENTS.ANNOTATION_DELETED,o)}deleteComment(e,t,o){return this.deleteCommentFromServer(e,t,o)}deleteCommentFromServerList(e){const t=this.comments.findIndex(t=>t.id===e);t>-1&&this.comments.splice(t,1)}deleteCommentFromPage(e,t){this.deleteCommentFromPageUIModel(e,t),this.deleteCommentFromServerList(e)}deleteCommentFromPageUIModel(e,t){const o=this.commentUIModels.get(t),r=o.findIndex(t=>t.id===e||t.cid===e);r>-1&&this.removeFromUnsavedAnnotList(o[r].id,o[r].motivation),r>-1&&o.splice(r,1),this.commentUIModels.set(t,o)}deleteUnsavedCommentFromPageUIModel(e){const t=this.commentUIModels.get(e);if((0,g.eF)()){const e=t.slice(-1)[0];e&&!0===e.syncPending&&(this.removeFromUnsavedAnnotList(e.id,e.motivation),t.pop())}else{const e=t.findIndex(e=>!0===e.syncPending);e>-1&&this.removeFromUnsavedAnnotList(t[e].id,t[e].motivation),e>-1&&t.splice(e,1)}this.commentUIModels.set(e,t)}toggleExpandedSuggestedComments(e){this.showSuggestedComments&&(this.expandedSuggestedComments=e)}retrySavingFailedComment(e,t){this.saveCommentToServer(e,t)}resetCommentsCache(){this.resetCommentsStoreCache(),Ve.default.resetFilterCache(),Ye.A.resetToolbarCache(),qe.A.resetReviewStoreCache(),Ge.A.resetCommentSyncCache(),We.A.resetCommentsPositionCache(),Ke.A.resetReviewParticipantsStore(),rt.A.resetCommentsDropinStore()}resetCommentsStoreCache(){this.resetUnsavedPageLevelAnnotId(),this.resetServerCommentsList(),this.resetCommentUiModels(),this.resetReadListLoaded(),this.resetCreatedUIModelFromServerModel(),this.resetTempDeleteList(),this.resetIsTextSelected(),this.resetReadCommentsList(),this.resetUnsavedCommentList(),this.resetNameToAnnotDataMap(),this.resetHaveCommentsLoaded(),this.resetSelectedCommentId(),this.resetNudgingReplyPosted(),this.resetReactionOnboardingTooltip()}resetUnsavedCommentList(){this.unsavedAnnotList=[]}resetNameToAnnotDataMap(){this.nameToAnnotDataMap=new Map}resetTempDeleteList(){this.tempDeleteList=[]}resetIsTextSelected(){this.isTextSelected=!1}resetCreatedUIModelFromServerModel(){this.commentsFetchedFromServer=!1,this.createdUIModelFromServerModel={}}resetServerCommentsList(){this.comments=[]}resetCommentUiModels(){this.commentUIModels=new Map}resetReadCommentsList(){this.readCommentsList=[]}resetReadListLoaded(){this.isReadListLoaded=!1}resetHaveCommentsLoaded(){this.haveCommentsLoaded=!1}setShowSuggestedComments(e){this.showSuggestedComments=e}setOpenExpandedSuggestedComments(e){this.showSuggestedComments&&(this.openExpandedSuggestedComments=e)}setExecuteCaptcha(e){this.executeCaptcha=e}setShowCaptcha(e){this.showCaptcha=e}isInvertedColor(e){return!(!u.Ay.DARK_PAGE_THEME_INVERT_COLORS.includes(e)||!this.isDarkPageThemeEnabled)}getUICommentFromId(e){if(!e)return;let t,o;return this.commentUIModels.forEach((r,n)=>{if(!t&&!o){if(t=r.find(t=>t.id===e),void 0!==t)return t;for(let t=0;t<r.length;t++)if(o=r[t].replies.find(t=>t.id===e),void 0!==o)return o}}),t||o}checkForPendingComment(){var e;(null===(e=Ke.A.reviewParticipants)||void 0===e?void 0:e.find(e=>{var t;return e.email===(null===(t=Qe.A.userProfile)||void 0===t?void 0:t.email)}))||tt.A.isACP()?this.postPendingCommentIfAnyForSignedInUser():s.providers["review-handler"]().then(e=>{e.consentRequired===u.Ay.CONSENT_DONE?this.postPendingCommentIfAnyForSignedInUser():(0,n.reaction)(()=>e.consentRequired,()=>{e.consentRequired===u.Ay.CONSENT_DONE&&this.postPendingCommentIfAnyForSignedInUser()})})}async postPendingCommentIfAnyForSignedInUser(){if(!(0,g.eF)()&&st.isSignedIn){let e;try{e=(0,nt.tM)(u.Ay.PENDING_COMMENT_SS_KEY)}catch(e){(0,c.A)({context:"CommentsStore"}).error(JSON.stringify(e))}if(e){const t=JSON.parse(e)[Xe.PreviewStore.instance.assetUri];if(t){const e=t.isMentionsActive;if(t.creator={id:Qe.A.userProfile.userId,name:Qe.A.userProfile.userName,email:Qe.A.userProfile.email,type:u.Ay.PERSON},t.created=null,t.modified=null,t.isPageLevelAnnot&&e)this.prevSessionPageLevelAnnot=t;else if(t.motivation===u.Ay.MOTIVATION_COMMENTING){t.target.selector=t.target.selector.selector;const o=this.addCommentToPage(t.target.selector.node.index,t,{isDraftMode:e,shouldTakeFocus:e});t.keepCommentUnfocused||this.setSelectedCommentId(o.id),e||(this.saveCommentToServer(t.target.selector.node.index,o).then(e=>{t.keepCommentUnfocused||this.setSelectedCommentId(e.id)}),o.resetSyncPending(),o.setSyncWithServer(!0)),o.resetIsAuthPending()}else if(t.motivation===u.Ay.REPLYING){const o=this.getUICommentFromId(t.target.source);if(e)return this.setSelectedCommentId(o.id),o.setIsReplying(!0),o.setUnsavedReplyBody(t.bodyValue),void tt.A.replyToSelectedComment(this);if(o){const e=this.getReplyUIModel(t,o);o.addReply(e),o.saveReplyToServer(o,e).then(e=>{this.setSelectedCommentId(e.target.source)}),e.resetSyncPending(),e.setSyncWithServer(!0),e.resetIsAuthPending()}}}try{(0,nt.Qy)(u.Ay.PENDING_COMMENT_SS_KEY)}catch(e){(0,c.A)({context:"CommentsStore"}).error(JSON.stringify(e))}}}}postPendingCommentIfAnyForAnonUser(){if(!(0,g.eF)()&&!st.isSignedIn){const updateCreator=e=>{e.setCreatorDetails({id:Qe.A.userProfile.userId,name:Qe.A.userProfile.userName,type:u.Ay.PERSON})};this.pendingComment&&(updateCreator(this.pendingComment.comment),this.pendingComment.executeOnServer()),this.pendingReply&&(updateCreator(this.pendingReply.newReply),this.pendingReply.executeOnUIForAnonUser(),this.pendingReply.executeOnServer())}}pendingCommentCleanup(){this.resetPendingComment(),this.resetPendingReply(),this.setIsPageLevelWelcomeDialogDismissed(!1),this.setShowCaptcha(!1)}setShowFrictionlessSigninDialog(e,t){this.showFrictionlessSigninDialog=e,this.frictionlessSigninDialogText=e?t:""}getCommentByTid(e,t){let o,r;const n=this.commentUIModels.get(t);for(let t=0;t<n.length;t++){const s=n[t];if(s.tid===e)return o=s,o;if(r=s.replies.find(t=>t.tid===e),void 0!==r)return r}return o||r}setIsHalfSheetOpen(e){this.isHalfSheetOpen=e}}).prototype,"comments",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=_applyDecoratedDescriptor(K.prototype,"selectedCommentId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=_applyDecoratedDescriptor(K.prototype,"pendingNavigationCommentId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=_applyDecoratedDescriptor(K.prototype,"hoveredCommentId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=_applyDecoratedDescriptor(K.prototype,"editedAnnotId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=_applyDecoratedDescriptor(K.prototype,"selectedCommentSource",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=_applyDecoratedDescriptor(K.prototype,"readCommentsList",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=_applyDecoratedDescriptor(K.prototype,"isReadListLoaded",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=_applyDecoratedDescriptor(K.prototype,"selectedPageIndex",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=_applyDecoratedDescriptor(K.prototype,"showAuthFailedNotification",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),re=_applyDecoratedDescriptor(K.prototype,"haveCommentsLoaded",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=_applyDecoratedDescriptor(K.prototype,"unsavedAnnotList",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=_applyDecoratedDescriptor(K.prototype,"draftCommentReplyTransientObject",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=_applyDecoratedDescriptor(K.prototype,"showPageLevelWelcomeDialog",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=_applyDecoratedDescriptor(K.prototype,"lastCommentTransitionedToView",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=_applyDecoratedDescriptor(K.prototype,"triggerAnimationForGuestLogin",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=_applyDecoratedDescriptor(K.prototype,"isCommentExpanded",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=_applyDecoratedDescriptor(K.prototype,"guestLoginDownload",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=_applyDecoratedDescriptor(K.prototype,"focusForFTE",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=_applyDecoratedDescriptor(K.prototype,"hcColorPalette",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=_applyDecoratedDescriptor(K.prototype,"lastSelectedCommentTimestamp",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=_applyDecoratedDescriptor(K.prototype,"expandedSuggestedComments",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=_applyDecoratedDescriptor(K.prototype,"showSuggestedComments",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=_applyDecoratedDescriptor(K.prototype,"pendingComment",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=_applyDecoratedDescriptor(K.prototype,"pendingReply",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=_applyDecoratedDescriptor(K.prototype,"showCaptcha",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=_applyDecoratedDescriptor(K.prototype,"executeCaptcha",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=_applyDecoratedDescriptor(K.prototype,"placeholderAnimation",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ee=_applyDecoratedDescriptor(K.prototype,"isDarkPageThemeEnabled",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=_applyDecoratedDescriptor(K.prototype,"showFrictionlessSigninDialog",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=_applyDecoratedDescriptor(K.prototype,"frictionlessSigninDialogText",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=_applyDecoratedDescriptor(K.prototype,"suppressAutoMentions",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oe=_applyDecoratedDescriptor(K.prototype,"selectedPreviewCommentId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=_applyDecoratedDescriptor(K.prototype,"hoveredPreviewCommentId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=_applyDecoratedDescriptor(K.prototype,"selectedNewCommentPopupId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=_applyDecoratedDescriptor(K.prototype,"selectedCMTextBoxId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=_applyDecoratedDescriptor(K.prototype,"convertHoverToSelectionOpts",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),we=_applyDecoratedDescriptor(K.prototype,"replyDeleted",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Re=_applyDecoratedDescriptor(K.prototype,"nudgingReplyPosted",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Me=_applyDecoratedDescriptor(K.prototype,"commentTextBoxObject",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=_applyDecoratedDescriptor(K.prototype,"contextualMenuTriggerType",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=_applyDecoratedDescriptor(K.prototype,"isCommentOrReplyBeingPosted",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xe=_applyDecoratedDescriptor(K.prototype,"stickyNoteLandingCommentId",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ue=_applyDecoratedDescriptor(K.prototype,"ncpDismissedCount",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ke=_applyDecoratedDescriptor(K.prototype,"stickyNoteLandingExperienceEnd",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fe=_applyDecoratedDescriptor(K.prototype,"commentsFetchedTimestamp",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=_applyDecoratedDescriptor(K.prototype,"firstTimeToastShown",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Be=_applyDecoratedDescriptor(K.prototype,"isHalfSheetOpen",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_applyDecoratedDescriptor(K.prototype,"setSuppressAutoMentions",[E],Object.getOwnPropertyDescriptor(K.prototype,"setSuppressAutoMentions"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setSelectedPreviewCommentId",[v],Object.getOwnPropertyDescriptor(K.prototype,"setSelectedPreviewCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setHoveredPreviewCommentId",[T],Object.getOwnPropertyDescriptor(K.prototype,"setHoveredPreviewCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setSelectedNewCommentPopupId",[A],Object.getOwnPropertyDescriptor(K.prototype,"setSelectedNewCommentPopupId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setCommentTextBoxObject",[O],Object.getOwnPropertyDescriptor(K.prototype,"setCommentTextBoxObject"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetCommentTextBoxObject",[D],Object.getOwnPropertyDescriptor(K.prototype,"resetCommentTextBoxObject"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setContextualMenuTriggerType",[P],Object.getOwnPropertyDescriptor(K.prototype,"setContextualMenuTriggerType"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setSelectedCMTextBoxId",[I],Object.getOwnPropertyDescriptor(K.prototype,"setSelectedCMTextBoxId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setStickyNoteLandingCommentId",[S],Object.getOwnPropertyDescriptor(K.prototype,"setStickyNoteLandingCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setFirstTimeToastShown",[w],Object.getOwnPropertyDescriptor(K.prototype,"setFirstTimeToastShown"),K.prototype),_applyDecoratedDescriptor(K.prototype,"incrementNcpDismissedCount",[R],Object.getOwnPropertyDescriptor(K.prototype,"incrementNcpDismissedCount"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetNcpDismissedCount",[M],Object.getOwnPropertyDescriptor(K.prototype,"resetNcpDismissedCount"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setStickyNoteLandingExperienceEnd",[N],Object.getOwnPropertyDescriptor(K.prototype,"setStickyNoteLandingExperienceEnd"),K.prototype),_applyDecoratedDescriptor(K.prototype,"isLandingExperienceOn",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"isLandingExperienceOn"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setPendingComment",[L],Object.getOwnPropertyDescriptor(K.prototype,"setPendingComment"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetPendingComment",[x],Object.getOwnPropertyDescriptor(K.prototype,"resetPendingComment"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setPendingReply",[U],Object.getOwnPropertyDescriptor(K.prototype,"setPendingReply"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetPendingReply",[k],Object.getOwnPropertyDescriptor(K.prototype,"resetPendingReply"),K.prototype),_applyDecoratedDescriptor(K.prototype,"showAcpMigrationDialog",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"showAcpMigrationDialog"),K.prototype),_applyDecoratedDescriptor(K.prototype,"updateLastSelectedCommentTimestamp",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"updateLastSelectedCommentTimestamp"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setHCColorPalette",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setHCColorPalette"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setIsAnimationInProgress",[F],Object.getOwnPropertyDescriptor(K.prototype,"setIsAnimationInProgress"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetIsAnimationInProgress",[H],Object.getOwnPropertyDescriptor(K.prototype,"resetIsAnimationInProgress"),K.prototype),_applyDecoratedDescriptor(K.prototype,"updateAnimationIteration",[B],Object.getOwnPropertyDescriptor(K.prototype,"updateAnimationIteration"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setShowResolveTooltip",[j],Object.getOwnPropertyDescriptor(K.prototype,"setShowResolveTooltip"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetShowResolveTooltip",[z],Object.getOwnPropertyDescriptor(K.prototype,"resetShowResolveTooltip"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setDarkPageThemeEnabled",[W],Object.getOwnPropertyDescriptor(K.prototype,"setDarkPageThemeEnabled"),K.prototype),_applyDecoratedDescriptor(K.prototype,"hasReactions",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"hasReactions"),K.prototype),_applyDecoratedDescriptor(K.prototype,"isHighContrastEnabled",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"isHighContrastEnabled"),K.prototype),_applyDecoratedDescriptor(K.prototype,"selectedAnnotColor",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"selectedAnnotColor"),K.prototype),_applyDecoratedDescriptor(K.prototype,"annotColor",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"annotColor"),K.prototype),_applyDecoratedDescriptor(K.prototype,"cornerCircleFillColor",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"cornerCircleFillColor"),K.prototype),_applyDecoratedDescriptor(K.prototype,"stickyNoteColorInHC",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"stickyNoteColorInHC"),K.prototype),_applyDecoratedDescriptor(K.prototype,"commentNoteColorinHC",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"commentNoteColorinHC"),K.prototype),_applyDecoratedDescriptor(K.prototype,"markupBorderColor",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"markupBorderColor"),K.prototype),_applyDecoratedDescriptor(K.prototype,"freeHandBorderColor",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"freeHandBorderColor"),K.prototype),_applyDecoratedDescriptor(K.prototype,"freeTextBorderColor",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"freeTextBorderColor"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setIsCommentExpanded",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setIsCommentExpanded"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setHaveCommentsLoaded",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setHaveCommentsLoaded"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setSelectedIndex",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setSelectedIndex"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetConvertHoverToSelectionOpts",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetConvertHoverToSelectionOpts"),K.prototype),je=_applyDecoratedDescriptor(K.prototype,"convertHoverToSelection",[n.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=o?t.id:t.target.source;n!==e.selectedPreviewCommentId&&rt.A.showCommentPreviewNav&&o?(e.setSelectedPreviewCommentId(n),e.setSelectedCommentId(n,h._6.MAIN_CONTENT_AREA,!1),e.convertHoverToSelectionOpts=r):e.resetConvertHoverToSelectionOpts()}}}),_applyDecoratedDescriptor(K.prototype,"setReactionOnboardingTooltipCommentId",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setReactionOnboardingTooltipCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setNumberOfReactionsOnLoad",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setNumberOfReactionsOnLoad"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setIsReactionTooltipShown",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setIsReactionTooltipShown"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetReactionOnboardingTooltip",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetReactionOnboardingTooltip"),K.prototype),_applyDecoratedDescriptor(K.prototype,"getTotalCommentArray",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"getTotalCommentArray"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setTriggerAnimationForGuestLogin",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setTriggerAnimationForGuestLogin"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setGuestLoginDownload",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setGuestLoginDownload"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setFocusForFTE",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setFocusForFTE"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setShowPageLevelWelcomeDialog",[G],Object.getOwnPropertyDescriptor(K.prototype,"setShowPageLevelWelcomeDialog"),K.prototype),_applyDecoratedDescriptor(K.prototype,"addToUnsavedAnnotList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"addToUnsavedAnnotList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"removeFromUnsavedAnnotList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"removeFromUnsavedAnnotList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"hasUserCommented",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"hasUserCommented"),K.prototype),_applyDecoratedDescriptor(K.prototype,"mentionsList",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"mentionsList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"unreadCommentsCount",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"unreadCommentsCount"),K.prototype),_applyDecoratedDescriptor(K.prototype,"modernUnreadCommentsCount",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"modernUnreadCommentsCount"),K.prototype),_applyDecoratedDescriptor(K.prototype,"allCommentsCount",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"allCommentsCount"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resolvedCommentsCount",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"resolvedCommentsCount"),K.prototype),_applyDecoratedDescriptor(K.prototype,"unresolvedComments",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"unresolvedComments"),K.prototype),_applyDecoratedDescriptor(K.prototype,"selectedCommentModel",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"selectedCommentModel"),K.prototype),_applyDecoratedDescriptor(K.prototype,"selectedComment",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"selectedComment"),K.prototype),_applyDecoratedDescriptor(K.prototype,"selectedCommentMobile",[n.computed],Object.getOwnPropertyDescriptor(K.prototype,"selectedCommentMobile"),K.prototype),_applyDecoratedDescriptor(K.prototype,"addCommentToPage",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"addCommentToPage"),K.prototype),_applyDecoratedDescriptor(K.prototype,"addCommentToPageOnUndo",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"addCommentToPageOnUndo"),K.prototype),_applyDecoratedDescriptor(K.prototype,"updatePageForComment",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"updatePageForComment"),K.prototype),_applyDecoratedDescriptor(K.prototype,"readdCommentsToPage",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"readdCommentsToPage"),K.prototype),_applyDecoratedDescriptor(K.prototype,"addSyncCommentsToPage",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"addSyncCommentsToPage"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setShowAuthFailedNotification",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setShowAuthFailedNotification"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setShowAcpMigrationModal",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setShowAcpMigrationModal"),K.prototype),_applyDecoratedDescriptor(K.prototype,"editSyncCommentsToPage",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"editSyncCommentsToPage"),K.prototype),_applyDecoratedDescriptor(K.prototype,"fetchComments",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"fetchComments"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setIsReadListLoaded",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setIsReadListLoaded"),K.prototype),_applyDecoratedDescriptor(K.prototype,"fetchReadCommentsList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"fetchReadCommentsList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setReadCommentsList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setReadCommentsList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"saveReplyToServer",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"saveReplyToServer"),K.prototype),_applyDecoratedDescriptor(K.prototype,"saveCommentToServer",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"saveCommentToServer"),K.prototype),_applyDecoratedDescriptor(K.prototype,"addNewCommentToServerCommentList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"addNewCommentToServerCommentList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"refreshCommentOnServerResponse",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"refreshCommentOnServerResponse"),K.prototype),_applyDecoratedDescriptor(K.prototype,"updateCommentInServer",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"updateCommentInServer"),K.prototype),_applyDecoratedDescriptor(K.prototype,"updateComment",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"updateComment"),K.prototype),_applyDecoratedDescriptor(K.prototype,"updateReactions",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"updateReactions"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resolveComment",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resolveComment"),K.prototype),_applyDecoratedDescriptor(K.prototype,"unresolveComment",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"unresolveComment"),K.prototype),_applyDecoratedDescriptor(K.prototype,"updateCommentInServerCommentList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"updateCommentInServerCommentList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"updateCommentUIModels",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"updateCommentUIModels"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setLastCommentTransitionedToView",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setLastCommentTransitionedToView"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setSelectedCommentId",[V],Object.getOwnPropertyDescriptor(K.prototype,"setSelectedCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setHoveredCommentId",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setHoveredCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setHoveredCommentIdIfNoCommentIsBeingDragged",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setHoveredCommentIdIfNoCommentIsBeingDragged"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setPendingNavigationCommentId",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setPendingNavigationCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"clearPendingNavigationCommentId",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"clearPendingNavigationCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setEditedAnnotId",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setEditedAnnotId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setDraftCommentReplyTransientObject",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setDraftCommentReplyTransientObject"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetDraftCommentReplyTransientObject",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetDraftCommentReplyTransientObject"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetSelectedCommentId",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetSelectedCommentId"),K.prototype),_applyDecoratedDescriptor(K.prototype,"deleteCommentIfAbandoned",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"deleteCommentIfAbandoned"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setComments",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setComments"),K.prototype),_applyDecoratedDescriptor(K.prototype,"fetchCommentsError",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"fetchCommentsError"),K.prototype),_applyDecoratedDescriptor(K.prototype,"addReplyToServerComments",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"addReplyToServerComments"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setNudgingReplyPosted",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setNudgingReplyPosted"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setIsCommentOrReplyBeingPosted",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setIsCommentOrReplyBeingPosted"),K.prototype),_applyDecoratedDescriptor(K.prototype,"deleteCommentFromServer",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"deleteCommentFromServer"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setReplyDeleted",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setReplyDeleted"),K.prototype),_applyDecoratedDescriptor(K.prototype,"deleteReplyFromServerComments",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"deleteReplyFromServerComments"),K.prototype),_applyDecoratedDescriptor(K.prototype,"deleteCommentFromServerList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"deleteCommentFromServerList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"deleteCommentFromPage",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"deleteCommentFromPage"),K.prototype),_applyDecoratedDescriptor(K.prototype,"deleteCommentFromPageUIModel",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"deleteCommentFromPageUIModel"),K.prototype),_applyDecoratedDescriptor(K.prototype,"deleteUnsavedCommentFromPageUIModel",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"deleteUnsavedCommentFromPageUIModel"),K.prototype),_applyDecoratedDescriptor(K.prototype,"toggleExpandedSuggestedComments",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"toggleExpandedSuggestedComments"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetUnsavedCommentList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetUnsavedCommentList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetServerCommentsList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetServerCommentsList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetReadCommentsList",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetReadCommentsList"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetReadListLoaded",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetReadListLoaded"),K.prototype),_applyDecoratedDescriptor(K.prototype,"resetHaveCommentsLoaded",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"resetHaveCommentsLoaded"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setShowSuggestedComments",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setShowSuggestedComments"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setExecuteCaptcha",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setExecuteCaptcha"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setShowCaptcha",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setShowCaptcha"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setShowFrictionlessSigninDialog",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setShowFrictionlessSigninDialog"),K.prototype),_applyDecoratedDescriptor(K.prototype,"setIsHalfSheetOpen",[n.action],Object.getOwnPropertyDescriptor(K.prototype,"setIsHalfSheetOpen"),K.prototype),K)},ihy0:(e,t,o)=>{var r=o("YWiy");function SDCAnnotationSuggestion218N(e){return r.createElement("svg",e,[r.createElement("rect",{x:"5",y:"9",width:"4",height:"1.5",rx:".5",ry:".5",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:0}),r.createElement("path",{d:"M18,3.30469c0-1.82227-1.48242-3.30469-3.3042-3.30469s-3.3042,1.48242-3.3042,3.30469c0,1.05371.50531,1.98315,1.27637,2.58862v1.52368c0,1.11816.90967,2.02832,2.02783,2.02832s2.02783-.91016,2.02783-2.02832v-1.52368c.77106-.60547,1.27637-1.53491,1.27637-2.58862ZM14.6958,1.5c.99463,0,1.8042.80957,1.8042,1.80469,0,.99414-.80957,1.80371-1.8042,1.80371s-1.8042-.80957-1.8042-1.80371c0-.99512.80957-1.80469,1.8042-1.80469ZM15.22363,7.41699c0,.29102-.23682.52832-.52783.52832s-.52783-.2373-.52783-.52832v-.86206c.17297.02808.34711.05347.52783.05347s.35486-.02539.52783-.05347v.86206Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:1}),r.createElement("g",{key:2},[r.createElement("path",{d:"M5,6.5v.5c0,.27612.22388.5.5.5h4.55078c-.21631-.4707-.37231-.97314-.46082-1.5h-4.08997c-.27612,0-.5.22388-.5.5Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:0}),r.createElement("path",{d:"M13,10.44922v3.55078h-5.51465c-2.74512,0-5.50684-2.22852-5.91211-4.76953-.29102-1.83203.29004-3.63086,1.59473-4.93555,1.09863-1.09766,2.54688-1.68848,4.0791-1.68848.31738,0,.6377.02539.95996.07617.55652.08911,1.07495.2832,1.56396.52979.15259-.48926.37134-.94824.63696-1.37476-.61182-.30396-1.26978-.52417-1.9646-.6355-2.35547-.37305-4.66602.36523-6.33496,2.03223C.45898,4.88184-.27539,7.15332.09277,9.4668c.52051,3.27051,3.90625,6.0332,7.39258,6.0332h5.76465c.68945,0,1.25-.56055,1.25-1.25v-3.33984c-.52673-.08862-1.0293-.24463-1.5-.46094Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:1})]),r.createElement("path",{d:"M18,13.60355v4.14645c0,.13807-.11193.25-.25.25h-4.14645c-.22273,0-.33427-.26929-.17678-.42678l4.14645-4.14645c.15749-.15749.42678-.04595.42678.17678Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:3})])}SDCAnnotationSuggestion218N.defaultProps={id:"a","data-name":"Icons",width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=SDCAnnotationSuggestion218N,SDCAnnotationSuggestion218N.default=SDCAnnotationSuggestion218N},"j7/m":(e,t,o)=>{var r=o("DZGl"),n=o("sXS8"),s=o("WcJz"),a=o("+x8F"),l=o("OLgS"),c=o("Otif"),p=o("suZy"),d=o("rHdP"),m="[object Arguments]",u="[object Array]",h="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function baseIsEqualDeep(e,t,o,y,C,_){var b=c(e),E=c(t),v=b?u:l(e),T=E?u:l(t),A=(v=v==m?h:v)==h,O=(T=T==m?h:T)==h,D=v==T;if(D&&p(e)){if(!p(t))return!1;b=!0,A=!1}if(D&&!A)return _||(_=new r),b||d(e)?n(e,t,o,y,C,_):s(e,t,v,o,y,C,_);if(!(1&o)){var P=A&&g.call(e,"__wrapped__"),I=O&&g.call(t,"__wrapped__");if(P||I){var S=P?e.value():e,w=I?t.value():t;return _||(_=new r),C(S,w,o,y,_)}}return!!D&&(_||(_=new r),a(e,t,o,y,C,_))}},j8Ty:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var r=o("NjQJ"),n=o.n(r),s=o("AXyZ"),a=o.n(s)()(n());a.push([e.id,".CommentsRHPIconPopover__commentIconPopover___kvr76{border-width:0;position:fixed;right:50px;transition:right .5s ease;width:211px;z-index:10000000}.CommentsRHPIconPopover__commentIconPopoverContent___lZaoC{align-items:flex-start;color:#fff;display:flex;font-size:12px;font-style:normal;font-weight:400;line-height:16px;margin:0;padding:3px 9px 5px;text-align:left}.CommentsRHPIconPopover__commentsRHPIconPopoverTip___ekhMn{background-color:var(--spectrum-global-color-blue-600);height:8px;position:absolute;right:-4px;top:18px;transform:rotate(45deg);width:8px}","",{version:3,sources:["webpack://./src/comments/CommentsRHPIconPopover.css"],names:[],mappings:"AAgBA,oDACI,cAAe,CACf,cAAe,CACf,UAAW,CACX,yBAA2B,CAC3B,WAAY,CACZ,gBACJ,CAEA,2DACI,sBAAuB,CACvB,UAAuD,CACvD,YAAa,CACb,cAAe,CACf,iBAAkB,CAClB,eAAgB,CAChB,gBAAiB,CACjB,QAAS,CACT,mBAAwB,CACxB,eACJ,CAEA,2DACI,sDAAuD,CACvD,UAAW,CACX,iBAAkB,CAClB,UAAW,CACX,QAAS,CACT,uBAAwB,CACxB,SACJ",sourcesContent:["/*************************************************************************\n * ADOBE CONFIDENTIAL\n * ___________________\n *\n *  Copyright 2024 Adobe\n *  All Rights Reserved.\n *\n * NOTICE:  All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n **************************************************************************/\n.commentIconPopover {\n    border-width: 0;\n    position: fixed;\n    right: 50px;\n    transition: right 0.5s ease;\n    width: 211px;\n    z-index: 10000000;\n}\n\n.commentIconPopoverContent {\n    align-items: flex-start;\n    color: var(--Palette-white, var(--Palette-white, #fff));\n    display: flex;\n    font-size: 12px;\n    font-style: normal;\n    font-weight: 400;\n    line-height: 16px;\n    margin: 0;\n    padding: 3px 9px 5px 9px;\n    text-align: left;\n}\n\n.commentsRHPIconPopoverTip {\n    background-color: var(--spectrum-global-color-blue-600);\n    height: 8px;\n    position: absolute;\n    right: -4px;\n    top: 18px;\n    transform: rotate(45deg);\n    width: 8px;\n}\n"],sourceRoot:""}]),a.locals={commentIconPopover:"CommentsRHPIconPopover__commentIconPopover___kvr76",commentIconPopoverContent:"CommentsRHPIconPopover__commentIconPopoverContent___lZaoC",commentsRHPIconPopoverTip:"CommentsRHPIconPopover__commentsRHPIconPopoverTip___ekhMn"};const l=a},jApL:(e,t,o)=>{var r=o("YWiy");function SDCAnnotationListNotification18N(e){return r.createElement("svg",e,[r.createElement("path",{d:"m7.46729,16c-2.50684,0-5.0298-2.05371-5.39941-4.39453-.17139-1.08545-.01117-2.15527.43884-3.10132-.03485-1.03857.14398-2.05005.50305-2.99609-.17981.146-.35657.29736-.52344.46362C.93408,7.51953.2417,9.6582.58643,11.83984c.48438,3.06836,3.63525,5.66016,6.88086,5.66016h5.28271c.68945,0,1.25-.56055,1.25-1.25v-.25h-6.53271Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:0}),r.createElement("path",{d:"m18,3.51656c0-.93899-.36426-1.82206-1.02539-2.48632s-1.54004-1.03024-2.47461-1.03024c-.93555,0-1.81445.36598-2.47559,1.03024-.66016.66426-1.02441,1.54732-1.02441,2.48632,0,.93997.36426,1.82206,1.02441,2.48632,1.32227,1.32852,3.62793,1.33048,4.9502,0,.66113-.66328,1.02539-1.54634,1.02539-2.48632Z",fill:"var(--iconBlue, #1473e6)",fillRule:"evenodd",strokeWidth:"0",key:1}),r.createElement("g",{key:2},[r.createElement("path",{d:"m10.17773,6h-1.67773c-.27612,0-.5.22388-.5.5v.5c0,.27612.22388.5.5.5h2.99878c-.18604-.13818-.37439-.27441-.53784-.43848-.31653-.3186-.56592-.68164-.7832-1.06152Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:0}),r.createElement("rect",{x:"8",y:"9",width:"4",height:"1.5",rx:".5",ry:".5",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:1}),r.createElement("path",{d:"m15.49609,8.4021c0,.01538.00391.02979.00391.04517v5.05273h-5.03271c-2.50684,0-5.03027-2.05371-5.39941-4.39453-.26855-1.70117.26953-3.36719,1.47754-4.57129.82727-.8252,1.87549-1.31421,2.99817-1.46558.04797-.54028.16516-1.06421.37732-1.55273-1.66162.07886-3.22729.75269-4.43457,1.95581-1.55225,1.54785-2.24463,3.68652-1.8999,5.86816.48389,3.06836,3.63477,5.66016,6.88086,5.66016h5.28271c.68945,0,1.25-.56055,1.25-1.25v-5.30273c0-.20459-.00977-.40747-.0271-.6084-.45923.25635-.95142.45947-1.47681.56323Z",fill:"var(--iconFill, #464646)",strokeWidth:"0",key:2})])])}SDCAnnotationListNotification18N.defaultProps={id:"a","data-name":"Icons",width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=SDCAnnotationListNotification18N,SDCAnnotationListNotification18N.default=SDCAnnotationListNotification18N},jP4i:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("WkRA"));t.default=class AnnotationCollection{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.type=e.type,this.id=e.id,this.count=e.total,this.annotations=e.first.items.map(e=>new r.default(e)),this.etag=t.etag,this.retryAfter=t.retryAfter||3}};e.exports=t.default},jmza:(e,t,o)=>{"use strict";var r=o("RrlM");function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,e.exports=function(){function shim(e,t,o,n,s,a){if(a!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e}},kPFd:(e,t,o)=>{"use strict";o.d(t,{Gz:()=>isMobileOrTablet,H8:()=>isChrome,NW:()=>getDeviceInfo,R0:()=>getOS,UP:()=>isEdge,X5:()=>getBrowser,cX:()=>isMac,gm:()=>isFirefox,lT:()=>isIE,nr:()=>isSafari,op:()=>isEdgeChromium,sq:()=>isCurrentDeviceMobile,uF:()=>isWindows});var r=o("klCL"),n=o.n(r);const s="chrome",a="safari",l="firefox",c="ie",p="edge",d="mobile",m="tablet",getBrowser=()=>(new(n())).getBrowser(),u=getBrowser(),getDeviceInfo=()=>(new(n())).getDevice(),isCurrentDeviceMobile=()=>{const e=getDeviceInfo();return Boolean(e.type&&e.type.toLowerCase()===d)},isMobileOrTablet=()=>{const e=getDeviceInfo();return Boolean(e.type&&(e.type.toLowerCase()===d||e.type.toLowerCase()===m))},isSafari=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:u).name.toLowerCase()===a},isFirefox=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:u).name.toLowerCase()===l},isChrome=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:u).name.toLowerCase()===s},isIE=()=>u.name.toLowerCase()===c,isEdge=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:u).name.toLowerCase()===p},isEdgeChromium=()=>window.navigator.userAgent.indexOf("Edg/")>-1,getOS=()=>(new(n())).getOS(),isMac=()=>{const e=getOS();return e&&"Mac OS"===e.name},isWindows=()=>{const e=getOS();return e&&"Windows"===e.name}},kQqw:(e,t,o)=>{var r=o("wsOM"),n=o("FL3/"),s=o("RS7y"),a=s&&s.isMap,l=a?n(a):r;e.exports=l},kiUt:(e,t,o)=>{"use strict";o.d(t,{A:()=>T});var r=o("abd3"),n=o("ezW3"),s=o("hGRN"),a=o("/Oxh");const l=class ReviewBootstrapData{constructor(e,t,o,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.reviewId=e,this.isOwner=t,this.canShare=o,this.canComment=r,this.commentingId=null!=n?n:e,this.assetId=null!=s?s:e,this.previewUrl=a,this.targetUrl=l,this.isLegacyAsset=c}};var c,p,d,m,u,h,g,y,C,_=o("EazC"),b=o("llUt");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _classPrivateFieldLooseBase(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var E=0;function _classPrivateFieldLooseKey(e){return"__private_"+E+++"_"+e}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}let v={};function _getReviewHandlerBootstrapData2(e){return new Promise((t,o)=>{v["review-handler"]().then(r=>{r.getSendBootstrapData(e).then(e=>{var o,r;const n=new l(e.parcel_data.id,e.privileges.owner,e.privileges.can_share_for_view||e.privileges.can_share_for_comment,e.privileges.can_make_comments,e.meta_list[0].commenting_urn,e.meta_list[0].asset_urn,e.parcel_data.preview_url,null===(o=e.request_access_configs)||void 0===o||null===(r=o.parameters)||void 0===r?void 0:r.targetUrl,e.is_legacy_asset);console.log("ReviewStore.getReviewHandlerBootstrapData: resolving to: ",n),t(n)}).catch(e=>{o(e)})}).catch(e=>{o(e)})})}function _getKwcHandlerBootstrapData2(e,t){return new Promise((o,r)=>{v["kwc-handler"]().then(n=>{n.getShareMetadata(e).then(e=>{var r,n;const s=new l(t,"creator"===e.role,e.can_share,e.can_comment,t,t,void 0,null===(r=e.request_access_configs)||void 0===r||null===(n=r.parameters)||void 0===n?void 0:n.targetUrl,!1);console.log("ReviewStore.getKwcHandlerBootstrapData: resolving to: ",s),o(s)}).catch(e=>{r(e)})}).catch(e=>{r(e)})})}function _setCommentsUrl2(){(0,n.k)(this.apis.getCommentsApiUrl()).then(e=>{this.setCommentsApiUrl(e)})}v=o("plsW").providers;const T=new(u=_classPrivateFieldLooseKey("bootstrapData"),h=_classPrivateFieldLooseKey("bootstrapDataPromise"),g=_classPrivateFieldLooseKey("getReviewHandlerBootstrapData"),y=_classPrivateFieldLooseKey("getKwcHandlerBootstrapData"),C=_classPrivateFieldLooseKey("setCommentsUrl"),p=_applyDecoratedDescriptor((c=class ReviewStore{constructor(){Object.defineProperty(this,C,{value:_setCommentsUrl2}),Object.defineProperty(this,y,{value:_getKwcHandlerBootstrapData2}),Object.defineProperty(this,g,{value:_getReviewHandlerBootstrapData2}),this.apis=void 0,this.parcelId=void 0,Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),_initializerDefineProperty(this,"commentsApiUrl",p,this),_initializerDefineProperty(this,"reviewExist",d,this),_initializerDefineProperty(this,"reviewLoaded",m,this),this.isEmojiReactionsEnabled=()=>this.reviewExist&&!_classPrivateFieldLooseBase(this,u)[u].isLegacyAsset,this.populateAnalyticsFromReviewData=()=>{const e=_.A.getInstance();(0,a.SD)()().then(t=>{t.fetchReviewConfig().then(t=>{e.setFileType(t.isACP?_.A.FILE_STORAGE_TYPE.ACP_FILE:_.A.FILE_STORAGE_TYPE.SC_FILE),e.setUserType(t.userType),e.setShareType(t.bootstrapData.privileges.can_make_comments?_.A.FILE_SHARE_TYPE.REVIEW_FILE:_.A.FILE_SHARE_TYPE.TRACK_FILE),e.setSharePrivileges(t.bootstrapData.privileges.owner?_.A.USER_SHARE_PRIVILEGES.SENDER:_.A.USER_SHARE_PRIVILEGES.RECIPIENT)})})}}initializeReviewData(){return new Promise(e=>{if((0,s.eF)()){const t=_.A.getInstance();v.user().then(async e=>{e.getStorageType().then(e=>{t.setFileType("ACP"===e?_.A.FILE_STORAGE_TYPE.ACP_FILE:_.A.FILE_STORAGE_TYPE.SC_FILE),t.setUserType(e)})}),this.setReviewLoaded(),e(!0)}else this.populateAnalyticsFromReviewData(),this.setReviewApis(),this.getSendBootstrapData().then(t=>{_classPrivateFieldLooseBase(this,u)[u]=t,this.parcelId=t.reviewId,this.setReviewExists(),this.setReviewLoaded(),e(!0)})})}getSendBootstrapData(){if(!_classPrivateFieldLooseBase(this,h)[h]){const e=b.PreviewStore.instance.assetUri,t=b.PreviewStore.instance.knowledgeWorkspaceId;_classPrivateFieldLooseBase(this,h)[h]=t?_classPrivateFieldLooseBase(this,y)[y](t,e):_classPrivateFieldLooseBase(this,g)[g](e)}return _classPrivateFieldLooseBase(this,h)[h]}getReview(){return new Promise((e,t)=>{(0,a.SD)()().then(t=>{const o=b.PreviewStore.instance.assetUri,r=t.getReview(o);e(r)}).catch(e=>{t(e)})})}setReviewLoaded(){this.reviewLoaded=!0}setReviewExists(){this.reviewExist=!0}resetReviewExists(){this.reviewExist=void 0}setReviewApis(){(0,a.SD)()().then(e=>{this.apis=e,(0,s.eF)()||_classPrivateFieldLooseBase(this,C)[C]()})}setCommentsApiUrl(e){this.commentsApiUrl=e}get reviewParticipantsComponent(){return this.reviewExist&&this.apis.getReviewParticipantsComponent()}get reviewFinishedComponent(){return this.reviewExist&&this.apis.getReviewFinishedComponent()}get reviewOpenInAcrobatView(){return this.reviewExist&&this.apis.getReviewOpenInAcrobatView()}getBootstrapData(){return _classPrivateFieldLooseBase(this,u)[u]}resetApis(){this.apis=void 0}resetReviewStoreCache(){this.resetApis(),this.resetReviewExists(),_classPrivateFieldLooseBase(this,h)[h]=void 0,_classPrivateFieldLooseBase(this,u)[u]=void 0}}).prototype,"commentsApiUrl",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=_applyDecoratedDescriptor(c.prototype,"reviewExist",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_applyDecoratedDescriptor(c.prototype,"reviewLoaded",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(c.prototype,"setReviewLoaded",[r.action],Object.getOwnPropertyDescriptor(c.prototype,"setReviewLoaded"),c.prototype),_applyDecoratedDescriptor(c.prototype,"setReviewExists",[r.action],Object.getOwnPropertyDescriptor(c.prototype,"setReviewExists"),c.prototype),_applyDecoratedDescriptor(c.prototype,"resetReviewExists",[r.action],Object.getOwnPropertyDescriptor(c.prototype,"resetReviewExists"),c.prototype),_applyDecoratedDescriptor(c.prototype,"setCommentsApiUrl",[r.action],Object.getOwnPropertyDescriptor(c.prototype,"setCommentsApiUrl"),c.prototype),c)},klCL:function(e,t,o){var r;!function(n,s){"use strict";var a="function",l="undefined",c="object",p="string",d="model",m="name",u="type",h="vendor",g="version",y="architecture",C="console",_="mobile",b="tablet",E="smarttv",v="wearable",T="embedded",A="Amazon",O="Apple",D="ASUS",P="BlackBerry",I="Browser",S="Chrome",w="Firefox",R="Google",M="Huawei",N="LG",L="Microsoft",x="Motorola",U="Opera",k="Samsung",F="Sharp",H="Sony",B="Xiaomi",j="Zebra",z="Facebook",enumerize=function(e){for(var t={},o=0;o<e.length;o++)t[e[o].toUpperCase()]=e[o];return t},has=function(e,t){return typeof e===p&&-1!==lowerize(t).indexOf(lowerize(e))},lowerize=function(e){return e.toLowerCase()},trim=function(e,t){if(typeof e===p)return e=e.replace(/^\s\s*/,""),typeof t===l?e:e.substring(0,350)},rgxMapper=function(e,t){for(var o,r,n,l,p,d,m=0;m<t.length&&!p;){var u=t[m],h=t[m+1];for(o=r=0;o<u.length&&!p;)if(p=u[o++].exec(e))for(n=0;n<h.length;n++)d=p[++r],typeof(l=h[n])===c&&l.length>0?2===l.length?typeof l[1]==a?this[l[0]]=l[1].call(this,d):this[l[0]]=l[1]:3===l.length?typeof l[1]!==a||l[1].exec&&l[1].test?this[l[0]]=d?d.replace(l[1],l[2]):s:this[l[0]]=d?l[1].call(this,d,l[2]):s:4===l.length&&(this[l[0]]=d?l[3].call(this,d.replace(l[1],l[2])):s):this[l]=d||s;m+=2}},strMapper=function(e,t){for(var o in t)if(typeof t[o]===c&&t[o].length>0){for(var r=0;r<t[o].length;r++)if(has(t[o][r],e))return"?"===o?s:o}else if(has(t[o],e))return"?"===o?s:o;return e},W={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[m,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[m,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[m,g],[/opios[\/ ]+([\w\.]+)/i],[g,[m,U+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[m,U]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[m,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[m,"UC"+I]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[m,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[m,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[m,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[m,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[m,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[m,/(.+)/,"$1 Secure "+I],g],[/\bfocus\/([\w\.]+)/i],[g,[m,w+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[m,U+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[m,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[m,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[m,U+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[m,"MIUI "+I]],[/fxios\/([-\w\.]+)/i],[g,[m,w]],[/\bqihu|(qi?ho?o?|360)browser/i],[[m,"360 "+I]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[m,/(.+)/,"$1 "+I],g],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[m,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[m],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[m,z],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[m,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[m,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[m,S+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[m,S+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[m,"Android "+I]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[m,g],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[g,[m,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[g,m],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[m,[g,strMapper,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[m,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[m,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[m,w+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[m,g],[/(cobalt)\/([\w\.]+)/i],[m,[g,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,"",lowerize]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[h,k],[u,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[h,k],[u,_]],[/\((ip(?:hone|od)[\w ]*);/i],[d,[h,O],[u,_]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[h,O],[u,b]],[/(macintosh);/i],[d,[h,O]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[h,M],[u,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[h,M],[u,_]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[h,B],[u,_]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[h,B],[u,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[h,"OPPO"],[u,_]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[h,"Vivo"],[u,_]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[d,[h,"Realme"],[u,_]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[h,x],[u,_]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[h,x],[u,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[h,N],[u,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[h,N],[u,_]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[h,"Lenovo"],[u,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[h,"Nokia"],[u,_]],[/(pixel c)\b/i],[d,[h,R],[u,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[h,R],[u,_]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[h,H],[u,_]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[h,H],[u,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[h,"OnePlus"],[u,_]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[h,A],[u,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[h,A],[u,_]],[/(playbook);[-\w\),; ]+(rim)/i],[d,h,[u,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[h,P],[u,_]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[h,D],[u,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[h,D],[u,_]],[/(nexus 9)/i],[d,[h,"HTC"],[u,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[d,/_/g," "],[u,_]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[h,"Acer"],[u,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[h,"Meizu"],[u,_]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[h,F],[u,_]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,d,[u,_]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,d,[u,b]],[/(surface duo)/i],[d,[h,L],[u,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[h,"Fairphone"],[u,_]],[/(u304aa)/i],[d,[h,"AT&T"],[u,_]],[/\bsie-(\w*)/i],[d,[h,"Siemens"],[u,_]],[/\b(rct\w+) b/i],[d,[h,"RCA"],[u,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[h,"Dell"],[u,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[h,"Verizon"],[u,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[h,"Barnes & Noble"],[u,b]],[/\b(tm\d{3}\w+) b/i],[d,[h,"NuVision"],[u,b]],[/\b(k88) b/i],[d,[h,"ZTE"],[u,b]],[/\b(nx\d{3}j) b/i],[d,[h,"ZTE"],[u,_]],[/\b(gen\d{3}) b.+49h/i],[d,[h,"Swiss"],[u,_]],[/\b(zur\d{3}) b/i],[d,[h,"Swiss"],[u,b]],[/\b((zeki)?tb.*\b) b/i],[d,[h,"Zeki"],[u,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],d,[u,b]],[/\b(ns-?\w{0,9}) b/i],[d,[h,"Insignia"],[u,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[h,"NextBook"],[u,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],d,[u,_]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],d,[u,_]],[/\b(ph-1) /i],[d,[h,"Essential"],[u,_]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[h,"Envizen"],[u,b]],[/\b(trio[-\w\. ]+) b/i],[d,[h,"MachSpeed"],[u,b]],[/\btu_(1491) b/i],[d,[h,"Rotor"],[u,b]],[/(shield[\w ]+) b/i],[d,[h,"Nvidia"],[u,b]],[/(sprint) (\w+)/i],[h,d,[u,_]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[h,L],[u,_]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[h,j],[u,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[h,j],[u,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,d,[u,C]],[/droid.+; (shield) bui/i],[d,[h,"Nvidia"],[u,C]],[/(playstation [345portablevi]+)/i],[d,[h,H],[u,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[h,L],[u,C]],[/smart-tv.+(samsung)/i],[h,[u,E]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[h,k],[u,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,N],[u,E]],[/(apple) ?tv/i],[h,[d,O+" TV"],[u,E]],[/crkey/i],[[d,S+"cast"],[h,R],[u,E]],[/droid.+aft(\w)( bui|\))/i],[d,[h,A],[u,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[h,F],[u,E]],[/(bravia[\w ]+)( bui|\))/i],[d,[h,H],[u,E]],[/(mitv-\w{5}) bui/i],[d,[h,B],[u,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[h,trim],[d,trim],[u,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,E]],[/((pebble))app/i],[h,d,[u,v]],[/droid.+; (glass) \d/i],[d,[h,R],[u,v]],[/droid.+; (wt63?0{2,3})\)/i],[d,[h,j],[u,v]],[/(quest( 2)?)/i],[d,[h,z],[u,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[u,T]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[d,[u,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[u,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[u,_]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[m,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[m,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[m,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,m]],os:[[/microsoft (windows) (vista|xp)/i],[m,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[m,[g,strMapper,W]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,"Windows"],[g,strMapper,W]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[m,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[m,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,m],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[m,g],[/\(bb(10);/i],[g,[m,P]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[m,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[m,w+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[m,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[m,S+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[m,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[m,g],[/(sunos) ?([\w\.\d]*)/i],[[m,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[m,g]]},UAParser=function(e,t){if(typeof e===c&&(t=e,e=s),!(this instanceof UAParser))return new UAParser(e,t).getResult();var o=e||(typeof n!==l&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),r=t?function(e,t){var o={};for(var r in e)t[r]&&t[r].length%2==0?o[r]=t[r].concat(e[r]):o[r]=e[r];return o}(G,t):G;return this.getBrowser=function(){var e,t={};return t[m]=s,t[g]=s,rgxMapper.call(t,o,r.browser),t.major=typeof(e=t.version)===p?e.replace(/[^\d\.]/g,"").split(".")[0]:s,t},this.getCPU=function(){var e={};return e[y]=s,rgxMapper.call(e,o,r.cpu),e},this.getDevice=function(){var e={};return e[h]=s,e[d]=s,e[u]=s,rgxMapper.call(e,o,r.device),e},this.getEngine=function(){var e={};return e[m]=s,e[g]=s,rgxMapper.call(e,o,r.engine),e},this.getOS=function(){var e={};return e[m]=s,e[g]=s,rgxMapper.call(e,o,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=typeof e===p&&e.length>350?trim(e,350):e,this},this.setUA(o),this};UAParser.VERSION="1.0.33",UAParser.BROWSER=enumerize([m,g,"major"]),UAParser.CPU=enumerize([y]),UAParser.DEVICE=enumerize([d,h,u,C,_,E,b,v,T]),UAParser.ENGINE=UAParser.OS=enumerize([m,g]),typeof t!==l?(e.exports&&(t=e.exports=UAParser),t.UAParser=UAParser):o.amdO?(r=function(){return UAParser}.call(t,o,t,e))===s||(e.exports=r):typeof n!==l&&(n.UAParser=UAParser);var V=typeof n!==l&&(n.jQuery||n.Zepto);if(V&&!V.ua){var K=new UAParser;V.ua=K.getResult(),V.ua.get=function(){return K.getUA()},V.ua.set=function(e){K.setUA(e);var t=K.getResult();for(var o in t)V.ua[o]=t[o]}}}("object"==typeof window?window:this)},klh1:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(o("+v41")),n=function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var o=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?r:o){if(n.has(e))return n.get(e);n.set(e,a)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(a,t,s):a[t]=e[t]);return a}(e,t)}(o("4cbv")),s=_interopRequireDefault(o("Fyfs"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}class Review{setBootstrapData(e,t){this._cacheBootstrapPromiseSmallRendition(e.toLowerCase(),t)}_cacheBootstrapDataSmallRendition(e,t){const o=Review.sendBootstrapDataSmallRendition;200===Review.sendBootstrapDataSmallRenditionLength.length&&delete o[Review.sendBootstrapDataSmallRenditionLength.shift()],Review.sendBootstrapDataSmallRenditionLength.push(e),o[e]=t}_cacheBootstrapPromiseSmallRendition(e,t){const o=Review.sendBootstrapPromiseSmallRendition;200===Review.sendBootstrapPromiseSmallRenditionLength.length&&delete o[Review.sendBootstrapPromiseSmallRenditionLength.shift()],Review.sendBootstrapPromiseSmallRenditionLength.push(e),o[e]=t}static getReviewCacheManager(){return Review._reviewCacheInstance||(Review._reviewCacheInstance=new r.default("REVIEW")),Review._reviewCacheInstance}static addReviewApiListeners(e,t){s.default.emitterInstance.on(e,t)}static isAssetUriHttpLink(e){return s.default.isAssetUriHttpLink(e)}static getAssetUri(){return s.default.getAssetUri()}static getSendBootstrapUri(e,t){new n.default.Confclass(t);let o=n.default.Confclass.getSendAndTrackBaseURL().split("/");o="https://"+o[2]+"/";let r=o+"a/preview/"+e;return r.endsWith("#")&&(r=r.slice(0,-1)),r}static removeReviewInstance(e,t){let o=this.getSendBootstrapUri(e,t);this.getReviewCacheManager().removeInstance(o)}static addApiClientInfo(e){e["x-api-client-info"]=JSON.stringify(s.default.detectBrowserProps())}static getInstance(e,t,o){let r=this.getSendBootstrapUri(e,t),n=this.getReviewCacheManager().createInstance(r);return null!=t&&(n.environment=t),o&&o.getAccessTokenInfo()&&o.getAccessTokenInfo().access_token&&(n.Authorization="Bearer "+o.getAccessTokenInfo().access_token),n}constructor(e){this.cacheInstanceKey=e.toLowerCase(),"#"===e[e.length-1]&&(e=e.slice(0,-1)),this.sendBootstrapUri=e+"/bootstrap",this.downloadAssetIndex=0}clearAllData(){this.sendBootstrapData=void 0,this.reviewData=void 0,this.sendBootstrapDataPromise=void 0,this.reviewDataPromise=void 0,this.clearSmallRenditionData()}clearSmallRenditionData(){if(this.cacheInstanceKey){if(Review.sendBootstrapDataSmallRendition[this.cacheInstanceKey]){Review.sendBootstrapDataSmallRendition[this.cacheInstanceKey]=void 0;const e=Review.sendBootstrapDataSmallRenditionLength.findIndex(e=>e==this.cacheInstanceKey);e>-1&&Review.sendBootstrapDataSmallRenditionLength.splice(e,1)}if(Review.sendBootstrapPromiseSmallRendition[this.cacheInstanceKey]){Review.sendBootstrapPromiseSmallRendition[this.cacheInstanceKey]=void 0;const e=Review.sendBootstrapPromiseSmallRenditionLength.findIndex(e=>e==this.cacheInstanceKey);e>-1&&Review.sendBootstrapPromiseSmallRenditionLength.splice(e,1)}}}getSendBootstrapData(e,t,o,r){return void 0===e&&(e=!1),void 0===t&&(t=!0),void 0===o&&(o=null),void 0===r&&(r=!1),!e&&(!t&&void 0!==this.sendBootstrapData||t&&void 0!==Review.sendBootstrapDataSmallRendition[this.cacheInstanceKey])?new Promise(t?(e,t)=>{e(Review.sendBootstrapDataSmallRendition[this.cacheInstanceKey])}:(e,t)=>{e(this.sendBootstrapData)}):!e&&(!t&&void 0!==this.sendBootstrapDataPromise||t&&void 0!==Review.sendBootstrapPromiseSmallRendition[this.cacheInstanceKey])?t?Review.sendBootstrapPromiseSmallRendition[this.cacheInstanceKey]:this.sendBootstrapDataPromise:this._fetchSendBootstrapData(t,o,r)}getReviewConsent(e){return void 0!==this.reviewConsent?new Promise((e,t)=>{e(this.reviewConsent)}):void 0!==this.reviewConsentPromise?this.reviewConsentPromise:this._fetchReviewConsent(e)}_fetchSendBootstrapDataFromEdgeWorker(e){const t=s.default.getAssetUri(),o={"Content-Type":"application/json"};e.auth&&(o.authorization=e.auth);const r=`/link/api/sendBootstrapData?id=${t}`;return s.default.fetch(r,"GET",void 0,o).catch(e=>{var t,o,r,n;throw e.response={...e.response,json:function(){return this},error:{code:null===(t=e.response)||void 0===t||null===(o=t.status)||void 0===o?void 0:o.toString(),message:`${null===(r=e.response)||void 0===r?void 0:r.status} ${null===(n=e.response)||void 0===n?void 0:n.statusText}`}},e})}_fetchSendBootstrapData(e,t,o){if(null!=this.sendBootstrapUri){let r=n.config.api.fetchSendBootstrapData.headers;this.Authorization&&(r.Authorization=this.Authorization),r["x-visitor-id"]=t,Review.addApiClientInfo(r);let a=this.sendBootstrapUri;e&&(a+="?shareinfo="+e);let l=new Promise((t,l)=>{window.performance&&window.performance.mark&&window.performance.mark("comments_sdk_sendbootstrap-start"),(o?this._fetchSendBootstrapDataFromEdgeWorker({auth:this.Authorization}):s.default.fetch(a,n.config.api.fetchSendBootstrapData.method,void 0,r)).then(o=>{window.performance&&window.performance.mark&&window.performance.mark("comments_sdk_sendbootstrap-end"),o.hasOwnProperty("data")&&(o=o.data),e||(this.sendBootstrapData=o),this._cacheBootstrapDataSmallRendition(this.cacheInstanceKey,o),t(o)}).catch(t=>{e||(this.sendBootstrapDataPromise=void 0),this._cacheBootstrapPromiseSmallRendition(this.cacheInstanceKey,void 0),l(t.response)})});return e||(this.sendBootstrapDataPromise=l),this._cacheBootstrapPromiseSmallRendition(this.cacheInstanceKey,l),l}return new Promise((e,t)=>{t(void 0)})}getReviewParticipants(e){return new Promise((t,o)=>{this.isReviewDataExist(e).then(e=>{e?this.getReviewInfo().then(e=>{t(e.participants.first.items)}).catch(e=>{t(void 0)}):t(void 0)}).catch(e=>{t(void 0)})})}getReviewInfo(e){return e||void 0===this.reviewData?e||void 0===this.reviewDataPromise?this._fetchReviewInfo():this.reviewDataPromise:new Promise((e,t)=>{e(this.reviewData)})}_fetchReviewInfo(){let e=new Promise((e,t)=>{if(null!=this.reviewUrl){let t=n.config.api.fetchReviewData.headers;new n.default.Confclass(this.environment);t["x-api-key"]=n.default.Confclass.getReviewApiKey(),s.default.fetch(this.reviewUrl,n.config.api.fetchReviewData.method,void 0,t).then(t=>{t.hasOwnProperty("data")&&(t=t.data),this.reviewData=t,e(t)}).catch(t=>{e(void 0)})}else this.getSendBootstrapData().then(o=>{null!=o&&e(void 0),this.reviewUrl=o.parcel_data.review.url;let r=n.config.api.fetchReviewData.headers;new n.default.Confclass(this.environment);r["x-api-key"]=n.default.Confclass.getReviewApiKey(),s.default.fetch(this.reviewUrl,n.config.api.fetchReviewData.method,void 0,r).then(t=>{t.hasOwnProperty("data")&&(t=t.data),this.reviewData=t,e(t)}).catch(e=>{t()})}).catch(t=>{e(void 0)})});return this.reviewDataPromise=e,e}getReviewResource(){if(null!=this.resourceUrl){let e=n.config.api.fetchReviewResource.headers;new n.default.Confclass(this.environment);return e["x-api-key"]=n.default.Confclass.getReviewApiKey(),s.default.fetch(this.resourceUrl,n.config.api.fetchReviewResource.method,void 0,e)}}setReviewStatus(e,t,o,r){return new Promise((a,l)=>{this.isReviewDataExist().then(l=>{if(l){var c={status:e};let l=n.config.api.finishAReview.headers;l["x-user-auth"]="Bearer "+r,l["If-Match"]=t;new n.default.Confclass(this.environment);l["x-api-key"]=n.default.Confclass.getReviewApiKey(),s.default.fetch(o,n.config.api.finishAReview.method,c,n.config.api.finishAReview.headers).then(e=>{a(e)}).catch(e=>{a(void 0)})}else a(void 0)}).catch(e=>{a(void 0)})})}addParticipant(e,t){return new Promise((o,r)=>{this.isReviewDataExist().then(r=>{if(r){let r={userProfile:{email:e}};this.reviewUrl;n.config.api.addReviewParticipant.headers["x-user-auth"]="Bearer "+t,s.default.fetch(this.reviewParticipantsUrl,n.config.api.addReviewParticipant.method,r,n.config.api.addReviewParticipant.headers).then(e=>{o(e)}).catch(e=>{o(void 0)})}else o(void 0)})})}setDownloadAssetIndex(e){this.downloadAssetIndex=e&&e>0?e:0}getDownloadAssetIndex(){return this.downloadAssetIndex}getOnlySendTrackBaseURL(e){let t=e.split("/");return t="https://"+t[2]+"/",t}getDownloadTicket(e,t,o){return new Promise((t,r)=>{this.getSendBootstrapData().then(r=>{new n.default.Confclass(this.environment);let a=this.getOnlySendTrackBaseURL(n.default.Confclass.getSendAndTrackBaseURL())+"a/invitation/"+e+"/asset/"+o+"/ftpdf",l=n.config.api.fetchFileDownloadLink.headers;this.Authorization&&(l.Authorization=this.Authorization),s.default.fetch(a,n.config.api.fetchFileDownloadLink.method,{},l).then(e=>{e.hasOwnProperty("data")&&(e=e.data),t(e.url)}).catch(e=>{t(void 0)})})})}unshareReview(e,t,o){return void 0===o&&(o=!1),new Promise((r,a)=>{new n.default.Confclass(this.environment);let l=n.default.Confclass.getSendAndTrackBaseURL()+"parcels/"+e+"/is_active?deleteAnnots="+o;n.config.api.unshareReview.headers.Authorization="Bearer "+t,s.default.fetch(l,n.config.api.unshareReview.method,{value:!1},n.config.api.unshareReview.headers).then(e=>{r(e)}).catch(e=>{console.error(e),a()})})}deleteReview(e,t){return new Promise((o,r)=>{new n.default.Confclass(this.environment);let a=n.default.Confclass.getSendAndTrackBaseURL()+"parcels/"+e;n.config.api.deleteReview.headers.Authorization="Bearer "+t,s.default.fetch(a,n.config.api.deleteReview.method,void 0,n.config.api.deleteReview.headers).then(e=>{o(e)}).catch(e=>{console.error(e),r()})})}addReviewer(e,t,o,r,a){return void 0===a&&(a={}),new Promise((l,c)=>{var p,d={recipients:t};(null===(p=a)||void 0===p?void 0:p.emailMessage)&&(d.notification={parameters:{email_message:a.emailMessage}},a.emailSubject&&(d.notification.parameters.email_subject=a.emailSubject));new n.default.Confclass(this.environment);let m=n.default.Confclass.getSendAndTrackBaseURL()+"parcels/"+e+"/invitation",u=n.config.api.addReviewer.headers;2===r&&(u.Accept="application/vnd.adobe.skybox+json;version=2"),u.Authorization="Bearer "+o,s.default.fetch(m,n.config.api.addReviewer.method,d,n.config.api.addReviewer.headers).then(e=>{if(this.reviewData){let e=this.reviewData.participants.first.items;t.forEach(function(t){e.push({email:t})})}l(e)}).catch(e=>{console.error(e),c(e)})})}removeReviewer(e,t){return new Promise((o,r)=>{new n.default.Confclass(this.environment);let a=n.default.Confclass.getSendAndTrackBaseURL()+"invitation/"+e+"/consent";n.config.api.removeReviewer.headers.Authorization="Bearer "+t,s.default.fetch(a,n.config.api.removeReviewer.method,void 0,n.config.api.removeReviewer.headers).then(e=>{o(e)}).catch(e=>{console.error(e),r()})})}updateReviewInfo(e,t,o){return new Promise((r,a)=>{this.isReviewDataExist().then(l=>{if(l){let l=this.reviewUrl+"/review_info",c=n.config.api.updateReviewInfo.headers;new n.default.Confclass(this.environment);c["x-api-key"]=n.default.Confclass.getReviewApiKey(),c["x-user-auth"]="Bearer "+o,c["If-Match"]=t,s.default.fetch(l,n.config.api.updateReviewInfo.method,e,c).then(t=>{e.hasOwnProperty("intro_message")&&(this.reviewData.review_info.intro_message=e.intro_message),e.hasOwnProperty("deadline_date")&&(this.reviewData.review_info.deadline_date=e.deadline_date),r(t)}).catch(e=>{a()})}else a()})})}getCommentsURL(){new n.default.Confclass(this.environment);return n.default.Confclass.getURL()}getDownloadURI(){return new Promise((e,t)=>{this.getSendBootstrapData().then(t=>{let o=t.parcel_data.invitation,r=t.meta_list[this.downloadAssetIndex].id,a=(new n.default.Confclass(this.environment),this.getOnlySendTrackBaseURL(n.default.Confclass.getSendAndTrackBaseURL())+"a/invitation/"+o+"/asset/"+r+"/ftpdf"),l=n.config.api.fetchFileDownloadLink.headers;this.Authorization&&(l.Authorization=this.Authorization),s.default.fetch(a,n.config.api.fetchFileDownloadLink.method,void 0,l).then(t=>{t.hasOwnProperty("data")&&(t=t.data),e(t.url)}).catch(t=>{e(void 0)})})})}getFileDownloadURL(e,t,o){return void 0===e&&(e="download"),void 0===t&&(t=!1),new Promise((r,a)=>{this.getSendBootstrapData().then(a=>{let l=a.parcel_data.invitation,c=a.parcel_data.id,p=a.meta_list[this.downloadAssetIndex].id;o&&(p=o);let d="invitation_id="+l+"&parcel_id="+c+"&file_id="+p+"&action_id="+e+"&make_direct_storage_uri="+t,m=(new n.default.Confclass(this.environment),this.getOnlySendTrackBaseURL(n.default.Confclass.getSendAndTrackBaseURL())+"a/track"),u=n.config.api.getFileDownloadUrl.headers;this.Authorization&&(u.Authorization=this.Authorization),s.default.fetch(m,n.config.api.getFileDownloadUrl.method,d,u).then(e=>{e.hasOwnProperty("data")&&(e=e.data),r(e.url)}).catch(e=>{r(void 0)})})})}getFileDownloadURLByAssetUri(e,t,o){return void 0===t&&(t="download"),void 0===o&&(o=!1),new Promise((r,a)=>{let l="invitation_id="+e+"&parcel_id="+e+"&file_id="+e+"&action_id="+t+"&make_direct_storage_uri="+o,c=(new n.default.Confclass(this.environment),this.getOnlySendTrackBaseURL(n.default.Confclass.getSendAndTrackBaseURL())+"a/track"),p=n.config.api.getFileDownloadUrl.headers;this.Authorization&&(p.Authorization=this.Authorization),s.default.fetch(c,n.config.api.getFileDownloadUrl.method,l,p).then(e=>{e.hasOwnProperty("data")&&(e=e.data),r(e.url)}).catch(e=>{r(void 0)})})}_getConsentURL(e,t){return t+"invitation/"+e.parcel_data.invitation+"/consent"}getRenditionUrl(e,t){return new Promise((o,r)=>{this.getSendBootstrapData().then(s=>{let a,l;s&&s.meta_list&&s.meta_list instanceof Array&&s.meta_list.length>0&&(l=s.meta_list[0].id);let c=parseInt(t,10);if(s&&s.meta_list&&s.meta_list instanceof Array&&s.meta_list.length>0&&"application/pdf"==s.meta_list[0].content_type&&c>500&&s.parcel_data&&s.parcel_data.hasOwnProperty("review"))return null;s&&s.parcel_data&&(a=s.parcel_data.invitation);new n.default.Confclass(this.environment);if(a&&l){let t,r=this.getOnlySendTrackBaseURL(n.default.Confclass.getSendAndTrackBaseURL())+"a/invitation/"+encodeURIComponent(a)+"/asset/"+encodeURIComponent(l);switch(!0){case c<=30:t="/icon";break;case c<=120:t="/thumbnail";break;case c<=500:t="/tile";break;default:t="/preview"}r+=t,e&&(r+="?page="+e),o(r)}else r("invalid invitationId or id")}).catch(e=>{r(e)})})}_fetchReviewConsent(e){const t=!e||e.shareinfo;let o=n.config.api.fetchReviewConsent.headers,r=new Promise((e,r)=>{this.Authorization?this.getSendBootstrapData(false,t).then(t=>{new n.default.Confclass(this.environment);let a=this._getConsentURL(t,n.default.Confclass.getSendAndTrackBaseURL());o.Authorization=this.Authorization,s.default.fetch(a,n.config.api.fetchReviewConsent.method,void 0,o).then(t=>{this.reviewConsent=t,e(t)}).catch(e=>{r(e)})}):r({status:403})});return this.reviewConsentPromise=r,r}addReviewConsent(){let e=n.config.api.postReviewConsent.headers;return new Promise((t,o)=>{this.getSendBootstrapData().then(r=>{new n.default.Confclass(this.environment);let a=this._getConsentURL(r,n.default.Confclass.getSendAndTrackBaseURL());e.Authorization=this.Authorization,s.default.fetch(a,n.config.api.postReviewConsent.method,void 0,e).then(e=>{this.reviewConsent=e,t(e)}).catch(e=>{o(e)})})})}deleteReviewConsent(){let e=n.config.api.deletReviewConsent.headers;return new Promise((t,o)=>{this.getSendBootstrapData().then(r=>{new n.default.Confclass(this.environment);let a=this._getConsentURL(r,n.default.Confclass.getSendAndTrackBaseURL());e.Authorization=this.Authorization,s.default.fetch(a,n.config.api.deletReviewConsent.method,void 0,e).then(e=>{this.reviewConsent=e,t(e)}).catch(e=>{o(e)})})})}submitReportAbuse(e,t){return new Promise(o=>{new n.default.Confclass(this.environment);let r=n.default.Confclass.getSendAndTrackBaseURL()+"abusereport/invitation/"+t,a=n.config.api.reportAbuse.headers;o(s.default.fetch(r,n.config.api.setEmailPrefs.method,e,a))})}static getSendAndTrackURL(e){return new Promise(t=>{new n.default.Confclass(e);let o={Accept:"application/vnd.adobe.skybox+json;version=1"},r=n.default.Confclass.getSendAndTrackBaseURL(),a=n.default.Confclass.getURL();if(r&&a)t({sendApi:r,commentingUri:a});else{let e=n.default.Confclass.getFilesApiURL()+"api/base_uris";s.default.fetch(e,"GET",null,o).then(e=>{t({sendApi:e.data.send_api,commentingUri:e.data.commenting_uri})})}})}fetchRecipientsData(e,t){return new Promise(o=>{new n.default.Confclass(this.environment);let r=n.default.Confclass.getSendAndTrackBaseURL()+"parcels/"+e,a=n.config.api.fetchRecipientsData.headers;a.Authorization="Bearer "+t,o(s.default.fetch(r,n.config.api.fetchRecipientsData.method,undefined,a))})}isReviewUrlExist(e){const t=!e||e.shareinfo;return new Promise(e=>{this.getSendBootstrapData(false,t).then(t=>{void 0===t&&e(!1),this.reviewUrl=t.parcel_data.review.url,void 0!==this.reviewUrl&&null!==this.reviewUrl||e(!1),e(!0)}).catch(t=>{e(!1)})})}isReviewDataExist(e){return new Promise(t=>{this.isReviewUrlExist(e).then(e=>{void 0!==e&&e?this.getReviewInfo().then(e=>{t(void 0!==e)}).catch(e=>{t(!1)}):t(!1)}).catch(e=>{t(!1)})})}fetchProfilePicUrl(e,t,o){let r=new Promise((r,a)=>{o=void 0!==o?o:n.config.featureFlipper.imsClientId;new n.default.Confclass(this.environment);let l=n.default.Confclass.getBehanceApiURL()+"v2/users/"+e+"?api_key="+o,c={Authorization:"Bearer "+t};s.default.fetch(l,"GET",void 0,c).then(t=>{t.data&&(t=t.data),t.user&&t.user.images?(this.profilePicUrlList[e]=t.user.images,r(t.user.images)):a("Profile Image does not exist!!!")})});return this.profilePicUrlListPromise[e]=r,r}getProfilePicUrl(e,t,o){return void 0===this.profilePicUrlList&&(this.profilePicUrlList=new Map),void 0===this.profilePicUrlListPromise&&(this.profilePicUrlListPromise=new Map),this.profilePicUrlList[e]?new Promise((t,o)=>{t(this.profilePicUrlList[e])}):this.profilePicUrlListPromise[e]?this.profilePicUrlListPromise[e]:this.fetchProfilePicUrl(e,t,o)}fetchCollaborators(e,t){return new Promise((o,r)=>{new n.default.Confclass(this.environment);let a=n.default.Confclass.getSendAndTrackBaseURL()+"assets/"+e+"/collaborators",l=n.config.api.fetchCollaborators.headers;l.Authorization="Bearer "+t,s.default.fetch(a,n.config.api.fetchCollaborators.method,void 0,l).then(e=>{o(e.data)}).catch(e=>{r(e)})})}setUserReviewStatus(e,t,o,r){return new Promise((a,l)=>{new n.default.Confclass(this.environment);var c={status:e};let p=n.default.Confclass.getSendAndTrackBaseURL()+"assets/"+t+"/collaborators/"+o+"/review_status",d=n.config.api.setUserReviewStatus.headers;d.Authorization="Bearer "+r,s.default.fetch(p,n.config.api.setUserReviewStatus.method,c,d).then(e=>{a(e)}).catch(e=>{console.error(e),l(e)})})}getUserReviewStatus(e,t,o){return new Promise((r,a)=>{new n.default.Confclass(this.environment);let l=n.default.Confclass.getSendAndTrackBaseURL()+"assets/"+e+"/collaborators/"+t+"/review_status",c=n.config.api.setUserReviewStatus.headers;c.Authorization="Bearer "+o,s.default.fetch(l,n.config.api.getUserReviewStatus.method,void 0,c).then(e=>{r(e)}).catch(e=>{console.error(e),a(e)})})}}Review.sendBootstrapDataSmallRenditionLength=[],Review.sendBootstrapPromiseSmallRenditionLength=[],Review.sendBootstrapDataSmallRendition={},Review.sendBootstrapPromiseSmallRendition={};t.default=Review;e.exports=t.default},lD0t:e=>{e.exports=function arrayFilter(e,t){for(var o=-1,r=null==e?0:e.length,n=0,s=[];++o<r;){var a=e[o];t(a,o,e)&&(s[n++]=a)}return s}},ljF6:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(o("+v41")),n=_interopRequireDefault(o("Uhg2")),s=_interopRequireDefault(o("0m+a")),a=_interopRequireDefault(o("4cbv")),l=_interopRequireDefault(o("zAyk")),c=_interopRequireDefault(o("klh1")),p=_interopRequireDefault(o("tAbr")),d=_interopRequireDefault(o("yOdR"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t.default={CacheManager:r.default,Client:n.default,Asset:s.default,Annotation:l.default,Review:c.default,UserAuthorizationModel:p.default,Appconf:a.default,AccessRequest:d.default};e.exports=t.default},llUt:(e,t,o)=>{"use strict";o.r(t),o.d(t,{PreviewStore:()=>PreviewStore});class PreviewStore{static createInstanceFromPreviewProps(e){var t,o,r;PreviewStore.clear();const n=new PreviewStore;n._apis=e.apis,n._assetUri=e.config.assetUri,n._useMobileModernViewer=e.config.useMobileModernViewer,n._knowledgeWorkspaceId=null===(t=e.config.commentsAdditionalConfig)||void 0===t?void 0:t.knowledgeWorkspaceId,n._knowledgeWorkspaceType=null===(o=e.config.commentsAdditionalConfig)||void 0===o?void 0:o.knowledgeWorkspaceType,n._getUpdatedPDFBufferForKWDownload=null===(r=e.config.commentsAdditionalConfig)||void 0===r?void 0:r.getUpdatedPDFBuffer,PreviewStore._instance=n}static clear(){PreviewStore._instance&&PreviewStore._instance.reset(),PreviewStore._instance=void 0}static hasInstance(){return!!PreviewStore._instance}static get instance(){if(!PreviewStore._instance)throw new Error("Call to getInstance before createInstanceFromPreviewProps");return PreviewStore._instance}constructor(){this.reset()}reset(){this._apis=void 0,this._assetUri=void 0,this._useMobileModernViewer=void 0,this._knowledgeWorkspaceId=void 0,this._knowledgeWorkspaceType=void 0,this._getUpdatedPDFBufferForKWDownload=void 0}get assetUri(){return this._assetUri}get useMobileModernViewer(){return this._useMobileModernViewer}get knowledgeWorkspaceId(){return this._knowledgeWorkspaceId}get knowledgeWorkspaceType(){return this._knowledgeWorkspaceType}get getUpdatedPDFBufferForKWDownload(){return this._getUpdatedPDFBufferForKWDownload}get apis(){return this._apis}get previewPublicApis(){var e;return null===(e=this._apis)||void 0===e?void 0:e.previewPublicApis}get rhpApis(){var e;return(null===(e=this.previewPublicApis)||void 0===e?void 0:e.rhp)?Promise.resolve(this.previewPublicApis.rhp):Promise.reject()}get quickToolsApis(){var e;return null===(e=this.previewPublicApis)||void 0===e?void 0:e.quickTools}get bottomBoardApis(){var e;return null===(e=this.previewPublicApis)||void 0===e?void 0:e.bottomBoard}get documentApis(){var e;return null===(e=this.previewPublicApis)||void 0===e?void 0:e.document}get goToPage(){var e;return null===(e=this.documentApis)||void 0===e?void 0:e.goto}get getPagesInView(){var e;return null===(e=this.documentApis)||void 0===e?void 0:e.getPagesInView}get zoomIn(){var e;return null===(e=this.documentApis)||void 0===e?void 0:e.zoomIn}get documentEvents(){var e;return null===(e=this._apis)||void 0===e?void 0:e.documentEvents}get appApis(){var e;return null===(e=this.previewPublicApis)||void 0===e?void 0:e.app}get getCurrentPageNumber(){var e;return null===(e=this.documentApis)||void 0===e?void 0:e.getCurrentPageNumber}get getViewMode(){var e;return null===(e=this.documentApis)||void 0===e?void 0:e.getViewMode}}},"lqA/":(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function transform(e,t){switch(e.type){case"AnnotationCollection":return new r.default(e,t);case"Annotation":return new n.default(e,t);default:return e}};var r=_interopRequireDefault(o("jP4i")),n=_interopRequireDefault(o("WkRA"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},lxiP:e=>{e.exports=function cacheHas(e,t){return e.has(t)}},m8yz:e=>{e.exports=function stubFalse(){return!1}},mC27:(e,t,o)=>{var r=o("ysGJ"),n=o("uvxz"),s=o("A2Of"),a=o("M2M1"),l=o("PRz2");e.exports=function initCloneByTag(e,t,o){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return n(e,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(e,o);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return s(e);case"[object Symbol]":return a(e)}}},mOsn:(e,t,o)=>{"use strict";o.d(t,{A:()=>Ue});var r,n,s,a,l,c,p,d,m,u,h,g,y,C=o("abd3"),_=o("plsW"),b=o("0/0f"),E=o("nnZV"),v=o("CKE+"),T=o("kiUt"),A=o("6AL6"),O=o("G5bJ"),D=o("D/Yr"),P=o("hGRN"),I=o("/Oxh"),S=o("9+t3"),w=o("WJQs"),R=o("YY8+"),M=o("WJZ5");function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const N=(n=_applyDecoratedDescriptor((r=class CommentSelectorStore{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.node=void 0,this.type=void 0,this.subtype=void 0,_initializerDefineProperty(this,"strokeColor",n,this),_initializerDefineProperty(this,"strokeWidth",s,this),_initializerDefineProperty(this,"opacity",a,this),this.refinedBy=void 0,_initializerDefineProperty(this,"noteX",l,this),_initializerDefineProperty(this,"noteY",c,this),_initializerDefineProperty(this,"quadPoints",p,this),_initializerDefineProperty(this,"boundingBox",d,this),_initializerDefineProperty(this,"inkList",m,this),_initializerDefineProperty(this,"style",u,this),_initializerDefineProperty(this,"textOffsetPoint",h,this),this.descent=void 0,this.lineHeight=void 0,this.selector=void 0,this.appearance=void 0,this.styleClass=void 0,_initializerDefineProperty(this,"appearanceData",g,this),_initializerDefineProperty(this,"rect",y,this),this.selector=e,this.node=e.node,this.subtype=e.subtype,this.style=e.style,this.textOffsetPoint=e.textOffsetPoint,this.setStrokeColorAndWidth(e),this.setAnnotOpacity(e),this.type=e.type,this.refinedBy=e.refinedBy,this.isUndo=t,this.setQuadPointsAndBoundingBox(t),this.updatenoteXY(e),this.setInkList(this.updateInkList(e.inkList)),this.appearance=e.appearance,this.appearanceData=e.appearanceData||{},this.descent=e.descent,this.lineHeight=e.lineHeight,this.styleClass=e.styleClass,this.intent=e.intent,this.subject=e.subject,this.commentRotation=e.commentRotation,this.rect=e.rect,this.borderColor=e.borderColor,(0,C.reaction)(()=>[this.curWidth,this.curHeight,this.ajsRenditionLoaded],()=>{this.setQuadPointsAndBoundingBox(t),this.setInkList(this.updateInkList(this.selector.inkList)),this.updatenoteXY(this.selector)})}setStrokeColorAndWidth(e){this.subtype!==D.Ay.REDHAWK_COMMENT_FREETEXT&&(this.strokeColor=e.strokeColor||R.A.getToolColor(this.subtype),this.strokeWidth=e.strokeWidth||R.A.getCurrentStrokeWidth())}setAnnotOpacity(e){if(this.subtype!==D.Ay.REDHAWK_COMMENT_FREETEXT)if(this.subtype!==D.Ay.REDHAWK_COMMENT_HIGHLIGHT)if((0,P.eF)())this.opacity=e.opacity||D.Ay.REDHAWK_DEFAULT_OPACITY;else{if(this.subtype===D.Ay.REDHAWK_COMMENT_NOTE||this.subtype===D.Ay.REDHAWK_COMMENT_SHAPE)return this.opacity=e.opacity||D.Ay.REDHAWK_DEFAULT_STICKY_NOTE_OPACITY,void(this.opacity>D.Ay.REDHAWK_DEFAULT_STICKY_NOTE_OPACITY&&(this.opacity=D.Ay.REDHAWK_DEFAULT_STICKY_NOTE_OPACITY));this.opacity=e.opacity||D.Ay.REDHAWK_DEFAULT_OPACITY,this.opacity>.4&&(this.opacity=.4)}else this.opacity=e.opacity||D.Ay.REDHAWK_DEFAULT_HIGHLIGHT_OPACITY;else this.opacity=1}updatenoteXY(e){let t;t=this.isUndo?[e.noteX,e.noteY]:this.getCoordPointsWrtImg([e.noteX,e.noteY]),t&&0!=t.length&&(this.noteX=t[0],this.noteY=t[1])}updateInkList(e){const t=[];for(let o=0;void 0!==e&&o<e.length;o++)this.isUndo?t.push(e[o]):t.push(this.getCoordPointsWrtImg(e[o]));return t}setNode(e){this.node=e}updateSelectorInkList(e){this.selector.inkList=e}updateSelectorBoundingBox(e){this.selector.boundingBox=e}get pageSize(){return w.A.getPageSize(this.node.index)}get curWidth(){return w.A.getPageCurWidth(this.node.index)}get curHeight(){return w.A.getPageCurHeight(this.node.index)}get ajsRenditionLoaded(){return w.A.getPageAjsRenditionLoaded(this.node.index)}setQuadPoints(e){this.quadPoints=e}setBoundingBox(e){this.boundingBox=e}setQuadPointsAndBoundingBox(e){e?(this.setQuadPoints(this.selector.quadPoints),this.setBoundingBox(this.selector.boundingBox)):(this.setQuadPoints(this.getCoordPointsWrtImg(this.selector.quadPoints)),this.setBoundingBox(this.getCoordPointsWrtImg(this.selector.boundingBox)))}updateSelectorBbox(e){this.selector.boundingBox=e}updateSelectorQuadPoints(e){this.selector.quadPoints=e}setRefinedBy(e){this.refinedBy=e}setInkList(e){this.inkList=e}setStrokeColor(e){this.strokeColor=e}setStrokeWidth(e){this.strokeWidth=e}setFontColor(e){this.style={...this.style,color:e}}setFontSize(e){this.style={...this.style,fontSize:e},this.lineHeight=1.2*e}setOpacity(e){this.opacity=e}setAppearanceData(e){this.appearanceData=e}updateAppearance(e){this.appearanceData={textLines:this.appearanceData.textLines||[],...e}}updateAppearanceData(e,t){this.appearanceData=M.A.createAppearanceData(e.getServerCommentData(e),t)}updateAppearanceRefetchStatus(e){this.appearanceData=this.appearanceData||{},this.appearanceData.needToRefetch=e}fetchAppearanceFromServer(e){E.A.getAsset().then(async t=>{const o=E.A.getAnnotation(t.id,e.getServerCommentData(e));e.target.selector.updateAppearanceRefetchStatus(!1);const r=await o.getCommentAppearance();e.target.selector.updateAppearance({...r,fromServer:!0,needToRefetch:!1})})}getCoordPointsWrtImg(e){const t=[];if(!e||0===e.length)return;let o=0;for(o=0;o<e.length-1;o+=2){const r=S.default.getInstance().previewApis.pageView.transformPDFToView(e[o],e[o+1],this.node.index);t[o]=r.x,t[o+1]=r.y}return t}getCoordPointsWrtPdf(e){const t=[];if(!e||0===e.length)return;let o=0;for(o=0;o<e.length-1;o+=2){const r=S.default.getInstance().previewApis.pageView.transformViewToPDF(e[o],e[o+1],this.node.index);t[o]=parseFloat(r.x),t[o+1]=parseFloat(r.y)}return t}getSelectorForServer(){const e=this.getCoordPointsWrtPdf(this.boundingBox),t=this.getCoordPointsWrtPdf(this.quadPoints),o=this.getCoordPointsWrtPdf([this.noteX,this.noteY]),r=this.inkList,n=[];for(let e=0;void 0!==r&&e<r.length;e++)n[e]=this.getCoordPointsWrtPdf(r[e]);const s={node:{index:this.node.index},subtype:this.subtype,quadPoints:t,boundingBox:e,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth,opacity:this.opacity,type:this.type,refinedBy:this.refinedBy,commentRotation:this.commentRotation};return this.subtype===D.Ay.REDHAWK_COMMENT_FREETEXT&&((0,P.eF)()?Object.assign(s,{appearanceData:(0,C.toJS)(this.appearanceData),style:this.style,textOffsetPoint:this.textOffsetPoint,lineHeight:this.lineHeight,descent:this.descent}):s.borderColor=this.borderColor),o&&0!==o.length&&(s.noteX=o[0],s.noteY=o[1]),n.length>0&&(s.inkList=n),s}}).prototype,"strokeColor",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=_applyDecoratedDescriptor(r.prototype,"strokeWidth",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=_applyDecoratedDescriptor(r.prototype,"opacity",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=_applyDecoratedDescriptor(r.prototype,"noteX",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=_applyDecoratedDescriptor(r.prototype,"noteY",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=_applyDecoratedDescriptor(r.prototype,"quadPoints",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=_applyDecoratedDescriptor(r.prototype,"boundingBox",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_applyDecoratedDescriptor(r.prototype,"inkList",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=_applyDecoratedDescriptor(r.prototype,"style",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=_applyDecoratedDescriptor(r.prototype,"textOffsetPoint",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=_applyDecoratedDescriptor(r.prototype,"appearanceData",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=_applyDecoratedDescriptor(r.prototype,"rect",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(r.prototype,"setNode",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setNode"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateSelectorInkList",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"updateSelectorInkList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateSelectorBoundingBox",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"updateSelectorBoundingBox"),r.prototype),_applyDecoratedDescriptor(r.prototype,"pageSize",[C.computed],Object.getOwnPropertyDescriptor(r.prototype,"pageSize"),r.prototype),_applyDecoratedDescriptor(r.prototype,"curWidth",[C.computed],Object.getOwnPropertyDescriptor(r.prototype,"curWidth"),r.prototype),_applyDecoratedDescriptor(r.prototype,"curHeight",[C.computed],Object.getOwnPropertyDescriptor(r.prototype,"curHeight"),r.prototype),_applyDecoratedDescriptor(r.prototype,"ajsRenditionLoaded",[C.computed],Object.getOwnPropertyDescriptor(r.prototype,"ajsRenditionLoaded"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setQuadPoints",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setQuadPoints"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setBoundingBox",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setBoundingBox"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setQuadPointsAndBoundingBox",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setQuadPointsAndBoundingBox"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateSelectorBbox",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"updateSelectorBbox"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateSelectorQuadPoints",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"updateSelectorQuadPoints"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setRefinedBy",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setRefinedBy"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setInkList",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setInkList"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setStrokeColor",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setStrokeColor"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setStrokeWidth",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setStrokeWidth"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setFontColor",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setFontColor"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setFontSize",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setFontSize"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setOpacity",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setOpacity"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setAppearanceData",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"setAppearanceData"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateAppearance",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"updateAppearance"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateAppearanceData",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"updateAppearanceData"),r.prototype),_applyDecoratedDescriptor(r.prototype,"updateAppearanceRefetchStatus",[C.action],Object.getOwnPropertyDescriptor(r.prototype,"updateAppearanceRefetchStatus"),r.prototype),r);var L,x,U,k,F=o("iaHC"),H=o("yi7a"),B=o("XWif"),j=o("6SBV");function ReactionsStore_initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function ReactionsStore_applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const z=(x=ReactionsStore_applyDecoratedDescriptor((L=class ReactionsStore{constructor(e,t){this.updateReactionCallback=null,this.operationTimer=null,this.toastFor20thReactionShown=!1,ReactionsStore_initializerDefineProperty(this,"reactionsServerModel",x,this),this.newBatchOperationId=1,ReactionsStore_initializerDefineProperty(this,"pendingBatchOperationsQueue",U,this),ReactionsStore_initializerDefineProperty(this,"currentPendingOperations",k,this),this.showToast=async e=>{if(!document.getElementById("reactionsToast")||e===D.Ay.FORBIDDEN_ACTION_FAILURE_STATUS){if(e===D.Ay.FORBIDDEN_ACTION_FAILURE_STATUS){const e=await(0,B.I)("reactions.toast.info");(0,H.info)(e,{timeout:D.Ay.ERROR_TOAST_TIMEOUT,id:"reactionsToast"})}else if(e===D.Ay.REACTIONS_LIMIT_REACHED_STATUS){const e=await(0,B.I)("reactions.toast.info");(0,H.info)(e,{timeout:D.Ay.ERROR_TOAST_TIMEOUT,id:"reactionsToast"})}else{const e=await(0,B.I)("reactions.toast.error");(0,H.error)(e,{timeout:D.Ay.ERROR_TOAST_TIMEOUT,id:"reactionsToast"})}(0,A.BI)("Commenting","Reactions","ErrorToastShown",{}),j.nextTick(()=>{const e=document.getElementById("defaultTextBox");if(e){const t=document.getElementById("reactionsToast");t&&(t.style.width=`${e.clientWidth}px`)}})}},this.syncReactions(e,t)}addReaction(e){if(this.updateReactionCallback&&!this.isOperationSent(e,D.Ay.ADD_REACTION)){if(this.currentPendingOperations){const t=this.currentPendingOperations.details.find(t=>t.reaction===e);if(t){if(t.action===D.Ay.ADD_REACTION)return;clearTimeout(this.operationTimer),this.currentPendingOperations.details=this.currentPendingOperations.details.filter(t=>t.reaction!==e)}else clearTimeout(this.operationTimer),this.currentPendingOperations.details.push({action:D.Ay.ADD_REACTION,reaction:e})}else this.currentPendingOperations={id:this.newBatchOperationId,details:[{action:D.Ay.ADD_REACTION,reaction:e}]},this.newBatchOperationId++;this.operationTimer=setTimeout(()=>this.updateReactionWithDebounce(),D.Ay.REACTION_DEBOUNCE)}}updateReactionWithDebounce(){this.operationsStillValid()&&(this.updateReactionCallback(this.currentPendingOperations.details,this.currentPendingOperations.id),this.pendingBatchOperationsQueue.push(this.currentPendingOperations)),this.currentPendingOperations=null,this.operationTimer=null}operationsStillValid(){var e;if(!this.currentPendingOperations||0===(null===(e=this.currentPendingOperations)||void 0===e?void 0:e.details.length))return!1;for(let e=0;e<this.currentPendingOperations.details.length;e++)if(this.currentPendingOperations.details[e].action===D.Ay.REMOVE_REACTION&&!this.reactionToBeRemovedExists(this.currentPendingOperations.details[e].reaction))return!1;return!0}removeReaction(e){if(this.updateReactionCallback&&!this.isOperationSent(e,D.Ay.REMOVE_REACTION)){if(this.currentPendingOperations){const t=this.currentPendingOperations.details.find(t=>t.reaction===e);if(t){if(t.action===D.Ay.REMOVE_REACTION)return;clearTimeout(this.operationTimer),this.currentPendingOperations.details=this.currentPendingOperations.details.filter(t=>t.reaction!==e)}else{if(!this.reactionToBeRemovedExists(e))return;clearTimeout(this.operationTimer),this.currentPendingOperations.details.push({action:D.Ay.REMOVE_REACTION,reaction:e})}}else{if(!this.reactionToBeRemovedExists(e))return;this.currentPendingOperations={id:this.newBatchOperationId,details:[{action:D.Ay.REMOVE_REACTION,reaction:e}]},this.newBatchOperationId++}this.operationTimer=setTimeout(()=>this.updateReactionWithDebounce(),D.Ay.REACTION_DEBOUNCE)}}isOperationSent(e,t){let o=!1;return this.pendingBatchOperationsQueue.forEach(r=>r.details.forEach(r=>{r.reaction===e&&r.action===t&&(o=!0)})),o}reactionToBeRemovedExists(e){return this.reactionsServerModel.find(t=>t.key===e)}syncReactions(e,t){t&&Object.hasOwn(t,"reactionSummary")?this.reactionsServerModel=Object.keys(null==t?void 0:t.reactionSummary).map(o=>{var r,n,s;return this.reactionUIModel(o,null==t||null===(r=t.reactionSummary[o])||void 0===r?void 0:r.totalUsers,null==t||null===(n=t.reactionSummary[o])||void 0===n?void 0:n.reactedBy,new Date(null==t||null===(s=t.reactionSummary[o])||void 0===s?void 0:s.created),(null==e?void 0:e.myReactions)&&Object.hasOwn(e.myReactions,o))}):this.reactionsServerModel=[]}removePendingOperation(e){this.pendingBatchOperationsQueue=this.pendingBatchOperationsQueue.filter(t=>t.id!==e)}handleOperationFailed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.removePendingOperation(e),this.showToast(t)}showToastFor20thReaction(){var e;const t=null===(e=this.flattenedReactions)||void 0===e?void 0:e.filter(e=>e.isOwnReaction);!this.toastFor20thReactionShown&&t&&(null==t?void 0:t.length)===D.Ay.REDHAWK_REACTIONS_LIMIT_PER_ANNOT&&(this.showToast(D.Ay.REACTIONS_LIMIT_REACHED_STATUS),this.toastFor20thReactionShown=!0)}get flattenedReactions(){var e;let t=(0,C.toJS)(this.reactionsServerModel);return this.pendingBatchOperationsQueue.forEach(e=>{e.details.forEach(e=>{t=this.applyOperationToReactionsToBeShown(t,e)})}),null===(e=this.currentPendingOperations)||void 0===e||e.details.forEach(e=>{t=this.applyOperationToReactionsToBeShown(t,e)}),t}applyOperationToReactionsToBeShown(e,t){let o=!1;return e.map(r=>(r.key===t.reaction&&(t.action===D.Ay.ADD_REACTION?(r.totalUsers++,r.isOwnReaction=!0):(r.isOwnReaction=!1,r.totalUsers--,r.totalUsers<=0&&(e=e.filter(e=>e.key!==t.reaction))),o=!0),r)),o||t.action!==D.Ay.ADD_REACTION||e.push(this.reactionUIModel(t.reaction,1,[],new Date,!0)),e}reactionUIModel(e,t,o,r){return{key:e,totalUsers:t,reactedBy:o,created:r,isOwnReaction:arguments.length>4&&void 0!==arguments[4]&&arguments[4]}}}).prototype,"reactionsServerModel",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=ReactionsStore_applyDecoratedDescriptor(L.prototype,"pendingBatchOperationsQueue",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=ReactionsStore_applyDecoratedDescriptor(L.prototype,"currentPendingOperations",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ReactionsStore_applyDecoratedDescriptor(L.prototype,"addReaction",[C.action],Object.getOwnPropertyDescriptor(L.prototype,"addReaction"),L.prototype),ReactionsStore_applyDecoratedDescriptor(L.prototype,"updateReactionWithDebounce",[C.action],Object.getOwnPropertyDescriptor(L.prototype,"updateReactionWithDebounce"),L.prototype),ReactionsStore_applyDecoratedDescriptor(L.prototype,"removeReaction",[C.action],Object.getOwnPropertyDescriptor(L.prototype,"removeReaction"),L.prototype),ReactionsStore_applyDecoratedDescriptor(L.prototype,"syncReactions",[C.action],Object.getOwnPropertyDescriptor(L.prototype,"syncReactions"),L.prototype),ReactionsStore_applyDecoratedDescriptor(L.prototype,"removePendingOperation",[C.action],Object.getOwnPropertyDescriptor(L.prototype,"removePendingOperation"),L.prototype),ReactionsStore_applyDecoratedDescriptor(L.prototype,"handleOperationFailed",[C.action],Object.getOwnPropertyDescriptor(L.prototype,"handleOperationFailed"),L.prototype),ReactionsStore_applyDecoratedDescriptor(L.prototype,"flattenedReactions",[C.computed],Object.getOwnPropertyDescriptor(L.prototype,"flattenedReactions"),L.prototype),L);var W,G,V;function ReadStore_initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function ReadStore_applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const K=(G=ReadStore_applyDecoratedDescriptor((W=class ReadStore{constructor(e){ReadStore_initializerDefineProperty(this,"readValue",G,this),ReadStore_initializerDefineProperty(this,"etag",V,this),this.lastReadModified=void 0,this.setReadValue(e),this.setReadEtag()}setReadPropertyInServer(e,t){const o={};o.id=e,o.read=t,E.A.getAssetURN().then(e=>{const t=new b.P({context:"ReadStore",name:"SetReadPropertyInServer"}),r=(0,I.Np)(e,o,T.A.isEmojiReactionsEnabled());return new Promise((e,o)=>{t.start(),r.createCommentMetadata().then(o=>{t.log(),F.A.readCommentsList.push(o),this.setReadValue(o.read),this.setReadEtag(o.etag),e(o)}).catch(e=>{t.error(e),this.setReadValue(!1),o(e)})})})}updateReadPropertyInServer(e,t){const o={};o.id=e;const r=!this.readValue||t;o.read={value:r,etag:this.etag?this.etag:"*"};const n=new b.P({context:"ReadStore",name:"UpdateReadPropertyInServer"});E.A.getAssetURN().then(e=>{const t=(0,I.Np)(e,o,T.A.isEmojiReactionsEnabled());return new Promise((e,r)=>{n.start(),t.updateCommentMetadata(o.read.etag,o.read.value).then(r=>{n.log();const s=F.A.readCommentsList.findIndex(e=>e.annotId===r.annotId);s>-1&&(F.A.readCommentsList[s].read=!o.read.value,F.A.readCommentsList[s].etag=r.etag,this.setReadValue(r.read),this.setReadEtag(r.etag)),e(t)}).catch(e=>{n.error(e),this.setReadValue(!this.readValue),r(e)})})})}setReadPropertyOfAnnot(e,t){this.updateReadLastModified();const o=v.A.getUserProfile();!O.A.isUserIMS(o)||!t&&this.readValue||(this.updateReadPropertyInServer(e,t),this.setReadValue(!0))}setReadValue(e){this.readValue=e}setReadEtag(e){this.etag=e}updateReadLastModified(){this.lastReadModified=Date(1e3*Math.floor((new Date).getTime()))}}).prototype,"readValue",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=ReadStore_applyDecoratedDescriptor(W.prototype,"etag",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ReadStore_applyDecoratedDescriptor(W.prototype,"setReadPropertyInServer",[C.action],Object.getOwnPropertyDescriptor(W.prototype,"setReadPropertyInServer"),W.prototype),ReadStore_applyDecoratedDescriptor(W.prototype,"updateReadPropertyInServer",[C.action],Object.getOwnPropertyDescriptor(W.prototype,"updateReadPropertyInServer"),W.prototype),ReadStore_applyDecoratedDescriptor(W.prototype,"setReadValue",[C.action],Object.getOwnPropertyDescriptor(W.prototype,"setReadValue"),W.prototype),ReadStore_applyDecoratedDescriptor(W.prototype,"setReadEtag",[C.action],Object.getOwnPropertyDescriptor(W.prototype,"setReadEtag"),W.prototype),W);var q,Y,X,Q,J,$,Z,ee,te,oe,re,ie,ne,se,ae,le,ce,pe,de,me,ue,he,ge,ye,Ce,_e,fe,be,Ee,ve,Te,Ae,Oe,De,Pe,Ie,Se,we,Re,Me,Ne=o("a8bA"),Le=o("Jm6I"),xe=o("AvEB");function CommentStore_initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}function CommentStore_applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const Ue=new(q=class CommentStore{constructor(){this.cid=void 0,this.created=void 0,CommentStore_initializerDefineProperty(this,"target",Y,this),this.error=void 0,this.motivation=void 0,this.isReadOnly=!1,this.selectedCoords=void 0,this.shouldCancelEmptyComment=!1,this.tempID=void 0,CommentStore_initializerDefineProperty(this,"saveStatus",X,this),CommentStore_initializerDefineProperty(this,"status",Q,this),CommentStore_initializerDefineProperty(this,"creator",J,this),CommentStore_initializerDefineProperty(this,"sid",$,this),CommentStore_initializerDefineProperty(this,"replies",Z,this),CommentStore_initializerDefineProperty(this,"modified",ee,this),CommentStore_initializerDefineProperty(this,"bodyValue",te,this),CommentStore_initializerDefineProperty(this,"voiceNoteData",oe,this),CommentStore_initializerDefineProperty(this,"syncPending",re,this),CommentStore_initializerDefineProperty(this,"syncedWithServer",ie,this),CommentStore_initializerDefineProperty(this,"etag",ne,this),CommentStore_initializerDefineProperty(this,"mentions",se,this),CommentStore_initializerDefineProperty(this,"unsavedCommentText",ae,this),CommentStore_initializerDefineProperty(this,"unsavedMentions",le,this),CommentStore_initializerDefineProperty(this,"lostCommentText",ce,this),CommentStore_initializerDefineProperty(this,"lostMentions",pe,this),CommentStore_initializerDefineProperty(this,"isEditing",de,this),CommentStore_initializerDefineProperty(this,"isReplying",me,this),CommentStore_initializerDefineProperty(this,"unsavedReplyBody",ue,this),CommentStore_initializerDefineProperty(this,"unsavedReplyMentions",he,this),CommentStore_initializerDefineProperty(this,"isCommentUnderCreation",ge,this),CommentStore_initializerDefineProperty(this,"isPageLevelAnnot",ye,this),CommentStore_initializerDefineProperty(this,"isNCPAnnot",Ce,this),CommentStore_initializerDefineProperty(this,"shouldTextTakeFocus",_e,this),CommentStore_initializerDefineProperty(this,"showToolBar",fe,this),CommentStore_initializerDefineProperty(this,"showMentions",be,this),CommentStore_initializerDefineProperty(this,"showMentionsMenu",Ee,this),CommentStore_initializerDefineProperty(this,"showEmojiPicker",ve,this),CommentStore_initializerDefineProperty(this,"showPostTool",Te,this),CommentStore_initializerDefineProperty(this,"showCancelTool",Ae,this),CommentStore_initializerDefineProperty(this,"updatedFontColorSize",Oe,this),CommentStore_initializerDefineProperty(this,"isReplyMode",De,this),CommentStore_initializerDefineProperty(this,"focusTextBox",Pe,this),CommentStore_initializerDefineProperty(this,"isAuthPending",Ie,this),CommentStore_initializerDefineProperty(this,"suggestedAutoMention",Se,this),CommentStore_initializerDefineProperty(this,"suggestedAutoMentionDisposition",we,this),CommentStore_initializerDefineProperty(this,"hideComment",Re,this),CommentStore_initializerDefineProperty(this,"getClonedComment",Me,this),this.fireReplyPosted=()=>{_.auth2.isSignedIn&&!(0,P.eF)()&&(this.commentsProviderInstance?this.commentsProviderInstance.emitAnnotEvent(Le.Xg.REPLY_POSTED_EVENT):_.providers["comments-provider"]().then(e=>{this.commentsProviderInstance=e,e.emitAnnotEvent(Le.Xg.REPLY_POSTED_EVENT)}))}}commentUImodel(e,t,o){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{isUndo:n=!1,reassignSelectors:s=!1}=r,a=new CommentStore;return n&&e.cid?a.cid=e.cid:a.cid=e.id||O.A.getInstance().getGuid(),a.tempID=n&&e.tempID||O.A.getInstance().getGuid(),a.bodyValue=e.bodyValue,a.created=e.created||Date(1e3*Math.floor((new Date).getTime())),a.creator=e.creator||this.getCreatorDetails(),a.target=e.target,s||(a.target.selector=new N(e.target.selector,n)),a.motivation=e.motivation,a.modified=e.modified||a.created,a.setStatus(D.Ay.STATUS_OPEN),a.replies=[],a.syncedWithServer=t,a.syncPending=o,a.etag=e.etag,a.saveStatus=!0,a.mentions=e.mentions,a.isEditing=e.isEditing,a.isCommentUnderCreation=e.isCommentUnderCreation,a.isPageLevelAnnot=e.isPageLevelAnnot,a.isNCPAnnot=e.isNCPAnnot,a.isAuthPending=e.isAuthPending||!v.A.hasAuth&&v.A.isFrictionlessUser(),a.read=new K(!0),a.reactions=this.reactionServerModel(e.perUserPerAnnotation,e.aggregatedInfo),a.replies&&!a.replies.length>0&&e.replies&&e.replies.forEach(t=>{t.target.selector.node=e.target.selector.node,a.replies.push(this.replyServerModel(t,!0,!1,!1,null))}),a}setIsReplyMode(e){this.isReplyMode=e}setFocusTextBox(e){this.focusTextBox=e}setUpdatedStyle(e){this.updatedFontColorSize=e}setUnsavedReplyBody(e,t){console.assert(!t||Array.isArray(t),"CommentStore.setUnsavedReplyBody mentions not an array."),this.unsavedReplyBody=e,this.unsavedReplyMentions=t}resetUnsavedReplyBody(){this.unsavedReplyBody="",this.unsavedReplyMentions=[]}setSuggestedAutoMention(e){this.suggestedAutoMention=e}setSuggestedAutoMentionDisposition(e){this.suggestedAutoMentionDisposition=e}replyUImodel(e,t,o,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new CommentStore;return s.cid=t.id||O.A.getInstance().getGuid(),s.tempID=n&&t.tempID||O.A.getInstance().getGuid(),s.bodyValue=t.bodyValue,s.created=t.created||Date(1e3*Math.floor((new Date).getTime())),s.creator=t.creator||this.getCreatorDetails(),s.motivation=t.motivation,s.modified=t.modified||s.created,s.setStatus(D.Ay.STATUS_OPEN),s.syncedWithServer=o,s.subType=D.Ay.SUBTYPE_NOTE,s.syncPending=r,s.target=t.target,s.target.selector=new N(e.target.selector,n),s.etag=t.etag,s.saveStatus=!0,s.mentions=t.mentions,s.isEditing=t.isEditing,s.isAuthPending=t.isAuthPending||!v.A.hasAuth&&v.A.isFrictionlessUser(),s.read=new K(!0),s.reactions=this.reactionServerModel(t.perUserPerAnnotation,t.aggregatedInfo),s}commentServerModel(e,t,o,r,n){var s;let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const{reassignSelectors:l}=a;let c,p;return r?(c=n,c.tempID=e.tempID||n.tempID,p=n.target.selector.styleClass,c.isEditing=n.isEditing,c.unsavedCommentText=n.unsavedCommentText,c.unsavedMentions=n.unsavedMentions,c.replies=n.replies,c.replies&&!c.replies.length>0&&e.replies&&e.replies.forEach(t=>{t.target.selector.node=e.target.selector.node,c.replies.push(this.replyServerModel(t,!0,!1,r,n))})):(c=new CommentStore,c.tempID=e.tempID||O.A.getInstance().getGuid()),c.sid=e.id||e.sid,c.bodyValue=e.bodyValue,c.created=e.created,c.creator=e.creator||{},c.target=e.target,c.target.selector.styleClass=p||c.target.selector.styleClass,c.isReadOnly="isReadOnly"in e&&e.isReadOnly,c.motivation=e.motivation,c.modified=e.modified,c.status=e.status,"boolean"==typeof e.hideComment&&(c.hideComment=!!e.hideComment),l||(c.target.selector=new N(e.target.selector,r)),r||(c.replies=[],e.replies&&e.replies.forEach(e=>{c.replies.push(this.replyServerModel(e,!0,!1,!1,null))})),c.reactions=this.reactionServerModel(e.perUserPerAnnotation,e.aggregatedInfo),(null===(s=e.reactions)||void 0===s?void 0:s.reactionsServerModel)&&!e.perUserPerAnnotation&&(c.reactions.reactionsServerModel=e.reactions.reactionsServerModel),c.syncedWithServer=t,c.syncPending=o,c.etag=e.etag,c.mentions=e.mentions,c.read=this.getReadState(e),c}getReadState(e){const t=(0,P.eF)()?new K(!0):new K(!1);let o;if(F.A.readCommentsList&&F.A.readCommentsList.length>0)if(o=F.A.readCommentsList.filter(t=>t.annotId===e.id),o.length>0)t.setReadValue(o[0].read),t.setReadEtag(o[0].etag);else if(e.creator){const o=v.A.getUserProfile();o&&"IMS"===o.userType&&o.userId===e.creator.id&&t.setReadValue(!0)}return t}replyServerModel(e,t,o,r,n){var s;let a;return r?(a=n,a.tempID=e.tempID||(null==n?void 0:n.tempID),a.isEditing=n.isEditing,a.unsavedCommentText=n.unsavedCommentText,a.unsavedMentions=n.unsavedMentions):(a=new CommentStore,a.tempID=e.tempID||O.A.getInstance().getGuid()),a.sid=e.id||e.sid,a.bodyValue=e.bodyValue,a.created=e.created,a.creator=e.creator||{},a.target=e.target,a.isReadOnly="isReadOnly"in e&&e.isReadOnly,a.motivation=e.motivation,a.modified=e.modified,a.status=e.status,a.syncedWithServer=t,a.syncPending=o,a.etag=e.etag,a.mentions=e.mentions,a.read=this.getReadState(e),a.reactions=this.reactionServerModel(e.perUserPerAnnotation,e.aggregatedInfo),(null===(s=e.reactions)||void 0===s?void 0:s.reactionsServerModel)&&!e.perUserPerAnnotation&&(a.reactions.reactionsServerModel=e.reactions.reactionsServerModel),a}reactionServerModel(e,t){return new z(e,t)}saveReplyToServer(e,t,o){xe.A.getClient({commentsApiUrl:T.A.commentsApiUrl});const r=this.getServerCommentData(e);return t.resetSaveStatus(),E.A.getAssetURN().then(n=>{const s=(0,I.Np)(n,r,T.A.isEmojiReactionsEnabled());return new Promise((n,a)=>{const l=new b.P({context:"CommentStore",name:"SaveReplyToServer"});l.start(),s.replyNote(t.bodyValue,t.mentions,t).then(o=>{l.log(),t.setSaveStatusTrue(),F.A.removeFromUnsavedAnnotList(e.id,D.Ay.REPLYING),F.A.setEditedAnnotId(null),t.setSID(o.id),t.setEtag(o.etag),t.setCreatorDetails(o.creator),t.created=o.created,t.setModified(o.modified),t.setCreatorDetails(o.creator),t.setBodyValue(o.bodyValue),F.A.addReplyToServerComments(r.id||e.id,o),t.setSyncWithServer(!0),(0,A.BI)("Participate","Use","Reply to existing comment",{"adb.event.context.eureka.participate.use.commenttype":r.target.selector.subtype}),Ne.A.triggerEvent(D.Ay.API_EVENTS.ANNOTATION_ADDED,o),this.fireReplyPosted(),n(o)}).catch(e=>{l.error(e),e&&e.message&&O.A.isUserOffline(e.message)&&t.setError("offline"),e&&e.response&&e.response.status===D.Ay.UNAUTHORIZED_STATUS&&F.A.setShowAuthFailedNotification(!0),this.deleteReply(t),o&&o(t),t.setSaveStatusFalse(),t.read.setReadValue(!1),a(e)})})})}deleteReplyFromserver(e){return new Promise((t,o)=>{const r={};r.id=e.sid,r.etag=e.etag,r.pageNo=e.target.selector.node.index,r.id?E.A.getAssetURN().then(n=>{const s=(0,I.Np)(n,r,T.A.isEmojiReactionsEnabled());F.A.tempDeleteList.push(e);const a=new b.P({context:"CommentStore",name:"DeleteReplyFromServer"});return a.start(),s.delete().then(o=>{a.log(),F.A.setEditedAnnotId(null),F.A.deleteReplyFromServerComments(e.sid,e.target.source),O.A.resetDraftCommentReply(),t()}).catch(t=>{a.error(),this.addReply(e);const r=F.A.tempDeleteList.findIndex(t=>t.sid===e.sid);r>-1&&F.A.tempDeleteList.splice(r,1);(0,b.A)({context:"CommentStore"}).error(JSON.stringify(t)),o(t)})}):t(null)})}getServerCommentData(e){const t=this.getClonedComment(e),o=e.target.selector.getSelectorForServer();return t.id=e.sid||e.cid,t.target.selector=o,t}get id(){return this.sid||this.cid}setSyncWithServer(e){this.syncedWithServer=e}setSyncPending(e){this.syncPending=e}setBodyValue(e){this.bodyValue=e}setVoiceNoteData(e){this.voiceNoteData=e}addReply(e){this.replies.push(e)}setSID(e){this.sid=e}setEtag(e){this.etag=e}resetSyncPending(){this.syncPending=!1}setError(e){this.error=e}setUnsavedCommentText(e){this.unsavedCommentText=e}resetUnsavedCommentText(){this.unsavedCommentText=void 0}setUnsavedMentions(e){this.unsavedMentions=e}resetUnsavedMentions(){this.unsavedMentions=void 0}setIsEditing(e){this.isEditing=e,(0,P.eF)()&&e&&(this.shouldTextTakeFocus=!0)}setIsReplying(e){this.isReplying=e}setShouldTextTakeFocus(e){this.shouldTextTakeFocus=e}setShouldCancelEmptyComment(e){this.shouldCancelEmptyComment=e}setShowMentionsMenu(e){this.showMentionsMenu=e}setHideComment(e){this.hideComment=e}setShowEmojiPicker(e){this.showEmojiPicker=e}updateTextBoxUiState(e){let{showToolBar:t,showCancelTool:o,showPostTool:r,showMentions:n,showMentionsMenu:s,showEmojiPicker:a}=e;this.showCancelTool=o,this.showToolBar=t,this.showMentions=n,this.showPostTool=r,this.showMentionsMenu=s,this.showEmojiPicker=a}setSaveStatusTrue(){this.saveStatus=!0}resetSaveStatus(){this.saveStatus=void 0}setSaveStatusFalse(){this.saveStatus=!1}setSelectedCoords(e){this.selectedCoords=e}showTextBoxTool(){if(!this.showToolBar){const e={showToolBar:!0,showMentions:!0,showPostTool:!0,showCancelTool:!0};this.updateTextBoxUiState(e)}}hideTextBoxTool(){if(this.showToolBar){const e={showToolBar:!1,showMentions:!1,showPostTool:!1,showCancelTool:!1,showMentionsMenu:!1,showEmojiPicker:!1};this.updateTextBoxUiState(e)}}retrySavingFailedReply(e,t){const o=this.replies.filter(e=>e.id===t);o.length>0&&!1===o[0].saveStatus&&this.saveReplyToServer(e,o[0])}retrySavingFailedComment(e,t){this.hideTextBoxTool(),this.setIsEditing(!1),F.A.saveCommentToServer(e,t)}deleteReply(e){if(xe.A.getClient({commentsApiUrl:T.A.commentsApiUrl}),this.replies){const t=this.replies.findIndex(t=>t.id===e.id);t>-1&&this.replies.splice(t,1)}}getCreatorDetails(){let e={};const t=v.A.getUserProfile();return t&&(v.A.hasAuth||(0,P.eF)())&&(e={id:t.userId,name:t.userName,email:t.email,type:D.Ay.PERSON}),(0,P.eF)()&&t&&t.getPictureURL()&&(e.img=t.getPictureURL()),e}setStatus(e){this.status=e}isCommentThreadRead(e){const t=v.A.getUserProfile();if(!O.A.isUserIMS(t))return!0;if(e.replies)for(let t=0;t<e.replies.length;t++)if(!e.replies[t].read.readValue)return!1;return e.read.readValue}setMentions(e){this.mentions=e}setModified(e){this.modified=e}setCreated(e){this.created=e}setCreatorDetails(e){this.creator=e}setNoteXY(e,t){this.target.selector.noteX=e,this.target.selector.noteY=t}setIsCommentUnderCreation(e){this.isCommentUnderCreation=e}setIsPageLevelAnnot(e){this.isPageLevelAnnot=e}setIsNCPAnnot(e){this.isNCPAnnot=e}get isCommentInDraftMode(){return this.id===F.A.editedAnnotId}resetIsAuthPending(){this.isAuthPending=!1}setTempID(e){this.tempID=e}get tid(){return this.tempID}hasReplies(){return this.replies&&this.replies.length>0}},Y=CommentStore_applyDecoratedDescriptor(q.prototype,"target",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=CommentStore_applyDecoratedDescriptor(q.prototype,"saveStatus",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=CommentStore_applyDecoratedDescriptor(q.prototype,"status",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=CommentStore_applyDecoratedDescriptor(q.prototype,"creator",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=CommentStore_applyDecoratedDescriptor(q.prototype,"sid",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=CommentStore_applyDecoratedDescriptor(q.prototype,"replies",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=CommentStore_applyDecoratedDescriptor(q.prototype,"modified",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=CommentStore_applyDecoratedDescriptor(q.prototype,"bodyValue",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=CommentStore_applyDecoratedDescriptor(q.prototype,"voiceNoteData",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=CommentStore_applyDecoratedDescriptor(q.prototype,"syncPending",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=CommentStore_applyDecoratedDescriptor(q.prototype,"syncedWithServer",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=CommentStore_applyDecoratedDescriptor(q.prototype,"etag",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=CommentStore_applyDecoratedDescriptor(q.prototype,"mentions",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=CommentStore_applyDecoratedDescriptor(q.prototype,"unsavedCommentText",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=CommentStore_applyDecoratedDescriptor(q.prototype,"unsavedMentions",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=CommentStore_applyDecoratedDescriptor(q.prototype,"lostCommentText",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=CommentStore_applyDecoratedDescriptor(q.prototype,"lostMentions",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=CommentStore_applyDecoratedDescriptor(q.prototype,"isEditing",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=CommentStore_applyDecoratedDescriptor(q.prototype,"isReplying",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ue=CommentStore_applyDecoratedDescriptor(q.prototype,"unsavedReplyBody",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=CommentStore_applyDecoratedDescriptor(q.prototype,"unsavedReplyMentions",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=CommentStore_applyDecoratedDescriptor(q.prototype,"isCommentUnderCreation",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye=CommentStore_applyDecoratedDescriptor(q.prototype,"isPageLevelAnnot",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=CommentStore_applyDecoratedDescriptor(q.prototype,"isNCPAnnot",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=CommentStore_applyDecoratedDescriptor(q.prototype,"shouldTextTakeFocus",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),fe=CommentStore_applyDecoratedDescriptor(q.prototype,"showToolBar",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),be=CommentStore_applyDecoratedDescriptor(q.prototype,"showMentions",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ee=CommentStore_applyDecoratedDescriptor(q.prototype,"showMentionsMenu",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ve=CommentStore_applyDecoratedDescriptor(q.prototype,"showEmojiPicker",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Te=CommentStore_applyDecoratedDescriptor(q.prototype,"showPostTool",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ae=CommentStore_applyDecoratedDescriptor(q.prototype,"showCancelTool",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oe=CommentStore_applyDecoratedDescriptor(q.prototype,"updatedFontColorSize",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),De=CommentStore_applyDecoratedDescriptor(q.prototype,"isReplyMode",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pe=CommentStore_applyDecoratedDescriptor(q.prototype,"focusTextBox",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ie=CommentStore_applyDecoratedDescriptor(q.prototype,"isAuthPending",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Se=CommentStore_applyDecoratedDescriptor(q.prototype,"suggestedAutoMention",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=CommentStore_applyDecoratedDescriptor(q.prototype,"suggestedAutoMentionDisposition",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=CommentStore_applyDecoratedDescriptor(q.prototype,"hideComment",[C.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CommentStore_applyDecoratedDescriptor(q.prototype,"commentUImodel",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"commentUImodel"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setIsReplyMode",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setIsReplyMode"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setFocusTextBox",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setFocusTextBox"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setUpdatedStyle",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setUpdatedStyle"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setUnsavedReplyBody",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setUnsavedReplyBody"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"resetUnsavedReplyBody",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"resetUnsavedReplyBody"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setSuggestedAutoMention",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setSuggestedAutoMention"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setSuggestedAutoMentionDisposition",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setSuggestedAutoMentionDisposition"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"replyUImodel",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"replyUImodel"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"commentServerModel",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"commentServerModel"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"replyServerModel",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"replyServerModel"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"reactionServerModel",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"reactionServerModel"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"saveReplyToServer",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"saveReplyToServer"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"deleteReplyFromserver",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"deleteReplyFromserver"),q.prototype),Me=CommentStore_applyDecoratedDescriptor(q.prototype,"getClonedComment",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{const t={},removedTargetSelectorObjects=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Array.isArray(e)||(0,C.isObservableArray)(e))for(let t=0;t<e.length;t++){const r=e[t];removedTargetSelectorObjects(r,o?`${o}.${t}`:t)}else for(const r in e)if(e.hasOwnProperty(r))if("parent"===r||"replies"===r){const t=o?`${o}.${r}`:r;removedTargetSelectorObjects(e[r],t)}else"target"===r&&e[r].selector&&(t[o||"root"]=e[r].selector,delete e[r].selector)};removedTargetSelectorObjects(e);const o=JSON.parse(JSON.stringify(e)),setTargetSelectorByPath=(e,t,o)=>{const r=t.split(".");let n=e;r.forEach(e=>{n=n[e]}),n.target.selector=o};for(const r in t)t.hasOwnProperty(r)&&("root"===r?(e.target.selector=t[r],o.target.selector=t[r]):(setTargetSelectorByPath(e,`${r}`,t[r]),setTargetSelectorByPath(o,`${r}`,t[r])));return o}}}),CommentStore_applyDecoratedDescriptor(q.prototype,"setSyncWithServer",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setSyncWithServer"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setSyncPending",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setSyncPending"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setBodyValue",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setBodyValue"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setVoiceNoteData",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setVoiceNoteData"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"addReply",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"addReply"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setSID",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setSID"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setEtag",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setEtag"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"resetSyncPending",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"resetSyncPending"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setError",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setError"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setUnsavedCommentText",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setUnsavedCommentText"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"resetUnsavedCommentText",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"resetUnsavedCommentText"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setUnsavedMentions",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setUnsavedMentions"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"resetUnsavedMentions",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"resetUnsavedMentions"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setIsEditing",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setIsEditing"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setIsReplying",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setIsReplying"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setShouldTextTakeFocus",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setShouldTextTakeFocus"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setShowMentionsMenu",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setShowMentionsMenu"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setHideComment",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setHideComment"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setShowEmojiPicker",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setShowEmojiPicker"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"updateTextBoxUiState",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"updateTextBoxUiState"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setSaveStatusTrue",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setSaveStatusTrue"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"resetSaveStatus",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"resetSaveStatus"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setSaveStatusFalse",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setSaveStatusFalse"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setSelectedCoords",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setSelectedCoords"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"deleteReply",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"deleteReply"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setStatus",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setStatus"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setMentions",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setMentions"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setModified",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setModified"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setCreated",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setCreated"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setCreatorDetails",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setCreatorDetails"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setNoteXY",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setNoteXY"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setIsCommentUnderCreation",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setIsCommentUnderCreation"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setIsPageLevelAnnot",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setIsPageLevelAnnot"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"setIsNCPAnnot",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"setIsNCPAnnot"),q.prototype),CommentStore_applyDecoratedDescriptor(q.prototype,"resetIsAuthPending",[C.action],Object.getOwnPropertyDescriptor(q.prototype,"resetIsAuthPending"),q.prototype),q)},miHg:(e,t,o)=>{var r=o("2VCT"),n=o("EbA6");e.exports=function isFunction(e){if(!n(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},mrdZ:(e,t,o)=>{"use strict";o.d(t,{A:()=>a});var r=o("D/Yr"),n=o("CoNQ"),s=o("G5bJ");const a=class ResolveCommentCommand{constructor(e,t,o,r){this.comment=e,this.pageIndex=t,this.commentStore=o,this.commentsStore=r}execute(){this.executeOnUi(r.Ay.STATUS_RESOLVED),this.executeOnServer()}executeOnUi(e){var t,o;this.comment=this.commentsStore.updateCommentUIModels(this.comment,this.pageIndex),null===(t=this.comment)||void 0===t||null===(o=t.read)||void 0===o||o.setReadValue(!0),this.comment.setStatus(e)}executeOnServer(){n.A.queueOperation(n.A.resolveComment(this.pageIndex,this.comment))}undo(){if(s.A.validateExistingDraftCommentReply())return;const e=this.commentsStore.getCommentByTid(this.comment.tid,this.pageIndex);e&&(this.comment=e),this.executeOnUi(r.Ay.STATUS_OPEN),this.undoOnServer()}undoOnServer(){n.A.queueOperation(n.A.unresolveComment(this.pageIndex,this.comment))}redo(){if(s.A.validateExistingDraftCommentReply())return;const e=this.commentsStore.getCommentByTid(this.comment.tid,this.pageIndex);e&&(this.comment=e),this.executeOnUi(r.Ay.STATUS_RESOLVED),this.executeOnServer()}}},nAoo:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function isIndex(e,o){var r=typeof e;return!!(o=null==o?9007199254740991:o)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<o}},nKU3:(e,t,o)=>{var r=o("8f/F"),n=Object.prototype,s=n.hasOwnProperty,a=n.toString,l=r?r.toStringTag:void 0;e.exports=function getRawTag(e){var t=s.call(e,l),o=e[l];try{e[l]=void 0;var r=!0}catch(e){}var n=a.call(e);return r&&(t?e[l]=o:delete e[l]),n}},nf4q:(e,t,o)=>{"use strict";o.r(t),o.d(t,{filterStateEmitter:()=>n,getApplyFiltersCallback:()=>getApplyFiltersCallback,getCurrentFilterState:()=>getCurrentFilterState,getPredictedCount:()=>getPredictedCount,setApplyFiltersCallback:()=>setApplyFiltersCallback,setPredictedCountCallback:()=>setPredictedCountCallback,updateFilterState:()=>updateFilterState});var r=o("4h5g");class FilterStateEmitter{constructor(){this.listeners=[]}static getInstance(){return FilterStateEmitter.instance||(FilterStateEmitter.instance=new FilterStateEmitter),FilterStateEmitter.instance}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}emit(e){this.listeners.forEach(t=>t(e))}}const n=FilterStateEmitter.getInstance();let s=null;const updateFilterState=()=>{const e=r.default.appliedFilterCount>0;s!==e&&(s=e,n.emit(e))},getCurrentFilterState=()=>null!=s?s:r.default.appliedFilterCount>0;let a=null,l=null;const setApplyFiltersCallback=e=>{a=e},setPredictedCountCallback=e=>{l=e},getPredictedCount=()=>l?l():getCurrentFilterState()?r.default.noOfFilteredCommentComputed:0,getApplyFiltersCallback=()=>a},nnZV:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var r,n,s=o("abd3"),a=o("0/0f"),l=o("9+t3"),c=o("hGRN"),p=o("/Oxh"),d=o("kiUt"),m=o("AvEB"),u=o("llUt");function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const h=new(n=_applyDecoratedDescriptor((r=class AssetStore{constructor(){this.assetURN=void 0,this.asset=void 0,this.isPDFNext=void 0,this.isUnSharedReview=void 0,function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}(this,"totalPageCount",n,this)}setTotalPageCount(e){this.totalPageCount=e}getAnnotation(e,t){return(0,p.Np)(e,t,d.A.isEmojiReactionsEnabled())}getAsset(e){return new Promise((t,o)=>{this.asset?t(this.asset):(m.A.getClient({commentsApiUrl:d.A.commentsApiUrl}),this.getAssetURN().then(o=>{if(!o)throw this.resetAssetCache(),new Error(`Invalid AssetURN: ${o}`);this.asset=(0,p.eM)(o,e,d.A.isEmojiReactionsEnabled()),t(this.asset)}).catch(e=>{(0,a.A)({context:"AssetStore"}).error("Failed to get AssetURN:",e),o(e)}))})}getAssetURN(){return new Promise((e,t)=>{l.default.getInstance().previewApis.documentState.getTotalPages().then(e=>this.setTotalPageCount(e)),(0,c.eF)()?(this.setAssetURNOnLoad(u.PreviewStore.instance.assetUri),e("ASSET_ID")):d.A.getSendBootstrapData().then(o=>{o.commentingId?(this.setAssetURNOnLoad(o.commentingId),e(o.commentingId)):t(new Error("Sendbootstrap data missing commentingId"))}).catch(o=>{if(404===o.status)d.A.getReview().then(o=>{let r=o.Authorization;0===r.indexOf("Bearer ")&&(r=r.substr(7));const n=u.PreviewStore.instance.assetUri;o.fetchRecipientsData(n,r).then(t=>{this.isUnSharedReview=!0;const o=t.data.parcels[0].files[0].id;this.setAssetURNOnLoad(o),e(o)}).catch(e=>{t(e)})}).catch(e=>{t(e)});else{(0,a.A)({context:"AssetStore"}).error(JSON.stringify(o)),t(o)}})})}resetAssetCache(){this.assetURN=void 0,this.asset=void 0,this.isPDFNext=void 0,this.isUnSharedReview=void 0}setIsPDFNext(e){this.isPDFNext=e}stopCheckingForUpdates(){this.asset&&this.asset.stopCheckingForUpdates()}setAssetURNOnLoad(e){this.assetURN=e}}).prototype,"totalPageCount",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_applyDecoratedDescriptor(r.prototype,"setTotalPageCount",[s.action],Object.getOwnPropertyDescriptor(r.prototype,"setTotalPageCount"),r.prototype),_applyDecoratedDescriptor(r.prototype,"setAssetURNOnLoad",[s.action],Object.getOwnPropertyDescriptor(r.prototype,"setAssetURNOnLoad"),r.prototype),r)},nsdc:(e,t,o)=>{var r=o("Z7YH"),n="object"==typeof self&&self&&self.Object===Object&&self,s=r||n||Function("return this")();e.exports=s},ntwr:(e,t,o)=>{"use strict";o.d(t,{A:()=>g});var r=o("6AL6"),n=o("G5bJ"),s=o("D/Yr"),a=o("hGRN"),l=o("kPFd"),c=o("WJZ5"),p=o("kiUt"),d=o("v3fp"),m=o("iaHC"),u=o("QMW/"),h=o("JGHU");const g=class CreateCommentCommand{constructor(e,t,o){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{autoCommit:s,timeoutPeriod:a,shouldTakeFocus:c,shouldCancelEmptyComment:p}=r;this.commentBody=e,this.selector=e.target.selector,this.selectedCoordsObj=t,this.autoCommit=!!(0,l.sq)()||s,this.userProfileStore=o.userProfileStore,this.reviewParticipantsStore=o.reviewParticipantsStore,this.toolBarStore=o.toolBarStore,this.commentsStore=o.commentsStore,this.commentsDropinStore=o.commentsDropinStore,this.pageIndex=this.selector.node.index,this.timeoutPeriod=a,this.comment=void 0,this.shouldTakeFocus=c,this.shouldCancelEmptyComment=p,this.commentsUtil=n.A.getInstance(),this.quickCommentVerbId=r.quickCommentVerbId,this.oneClickComment=r.oneClickComment}resetSelectedTool(){this.selector.subtype!=s.Ay.REDHAWK_COMMENT_HIGHLIGHT&&this.selector.subtype!=s.Ay.REDHAWK_COMMENT_STRIKEOUT&&this.selector.subtype!=s.Ay.REDHAWK_COMMENT_UNDERLINE&&setTimeout(()=>{},this.timeoutPeriod)}isStickySyncedOnServer(e){return this.commentsUtil.isStickyComment(e)&&!e.syncPending&&e.syncedWithServer}executeOnUi(){let e;if(this.commentBody.motivation)e=this.commentBody;else{let t,o={};const r=this.userProfileStore.getUserProfile();if(r&&(this.userProfileStore.isFrictionlessUser()||this.userProfileStore.hasAuth||(0,a.eF)())&&(t=r.getEmail(),o={id:r.getUserId(),name:r.getUserName(),email:t,type:s.Ay.PERSON}),(0,a.eF)()&&r&&r.getPictureURL()&&(o.img=r.getPictureURL()),!this.selector.strokeColor){const e=this.toolBarStore.getToolColor(this.selector.subtype);this.selector.strokeColor=e}const n=this.selector.opacity;this.selector.opacity=n;const l=this.commentsUtil.getCurrentTimeStamp();e={bodyValue:this.commentBody.bodyValue||"",motivation:s.Ay.MOTIVATION_COMMENTING,target:{selector:this.selector},creator:o,created:l,modified:l}}const t={shouldCancelEmptyComment:this.shouldCancelEmptyComment};void 0!==this.shouldTakeFocus&&(t.shouldTakeFocus=this.shouldTakeFocus);const o=this.commentsStore.addCommentToPage(this.pageIndex,e,t);o.setSelectedCoords(this.selectedCoordsObj),!(0,a.eF)()&&this.resetSelectedTool(),this.commentsStore.isSelectionInProgress=!1,this.commentsStore.addToUnsavedAnnotList(o.cid,o.motivation),this.commentsStore.setShouldReplyFieldBeActive(!1),o.setIsEditing(!1),this.comment=o}executeOnServer(){(this.userProfileStore.hasAuth||(0,a.eF)())&&(this.commentsStore.saveCommentToServer(this.pageIndex,this.comment),this.comment.resetSyncPending(),this.comment.setSyncWithServer(!0),this.comment.id===this.commentsStore.selectedCommentId&&this.commentsStore.resetSelectedCommentId()),this.commentsDropinStore.showNewCommentPopup&&this.commentsStore.setSelectedNewCommentPopupId(this.comment.id)}execute(){this.executeOnUi(),m.A.setSelectedIndex(this.pageIndex);const e=this.commentsUtil.isStickyComment(this.comment),t=this.commentsUtil.isMarkupComment(this.comment),o=n.A.isRedliningComment(this.comment);if((0,a.eF)())this.autoCommit||!1===this.commentsDropinStore.forcedShouldShowCommentsPanel?(this.executeOnServer(),!1===this.commentsDropinStore.forcedShouldShowCommentsPanel&&this.comment.bodyValue&&!c.A.isFreeText(this.comment)&&this.commentsDropinStore.setShouldShowCommentsPanel(!0)):this.shouldCancelEmptyComment||(0,u.L)(this.commentsDropinStore)?(0,d.LX)().then(t=>{t||(e||this.shouldCancelEmptyComment?this.commentsDropinStore.showNewCommentPopup?this.commentsStore.setSelectedCommentId(this.comment.cid):this.commentsDropinStore.setShouldShowCommentsPanel(!0):this.executeOnServer())}):(this.executeOnServer(),this.commentsStore.setSelectedCommentId(this.comment.cid)),(0,r.BI)("Commenting","CommentCreation","CommentAdded",{"adb.event.context.dc.parentAnnot":this.comment.target.selector.subtype,"adb.event.context.dc.pageNum":this.pageIndex});else{let r=!1;if(this.quickCommentVerbId||this.oneClickComment){if(!this.userProfileStore.hasAuth&&!(0,a.eF)())return this.commentsDropinStore.showNewCommentPopup&&(this.comment.setUnsavedCommentText(this.comment.bodyValue),this.comment.setBodyValue(null),this.commentsStore.setSelectedNewCommentPopupId(this.comment.cid)),this.commentsStore.setShowPageLevelWelcomeDialog(!0),void this.commentsStore.setPendingComment(this.comment);this.executeOnServer(),this.commentsStore.setSelectedCommentId(this.comment.cid),r=!0}(0,d.LX)().then(s=>{s||(!this.commentsDropinStore.showNewCommentPopup&&(e||t)||o?(p.A.apis.eventEmitter.emit("adobe:comments:commentsPanelOpen"),setTimeout(()=>{n.A.openRHPIfNotVisible(this.commentsDropinStore)},0)):(r||(this.userProfileStore.hasAuth||(0,a.eF)())&&this.commentsStore.saveCommentToServer(this.pageIndex,this.comment),this.commentsStore.setSelectedCommentId(this.comment.id)))}),(0,h.zd)()}}undoOnUi(){this.commentsStore.deleteCommentFromPageUIModel(this.comment.cid,this.pageIndex),this.commentsStore.removeFromUnsavedAnnotList(this.comment.id,this.comment.motivation)}undoOnServer(){this.commentsStore.deleteCommentFromServer(this.comment,this.pageIndex)}undo(){if(n.A.validateExistingDraftCommentReply())return;const e=this.commentsStore.getCommentByTid(this.comment.tid,this.pageIndex);e&&(this.comment=e),((0,a.eF)()||this.quickCommentVerbId)&&(this.autoCommit||this.commentsUtil.isMarkupComment(this.comment)||this.isStickySyncedOnServer(this.comment))&&this.undoOnServer(),this.undoOnUi()}redoOnUi(){const e=this.commentsUtil.getCurrentTimeStamp();this.comment.setModified(e),this.comment.setCreated(e),this.commentsStore.readdCommentsToPage(this.pageIndex,this.comment),!(0,a.eF)()&&this.resetSelectedTool(),this.commentsStore.isSelectionInProgress=!1,this.commentsStore.addToUnsavedAnnotList(this.comment.cid,this.comment.motivation),this.comment.setIsEditing(!1),this.comment.resetUnsavedReplyBody(),this.comment.setIsReplying(!1)}redoOnServer(){this.commentsStore.saveCommentToServer(this.pageIndex,this.comment),this.comment.resetSyncPending(),this.comment.setSyncWithServer(!0)}redo(){if(n.A.validateExistingDraftCommentReply())return;const e=this.commentsStore.getCommentByTid(this.comment.tid,this.pageIndex);e&&(this.comment=e),this.redoOnUi(),((0,a.eF)()||this.quickCommentVerbId)&&(this.autoCommit||this.commentsUtil.isMarkupComment(this.comment)||this.isStickySyncedOnServer(this.comment))&&this.redoOnServer()}}},nulL:(e,t,o)=>{var r=o("XNqU");e.exports=function listCacheHas(e){return r(this.__data__,e)>-1}},oIgG:(e,t,o)=>{var r=o("wxXx"),n=o("DrWp");e.exports=function baseAssignIn(e,t){return e&&r(t,n(t),e)}},pHDy:(e,t,o)=>{var r={"./cs-CZ.json":["08B1",4611],"./da-DK.json":["acN1",5488],"./de-DE.json":["EjZn",8062],"./en-GB.json":["pUtz",208],"./en-US.json":["t39f",3577],"./es-ES.json":["SPzx",6724],"./fi-FI.json":["hrqw",534],"./fr-FR.json":["1xIn",2764],"./it-IT.json":["XeRS",8278],"./ja-JP.json":["YtLb",2409],"./ko-KR.json":["8Y6V",7527],"./nb-NO.json":["G976",1579],"./nl-NL.json":["SqX1",4816],"./pl-PL.json":["u9al",7192],"./pt-BR.json":["GN92",2668],"./ru-RU.json":["v5cd",1206],"./sv-SE.json":["Te3y",1915],"./tr-TR.json":["gQP8",9340],"./zh-CN.json":["dI7b",2179],"./zh-TW.json":["Rm8P",9723],"./zz-ZY.json":["gwRR",9405],"./zz-ZZ.json":["9hE6",6300]};function webpackAsyncContext(e){if(!o.o(r,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],n=t[0];return o.e(t[1]).then(()=>o.t(n,19))}webpackAsyncContext.keys=()=>Object.keys(r),webpackAsyncContext.id="pHDy",e.exports=webpackAsyncContext},plsW:(e,t,o)=>{e.exports=o("2pFd")("o4sN")},polL:(e,t,o)=>{var r=o("XHmI"),n=o("yejP"),s=Object.prototype.hasOwnProperty;e.exports=function baseKeys(e){if(!r(e))return n(e);var t=[];for(var o in Object(e))s.call(e,o)&&"constructor"!=o&&t.push(o);return t}},qVjQ:()=>{"use strict";!function(e){if(!e.fetch||navigator.userAgent.match(/Edge\/14\.([0-9]+)/)){var t="URLSearchParams"in e,o="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),n="FormData"in e,s="ArrayBuffer"in e;Headers.prototype.append=function(e,t){e=normalizeName(e),t=normalizeValue(t);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(t)},Headers.prototype.delete=function(e){delete this.map[normalizeName(e)]},Headers.prototype.get=function(e){var t=this.map[normalizeName(e)];return t?t[0]:null},Headers.prototype.getAll=function(e){return this.map[normalizeName(e)]||[]},Headers.prototype.has=function(e){return this.map.hasOwnProperty(normalizeName(e))},Headers.prototype.set=function(e,t){this.map[normalizeName(e)]=[normalizeValue(t)]},Headers.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(o){this.map[o].forEach(function(r){e.call(t,r,o,this)},this)},this)},Headers.prototype.keys=function(){var e=[];return this.forEach(function(t,o){e.push(o)}),iteratorFor(e)},Headers.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),iteratorFor(e)},Headers.prototype.entries=function(){var e=[];return this.forEach(function(t,o){e.push([o,t])}),iteratorFor(e)},o&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var a=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this)},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var e=new Response(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];Response.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new Response(null,{status:t,headers:{location:e}})},e.Headers=Headers,e.Request=Request,e.Response=Response,e.fetch=function(e,t){return new Promise(function(o,n){var s;s=Request.prototype.isPrototypeOf(e)&&!t?e:new Request(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:headers(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/im.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},t="response"in a?a.response:a.responseText;o(new Response(t,e))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(s.method,s.url,!0),"include"===s.credentials&&(a.withCredentials=!0),"responseType"in a&&r&&(a.responseType="blob"),s.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===s._bodyInit?null:s._bodyInit)})},e.fetch.polyfill=!0}function normalizeName(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function normalizeValue(e){return"string"!=typeof e&&(e=String(e)),e}function iteratorFor(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function Headers(e){this.map={},e instanceof Headers?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function consumed(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function fileReaderReady(e){return new Promise(function(t,o){e.onload=function(){t(e.result)},e.onerror=function(){o(e.error)}})}function readBlobAsArrayBuffer(e){var t=new FileReader;return t.readAsArrayBuffer(e),fileReaderReady(t)}function Body(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(n&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!s||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r?(this.blob=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)},this.text=function(){var e=consumed(this);if(e)return e;if(this._bodyBlob)return function readBlobAsText(e){var t=new FileReader;return t.readAsText(e),fileReaderReady(t)}(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=consumed(this);return e||Promise.resolve(this._bodyText)},n&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}function Request(e,t){var o=(t=t||{}).body;if(Request.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Headers(e.headers)),this.method=e.method,this.mode=e.mode,o||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new Headers(t.headers)),this.method=function normalizeMethod(e){var t=e.toUpperCase();return a.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function decode(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var o=e.split("="),r=o.shift().replace(/\+/g," "),n=o.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(n))}}),t}function headers(e){var t=new Headers;return(e.getAllResponseHeaders()||"").trim().split("\n").forEach(function(e){var o=e.trim().split(":"),r=o.shift().trim(),n=o.join(":").trim();t.append(r,n)}),t}function Response(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof Headers?t.headers:new Headers(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0)},qgO1:(e,t,o)=>{"use strict";o.d(t,{A:()=>PCCommentsUtil});var r,n=o("abd3"),s=o("z7bB"),a=o.n(s),l=o("hLfH"),c=o.n(l),p=o("D/Yr"),d=o("WJZ5"),m=o("nnZV"),u=o("IBYW"),h=o("QNhk"),g=o("G5bJ"),y=o("a8bA"),C=o("Hlvc");class PCCommentsUtil{static getInstance(){return PCCommentsUtil.instance||(PCCommentsUtil.instance=new PCCommentsUtil),PCCommentsUtil.instance}static updateFreeText(e,t){const o=e;if(!t)return o;const r=PCCommentsUtil.getFontInfoForAnnot(t.fontInfo);return o.target.selector={...e.target.selector,style:{fontName:r.fontName,fontSize:r.fontSize,color:r.color,letterSpacing:r.letterSpacing},textOffsetPoint:t.textOffsetPoint,lineHeight:t.lineHeight},o}}r=PCCommentsUtil,PCCommentsUtil.instance=void 0,PCCommentsUtil.getSubtype=(e,t)=>{switch(e){case"Highlight":return"highlight";case"Underline":return"underline";case"Text":return"note";case"StrikeOut":return"strikeout";case"Ink":return"shape";case"FreeText":return"freetext";case"Caret":return"insert";case"Sound":return t?"sound":"unsupported";default:return"unsupported"}},PCCommentsUtil.getType=e=>{switch(e){case"highlight":return"Highlight";case"underline":return"Underline";case"note":return"Text";case"strikeout":return"StrikeOut";case"shape":return"Ink";case"freetext":return"FreeText";case"replace":return"Replace";case"insert":return"Caret";default:return"Unsupported"}},PCCommentsUtil.getColorHexToRGB=e=>{try{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),o=parseInt(t[1],16)/255,r=parseInt(t[2],16)/255;return`${o} ${r} ${parseInt(t[3],16)/255} RG`}catch(t){return e}},PCCommentsUtil.getQuadPoints=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[],o=e.length/8;for(let r=0;r<o;r++){const o=[];for(let t=0;t<4;t++){const n={x:e[8*r+2*t],y:e[8*r+2*t+1]};o.push(n)}t.push(o)}return t},PCCommentsUtil.getInkList=function(){const e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>{const o=[];for(let e=0;e<t.length/2;e++){const r={x:t[2*e],y:t[2*e+1]};o.push(r)}e.push(o)}),e},PCCommentsUtil.getDocRectForAnnot=e=>({xMin:e[0],yMin:e[1],xMax:e[2],yMax:e[3]}),PCCommentsUtil.getFontInfoForAnnot=e=>({...e,color:r.getColor(e.color)}),PCCommentsUtil.getDocRectForAsset=e=>({xMin:Math.min(e[0],e[2]),yMin:Math.min(e[1],e[3]),xMax:Math.max(e[0],e[2]),yMax:Math.max(e[1],e[3])}),PCCommentsUtil.flattenInkList=function(){const e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>{const o=[];t.forEach(e=>{o.push(e.x),o.push(e.y)}),e.push(o)}),e},PCCommentsUtil.getColor=e=>{const numToHex=e=>{let t=Math.round(255*e).toString(16);return t.length<2&&(t=`0${t}`),t};try{if(e){const t=e.split(" ");return`#${numToHex(t[0])}${numToHex(t[1])}${numToHex(t[2])}`}return p.Ay.REDHAWK_YELLOW_COLOR}catch(e){return p.Ay.REDHAWK_YELLOW_COLOR}},PCCommentsUtil.flattenQuadPoints=function(){const e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>{t.forEach(t=>{e.push(t.x),e.push(t.y)})}),e},PCCommentsUtil.getMotivation=e=>e?"replying":"commenting",PCCommentsUtil.getIntent=e=>e.target.selector.intent,PCCommentsUtil.getSubject=e=>e.target.selector.subject,PCCommentsUtil.getCommentRotation=e=>e.target.selector.commentRotation,PCCommentsUtil.isCommentFreeHighlight=e=>e.target.selector.subtype===p.Ay.REDHAWK_COMMENT_SHAPE&&r.getIntent(e)===p.Ay.FREE_HIGHLIGHT_INTENT,PCCommentsUtil.reverseTranslate=e=>{const t={type:r.getType(e.target.selector.subtype),docRect:r.getDocRectForAsset(e.target.selector.boundingBox),contents:e.bodyValue,canZoom:"0",author:e.creator.name,isHidden:"0",quadPoints:r.getQuadPoints(e.target.selector.quadPoints),inkList:r.getInkList(e.target.selector.inkList),intent:r.getIntent(e),subject:r.getSubject(e)};return d.A.isFreeText(e)?(t.fontInfo={color:r.getColorHexToRGB(e.target.selector.style.color),fontName:e.target.selector.style.fontName,fontSize:e.target.selector.style.fontSize,letterSpacing:e.target.selector.style.letterSpacing},t.lineHeight=e.target.selector.lineHeight||1.2*e.target.selector.style.fontSize,t.appearanceData=(0,n.toJS)(e.target.selector.appearanceData),t.commentRotation=r.getCommentRotation(e)):(t.color=r.getColorHexToRGB(e.target.selector.strokeColor),t.border={width:e.target.selector.strokeWidth,dash:{}},t.opacity=e.target.selector.opacity?e.target.selector.opacity:1),t},PCCommentsUtil.findChanges=(e,t)=>{const o={},n=e.target.selector,s=t.target.selector,customComparator=(e,t)=>{for(let o=0;o<e.length;o++)if(Math.abs(e[o]-t[o])>2)return!1;return!0};return void 0===e.bodyValue||void 0===t.bodyValue||a()(e.bodyValue,t.bodyValue)||(o.contents=t.bodyValue),n.strokeColor&&s.strokeColor&&!a()(n.strokeColor,s.strokeColor)&&(o.color=r.getColorHexToRGB(s.strokeColor)),n.strokeWidth&&s.strokeWidth&&!a()(n.strokeWidth,s.strokeWidth)&&(o.strokeWidth=r.getColorHexToRGB(s.strokeWidth)),n.inkList&&s.inkList&&!c()(n.inkList,s.inkList,(e,t)=>{if(e.length!==t.length)return!1;for(let o=0;o<e.length;o+=1){if(e[o].length!==t[o].length)return!1;if(!c()(e[o],t[o],customComparator))return!1}return!0})&&(o.inkList=r.getInkList(s.inkList)),n.boundingBox&&s.boundingBox&&!c()(n.boundingBox,s.boundingBox,customComparator)&&(o.docRect=r.getDocRectForAnnot(s.boundingBox)),n.quadPoints&&s.quadPoints&&!c()(n.quadPoints,s.quadPoints,customComparator)&&(o.quadPoints=r.getQuadPoints(s.quadPoints)),o},PCCommentsUtil.isWidthChanging=(e,t)=>Math.abs(Math.abs(e[0]-e[2])-Math.abs(t[0]-t[2]))>2,PCCommentsUtil.isHeightChanging=(e,t)=>Math.abs(Math.abs(e[1]-e[3])-Math.abs(t[1]-t[3]))>2,PCCommentsUtil.isSupportedCommentForAPI=e=>-1!==p.Ay.API_SUPPORTED_COMMENTS.indexOf(e.target.selector.subtype),PCCommentsUtil.getFlattenCommentSupportedForAPI=e=>{let t=[];const o=e.filter(e=>r.isSupportedCommentForAPI(e));return o.sort((e,t)=>e.target.selector.node.index-t.target.selector.node.index),o.forEach(e=>{t.push(e),t=t.concat(e.replies||[])}),t},PCCommentsUtil.normalizeFreeTextAnnotation=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(o=>{h.A.integrationProvider.apis.comments.setPreventDirtyPDF(!0);const r={...(0,n.toJS)(e)};r.id=g.A.getInstance().getGuid(),m.A.getAssetURN().then(e=>{const n=new u.A(e);n.comment(r.bodyValue,r.mentions,r,"",r.target.selector.subtype,"function"==typeof r.target.selector.getSelectorForServer?r.target.selector.getSelectorForServer():r.target.selector).then(async e=>{if(t){const t=new C.A(n.id,e),o=await t.getCommentAppearance();e.target.selector.appearanceData=o}y.A.removeAnnotationsFromPDF([e]).then(()=>{o(e)})}).catch(()=>h.A.integrationProvider.apis.comments.setPreventDirtyPDF(!1))})})},PCCommentsUtil.getProperties=(e,t,o)=>{const r={};return t===p.Ay.MOTIVATION_COMMENTING&&o&&(o.strokeColor&&(r.strokeColor=o.strokeColor),o.strokeWidth&&(r.strokeWidth=o.strokeWidth),o.boundingBox&&(r.boundingBox=o.boundingBox),o.quadPoints&&(r.quadPoints=o.quadPoints),o.inkList&&(r.inkList=o.inkList),o.style&&(r.style={color:o.style.color,fontSize:o.style.fontSize}),o.styleClass&&(r.styleClass=o.styleClass)),r.bodyValue=e,r},PCCommentsUtil.hasAnnotationChanged=(e,t)=>{const customComparator=(e,t)=>{if(e.length!==t.length)return!1;for(let o=0;o<e.length;o+=1)if(Math.abs(e[o]-t[o])>0)return!1;return!0},inkListComparator=(e,t)=>{if(e.length!==t.length)return!1;for(let o=0;o<e.length;o+=1){if(e[o].length!==t[o].length)return!1;if(!c()(e[o],t[o],customComparator))return!1}return!0};let o=!1;return Object.keys(t).forEach(r=>{"boundingBox"===r||"quadPoints"===r?c()(t[r],e[r],customComparator)||(o=!0):"inkList"===r?c()(t[r],e[r],inkListComparator)||(o=!0):JSON.stringify(t[r])!==JSON.stringify(e[r])&&(o=!0)}),o}},r74q:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var r=o("YWiy"),n=o("KvYl"),s=o.n(n),a=o("6jw6");const CustomIcon=e=>{const t=e.url,o=e.size;return r.createElement(a.default,{size:o},r.createElement(t,{size:o}))},l=CustomIcon;CustomIcon.propTypes={url:s().string,size:s().string},CustomIcon.defaultProps={url:"",size:"S"}},rHdP:(e,t,o)=>{var r=o("df/W"),n=o("FL3/"),s=o("RS7y"),a=s&&s.isTypedArray,l=a?n(a):r;e.exports=l},rqnL:(e,t,o)=>{var r=o("wxXx"),n=o("S1m8");e.exports=function baseAssign(e,t){return e&&r(t,n(t),e)}},rrFL:(e,t)=>{"use strict";let o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function rng(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(r)};const r=new Uint8Array(16)},sGyT:(e,t,o)=>{var r=o("J4lf");e.exports=function mapCacheDelete(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},sXS8:(e,t,o)=>{var r=o("74RQ"),n=o("9tLm"),s=o("lxiP");e.exports=function equalArrays(e,t,o,a,l,c){var p=1&o,d=e.length,m=t.length;if(d!=m&&!(p&&m>d))return!1;var u=c.get(e),h=c.get(t);if(u&&h)return u==t&&h==e;var g=-1,y=!0,C=2&o?new r:void 0;for(c.set(e,t),c.set(t,e);++g<d;){var _=e[g],b=t[g];if(a)var E=p?a(b,_,g,t,e,c):a(_,b,g,e,t,c);if(void 0!==E){if(E)continue;y=!1;break}if(C){if(!n(t,function(e,t){if(!s(C,t)&&(_===e||l(_,e,o,a,c)))return C.push(t)})){y=!1;break}}else if(_!==b&&!l(_,b,o,a,c)){y=!1;break}}return c.delete(e),c.delete(t),y}},sbR2:e=>{e.exports=function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},suZy:(e,t,o)=>{e=o.nmd(e);var r=o("nsdc"),n=o("m8yz"),s=t&&!t.nodeType&&t,a=s&&e&&!e.nodeType&&e,l=a&&a.exports===s?r.Buffer:void 0,c=(l?l.isBuffer:void 0)||n;e.exports=c},tAbr:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("Fyfs")),n=o("XF5l"),s=function _interopRequireWildcard(e,t){if("function"==typeof WeakMap)var o=new WeakMap,r=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,a={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return a;if(n=t?r:o){if(n.has(e))return n.get(e);n.set(e,a)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(a,t,s):a[t]=e[t]);return a}(e,t)}(o("4cbv"));const a=354e4;class UserAuthorizationModel extends n.EventEmitter2{static getInstance(){if(UserAuthorizationModel._instance&&!UserAuthorizationModel._instance.isTokenExpired())return UserAuthorizationModel._instance}static isInitialized(){return null!=this.getInstance()}initializeUserType(){UserAuthorizationModel.userTypes={IMS:"IMS",ANON:"ANON"}}constructor(e,t,o){super(),this._tokenId=void 0,this.environment=o||"localdev",this.initializeUserType();const{imsAuthInfo:r}=e;if(null!=r){var n;this.userType=UserAuthorizationModel.userTypes.IMS,this.email=r.getUserProfile().email,this.userName=r.getUserProfile().displayName,this.userId="urn:uuid:"+r.getUserProfile().userId,this._tokenId=()=>{var e;return null===(e=r.getAccessTokenInfo())||void 0===e?void 0:e.access_token};const e=null===(n=r.getAccessTokenInfo())||void 0===n?void 0:n.expires_in;e>=0&&(this.tokenExpireTime=(new Date).getTime()+e)}else this.userType=UserAuthorizationModel.userTypes.ANON,this.email=e.email,this.userName=e.userName,this._tokenId=e.tokenId,this.userId=e.userId,this.tokenExpireTime=e.tokenExpireTime,this.captcharesponse=e.captcharesponse,this.captchaSiteKey=e.captchaSiteKey;UserAuthorizationModel._instance=this,t||this.generateTokenId()}get tokenId(){return"function"==typeof this._tokenId?this._tokenId():this._tokenId}set tokenId(e){this._tokenId=e}getTokenId(){return this.getUserType()===UserAuthorizationModel.userTypes.ANON?"AnonBearer "+this.tokenId:"Bearer "+this.tokenId}setTokenId(e){this._tokenId=e,this.setTokenExpireTime()}setTokenExpireTime(){this.tokenExpireTime=(new Date).getTime()+a}getTokenExpireTime(){return this.tokenExpireTime}getUserName(){return this.userName}setUserName(e){this.userName=e}getEmail(){return this.email}setEmail(e){this.email=e}setUserId(e){this.userId=e}getUserId(){return this.userId}getEmail(){return this.email}getUserType(){return this.userType}isTokenGenerated(){return void 0!==this._tokenId}isTokenExpired(){if(this.userType===UserAuthorizationModel.userTypes.IMS);else if(this.userType===UserAuthorizationModel.userTypes.ANON)return!this.isTokenGenerated()||this.getTokenExpireTime()<=(new Date).getTime()}generateTokenId(){this.userType===UserAuthorizationModel.userTypes.IMS?this.emit("TOKEN_ID_GENERATED",{}):this.userType===UserAuthorizationModel.userTypes.ANON&&this.isTokenExpired()&&this.fetchAnonymousAccessToken().then(e=>{this._tokenId=e.data.ticket,this.userId=e.data.id,this.tokenExpireTime=(new Date).getTime()+a,this.emit("TOKEN_ID_GENERATED",{})})}fetchAPIBody(){return{userName:this.userName,email:this.email,captchaResponseCode:this.captcharesponse,captchaSiteKey:this.captchaSiteKey}}fetchAPIHeader(){let e=s.config.api.createAnonymousSession.headers;new s.default.Confclass(this.environment);return e["x-api-key"]=s.default.Confclass.getRedhawkApiKey(),e}fetchAnonymousAccessToken(){let e=this.fetchAPIBody(),t=this.fetchAPIHeader(),o=(new s.default.Confclass(this.environment),s.default.Confclass.getURL()+"create_anonymous_session");return r.default.fetch(o,s.config.api.createAnonymousSession.method,e,t)}static createUserAuthorizationModelFromLocalStorage(e){UserAuthorizationModel._instance=new UserAuthorizationModel(e,!0)}}t.default=UserAuthorizationModel;e.exports=t.default},tcys:(e,t,o)=>{"use strict";o.d(t,{A:()=>g});var r,n,s=o("abd3"),a=o("plsW"),l=o("nnZV"),c=o("iaHC"),p=o("G5bJ"),d=o("+vQz"),m=o("D/Yr"),u=o("CKE+"),h=o("7otS");function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const g=new(n=_applyDecoratedDescriptor((r=class CommentSyncStore{constructor(){this.latestComments=void 0,this.commentsProviderInstance=void 0,function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}(this,"isNotificationAvailable",n,this)}startCheckForUpdates(){a.providers["comments-provider"]().then(e=>{this.commentsProviderInstance=e}),l.A.getAsset().then(e=>{this.asset=e,e.on("update",e=>{this.shouldStopCheckingForUpdates||(this.latestComments=e.annotations,this.syncAnnotations())})})}stopCheckingForUpdates(){var e;this.shouldStopCheckingForUpdates=!0,null===(e=this.asset)||void 0===e||e.stopCheckingForUpdates()}setIsNotificationAvailable(e){this.isNotificationAvailable=e}getUnreadCommentsCount(){return c.A.unreadCommentsCount}syncAnnotations(e){this.latestComments=e||this.latestComments;const t=c.A.comments;this.updateChangedComments(t,this.latestComments),c.A.setComments(this.latestComments),this.diffCommentList&&(this.diffCommentList.add.length||this.diffCommentList.edit.length||this.diffCommentList.delete.length)&&!this.skipUpdate()&&(this.setIsNotificationAvailable(!0),h.A.fetchReviewParticipants(),this.commentsProviderInstance.eventEmitter.emit("commentsSynced",{diffComments:this.diffCommentList}))}updateChangedComments(e,t){const o=d.sy(t,e);this.diffCommentList=o;const r=this.mergeUpdatedComments(o);return o.unchanged.concat(r)}mergeUpdatedComments(e){let t=[];return t=this.mergeAddedComments(e.add,t),t=this.mergeEditedComments(e.edit,t),this.mergeDeletedComments(e.delete),t}mergeAddedComments(e,t){for(let o=0;o<e.length;o++)e[o].newComment.motivation!==m.Ay.REPLYING&&c.A.addSyncCommentsToPage(e[o].newComment.target.selector.node.index,e[o].newComment),t.push(e[o].newComment);return t}mergeEditedComments(e,t){for(let o=0;o<e.length;o++){const r=e[o].oldComment,n=e[o].newComment;let s=!1,a=!1;const l=r;if(d.YC(r,n)&&(l.bodyValue=n.bodyValue,l.perUserPerAnnotation=n.perUserPerAnnotation,l.aggregatedInfo=n.aggregatedInfo,l.etag=n.etag,l.modified=n.modified,l.status=n.status,l.target.selector=n.target.selector,s=!0),d.RB(r.replies,n.replies)){const e=this.updateChangedComments(r.replies,n.replies);l.replies=e,a=!0}l.motivation!==m.Ay.REPLYING&&c.A.editSyncCommentsToPage(l.target.selector.node.index,l,s,a),t.push(l)}return t}hasCommentBodyChange(e,t){return e.bodyValue!==t.bodyValue}mergeDeletedComments(e){for(let t=0;t<e.length;t++)e[t].oldComment.motivation!==m.Ay.REPLYING&&c.A.deleteCommentFromPage(e[t].oldComment.id,e[t].oldComment.target.selector.node.index)}compareTimeStamp(e,t){return e-t}skipUpdate(){const e=u.A.getUserProfile();if(!p.A.isUserIMS(e)||!e)return!0;const t=this.diffCommentList.add,o=this.diffCommentList.edit;for(let o=0;o<t.length;o++)if(!p.A.getInstance().isUserOwnerOfComment(t[o].newComment,e))return!1;for(let t=0;t<o.length;t++)if(!p.A.getInstance().isUserOwnerOfComment(o[t].newComment,e))return!1;return!(this.diffCommentList.delete.length>0)}resetLatestComments(){this.latestComments=[]}resetIsNotificationAvailable(){this.isNotificationAvailable=!1}resetCommentSyncCache(){this.resetLatestComments(),this.resetIsNotificationAvailable()}}).prototype,"isNotificationAvailable",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_applyDecoratedDescriptor(r.prototype,"setIsNotificationAvailable",[s.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsNotificationAvailable"),r.prototype),_applyDecoratedDescriptor(r.prototype,"resetIsNotificationAvailable",[s.action],Object.getOwnPropertyDescriptor(r.prototype,"resetIsNotificationAvailable"),r.prototype),r)},tl3b:(e,t,o)=>{var r=o("J4lf");e.exports=function mapCacheSet(e,t){var o=r(this,e),n=o.size;return o.set(e,t),this.size+=o.size==n?0:1,this}},tnbx:e=>{e.exports=function arrayEach(e,t){for(var o=-1,r=null==e?0:e.length;++o<r&&!1!==t(e[o],o,e););return e}},uHBz:(e,t,o)=>{"use strict";o.d(t,{F:()=>getLocalisedAdobeDotComUrl,h:()=>shouldShowGenAIEntryPoint});var r=o("plsW"),n=o("D/Yr");const s=r.logging.getLogger("CommentsDropin - GenerativeAIUtils"),shouldShowGenAIEntryPoint=async()=>{try{const e=await r.providers["genai-provider"]();if(e){return await e.shouldShowGenAIEntryPoint()}return!1}catch(e){s.error("Error getting GenAI entry point status",e)}return!1},getLocalisedAdobeDotComUrl=e=>{const t=r.locale2.getLocale(),o=null==t?void 0:t.split("-")[0].toLowerCase(),s=/adobe\.com\//;try{if(s.test(e)&&n.L2.includes(o)){return e.replace(s,`adobe.com/${n.Rv[o]}/`)}}catch(e){console.error("Error getting localised Adobe dot com URL",e)}return e}},"uJ/a":(e,t,o)=>{var r=o("2m7z"),n=o("evJI"),s=o("Otif"),a=o("suZy"),l=o("nAoo"),c=o("rHdP"),p=Object.prototype.hasOwnProperty;e.exports=function arrayLikeKeys(e,t){var o=s(e),d=!o&&n(e),m=!o&&!d&&a(e),u=!o&&!d&&!m&&c(e),h=o||d||m||u,g=h?r(e.length,String):[],y=g.length;for(var C in e)!t&&!p.call(e,C)||h&&("length"==C||m&&("offset"==C||"parent"==C)||u&&("buffer"==C||"byteLength"==C||"byteOffset"==C)||l(C,y))||g.push(C);return g}},uvxz:(e,t,o)=>{var r=o("ysGJ");e.exports=function cloneDataView(e,t){var o=t?r(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}},v3fp:(e,t,o)=>{"use strict";o.d(t,{F:()=>getViewerAnalyticsForKey,LX:()=>isRHPOpen,Px:()=>openRHP,S6:()=>isCommentGenAIRHPOpen,Vq:()=>hidePopup,cb:()=>delay,du:()=>showMultidocCommentingDisabledToast,gK:()=>getBackgroundColor,oC:()=>cancellablePromise,vT:()=>openRHPPanel,xI:()=>getAuth,yp:()=>showPopup});o("plsW");var r=o("hGRN"),n=o("D/Yr"),s=o("llUt"),a=o("XWif"),l=o("9+t3"),c=o("6AL6"),p=o("QNhk");const getAuth=()=>{let e={};return e=o("plsW").auth2,e},getBackgroundColor=()=>(0,r.eF)()?n.Ay.PC_MAIN_BG_COLOR:n.Ay.REDHAWK_MAIN_BG_COLOR,isRHPOpen=()=>new Promise((e,t)=>{s.PreviewStore.instance.rhpApis.then(o=>{o.getConfig().then(t=>{const{dropinId:o}=t;e(o===n.Ay.VERB_COMMENTS)}).catch(e=>t(e))}).catch(e=>t(e))}),isCommentGenAIRHPOpen=()=>new Promise((e,t)=>{s.PreviewStore.instance.rhpApis.then(o=>{o.getConfig().then(t=>{const{dropinId:o}=t;e(o===n.Ay.VERB_COMMENTS||o===n.Ay.VERB_QANDA||o===n.Ay.VERB_OUTLINE)}).catch(e=>t(e))}).catch(e=>t(e))}),openRHP=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return isRHPOpen().then(t=>t||s.PreviewStore.instance.rhpApis.then(t=>t.openPanel("comments",e)))},cancellablePromise=e=>{let t=!1;return{promise:new Promise((o,r)=>{e.then(e=>t?r({isCanceled:t,value:e}):o(e),e=>r({isCanceled:t,error:e}))}),cancel:()=>t=!0}},delay=e=>new Promise(t=>{setTimeout(t,e)}),showMultidocCommentingDisabledToast=async()=>{(0,c.BI)("Multidoc","FileModificationToast","Shown",{},{context:"comments"});const e=await(0,a.I)("multidoc.commentingDisabled.toast");l.default.getInstance().previewApis.previewPublicApis.document.showNotification(e,{shouldRemoveActiveToasts:!0,timeout:n.Ay.COMMENTING_DISABLED_TOOLTIP_TIMEOUT})},showPopup=e=>s.PreviewStore.instance.appApis.showPopup(n.Ay.COMMENTS_DROPIN_ID,e),hidePopup=()=>s.PreviewStore.instance.appApis.hidePopup(n.Ay.COMMENTS_DROPIN_ID),openRHPPanel=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"comments",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.PreviewStore.instance.rhpApis.then(o=>o.openPanel(e,t))},getViewerAnalyticsForKey=async e=>{try{const t=await p.A.getIntegrationProvider();return await t.getViewerAnalytics(e)}catch(e){return{}}}},vhv2:(e,t)=>{"use strict";function f(e,t,o,r){switch(e){case 0:return t&o^~t&r;case 1:case 3:return t^o^r;case 2:return t&o^t&r^o&r}}function ROTL(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function sha1(e){const t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let o=0;o<t.length;++o)e.push(t.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,n=Math.ceil(r/16),s=new Array(n);for(let t=0;t<n;++t){const o=new Uint32Array(16);for(let r=0;r<16;++r)o[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];s[t]=o}s[n-1][14]=8*(e.length-1)/Math.pow(2,32),s[n-1][14]=Math.floor(s[n-1][14]),s[n-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<n;++e){const r=new Uint32Array(80);for(let t=0;t<16;++t)r[t]=s[e][t];for(let e=16;e<80;++e)r[e]=ROTL(r[e-3]^r[e-8]^r[e-14]^r[e-16],1);let n=o[0],a=o[1],l=o[2],c=o[3],p=o[4];for(let e=0;e<80;++e){const o=Math.floor(e/20),s=ROTL(n,5)+f(o,a,l,c)+p+t[o]+r[e]>>>0;p=c,c=l,l=ROTL(a,30)>>>0,a=n,n=s}o[0]=o[0]+n>>>0,o[1]=o[1]+a>>>0,o[2]=o[2]+l>>>0,o[3]=o[3]+c>>>0,o[4]=o[4]+p>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]};t.default=o},wLXU:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_interopRequireDefault(o("yaHd")),n=_interopRequireDefault(o("vhv2"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v5",80,n.default);t.default=s},wUMU:(e,t,o)=>{e=o.nmd(e);var r=o("nsdc"),n=t&&!t.nodeType&&t,s=n&&e&&!e.nodeType&&e,a=s&&s.exports===n?r.Buffer:void 0,l=a?a.allocUnsafe:void 0;e.exports=function cloneBuffer(e,t){if(t)return e.slice();var o=e.length,r=l?l(o):new e.constructor(o);return e.copy(r),r}},weTa:(e,t,o)=>{var r=o("1XbB"),n=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=n},wjb0:(e,t,o)=>{var r=o("QWpd"),n=o("yW/x"),s=o("R4fn");e.exports=function stackSet(e,t){var o=this.__data__;if(o instanceof r){var a=o.__data__;if(!n||a.length<199)return a.push([e,t]),this.size=++o.size,this;o=this.__data__=new s(a)}return o.set(e,t),this.size=o.size,this}},wsOM:(e,t,o)=>{var r=o("OLgS"),n=o("CXG2");e.exports=function baseIsMap(e){return n(e)&&"[object Map]"==r(e)}},wuKs:(e,t,o)=>{var r=o("YWiy");function SDCTileStrikethrough64(e){return r.createElement("svg",e,[r.createElement("path",{d:"m59,0H5C2.2002,0,0,2.20001,0,5v54c0,2.79999,2.2002,5,5,5h54c2.7998,0,5-2.20001,5-5V5c0-2.79999-2.2002-5-5-5Zm-22,45.75h-10c-.41406,0-.75-.33594-.75-.75s.33594-.75.75-.75h4.30078c-.02832-.07898-.05078-.16132-.05078-.25v-7c0-.41406.33594-.75.75-.75s.75.33594.75.75v7c0,.08868-.02246.17102-.05078.25h4.30078c.41406,0,.75.33594.75.75s-.33594.75-.75.75Zm10.75-13c0,.55176-.44824,1-1,1h-29.5c-.55176,0-1-.44824-1-1v-2.5c0-.55176.44824-1,1-1h14v-10.5h-10.69727c-.44238,0-.80273.38867-.80273.86719v2.38281c0,.41406-.33594.75-.75.75s-.75-.33594-.75-.75v-2.38281c0-1.30566,1.0332-2.36719,2.30273-2.36719h22.89453c1.26953,0,2.30273,1.06152,2.30273,2.36719v2.38281c0,.41406-.33594.75-.75.75s-.75-.33594-.75-.75v-2.38281c0-.47852-.36035-.86719-.80273-.86719h-10.69727v10.5h14c.55176,0,1,.44824,1,1v2.5Z",fill:"var(--iconSeafoam, #16878c)",opacity:".1",key:0}),r.createElement("rect",{x:"17.75",y:"30.75",width:"28.5",height:"1.5",fill:"var(--iconSeafoam, #16878c)",opacity:".2",key:1}),r.createElement("path",{d:"m37,44.25h-4.30078c.02832-.07898.05078-.16132.05078-.25v-7c0-.41406-.33594-.75-.75-.75s-.75.33594-.75.75v7c0,.08868.02246.17102.05078.25h-4.30078c-.41406,0-.75.33594-.75.75s.33594.75.75.75h10c.41406,0,.75-.33594.75-.75s-.33594-.75-.75-.75Z",fill:"var(--iconSeafoam, #16878c)",key:2}),r.createElement("path",{d:"m46.75,29.25h-14v-10.5h10.69727c.44238,0,.80273.38867.80273.86719v2.38281c0,.41406.33594.75.75.75s.75-.33594.75-.75v-2.38281c0-1.30566-1.0332-2.36719-2.30273-2.36719h-22.89453c-1.26953,0-2.30273,1.06152-2.30273,2.36719v2.38281c0,.41406.33594.75.75.75s.75-.33594.75-.75v-2.38281c0-.47852.36035-.86719.80273-.86719h10.69727v10.5h-14c-.55176,0-1,.44824-1,1v2.5c0,.55176.44824,1,1,1h29.5c.55176,0,1-.44824,1-1v-2.5c0-.55176-.44824-1-1-1Zm-.5,3h-28.5v-1.5h28.5v1.5Z",fill:"var(--iconSeafoam, #16878c)",key:3})])}SDCTileStrikethrough64.defaultProps={id:"b","data-name":"Icons",width:"64",height:"64",viewBox:"0 0 64 64"},e.exports=SDCTileStrikethrough64,SDCTileStrikethrough64.default=SDCTileStrikethrough64},wxXx:(e,t,o)=>{var r=o("gHxW"),n=o("gKYf");e.exports=function copyObject(e,t,o,s){var a=!o;o||(o={});for(var l=-1,c=t.length;++l<c;){var p=t[l],d=s?s(o[p],e[p],p,o,e):void 0;void 0===d&&(d=e[p]),a?n(o,p,d):r(o,p,d)}return o}},"x1c+":(e,t,o)=>{e.exports=o("U2o4")("cCRh")},x9U5:(e,t,o)=>{var r=o("BwN7"),n=o("QeO5"),s=o("DrWp");e.exports=function getAllKeysIn(e){return r(e,s,n)}},xEGs:(e,t,o)=>{var r=o("0Lu8");e.exports=function hashSet(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},yC3i:(e,t,o)=>{var r=o("nsdc")["__core-js_shared__"];e.exports=r},yOdR:(e,t,o)=>{"use strict";function _classPrivateFieldLooseBase(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var r=0;function _classPrivateFieldLooseKey(e){return"__private_"+r+++"_"+e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("Fyfs")),s=o("4cbv"),a=o("zA3k");var l=_classPrivateFieldLooseKey("addAuthAndApiKeyHeaders");class AccessRequest{static raiseAccessRequest(e,t,o){const r=e+a.ACCESS_REQUEST;let s={};return _classPrivateFieldLooseBase(this,l)[l](s,o),n.default.fetch(r,"POST",t,s)}static getPendingAccessRequests(e,t,o){let r=e+a.ACCESS_REQUEST+"/"+t+a.ORDERBY_REQUESTTIME_DESC,c=s.config.api.getPendingAccessRequests.headers;return _classPrivateFieldLooseBase(this,l)[l](c,o),n.default.fetch(r,s.config.api.getPendingAccessRequests.method,void 0,c)}static handleAccessRequest(e,t,o){let r=e+a.ACCESS_REQUEST_OP,c=s.config.api.handleAccessRequest.headers;return _classPrivateFieldLooseBase(this,l)[l](c,o),n.default.fetch(r,s.config.api.handleAccessRequest.method,t,c)}}Object.defineProperty(AccessRequest,l,{value:function _addAuthAndApiKeyHeaders2(e,t){e.Authorization=t,e["x-api-key"]=s.Confclass.getReviewApiKey()}});t.default=AccessRequest;e.exports=t.default},"yW/x":(e,t,o)=>{var r=o("1XbB")(o("nsdc"),"Map");e.exports=r},yaHd:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function v35(e,t,o){function generateUUID(e,s,a,l){var c;if("string"==typeof e&&(e=function stringToBytes(e){e=unescape(encodeURIComponent(e));const t=[];for(let o=0;o<e.length;++o)t.push(e.charCodeAt(o));return t}(e)),"string"==typeof s&&(s=(0,n.default)(s)),16!==(null===(c=s)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let p=new Uint8Array(16+e.length);if(p.set(s),p.set(e,s.length),p=o(p),p[6]=15&p[6]|t,p[8]=63&p[8]|128,a){l=l||0;for(let e=0;e<16;++e)a[l+e]=p[e];return a}return(0,r.unsafeStringify)(p)}try{generateUUID.name=e}catch(e){}return generateUUID.DNS=s,generateUUID.URL=a,generateUUID};var r=o("Yrbn"),n=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("1u9O"));const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},ycnN:(e,t,o)=>{"use strict";o.d(t,{A:()=>l});var r,n,s=o("abd3"),a=o("yi7a");function _applyDecoratedDescriptor(e,t,o,r,n){var s={};return Object.keys(r).forEach(function(e){s[e]=r[e]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=o.slice().reverse().reduce(function(o,r){return r(e,t,o)||o},s),n&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(n):void 0,s.initializer=void 0),void 0===s.initializer?(Object.defineProperty(e,t,s),null):s}const l=new(n=_applyDecoratedDescriptor((r=class NotificationViewStore{constructor(e){!function _initializerDefineProperty(e,t,o,r){o&&Object.defineProperty(e,t,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(r):void 0})}(this,"shouldShowErrorMsg",n,this),this.shouldShowWaitForCommentsMsg=!1,this.shouldShowErrorMsg=!1}showWaitForCommentsMsg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.shouldShowWaitForCommentsMsg||(this.shouldShowWaitForCommentsMsg=!0,(0,a.info)(e,{closeOnAction:!0,onClose:()=>{this.shouldShowWaitForCommentsMsg=!1}}))}showErrorMsg(e){this.shouldShowErrorMsg=e}}).prototype,"shouldShowErrorMsg",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(r.prototype,"showWaitForCommentsMsg",[s.action],Object.getOwnPropertyDescriptor(r.prototype,"showWaitForCommentsMsg"),r.prototype),_applyDecoratedDescriptor(r.prototype,"showErrorMsg",[s.action],Object.getOwnPropertyDescriptor(r.prototype,"showErrorMsg"),r.prototype),r)},yejP:(e,t,o)=>{var r=o("2MKe")(Object.keys,Object);e.exports=r},"yhG+":e=>{e.exports=function nativeKeysIn(e){var t=[];if(null!=e)for(var o in Object(e))t.push(o);return t}},yi7a:(e,t,o)=>{e.exports=o("U2o4")("CIcl")},yobl:(e,t,o)=>{var r=o("2KPK"),n=o("j8Ty");"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var s={insert:"head",singleton:!1};r(n,s);e.exports=n.locals||{}},ysGJ:(e,t,o)=>{var r=o("2q2Q");e.exports=function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},z7bB:(e,t,o)=>{var r=o("fX6w");e.exports=function isEqual(e,t){return r(e,t)}},zA3k:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORDERBY_REQUESTTIME_DESC=t.ACCESS_REQUEST_OP=t.ACCESS_REQUEST=void 0;const o=t.ACCESS_REQUEST="/accessrequests";t.ORDERBY_REQUESTTIME_DESC="?orderBy=-requesttime",t.ACCESS_REQUEST_OP=o+"/ops"},zA4s:(e,t,o)=>{"use strict";o.d(t,{F5:()=>checkIfEdgesIntersect,PL:()=>findDistanceBwPoints,e_:()=>LineSegment,gh:()=>n,pu:()=>doQuadrilateralsOverlap,tS:()=>getMinDistanceInfoBwEdges,w5:()=>calculateIntersectionPoint,xi:()=>checkIfQuadsAreNotAdjacent});var r=o("buDb");class LineSegment{constructor(e,t){this.start=e,this.end=t}}const n={FIRST_LINE:"FIRST_LINE",SECOND_LINE:"SECOND_LINE",BOTH:"BOTH",NONE:"NONE"};function calculateIntersectionPoint(e,t){const o=e.start.x,r=e.start.y,s=e.end.x,a=e.end.y,l=t.start.x,c=t.start.y,p=t.end.x,d=t.end.y,m=(d-c)*(s-o)-(p-l)*(a-r);if(0===m)return null;const u=((p-l)*(r-c)-(d-c)*(o-l))/m,h=((s-o)*(r-c)-(a-r)*(o-l))/m,checkRange=function(e){return e>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)&&e<=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)},g=checkRange(u),y=checkRange(h),C=o+u*(s-o),_=r+u*(a-r);let b;return g||y?g&&y?b=n.BOTH:g?b=n.FIRST_LINE:y&&(b=n.SECOND_LINE):b=n.NONE,{x:C,y:_,intersectionPointLocation:b}}const findDistanceBwPoints=(e,t)=>{const{x:o,y:r}=e,{x:n,y:s}=t;return Math.sqrt((o-n)*(o-n)+(s-r)*(s-r))},getLineSegmentsFromPointsArray=e=>(0,r.vT)(e,4).map(e=>{const[t,o,r,n]=e;return new LineSegment({x:t,y:o},{x:r,y:n})}),doQuadrilateralsOverlap=(e,t)=>{const o=[[e[0],e[1]],[e[2],e[3]],[e[4],e[5]],[e[6],e[7]]],r=[[t[0],t[1]],[t[2],t[3]],[t[4],t[5]],[t[6],t[7]]];function getAxes(e){const t=[];for(let o=0;o<e.length;o++){const r=e[o],n=e[(o+1)%e.length],s={x:-(n[1]-r[1]),y:n[0]-r[0]},a=Math.sqrt(s.x*s.x+s.y*s.y);t.push({x:s.x/a,y:s.y/a})}return t}function project(e,t){let o=1/0,r=-1/0;for(const n of e){const e=n[0]*t.x+n[1]*t.y;e<o&&(o=e),e>r&&(r=e)}return{min:o,max:r}}const n=[...getAxes(o),...getAxes(r)];function overlapOnAxis(e){const t=project(o,e),n=project(r,e);return!(t.max<n.min||n.max<t.min)}for(const e of n)if(!overlapOnAxis(e))return!1;return!0},checkIfQuadsAreNotAdjacent=(e,t)=>{const o=e.bottomMostQuad,r=t.topMostQuad,s=new LineSegment(o.bottomRight,o.bottomLeft);let a=calculateIntersectionPoint(s,new LineSegment(r.topRight,r.bottomRight)),l=a&&(a.intersectionPointLocation===n.FIRST_LINE||a.intersectionPointLocation===n.BOTH);if(l)return!0;if(a=calculateIntersectionPoint(s,new LineSegment(r.topLeft,r.bottomLeft)),l=a&&(a.intersectionPointLocation===n.FIRST_LINE||a.intersectionPointLocation===n.BOTH),l)return!0;const c=new LineSegment(o.topRight,o.bottomRight),p=new LineSegment(r.topRight,r.topLeft);let d=calculateIntersectionPoint(c,p);if(l=d&&(d.intersectionPointLocation===n.SECOND_LINE||d.intersectionPointLocation===n.BOTH),l)return!0;return d=calculateIntersectionPoint(new LineSegment(o.topLeft,o.topRight),p),l=d&&(d.intersectionPointLocation===n.SECOND_LINE||d.intersectionPointLocation===n.BOTH),l},checkIfEdgesIntersect=(e,t)=>{const o=getLineSegmentsFromPointsArray(e),r=getLineSegmentsFromPointsArray(t);return o.some(e=>r.some(t=>{const o=calculateIntersectionPoint(e,t);return o&&o.intersectionPointLocation===n.BOTH}))},getMinDistanceInfoBwEdges=(e,t,o)=>{const minEdgeDistCalculator=(e,t)=>{let r={minDistance:Number.MAX_SAFE_INTEGER,shouldMerge:!1};return getLineSegmentsFromPointsArray(e).reduce((e,t)=>{const{start:o,end:r}=t,n=(e=>{const{start:t,end:o}=e;return{x:(t.x+o.x)/2,y:(t.y+o.y)/2}})(t);return e.push(o,n,r),e},[]).forEach(e=>{t.forEach(t=>{const n=function pointToLineSegmentDistance(e,t){const{start:o,end:r}=t,n=e.x-o.x,s=e.y-o.y,a=r.x-o.x,l=r.y-o.y,c=a*a+l*l;let p,d,m=-1;0!==c&&(m=(n*a+s*l)/c),m<0?(p=o.x,d=o.y):m>1?(p=r.x,d=r.y):(p=o.x+m*a,d=o.y+m*l);const u=e.x-p,h=e.y-d;return Math.sqrt(u*u+h*h)}(e,t),s=n<=o;s&&n<r.minDistance&&(r={shouldMerge:s,minDistance:n})})}),r},r=minEdgeDistCalculator(e,getLineSegmentsFromPointsArray(t)),n=minEdgeDistCalculator(t,getLineSegmentsFromPointsArray(e)),s={shouldMerge:!1,minDistance:Number.MAX_SAFE_INTEGER};return r.shouldMerge&&s.shouldMerge?{shouldMerge:!0,minDistance:Math.min(r.minDistance,n.minDistance)}:r.shouldMerge?r:n.shouldMerge?n:s}},zAyk:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(o("Uhg2"));t.default=class Annotation{constructor(e,t,o){void 0===o&&(o=!1),this.assetId=e,this.annotationId=t.id,this.annotationObject=t,this.isNewAPI=o}get(){let e=this.isNewAPI?{directive:"commenting-2024"}:null;return r.default.instance.request("annotation.get",this.annotationId,"GET",null,e)}reply(e,t){let o={"@context":["https://www.w3.org/ns/anno.jsonld","https://comments.acrobat.com/ns/anno.jsonld"],type:"Annotation",bodyValue:e,mentions:t,motivation:"replying",target:{source:this.annotationId}};return r.default.instance.request("annotation.reply","assets/"+this.assetId+"/annots/","POST",o,this.isNewAPI?{directive:"commenting-2024"}:null)}replyNote(e,t,o){var n=this.annotationObject.target.selector.boundingBox[0],s=this.annotationObject.target.selector.boundingBox[1],a={"@context":["https://www.w3.org/ns/anno.jsonld","https://comments.acrobat.com/ns/anno.jsonld"],type:"Annotation",bodyValue:e,mentions:t,motivation:"replying",target:{selector:{node:this.annotationObject.target.selector.node,subtype:"note",boundingBox:[n,s,n+10,s+10],noteX:n,noteY:s},source:this.annotationId}};return o&&(a.assetVersion=o),r.default.instance.request("annotation.reply","assets/"+this.assetId+"/annots/","POST",a,this.isNewAPI?{directive:"commenting-2024"}:null)}updateCommentInServer(e){let t=Object.assign({},this.annotationObject);t=e;let o=[];t.replies&&(o=t.replies,delete t.replies);let n={};n["If-Match"]=this.annotationObject.etag,this.isNewAPI&&(n.directive="commenting-2024");const s=this.isNewAPI?"PATCH":"PUT";return new Promise((e,a)=>{r.default.instance.request("annotation.update",this.annotationId,s,t,n).then(t=>{"commenting"===t.motivation&&(t.replies=o),e(t)}).catch(a)})}update(e,t){let o=Object.assign({},this.annotationObject);o.bodyValue=e,o.mentions=t;let n=[];o.replies&&(n=o.replies,delete o.replies);let s={};s["If-Match"]=this.annotationObject.etag,this.isNewAPI&&(s.directive="commenting-2024");const a=this.isNewAPI?"PATCH":"PUT";return new Promise((e,t)=>{r.default.instance.request("annotation.update",this.annotationId,a,o,s).then(t=>{"commenting"===t.motivation&&(t.replies=n),e(t)}).catch(t)})}delete(){let e={};return e["If-Match"]=this.annotationObject.etag,this.isNewAPI&&(e.directive="commenting-2024"),r.default.instance.request("annotation.delete",this.annotationId+"?recursive=true","DELETE",null,e)}resolve(){let e=Object.assign({},this.annotationObject),t=[];e.replies&&(t=e.replies,delete e.replies),e&&e.status&&(e.status="resolved");let o={"If-Match":e.etag};this.isNewAPI&&(o.directive="commenting-2024");const n=this.isNewAPI?"PATCH":"PUT";return new Promise((s,a)=>{r.default.instance.request("annotation.resolve",this.annotationId,n,e,o).then(e=>{"commenting"===e.motivation&&(e.replies=t),s(e)}).catch(a)})}open(){let e=Object.assign({},this.annotationObject),t=[];e.replies&&(t=e.replies,delete e.replies),e&&e.status&&(e.status="open");let o={"If-Match":e.etag};this.isNewAPI&&(o.directive="commenting-2024");const n=this.isNewAPI?"PATCH":"PUT";return new Promise((s,a)=>{r.default.instance.request("annotation.open",this.annotationId,n,e,o).then(e=>{"commenting"===e.motivation&&(e.replies=t),s(e)}).catch(a)})}createCommentMetadata(){return r.default.instance.request("annotation.createCommentMetadata",this.annotationId+"/metadata?recursive=true","POST",{read:!0},{"Content-Type":'application/vnd.adobe.dc+json;profile="https://comments.adobe.io/schemas/annots_metadata.jsonld"',Accept:'application/vnd.adobe.dc+json;profile="https://comments.adobe.io/schemas/annots_metadata.jsonld"'})}updateCommentMetadata(e,t){let o={"Content-Type":'application/vnd.adobe.dc+json;profile="https://comments.adobe.io/schemas/annots_metadata.jsonld"',Accept:'application/vnd.adobe.dc+json;profile="https://comments.adobe.io/schemas/annots_metadata.jsonld"',"If-Match":e},n={read:t};return r.default.instance.request("annotation.updateCommentMetadata",this.annotationId+"/metadata?recursive=true","PUT",n,o)}bulkUpdateCommentMetadata(e){let t={requests:e};return r.default.instance.request("annotation.updateCommentMetadata","sync/collections/"+this.assetId+":umec/entities/","POST",t,{"Content-Type":'application/json; profile="https://comments.adobe.io/schemas/bulk_entity_v1.json"',Accept:'application/json; profile="https://comments.adobe.io/schemas/bulk_entity_v1.json"'})}};e.exports=t.default},zV0m:(e,t,o)=>{var r=o("0Lu8"),n=Object.prototype.hasOwnProperty;e.exports=function hashGet(e){var t=this.__data__;if(r){var o=t[e];return"__lodash_hash_undefined__"===o?void 0:o}return n.call(t,e)?t[e]:void 0}}},s={};function __webpack_require__(e){var t=s[e];if(void 0!==t)return t.exports;var o=s[e]={id:e,loaded:!1,exports:{}};return n[e].call(o.exports,o,o.exports,__webpack_require__),o.loaded=!0,o.exports}__webpack_require__.m=n,__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if("object"==typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&"function"==typeof o.then)return o}var n=Object.create(null);__webpack_require__.r(n);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&o;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>o[e]);return s.default=()=>o,__webpack_require__.d(n,s),n},__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce((t,o)=>(__webpack_require__.f[o](e,t),t),[])),__webpack_require__.u=e=>(({74:"EmojiPickerIntl-cs-json",98:"RHComments-ColorPickerComponent-GradientPickerComponent-expandedPanelContainer-commentDialogContainer",208:"translations-en-GB-json",224:"DefaultOperations",301:"--",534:"translations-fi-FI-json",566:"EmojiPickerComponent",571:"ColorPickerComponent",766:"EmojiPickerIntl-tr-json",907:"toolsUtils",930:"CommentsProvider",1131:"RHComments-EmojiPickerComponent-expandedPanelContainer-commentDialogContainer",1168:"EmojiPickerIntl-pl-json",1206:"translations-ru-RU-json",1360:"RHComments-expandedPanelContainer",1579:"translations-nb-NO-json",1915:"translations-sv-SE-json",1961:"EmojiPickerIntl-fa-json",1962:"EmojiPickerIntl-zh-json",2145:"EmojiPickerIntl-be-json",2179:"translations-zh-CN-json",2409:"translations-ja-JP-json",2664:"expandedPanelContainer-",2668:"translations-pt-BR-json",2764:"translations-fr-FR-json",2935:"EmojiPickerIntl-hi-json",3060:"EmojiPickerIntl-uk-json",3276:"EmojiPickerIntl-sa-json",3577:"translations-en-US-json",3710:"EmojiPickerIntl-ko-json",4184:"-",4346:"AnimateCss-expandedPanelContainer",4371:"EmojiPickerIntl-ar-json",4591:"KWOperations",4611:"translations-cs-CZ-json",4626:"EmojiPickerIntl-nl-json",4714:"RHComments-EmojiPickerComponent-expandedPanelContainer",4763:"RHComments",4795:"EmojiPickerIntl-en-json",4816:"translations-nl-NL-json",5488:"translations-da-DK-json",5654:"LeaveFeedbackWeb-DARK",5772:"BBCollabCmp",5809:"EmojiPickerIntl-vi-json",5889:"EmojiPickerIntl-fi-json",6039:"CommentsHeaderContainer",6255:"EmojiPickerIntl-de-json",6300:"translations-zz-ZZ-json",6724:"translations-es-ES-json",6966:"LeaveFeedbackWeb-LIGHT",7192:"translations-pl-PL-json",7217:"EmojiPickerIntl-ru-json",7381:"RHComments-expandedPanelContainer-commentDialogContainer",7436:"EmojiPickerIntl-es-json",7527:"translations-ko-KR-json",7720:"EmojiPickerIntl-fr-json",7751:"ColorPickerComponent-GradientPickerComponent",8062:"translations-de-DE-json",8149:"EmojiPickerIntl-it-json",8261:"EmojiPickerIntl-ja-json",8278:"translations-it-IT-json",8632:"commentingVerbs",8669:"RHComments-commentingVerbs",8871:"commentDialogContainer",8935:"ftecommentsverb",9336:"EmojiPickerIntl-pt-json",9340:"translations-tr-TR-json",9387:"RHComments-expandedPanelContainer-commentDialogContainer-commentingVerbs",9405:"translations-zz-ZY-json",9582:"GradientPickerComponent",9723:"translations-zh-TW-json",9855:"expandedPanelContainer"}[e]||e)+"-chunk.js"),__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},r="adobe_dc_sdk.components.comments:",__webpack_require__.l=(e,t,n,s)=>{if(o[e])o[e].push(t);else{var a,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),p=0;p<c.length;p++){var d=c[p];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+n){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack",r+n),a.src=e),o[e]=[t];var onScriptComplete=(t,r)=>{a.onerror=a.onload=null,clearTimeout(m);var n=o[e];if(delete o[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach(e=>e(r)),t)return t(r)},m=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=onScriptComplete.bind(null,a.onerror),a.onload=onScriptComplete.bind(null,a.onload),l&&document.head.appendChild(a)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={7547:0};__webpack_require__.f.j=(t,o)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var n=new Promise((o,n)=>r=e[t]=[o,n]);o.push(r[2]=n);var s=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(s,o=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var n=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;a.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",a.name="ChunkLoadError",a.type=n,a.request=s,r[1](a)}},"chunk-"+t,t)}};var webpackJsonpCallback=(t,o)=>{var r,n,[s,a,l]=o,c=0;if(s.some(t=>0!==e[t])){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);if(l)l(__webpack_require__)}for(t&&t(o);c<s.length;c++)n=s[c],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0},t=self["webpackJsonp-comments"]=self["webpackJsonp-comments"]||[];t.forEach(webpackJsonpCallback.bind(null,0)),t.push=webpackJsonpCallback.bind(null,t.push.bind(t))})(),__webpack_require__.nc=void 0;var a={};(()=>{"use strict";__webpack_require__.r(a),__webpack_require__.d(a,{dropins:()=>be,providers:()=>Ee});var e=__webpack_require__("YWiy"),t=__webpack_require__("doTx"),o=__webpack_require__("D/Yr"),r=__webpack_require__("Jm6I"),n=__webpack_require__("XWif"),s=__webpack_require__("VjBA"),l=__webpack_require__("4h5g"),c=__webpack_require__("Wvr3"),p=__webpack_require__("KvYl"),d=__webpack_require__.n(p),m=__webpack_require__("Zm2D"),u=__webpack_require__("AFJb"),h=__webpack_require__.n(u),g=__webpack_require__("jApL"),y=__webpack_require__.n(g),C=__webpack_require__("r74q"),_=__webpack_require__("YB2R"),b=__webpack_require__.n(_),E=__webpack_require__("Lx6e"),v=__webpack_require__.n(E),T=__webpack_require__("yobl"),A=__webpack_require__.n(T),O=__webpack_require__("5tnP");const CommentsRHPIconPopover_CommentsRHPIconPopover=t=>{const[o,r]=(0,e.useState)(!1),n=t.intl.formatMessage,{duration:s}=t,handlePopoverOpen=e=>{e.stopPropagation(),r(!0),setTimeout(()=>{r(!1)},s)},popoverOutsideClickHandler=e=>{r(!1)};return(0,e.useEffect)(()=>(window.addEventListener("adobe:comments:showCommentIconPopover",handlePopoverOpen),document.addEventListener("mousedown",popoverOutsideClickHandler),()=>{window.removeEventListener("adobe:comments:showCommentIconPopover",handlePopoverOpen),document.removeEventListener("mousedown",popoverOutsideClickHandler)}),[]),o?e.createElement(v(),{isDialog:!1,placement:"left",className:A().commentIconPopover,style:{backgroundColor:"var(--spectrum-global-color-blue-600)"},"data-testid":"comment-icon-popover"},e.createElement("div",{className:A().commentsRHPIconPopoverTip}),e.createElement("p",{className:A().commentIconPopoverContent},n({id:"comment.bubble.close.message"}))):null};CommentsRHPIconPopover_CommentsRHPIconPopover.propTypes={intl:d().shape({formatMessage:d().func.isRequired}).isRequired,duration:d().number},CommentsRHPIconPopover_CommentsRHPIconPopover.defaultProps={duration:5e3};const D=(0,m.injectIntl)((0,O.A)(CommentsRHPIconPopover_CommentsRHPIconPopover)),CommentsRHPIcon_CommentsRHPIcon=t=>{const{getUnReadCommentsCount:o,unreadBadgeEnabled:r}=t;return e.createElement(e.Fragment,null,!r&&e.createElement("div",{className:o>0?b().commentIconCountWrapper:""},o>0?o:null),e.createElement("div",{className:b().customIcon},e.createElement(C.A,{url:r&&o>0?y():h()})),e.createElement(D,{duration:5e3}))};CommentsRHPIcon_CommentsRHPIcon.propTypes={getUnReadCommentsCount:d().number,unreadBadgeEnabled:d().bool},CommentsRHPIcon_CommentsRHPIcon.defaultProps={getUnReadCommentsCount:0,unreadBadgeEnabled:!1};const P=(0,m.injectIntl)(CommentsRHPIcon_CommentsRHPIcon);var I=__webpack_require__("907g");const S=(0,s.inject)(()=>({getUnReadCommentsCount:l.default.getUnReadCommentsCount,unreadBadgeEnabled:c.A.commentUnreadBadge}))(P),w=(0,I.X)(S),CommentsIcon=()=>e.createElement(w,null);class CommentsBootstrap extends e.Component{constructor(s){super(s),this.getIcon=()=>CommentsIcon,this.getLabel=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.context&&e.context===o.Ay.MODERN_VIEWER_SKINNY_RAIL?"":(0,n.I)("label.comment")},this.getTooltip=()=>(0,n.I)("tooltip.comment"),this.getAriaLabel=()=>(0,n.I)("ariaLabel.comment"),this.getActionTags=()=>[r.Em.LOCAL],this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.getSecondaryHeaderComponent=t=>{if(t.context&&t.context===o.Ay.MODERN_VIEWER_SKINNY_RAIL)return __webpack_require__.e(6039).then(__webpack_require__.bind(__webpack_require__,"g1GY")).then(t=>{let{default:o}=t;return e.createElement(o,null)})},this.getExpandedComponent=()=>t.A.loadExpandedPanelContainer(),this.load=()=>Promise.all([__webpack_require__.e(98),__webpack_require__.e(1131),__webpack_require__.e(9387),__webpack_require__.e(7381),__webpack_require__.e(4714),__webpack_require__.e(8669),__webpack_require__.e(1360),__webpack_require__.e(4763)]).then(__webpack_require__.bind(__webpack_require__,"h87E")).then(e=>e.default),this.initializeAction=e=>{e.showCallback&&(e.showCallback(!0),t.A.showRhpControlCallback=e.showCallback);const{previewConfig:o}=e;if(o&&(o.shouldRenderCommentsDropin||o.shouldRenderPersonalCommentsDropin)&&!e.isDisabled)return t.A.loadToolsUtils()},this.getCustomDialogComponent=()=>t.A.loadCustomDialogComponent(),this.id="comments",this.label="Comments",this.name="Comments"}render(){return null}}const R=CommentsBootstrap;class ColorPickerCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_COLOR_PICKER,this.getLabel=()=>(0,n.I)("colorpickerTooltip"),this.getIcon=()=>this.load().then(e=>()=>e.getIcon()),this.getTooltip=()=>(0,n.I)("colorpickerTooltip"),this.getAriaLabel=()=>(0,n.I)("colorpickerTooltip"),this.shouldStayOpenOnSelect=()=>!0,this.getPlacement=()=>o.Ay.CONTEXT_MENU_PLACEMENT_HEADER,this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.initializeAction(t))},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"AERW")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const M=ColorPickerCommentBootstrap;var N=__webpack_require__("MotB"),L=__webpack_require__.n(N);class DeleteCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id="verb-comment-delete",this.getLabel=()=>(0,n.I)("label.delete"),this.getIcon=()=>L(),this.getTooltip=()=>(0,n.I)("tooltip.delete"),this.getAriaLabel=()=>(0,n.I)("ariaLabel.delete"),this.getPlacement=()=>o.Ay.CONTEXT_MENU_PLACEMENT_HEADER,this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.initializeAction(t))},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"iRJ8")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const x=DeleteCommentBootstrap;var U=__webpack_require__("Zzaa"),k=__webpack_require__.n(U),F=__webpack_require__("QT1v"),H=__webpack_require__("G5bJ");class DrawCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_DRAW,this.getLabel=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t}=e;return t===o.Ay.MODERN_VIEWER_STICKYTOOLS?(0,n.I)("mobile.label.draw"):(0,n.I)("label.draw.modernViewer")},this.getIcon=()=>k(),this.getTooltipInfo=function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conditionalTooltip)return H.A.getConditionalToolTipInfo(o.Ay.VERB_COMMENT_DRAW)},this.getTooltip=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.context===o.Ay.MODERN_VIEWER_CONTEXT_MENU?e.getPlacement(t).then(e=>e===o.Ay.CONTEXT_MENU_PLACEMENT_BODY?"":(0,n.I)("tooltip.draw")):(0,n.I)("tooltip.draw")},this.getAriaLabel=()=>(0,n.I)("ariaLabel.draw"),this.getActionTags=()=>[r.Em.LOCAL],this.getQuickTools=()=>o.Ay.DRAW_TOOLS,this.getPlacement=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.getPlacement(t))},this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.l.call(e,t)},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"8tfR")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const B=DrawCommentBootstrap;var j=__webpack_require__("3xqj"),z=__webpack_require__.n(j),W=__webpack_require__("NDgk"),G=__webpack_require__.n(W),V=__webpack_require__("WJQs");class HighlightCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_HIGHLIGHT,this.getLabel=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t}=e;return t===o.Ay.MODERN_VIEWER_MORE_TOOLS?(0,n.I)("mobile.label.highlight"):t===o.Ay.MOBILE_MODERN_VIEWER_CONTEXT_MENU?(0,n.I)("highlightTooltip"):(0,n.I)("label.highlight")},this.getIcon=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t}=e;return t===o.Ay.MODERN_VIEWER_MORE_TOOLS?G():z()},this.getTooltip=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{triggerEventObj:r,context:s}=t;return(null==r?void 0:r.button)===o.Ay.MOUSELEFTBUTTON&&V.A.contentTypeUnderMouse===o.Ay.IMAGE_CONTENT_TYPE?(0,n.I)("tooltip.highlightTool"):s===o.Ay.MODERN_VIEWER_CONTEXT_MENU?e.getPlacement(t).then(e=>e===o.Ay.CONTEXT_MENU_PLACEMENT_BODY?"":(0,n.I)("tooltip.highlight")):(0,n.I)("tooltip.highlight")},this.getAriaLabel=()=>(0,n.I)("ariaLabel.highlight"),this.getActionTags=()=>[r.Em.LOCAL],this.getQuickTools=()=>o.Ay.HIGHLIGHT_TOOLS,this.getRelatedTools=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t,isMobile:r}=e;if(t===o.Ay.MODERN_VIEWER_STICKYTOOLS&&r)return[o.Ay.VERB_COMMENT_UNDERLINE]},this.getPlacement=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.getPlacement(t))},this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.l.call(e,t)},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"clzF")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const K=HighlightCommentBootstrap;class HighlightWithCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_HIGHLIGHT_WITH_COMMENT,this.getLabel=()=>(0,n.I)("label.stickynote"),this.getIcon=()=>this.load().then(e=>e.getIcon()),this.getTooltip=()=>(0,n.I)("tooltip.stickynote"),this.getAriaLabel=()=>(0,n.I)("ariaLabel.stickynote"),this.getActionTags=()=>[r.Em.LOCAL],this.getQuickTools=()=>o.Ay.HIGHLIGHT_TOOLS,this.getPlacement=()=>o.Ay.CONTEXT_MENU_PLACEMENT_HEADER,this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.l.call(e,t)},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"sxJB")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const q=HighlightWithCommentBootstrap;var Y=__webpack_require__("WH6Y");class FTECommentsBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENTS_FTE,this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))},this.exitCallback=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.exitCallback(t))}}load(){return __webpack_require__.e(8935).then(__webpack_require__.bind(__webpack_require__,"Ggk4")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const X=FTECommentsBootstrap;var Q=__webpack_require__("WMSz"),J=__webpack_require__.n(Q),$=__webpack_require__("wuKs"),Z=__webpack_require__.n($);class StrikeoutCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_STRIKEOUT,this.getLabel=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t}=e;return t===o.Ay.MODERN_VIEWER_MORE_TOOLS?(0,n.I)("mobile.label.strikeout"):(0,n.I)("label.strikeout")},this.getIcon=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t}=e;return t===o.Ay.MODERN_VIEWER_MORE_TOOLS?Z():J()},this.getTooltip=()=>(0,n.I)("tooltip.strikeout"),this.getAriaLabel=()=>(0,n.I)("ariaLabel.strikeout"),this.getPlacement=()=>o.Ay.CONTEXT_MENU_PLACEMENT_HEADER,this.getActionTags=()=>[r.Em.LOCAL],this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.l.call(e,t)},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"7I0s")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const ee=StrikeoutCommentBootstrap;class ScaleAnnotationBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.getLabel=()=>this.load().then(e=>e.getProperty("label")),this.getTooltip=()=>this.load().then(e=>e.getProperty("tooltip")),this.getAriaLabel=()=>this.load().then(e=>e.getProperty("ariaLabel")),this.getIcon=()=>this.load().then(e=>e.getIcon()),this.getPlacement=()=>o.Ay.CONTEXT_MENU_PLACEMENT_HEADER,this.shouldStayOpenOnSelect=()=>!0,this.id=o.Ay.VERB_COMMENT_STROKE_WIDTH,this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.initializeAction(t))},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"uQbQ")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const te=ScaleAnnotationBootstrap;class TextCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_TEXT,this.getLabel=()=>(0,n.I)("label.text"),this.getIcon=()=>this.load().then(e=>e.getIcon()),this.getTooltip=()=>(0,n.I)("tooltip.text"),this.getAriaLabel=()=>(0,n.I)("ariaLabel.text"),this.getActionTags=()=>[r.Em.LOCAL],this.getQuickTools=()=>o.Ay.STICKYNOTE_TOOLS,this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:r}=t;return r&&r===o.Ay.MODERN_VIEWER_DEEPLINK?Promise.resolve():e.load().then(e=>e.initializeAction(t))},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"5SjQ")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const oe=TextCommentBootstrap;var re=__webpack_require__("S0lO"),ie=__webpack_require__.n(re),ne=__webpack_require__("D9Xh"),se=__webpack_require__.n(ne);class UnderlineCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_UNDERLINE,this.getLabel=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t}=e;return t===o.Ay.MODERN_VIEWER_MORE_TOOLS?(0,n.I)("mobile.label.underline"):(0,n.I)("label.underline")},this.getIcon=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{context:t}=e;return t===o.Ay.MODERN_VIEWER_MORE_TOOLS?se():ie()},this.getTooltip=()=>(0,n.I)("tooltip.underline"),this.getAriaLabel=()=>(0,n.I)("ariaLabel.underline"),this.getPlacement=()=>o.Ay.CONTEXT_MENU_PLACEMENT_HEADER,this.getActionTags=()=>[r.Em.LOCAL],this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.l.call(e,t)},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"vb5P")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const ae=UnderlineCommentBootstrap;class InsertCommentBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_INSERT,this.getLabel=function(){return(0,n.I)("label.insert")},this.getIcon=()=>this.load().then(e=>e.getIcon()),this.getTooltip=()=>(0,n.I)("tooltip.insert"),this.getAriaLabel=()=>(0,n.I)("ariaLabel.insert"),this.getActionTags=()=>[r.Em.LOCAL],this.getQuickTools=()=>o.Ay.STICKYNOTE_TOOLS,this.getPlacement=()=>o.Ay.CONTEXT_MENU_PLACEMENT_HEADER,this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.l.call(e,t)},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"ioOy")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const le=InsertCommentBootstrap;class ReplaceBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_REPLACE,this.getLabel=()=>(0,n.I)("label.replace"),this.getIcon=()=>this.load().then(e=>e.getIcon()),this.getTooltip=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.A.commentTextBoxEnabled?(0,n.I)("tooltip.replace"):t.context===o.Ay.MODERN_VIEWER_CONTEXT_MENU&&e.getPlacement(t)===o.Ay.CONTEXT_MENU_PLACEMENT_BODY?"":(0,n.I)("tooltip.replace")},this.getAriaLabel=()=>(0,n.I)("ariaLabel.replace"),this.getActionTags=()=>[r.Em.LOCAL],this.getQuickTools=()=>o.Ay.STICKYNOTE_TOOLS,this.getPlacement=e=>{var t;return(null===(t=e.triggerEventObj)||void 0===t?void 0:t.button)===o.Ay.MOUSE_RIGHT_BUTTON?c.A.commentTextBoxEnabled?o.Ay.CONTEXT_MENU_PLACEMENT_HEADER:o.Ay.CONTEXT_MENU_PLACEMENT_BODY:o.Ay.CONTEXT_MENU_PLACEMENT_HEADER},this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.l.call(e,t)},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"/V3S")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const ce=ReplaceBootstrap;class ReplyBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_REPLY,this.getLabel=()=>(0,n.I)("label.reply"),this.getIcon=()=>this.load().then(e=>e.getIcon()),this.getTooltip=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.context===o.Ay.MODERN_VIEWER_CONTEXT_MENU?e.getPlacement(t).then(e=>e===o.Ay.CONTEXT_MENU_PLACEMENT_BODY?"":(0,n.I)("tooltip.reply")):(0,n.I)("tooltip.reply")},this.getAriaLabel=()=>(0,n.I)("ariaLabel.reply"),this.getActionTags=()=>[r.Em.LOCAL],this.getQuickTools=()=>o.Ay.HIGHLIGHT_TOOLS,this.getPlacement=()=>this.load().then(e=>e.getPlacement()),this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))},this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.initializeAction(t))},this.exitCallback=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.exitCallback(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"8DwU")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const pe=ReplyBootstrap;var de=__webpack_require__("ihy0"),me=__webpack_require__.n(de);class SuggestCommentsBootstrap extends e.Component{constructor(){var e;super(...arguments),e=this,this.id=o.Ay.VERB_COMMENT_SUGGEST,this.label="label.see.comment.suggestions",this.getLabel=()=>(0,n.I)(this.label),this.getIcon=()=>me(),this.getTooltip=()=>(0,n.I)(this.label),this.getAriaLabel=()=>(0,n.I)(this.label),this.getPlacement=()=>o.Ay.CONTEXT_MENU_PLACEMENT_HEADER,this.getActionTags=()=>[r.Em.LOCAL],this.getFileSelectionParams=()=>({acceptMimeTypes:["application/pdf"],acceptExtensions:["pdf"],acceptConnectors:"all"}),this.initializeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.initializeAction(t))},this.exitCallback=()=>this.load().then(e=>e.exitCallback()),this.executeAction=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.load().then(e=>e.executeAction(t))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"QCvt")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const ue=SuggestCommentsBootstrap;var he=__webpack_require__("9/bm"),ge=__webpack_require__("6AL6");const ye=(0,m.injectIntl)((0,O.A)(t=>{const{intl:r,setCommentTextBoxObject:n,setContextualMenuTriggerType:s,triggerType:a,setCommentTextBoxBlurred:l,commentTextBoxBlurred:c}=t,p=r.formatMessage({id:"comment.textbox.placeholder"}),d=r.formatMessage({id:"ellipsisPanel.copyText"}),[m,u]=(0,e.useState)(""),h=(0,e.useRef)(null),getCommentTextBoxLiItem=e=>{const t=e.currentTarget;return null==t?void 0:t.closest("li")},getCommentTextBoxParentElement=e=>{var t;return(null===(t=getCommentTextBoxLiItem(e))||void 0===t?void 0:t.parentElement)||null},handleDefaultKeys=e=>!!e.key&&(!!(e=>{var t,o,r,n,s;const a=["Escape","Tab","Alt","Meta","Control","Shift","CapsLock"];if(a.includes(e.key)||a.includes(null===(t=e.nativeEvent)||void 0===t?void 0:t.key))return e.stopPropagation(),!0;if(e.metaKey||e.ctrlKey||(null===(o=e.nativeEvent)||void 0===o?void 0:o.metaKey)||(null===(r=e.nativeEvent)||void 0===r?void 0:r.ctrlKey)){if("v"===e.key||"v"===(null===(n=e.nativeEvent)||void 0===n?void 0:n.key))return!0;if("c"===e.key||"c"===(null===(s=e.nativeEvent)||void 0===s?void 0:s.key)){const t=getCommentTextBoxParentElement(e).querySelectorAll("li"),o=Array.from(t).find(e=>{var t,o;return null===(o=null===(t=e.querySelector("span"))||void 0===t?void 0:t.textContent)||void 0===o?void 0:o.includes(d)});o&&o.click()}return e.stopPropagation(),!0}return!1})(e)||!!(e=>{var t,o,r,n;const s=["ArrowDown","ArrowUp"];if(s.includes(e.key)||s.includes(null===(t=e.nativeEvent)||void 0===t?void 0:t.key)){const t=getCommentTextBoxParentElement(e),s="ArrowDown"===e.key||"ArrowDown"===(null===(o=e.nativeEvent)||void 0===o?void 0:o.key)?null===(r=t.children[1])||void 0===r?void 0:r.querySelector("li"):null===(n=t.lastElementChild)||void 0===n?void 0:n.querySelector("li");return s&&-1===s.tabIndex&&(s.tabIndex=0,s.focus()),e.stopPropagation(),!0}return!1})(e)),invokeBootstrapExecuteAction=(e,t)=>{n(e),s(a);getCommentTextBoxLiItem(t).click(),t.preventDefault()},getContextMenuPosition=()=>{const e=document.getElementById("context-menu-container");if(e){const{top:t,left:o}=e.getBoundingClientRect();return{top:t,left:o}}return{top:0,left:0}};return e.createElement(he.TextField,{autoFocus:!0,ref:h,type:"text","data-testid":"comment-textbox",id:"comment-textbox",inputMode:"text",marginStart:"size-75",marginEnd:"size-100",marginBottom:"size-75",marginTop:"size-50",flexGrow:3,"aria-label":p,value:m,placeholder:p,contextualHelp:p,onKeyDown:e=>{if(handleDefaultKeys(e))return;e.preventDefault();const t="Enter"===e.key||"Delete"===e.key||"Backspace"===e.key?"":e.key,r="Delete"===e.key||"Backspace"===e.key?o.Ay.REDHAWK_COMMENT_STRIKEOUT:o.Ay.REDHAWK_COMMENT_HIGHLIGHTNOTE;u(t);const n={textValue:t,type:r,contextMenuPosition:getContextMenuPosition()};invokeBootstrapExecuteAction(n,e),(0,ge.BI)("Commenting","ContextualMenu",a===o.Ay.RIGHT_CLICK?"RCM Text box key input":"Text box key input")},onPaste:e=>{const t=e.clipboardData.getData("text/plain");u(t);const r={textValue:t,type:o.Ay.REDHAWK_COMMENT_HIGHLIGHTNOTE,contextMenuPosition:getContextMenuPosition()};invokeBootstrapExecuteAction(r,e),(0,ge.BI)("Commenting","ContextualMenu",a===o.Ay.RIGHT_CLICK?"RCM Text box pasted":"Text box pasted")},onFocus:e=>{var t;if(c&&l(!1),"custom-menu-item"!==(null===(t=e.relatedTarget)||void 0===t?void 0:t.id))return;const r={textValue:e.target.value||"",type:o.Ay.REDHAWK_COMMENT_HIGHLIGHTNOTE,contextMenuPosition:getContextMenuPosition()};n(r),s(a),(0,ge.BI)("Commenting","ContextualMenu",a===o.Ay.RIGHT_CLICK?"RCM Text box clicked":"Text box clicked")},onBlur:()=>{l(!0)}})}));var Ce=__webpack_require__("iaHC");const _e=(0,s.inject)(()=>({setCommentTextBoxObject:Ce.A.setCommentTextBoxObject,setContextualMenuTriggerType:Ce.A.setContextualMenuTriggerType,setCommentTextBoxBlurred:c.A.setCommentTextBoxBlurred,commentTextBoxBlurred:c.A.commentTextBoxBlurred}))(ye);var __awaiter=function(e,t,o,r){return new(o||(o=Promise))(function(n,s){function fulfilled(e){try{step(r.next(e))}catch(e){s(e)}}function rejected(e){try{step(r.throw(e))}catch(e){s(e)}}function step(e){e.done?n(e.value):function adopt(e){return e instanceof o?e:new o(function(t){t(e)})}(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};class CommentTextBoxBootstrap extends e.Component{constructor(){var t;super(...arguments),t=this,this.id=o.Ay.VERB_COMMENT_TEXTBOX,this.label="label.comment.textbox",this.getLabel=function(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return __awaiter(t,[...o],void 0,function(){var e=this;return function*(){return(0,n.I)(e.label)}()})},this.getAriaLabel=function(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return __awaiter(t,[...o],void 0,function(){var e=this;return function*(){return(0,n.I)(e.label)}()})},this.getPlacement=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.load().then(t=>t.getPlacement(e))},this.getActionTags=function(){return[r.Em.LOCAL]},this.getMenuItemCustomUI=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ce.A.setSelectedCMTextBoxId(void 0),Ce.A.setCommentTextBoxObject(void 0),e.createElement(_e,t)},this.initializeAction=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.l.call(t,e)},this.exitCallback=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.load().then(t=>t.exitCallback(e))},this.executeAction=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.load().then(t=>t.executeAction(e))}}load(){return Promise.all([__webpack_require__.e(9387),__webpack_require__.e(8669),__webpack_require__.e(8632)]).then(__webpack_require__.bind(__webpack_require__,"SV1a")).then(e=>{let{default:t}=e;return t.getInstance()})}render(){return null}}const fe=CommentTextBoxBootstrap;const be={[o.Ay.DROPIN_COMMENTS]:new R,[o.Ay.VERB_COMMENT_COLOR_PICKER]:new M,[o.Ay.VERB_COMMENT_DELETE]:new x,[o.Ay.VERB_COMMENT_DRAW]:new B,[o.Ay.VERB_COMMENT_HIGHLIGHT]:new K,[o.Ay.VERB_HIGHLIGHT_WITH_COMMENT]:new q,[o.Ay.VERB_COMMENT_STICKYNOTE]:new Y.A,[o.Ay.VERB_COMMENTS_FTE]:new X,[o.Ay.VERB_COMMENT_REPLY]:new pe,[o.Ay.VERB_COMMENT_STRIKEOUT]:new ee,[o.Ay.VERB_COMMENT_STROKE_WIDTH]:new te,[o.Ay.VERB_COMMENT_TEXT]:new oe,[o.Ay.VERB_COMMENT_UNDERLINE]:new ae,[o.Ay.VERB_COMMENT_INSERT]:new le,[o.Ay.VERB_COMMENT_REPLACE]:new ce,[o.Ay.VERB_COMMENT_SUGGEST]:new ue,[o.Ay.DROPIN_BB_COLLAB]:new class BottomBannerCollabBootstrap{constructor(){this.load=t.A.LoadBBCollabCmp}},[o.Ay.VERB_COMMENT_TEXTBOX]:new fe},Ee={"comments-provider":{id:"comments-provider",name:"commentsProvider",load:function loadCommentsProvider(e){return e&&(__webpack_require__.p=e),__webpack_require__.e(930).then(__webpack_require__.bind(__webpack_require__,"Hy7+")).then(e=>e.default)}}}})(),((window.adobe_dc_sdk=window.adobe_dc_sdk||{}).components=window.adobe_dc_sdk.components||{}).comments=a})();
//# sourceMappingURL=private/bootstrap.js.map